{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\n/**\n * @fileoverview line\n * @author dengfuping_develop@163.com\n */\nimport { Line as LineUtil } from '@antv/g-math';\nimport { each, isObject } from '@antv/util';\nimport { SVG_ATTR_MAP } from '../constant';\nimport ShapeBase from './base';\nvar Line = /** @class */function (_super) {\n  __extends(Line, _super);\n  function Line() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'line';\n    _this.canFill = false;\n    _this.canStroke = true;\n    return _this;\n  }\n  Line.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x1: 0,\n      y1: 0,\n      x2: 0,\n      y2: 0,\n      startArrow: false,\n      endArrow: false\n    });\n  };\n  Line.prototype.createPath = function (context, targetAttrs) {\n    var attrs = this.attr();\n    var el = this.get('el');\n    each(targetAttrs || attrs, function (value, attr) {\n      if (attr === 'startArrow' || attr === 'endArrow') {\n        if (value) {\n          var id = isObject(value) ? context.addArrow(attrs, SVG_ATTR_MAP[attr]) : context.getDefaultArrow(attrs, SVG_ATTR_MAP[attr]);\n          el.setAttribute(SVG_ATTR_MAP[attr], \"url(#\" + id + \")\");\n        } else {\n          el.removeAttribute(SVG_ATTR_MAP[attr]);\n        }\n      } else if (SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n  /**\n   * Use math calculation to get length of line\n   * @return {number} length\n   */\n  Line.prototype.getTotalLength = function () {\n    var _a = this.attr(),\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return LineUtil.length(x1, y1, x2, y2);\n  };\n  /**\n   * Use math calculation to get point according to ratio as same sa Canvas version\n   * @param {number} ratio\n   * @return {Point} point\n   */\n  Line.prototype.getPoint = function (ratio) {\n    var _a = this.attr(),\n      x1 = _a.x1,\n      y1 = _a.y1,\n      x2 = _a.x2,\n      y2 = _a.y2;\n    return LineUtil.pointAt(x1, y1, x2, y2, ratio);\n  };\n  return Line;\n}(ShapeBase);\nexport default Line;","map":{"version":3,"names":["Line","LineUtil","each","isObject","SVG_ATTR_MAP","ShapeBase","_super","__extends","_this","apply","arguments","type","canFill","canStroke","prototype","getDefaultAttrs","attrs","call","__assign","x1","y1","x2","y2","startArrow","endArrow","createPath","context","targetAttrs","attr","el","get","value","id","addArrow","getDefaultArrow","setAttribute","removeAttribute","getTotalLength","_a","length","getPoint","ratio","pointAt"],"sources":["../../src/shape/line.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}