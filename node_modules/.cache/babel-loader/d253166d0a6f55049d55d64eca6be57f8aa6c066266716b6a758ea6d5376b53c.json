{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\nimport Supercluster from 'supercluster/dist/supercluster';\nexport function cluster(data, option) {\n  var _option$radius = option.radius,\n    radius = _option$radius === void 0 ? 40 : _option$radius,\n    _option$maxZoom = option.maxZoom,\n    maxZoom = _option$maxZoom === void 0 ? 18 : _option$maxZoom,\n    _option$minZoom = option.minZoom,\n    minZoom = _option$minZoom === void 0 ? 0 : _option$minZoom,\n    _option$zoom = option.zoom,\n    zoom = _option$zoom === void 0 ? 2 : _option$zoom;\n  if (data.pointIndex) {\n    var clusterData = data.pointIndex.getClusters(data.extent, Math.floor(zoom));\n    data.dataArray = formatData(clusterData);\n    return data;\n  }\n  var pointIndex = new Supercluster({\n    radius: radius,\n    minZoom: minZoom,\n    maxZoom: maxZoom\n  });\n  var geojson = {\n    type: 'FeatureCollection',\n    features: []\n  };\n  geojson.features = data.dataArray.map(function (item) {\n    return {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: item.coordinates\n      },\n      properties: _objectSpread({}, item)\n    };\n  });\n  pointIndex.load(geojson.features);\n  return pointIndex;\n}\nexport function formatData(clusterPoint) {\n  return clusterPoint.map(function (point, index) {\n    return _objectSpread({\n      coordinates: point.geometry.coordinates,\n      _id: index + 1\n    }, point.properties);\n  });\n}","map":{"version":3,"names":["_objectSpread","Supercluster","cluster","data","option","_option$radius","radius","_option$maxZoom","maxZoom","_option$minZoom","minZoom","_option$zoom","zoom","pointIndex","clusterData","getClusters","extent","Math","floor","dataArray","formatData","geojson","type","features","map","item","geometry","coordinates","properties","load","clusterPoint","point","index","_id"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-source/es/transform/cluster.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\nimport Supercluster from 'supercluster/dist/supercluster';\nexport function cluster(data, option) {\n  var _option$radius = option.radius,\n    radius = _option$radius === void 0 ? 40 : _option$radius,\n    _option$maxZoom = option.maxZoom,\n    maxZoom = _option$maxZoom === void 0 ? 18 : _option$maxZoom,\n    _option$minZoom = option.minZoom,\n    minZoom = _option$minZoom === void 0 ? 0 : _option$minZoom,\n    _option$zoom = option.zoom,\n    zoom = _option$zoom === void 0 ? 2 : _option$zoom;\n  if (data.pointIndex) {\n    var clusterData = data.pointIndex.getClusters(data.extent, Math.floor(zoom));\n    data.dataArray = formatData(clusterData);\n    return data;\n  }\n  var pointIndex = new Supercluster({\n    radius: radius,\n    minZoom: minZoom,\n    maxZoom: maxZoom\n  });\n  var geojson = {\n    type: 'FeatureCollection',\n    features: []\n  };\n  geojson.features = data.dataArray.map(function (item) {\n    return {\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: item.coordinates\n      },\n      properties: _objectSpread({}, item)\n    };\n  });\n  pointIndex.load(geojson.features);\n  return pointIndex;\n}\nexport function formatData(clusterPoint) {\n  return clusterPoint.map(function (point, index) {\n    return _objectSpread({\n      coordinates: point.geometry.coordinates,\n      _id: index + 1\n    }, point.properties);\n  });\n}"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE;AACA;AACA,OAAOC,YAAY,MAAM,gCAAgC;AACzD,OAAO,SAASC,OAAOA,CAACC,IAAI,EAAEC,MAAM,EAAE;EACpC,IAAIC,cAAc,GAAGD,MAAM,CAACE,MAAM;IAChCA,MAAM,GAAGD,cAAc,KAAK,KAAK,CAAC,GAAG,EAAE,GAAGA,cAAc;IACxDE,eAAe,GAAGH,MAAM,CAACI,OAAO;IAChCA,OAAO,GAAGD,eAAe,KAAK,KAAK,CAAC,GAAG,EAAE,GAAGA,eAAe;IAC3DE,eAAe,GAAGL,MAAM,CAACM,OAAO;IAChCA,OAAO,GAAGD,eAAe,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,eAAe;IAC1DE,YAAY,GAAGP,MAAM,CAACQ,IAAI;IAC1BA,IAAI,GAAGD,YAAY,KAAK,KAAK,CAAC,GAAG,CAAC,GAAGA,YAAY;EACnD,IAAIR,IAAI,CAACU,UAAU,EAAE;IACnB,IAAIC,WAAW,GAAGX,IAAI,CAACU,UAAU,CAACE,WAAW,CAACZ,IAAI,CAACa,MAAM,EAAEC,IAAI,CAACC,KAAK,CAACN,IAAI,CAAC,CAAC;IAC5ET,IAAI,CAACgB,SAAS,GAAGC,UAAU,CAACN,WAAW,CAAC;IACxC,OAAOX,IAAI;EACb;EACA,IAAIU,UAAU,GAAG,IAAIZ,YAAY,CAAC;IAChCK,MAAM,EAAEA,MAAM;IACdI,OAAO,EAAEA,OAAO;IAChBF,OAAO,EAAEA;EACX,CAAC,CAAC;EACF,IAAIa,OAAO,GAAG;IACZC,IAAI,EAAE,mBAAmB;IACzBC,QAAQ,EAAE;EACZ,CAAC;EACDF,OAAO,CAACE,QAAQ,GAAGpB,IAAI,CAACgB,SAAS,CAACK,GAAG,CAAC,UAAUC,IAAI,EAAE;IACpD,OAAO;MACLH,IAAI,EAAE,SAAS;MACfI,QAAQ,EAAE;QACRJ,IAAI,EAAE,OAAO;QACbK,WAAW,EAAEF,IAAI,CAACE;MACpB,CAAC;MACDC,UAAU,EAAE5B,aAAa,CAAC,CAAC,CAAC,EAAEyB,IAAI;IACpC,CAAC;EACH,CAAC,CAAC;EACFZ,UAAU,CAACgB,IAAI,CAACR,OAAO,CAACE,QAAQ,CAAC;EACjC,OAAOV,UAAU;AACnB;AACA,OAAO,SAASO,UAAUA,CAACU,YAAY,EAAE;EACvC,OAAOA,YAAY,CAACN,GAAG,CAAC,UAAUO,KAAK,EAAEC,KAAK,EAAE;IAC9C,OAAOhC,aAAa,CAAC;MACnB2B,WAAW,EAAEI,KAAK,CAACL,QAAQ,CAACC,WAAW;MACvCM,GAAG,EAAED,KAAK,GAAG;IACf,CAAC,EAAED,KAAK,CAACH,UAAU,CAAC;EACtB,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}