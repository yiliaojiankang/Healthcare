{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Logo } from '@antv/l7-component';\nimport { createLayerContainer, createSceneContainer, SceneEventList, TYPES } from '@antv/l7-core';\nimport { MaskLayer } from '@antv/l7-layers';\nimport { DeviceRendererService, ReglRendererService } from '@antv/l7-renderer';\nimport { DOM, SceneConifg } from '@antv/l7-utils';\nimport BoxSelect, { BoxSelectEventList } from \"./boxSelect\";\n/**\n * 暴露 Scene API\n *\n * @example\n * import { Scene } from 'l7/scene';\n * import { PointLayer } from 'l7/layers';\n *\n * const scene = new Scene();\n * const pointLayer = new PointLayer();\n * scene.addLayer(pointLayer);\n *\n */\nvar Scene = /*#__PURE__*/function () {\n  function Scene(config) {\n    _classCallCheck(this, Scene);\n    var id = config.id,\n      map = config.map,\n      canvas = config.canvas,\n      _config$renderer = config.renderer,\n      renderer = _config$renderer === void 0 ? 'regl' : _config$renderer;\n    // 创建场景容器\n    var sceneContainer = createSceneContainer();\n    this.container = sceneContainer;\n    // 绑定地图服务\n    map.setContainer(sceneContainer, id, canvas);\n    // 绑定渲染引擎服务\n    sceneContainer.bind(TYPES.IRendererService).to(renderer === 'regl' ? ReglRendererService : DeviceRendererService).inSingletonScope();\n\n    // 依赖注入\n    this.sceneService = sceneContainer.get(TYPES.ISceneService);\n    this.mapService = sceneContainer.get(TYPES.IMapService);\n    this.iconService = sceneContainer.get(TYPES.IIconService);\n    this.fontService = sceneContainer.get(TYPES.IFontService);\n    this.controlService = sceneContainer.get(TYPES.IControlService);\n    this.layerService = sceneContainer.get(TYPES.ILayerService);\n    this.debugService = sceneContainer.get(TYPES.IDebugService);\n    this.debugService.setEnable(config.debug);\n    this.markerService = sceneContainer.get(TYPES.IMarkerService);\n    this.interactionService = sceneContainer.get(TYPES.IInteractionService);\n    this.popupService = sceneContainer.get(TYPES.IPopupService);\n    this.boxSelect = new BoxSelect(this, {});\n    this.initComponent(id);\n\n    // 初始化 scene\n    this.sceneService.init(config);\n    // TODO: 初始化组件\n\n    this.initControl();\n  }\n  _createClass(Scene, [{\n    key: \"map\",\n    get: function get() {\n      return this.mapService.map;\n    }\n  }, {\n    key: \"loaded\",\n    get: function get() {\n      return this.sceneService.loaded;\n    }\n  }, {\n    key: \"getServiceContainer\",\n    value: function getServiceContainer() {\n      return this.container;\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return this.mapService.getSize();\n    }\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.mapService.getMinZoom();\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.mapService.getMaxZoom();\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return this.mapService.getType();\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.mapService.getMapContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      return this.mapService.getMapCanvasContainer();\n    }\n  }, {\n    key: \"getMapService\",\n    value: function getMapService() {\n      return this.mapService;\n    }\n\n    /**\n     * 对外暴露 debugService\n     * @returns\n     */\n  }, {\n    key: \"getDebugService\",\n    value: function getDebugService() {\n      return this.debugService;\n    }\n  }, {\n    key: \"exportPng\",\n    value: function () {\n      var _exportPng = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", this.sceneService.exportPng(type));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function exportPng(_x) {\n        return _exportPng.apply(this, arguments);\n      }\n      return exportPng;\n    }()\n  }, {\n    key: \"exportMap\",\n    value: function () {\n      var _exportMap = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", this.sceneService.exportPng(type));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function exportMap(_x2) {\n        return _exportMap.apply(this, arguments);\n      }\n      return exportMap;\n    }()\n  }, {\n    key: \"registerRenderService\",\n    value: function registerRenderService(render) {\n      var _this = this;\n      if (this.sceneService.loaded) {\n        var renderSerivce = new render(this);\n        renderSerivce.init();\n      } else {\n        this.on('loaded', function () {\n          var renderSerivce = new render(_this);\n          renderSerivce.init();\n        });\n      }\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.mapService.setBgColor(color);\n    }\n\n    // layer 管理\n  }, {\n    key: \"addLayer\",\n    value: function addLayer(layer) {\n      var _this2 = this;\n      // 为当前图层创建一个容器\n      // TODO: 初始化的时候设置 容器\n      var layerContainer = createLayerContainer(this.container);\n      layer.setContainer(layerContainer, this.container);\n      this.sceneService.addLayer(layer);\n\n      // mask 在 scene loaded 之后执行\n      if (layer.inited) {\n        var maskInstance = this.initMask(layer);\n        this.addMask(maskInstance, layer.id);\n      } else {\n        layer.on('inited', function () {\n          var maskInstance = _this2.initMask(layer); // 初始化 mask\n          _this2.addMask(maskInstance, layer.id);\n        });\n      }\n    }\n  }, {\n    key: \"initMask\",\n    value: function initMask(layer) {\n      var _layer$getLayerConfig = layer.getLayerConfig(),\n        mask = _layer$getLayerConfig.mask,\n        maskfence = _layer$getLayerConfig.maskfence,\n        _layer$getLayerConfig2 = _layer$getLayerConfig.maskColor,\n        maskColor = _layer$getLayerConfig2 === void 0 ? '#000' : _layer$getLayerConfig2,\n        _layer$getLayerConfig3 = _layer$getLayerConfig.maskOpacity,\n        maskOpacity = _layer$getLayerConfig3 === void 0 ? 0 : _layer$getLayerConfig3;\n      if (!mask || !maskfence) {\n        return undefined;\n      }\n      var maskInstance = new MaskLayer().source(maskfence).shape('fill').style({\n        color: maskColor,\n        opacity: maskOpacity\n      });\n      return maskInstance;\n    }\n  }, {\n    key: \"addMask\",\n    value: function addMask(mask, layerId) {\n      if (!mask) {\n        return;\n      }\n      var parent = this.getLayer(layerId);\n      if (parent) {\n        var layerContainer = createLayerContainer(this.container);\n        mask.setContainer(layerContainer, this.container);\n        parent.addMaskLayer(mask);\n        this.sceneService.addMask(mask);\n      } else {\n        console.warn('parent layer not find!');\n      }\n    }\n  }, {\n    key: \"getPickedLayer\",\n    value: function getPickedLayer() {\n      return this.layerService.pickedLayerId;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      return this.layerService.getLayers();\n    }\n  }, {\n    key: \"getLayer\",\n    value: function getLayer(id) {\n      return this.layerService.getLayer(id);\n    }\n  }, {\n    key: \"getLayerByName\",\n    value: function getLayerByName(name) {\n      return this.layerService.getLayerByName(name);\n    }\n  }, {\n    key: \"removeLayer\",\n    value: function () {\n      var _removeLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(layer, parentLayer) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return this.layerService.remove(layer, parentLayer);\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function removeLayer(_x3, _x4) {\n        return _removeLayer.apply(this, arguments);\n      }\n      return removeLayer;\n    }()\n  }, {\n    key: \"removeAllLayer\",\n    value: function () {\n      var _removeAllLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this.layerService.removeAllLayers();\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function removeAllLayer() {\n        return _removeAllLayer.apply(this, arguments);\n      }\n      return removeAllLayer;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.sceneService.render();\n    }\n  }, {\n    key: \"setEnableRender\",\n    value: function setEnableRender(flag) {\n      this.layerService.setEnableRender(flag);\n    }\n\n    // asset method\n    /**\n     * 为 layer/point/text 支持 iconfont 模式支持\n     * @param fontUnicode\n     * @param name\n     */\n  }, {\n    key: \"addIconFont\",\n    value: function addIconFont(name, fontUnicode) {\n      this.fontService.addIconFont(name, fontUnicode);\n    }\n  }, {\n    key: \"addIconFonts\",\n    value: function addIconFonts(options) {\n      var _this3 = this;\n      options.forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          name = _ref2[0],\n          fontUnicode = _ref2[1];\n        _this3.fontService.addIconFont(name, fontUnicode);\n      });\n    }\n    /**\n     * 用户自定义添加第三方字体\n     * @param fontFamily\n     * @param fontPath\n     */\n  }, {\n    key: \"addFontFace\",\n    value: function addFontFace(fontFamily, fontPath) {\n      var _this4 = this;\n      this.fontService.once('fontloaded', function (e) {\n        _this4.emit('fontloaded', e);\n      });\n      this.fontService.addFontFace(fontFamily, fontPath);\n    }\n  }, {\n    key: \"addImage\",\n    value: function () {\n      var _addImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, img) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.iconService.addImage(id, img);\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function addImage(_x5, _x6) {\n        return _addImage.apply(this, arguments);\n      }\n      return addImage;\n    }()\n  }, {\n    key: \"hasImage\",\n    value: function hasImage(id) {\n      return this.iconService.hasImage(id);\n    }\n  }, {\n    key: \"removeImage\",\n    value: function removeImage(id) {\n      this.iconService.removeImage(id);\n    }\n  }, {\n    key: \"addIconFontGlyphs\",\n    value: function addIconFontGlyphs(fontFamily, glyphs) {\n      this.fontService.addIconGlyphs(glyphs);\n    }\n\n    // map control method\n  }, {\n    key: \"addControl\",\n    value: function addControl(ctr) {\n      this.controlService.addControl(ctr, this.container);\n    }\n  }, {\n    key: \"removeControl\",\n    value: function removeControl(ctr) {\n      this.controlService.removeControl(ctr);\n    }\n  }, {\n    key: \"getControlByName\",\n    value: function getControlByName(name) {\n      return this.controlService.getControlByName(name);\n    }\n\n    // marker\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(marker) {\n      this.markerService.addMarker(marker);\n    }\n  }, {\n    key: \"addMarkerLayer\",\n    value: function addMarkerLayer(layer) {\n      this.markerService.addMarkerLayer(layer);\n    }\n  }, {\n    key: \"removeMarkerLayer\",\n    value: function removeMarkerLayer(layer) {\n      this.markerService.removeMarkerLayer(layer);\n    }\n  }, {\n    key: \"removeAllMarkers\",\n    value: function removeAllMarkers() {\n      this.markerService.removeAllMarkers();\n    }\n  }, {\n    key: \"removeAllMakers\",\n    value: function removeAllMakers() {\n      console.warn('removeAllMakers 已废弃，请使用 removeAllMarkers');\n      this.markerService.removeAllMarkers();\n    }\n  }, {\n    key: \"addPopup\",\n    value: function addPopup(popup) {\n      this.popupService.addPopup(popup);\n    }\n  }, {\n    key: \"removePopup\",\n    value: function removePopup(popup) {\n      this.popupService.removePopup(popup);\n    }\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect;\n        (_this$boxSelect = this.boxSelect) === null || _this$boxSelect === void 0 || _this$boxSelect.on(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.on(type, handle);\n      } else {\n        this.mapService.on(type, handle);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect2;\n        (_this$boxSelect2 = this.boxSelect) === null || _this$boxSelect2 === void 0 || _this$boxSelect2.once(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.once(type, handle);\n      } else {\n        this.mapService.once(type, handle);\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(type, handle) {\n      SceneEventList.indexOf(type) === -1 ? this.mapService.on(type, handle) : this.sceneService.emit(type, handle);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect3;\n        (_this$boxSelect3 = this.boxSelect) === null || _this$boxSelect3 === void 0 || _this$boxSelect3.off(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.off(type, handle);\n      } else {\n        this.mapService.off(type, handle);\n      }\n    }\n\n    // implements IMapController\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.mapService.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(options) {\n      return this.mapService.getCenter(options);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(center, options) {\n      return this.mapService.setCenter(center, options);\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.mapService.getPitch();\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      return this.mapService.setPitch(pitch);\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return this.mapService.getRotation();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      return this.mapService.getBounds();\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.mapService.setRotation(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.mapService.zoomIn();\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.mapService.zoomOut();\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(p) {\n      this.mapService.panTo(p);\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.mapService.panBy(x, y);\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.mapService.getContainer();\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.mapService.setZoom(zoom);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, options) {\n      var _this$sceneService$ge = this.sceneService.getSceneConfig(),\n        fitBoundsOptions = _this$sceneService$ge.fitBoundsOptions,\n        animate = _this$sceneService$ge.animate;\n      this.mapService.fitBounds(bound,\n      // 选项优先级：用户传入，覆盖animate直接配置，覆盖Scene配置项传入\n      options || _objectSpread(_objectSpread({}, fitBoundsOptions), {}, {\n        animate: animate\n      }));\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, center) {\n      this.mapService.setZoomAndCenter(zoom, center);\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(style) {\n      this.mapService.setMapStyle(style);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(options) {\n      this.mapService.setMapStatus(options);\n    }\n\n    // conversion Method\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(pixel) {\n      return this.mapService.pixelToLngLat(pixel);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(lnglat) {\n      return this.mapService.lngLatToPixel(lnglat);\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(pixel) {\n      return this.mapService.containerToLngLat(pixel);\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(lnglat) {\n      return this.mapService.lngLatToContainer(lnglat);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.sceneService.destroy();\n      // TODO: 清理其他 Service 例如 IconService\n    }\n  }, {\n    key: \"registerPostProcessingPass\",\n    value: function registerPostProcessingPass(constructor, name) {\n      this.container.bind(TYPES.IPostProcessingPass).to(constructor).whenTargetNamed(name);\n    }\n\n    // 控制 shader pick 计算\n  }, {\n    key: \"enableShaderPick\",\n    value: function enableShaderPick() {\n      this.layerService.enableShaderPick();\n    }\n  }, {\n    key: \"diasbleShaderPick\",\n    value: function diasbleShaderPick() {\n      this.layerService.disableShaderPick();\n    }\n  }, {\n    key: \"enableBoxSelect\",\n    value: function enableBoxSelect() {\n      var _this5 = this;\n      var once = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.boxSelect.enable();\n      if (once) {\n        this.boxSelect.once('selectend', function () {\n          _this5.disableBoxSelect();\n        });\n      }\n    }\n  }, {\n    key: \"disableBoxSelect\",\n    value: function disableBoxSelect() {\n      this.boxSelect.disable();\n    }\n\n    // 数据协议\n  }, {\n    key: \"getProtocol\",\n    value: function getProtocol(protocol) {\n      return SceneConifg.REGISTERED_PROTOCOLS[protocol];\n    }\n  }, {\n    key: \"startAnimate\",\n    value: function startAnimate() {\n      this.layerService.startAnimate();\n    }\n  }, {\n    key: \"stopAnimate\",\n    value: function stopAnimate() {\n      this.layerService.stopAnimate();\n    }\n\n    // get current point size info\n  }, {\n    key: \"getPointSizeRange\",\n    value: function getPointSizeRange() {\n      return this.sceneService.getPointSizeRange();\n    }\n  }, {\n    key: \"initComponent\",\n    value: function initComponent(id) {\n      this.controlService.init({\n        container: DOM.getContainer(id)\n      }, this.container);\n      this.markerService.init(this.container);\n      this.popupService.init(this.container);\n    }\n  }, {\n    key: \"initControl\",\n    value: function initControl() {\n      var _this$sceneService$ge2 = this.sceneService.getSceneConfig(),\n        logoVisible = _this$sceneService$ge2.logoVisible,\n        logoPosition = _this$sceneService$ge2.logoPosition;\n      if (logoVisible) {\n        this.addControl(new Logo({\n          position: logoPosition\n        }));\n      }\n    }\n  }], [{\n    key: \"addProtocol\",\n    value: function addProtocol(protocol, handler) {\n      SceneConifg.REGISTERED_PROTOCOLS[protocol] = handler;\n    }\n  }, {\n    key: \"removeProtocol\",\n    value: function removeProtocol(protocol) {\n      delete SceneConifg.REGISTERED_PROTOCOLS[protocol];\n    }\n  }]);\n  return Scene;\n}();\nexport { Scene };","map":{"version":3,"names":["_objectSpread","_slicedToArray","_asyncToGenerator","_classCallCheck","_createClass","_regeneratorRuntime","Logo","createLayerContainer","createSceneContainer","SceneEventList","TYPES","MaskLayer","DeviceRendererService","ReglRendererService","DOM","SceneConifg","BoxSelect","BoxSelectEventList","Scene","config","id","map","canvas","_config$renderer","renderer","sceneContainer","container","setContainer","bind","IRendererService","to","inSingletonScope","sceneService","get","ISceneService","mapService","IMapService","iconService","IIconService","fontService","IFontService","controlService","IControlService","layerService","ILayerService","debugService","IDebugService","setEnable","debug","markerService","IMarkerService","interactionService","IInteractionService","popupService","IPopupService","boxSelect","initComponent","init","initControl","key","loaded","value","getServiceContainer","getSize","getMinZoom","getMaxZoom","getType","getMapContainer","getMapCanvasContainer","getMapService","getDebugService","_exportPng","mark","_callee","type","wrap","_callee$","_context","prev","next","abrupt","exportPng","stop","_x","apply","arguments","_exportMap","_callee2","_callee2$","_context2","exportMap","_x2","registerRenderService","render","_this","renderSerivce","on","setBgColor","color","addLayer","layer","_this2","layerContainer","inited","maskInstance","initMask","addMask","_layer$getLayerConfig","getLayerConfig","mask","maskfence","_layer$getLayerConfig2","maskColor","_layer$getLayerConfig3","maskOpacity","undefined","source","shape","style","opacity","layerId","parent","getLayer","addMaskLayer","console","warn","getPickedLayer","pickedLayerId","getLayers","getLayerByName","name","_removeLayer","_callee3","parentLayer","_callee3$","_context3","remove","removeLayer","_x3","_x4","_removeAllLayer","_callee4","_callee4$","_context4","removeAllLayers","removeAllLayer","setEnableRender","flag","addIconFont","fontUnicode","addIconFonts","options","_this3","forEach","_ref","_ref2","addFontFace","fontFamily","fontPath","_this4","once","e","emit","_addImage","_callee5","img","_callee5$","_context5","addImage","_x5","_x6","hasImage","removeImage","addIconFontGlyphs","glyphs","addIconGlyphs","addControl","ctr","removeControl","getControlByName","addMarker","marker","addMarkerLayer","removeMarkerLayer","removeAllMarkers","removeAllMakers","addPopup","popup","removePopup","handle","includes","_this$boxSelect","_this$boxSelect2","indexOf","off","_this$boxSelect3","getZoom","getCenter","setCenter","center","getPitch","setPitch","pitch","getRotation","getBounds","setRotation","rotation","zoomIn","zoomOut","panTo","p","panBy","x","y","getContainer","setZoom","zoom","fitBounds","bound","_this$sceneService$ge","getSceneConfig","fitBoundsOptions","animate","setZoomAndCenter","setMapStyle","setMapStatus","pixelToLngLat","pixel","lngLatToPixel","lnglat","containerToLngLat","lngLatToContainer","destroy","registerPostProcessingPass","constructor","IPostProcessingPass","whenTargetNamed","enableShaderPick","diasbleShaderPick","disableShaderPick","enableBoxSelect","_this5","length","enable","disableBoxSelect","disable","getProtocol","protocol","REGISTERED_PROTOCOLS","startAnimate","stopAnimate","getPointSizeRange","_this$sceneService$ge2","logoVisible","logoPosition","position","addProtocol","handler","removeProtocol"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-scene/es/index.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Logo } from '@antv/l7-component';\nimport { createLayerContainer, createSceneContainer, SceneEventList, TYPES } from '@antv/l7-core';\nimport { MaskLayer } from '@antv/l7-layers';\nimport { DeviceRendererService, ReglRendererService } from '@antv/l7-renderer';\nimport { DOM, SceneConifg } from '@antv/l7-utils';\nimport BoxSelect, { BoxSelectEventList } from \"./boxSelect\";\n/**\n * 暴露 Scene API\n *\n * @example\n * import { Scene } from 'l7/scene';\n * import { PointLayer } from 'l7/layers';\n *\n * const scene = new Scene();\n * const pointLayer = new PointLayer();\n * scene.addLayer(pointLayer);\n *\n */\nvar Scene = /*#__PURE__*/function () {\n  function Scene(config) {\n    _classCallCheck(this, Scene);\n    var id = config.id,\n      map = config.map,\n      canvas = config.canvas,\n      _config$renderer = config.renderer,\n      renderer = _config$renderer === void 0 ? 'regl' : _config$renderer;\n    // 创建场景容器\n    var sceneContainer = createSceneContainer();\n    this.container = sceneContainer;\n    // 绑定地图服务\n    map.setContainer(sceneContainer, id, canvas);\n    // 绑定渲染引擎服务\n    sceneContainer.bind(TYPES.IRendererService).to(renderer === 'regl' ? ReglRendererService : DeviceRendererService).inSingletonScope();\n\n    // 依赖注入\n    this.sceneService = sceneContainer.get(TYPES.ISceneService);\n    this.mapService = sceneContainer.get(TYPES.IMapService);\n    this.iconService = sceneContainer.get(TYPES.IIconService);\n    this.fontService = sceneContainer.get(TYPES.IFontService);\n    this.controlService = sceneContainer.get(TYPES.IControlService);\n    this.layerService = sceneContainer.get(TYPES.ILayerService);\n    this.debugService = sceneContainer.get(TYPES.IDebugService);\n    this.debugService.setEnable(config.debug);\n    this.markerService = sceneContainer.get(TYPES.IMarkerService);\n    this.interactionService = sceneContainer.get(TYPES.IInteractionService);\n    this.popupService = sceneContainer.get(TYPES.IPopupService);\n    this.boxSelect = new BoxSelect(this, {});\n    this.initComponent(id);\n\n    // 初始化 scene\n    this.sceneService.init(config);\n    // TODO: 初始化组件\n\n    this.initControl();\n  }\n  _createClass(Scene, [{\n    key: \"map\",\n    get: function get() {\n      return this.mapService.map;\n    }\n  }, {\n    key: \"loaded\",\n    get: function get() {\n      return this.sceneService.loaded;\n    }\n  }, {\n    key: \"getServiceContainer\",\n    value: function getServiceContainer() {\n      return this.container;\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return this.mapService.getSize();\n    }\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.mapService.getMinZoom();\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.mapService.getMaxZoom();\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return this.mapService.getType();\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.mapService.getMapContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      return this.mapService.getMapCanvasContainer();\n    }\n  }, {\n    key: \"getMapService\",\n    value: function getMapService() {\n      return this.mapService;\n    }\n\n    /**\n     * 对外暴露 debugService\n     * @returns\n     */\n  }, {\n    key: \"getDebugService\",\n    value: function getDebugService() {\n      return this.debugService;\n    }\n  }, {\n    key: \"exportPng\",\n    value: function () {\n      var _exportPng = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(type) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", this.sceneService.exportPng(type));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function exportPng(_x) {\n        return _exportPng.apply(this, arguments);\n      }\n      return exportPng;\n    }()\n  }, {\n    key: \"exportMap\",\n    value: function () {\n      var _exportMap = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(type) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", this.sceneService.exportPng(type));\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function exportMap(_x2) {\n        return _exportMap.apply(this, arguments);\n      }\n      return exportMap;\n    }()\n  }, {\n    key: \"registerRenderService\",\n    value: function registerRenderService(render) {\n      var _this = this;\n      if (this.sceneService.loaded) {\n        var renderSerivce = new render(this);\n        renderSerivce.init();\n      } else {\n        this.on('loaded', function () {\n          var renderSerivce = new render(_this);\n          renderSerivce.init();\n        });\n      }\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.mapService.setBgColor(color);\n    }\n\n    // layer 管理\n  }, {\n    key: \"addLayer\",\n    value: function addLayer(layer) {\n      var _this2 = this;\n      // 为当前图层创建一个容器\n      // TODO: 初始化的时候设置 容器\n      var layerContainer = createLayerContainer(this.container);\n      layer.setContainer(layerContainer, this.container);\n      this.sceneService.addLayer(layer);\n\n      // mask 在 scene loaded 之后执行\n      if (layer.inited) {\n        var maskInstance = this.initMask(layer);\n        this.addMask(maskInstance, layer.id);\n      } else {\n        layer.on('inited', function () {\n          var maskInstance = _this2.initMask(layer); // 初始化 mask\n          _this2.addMask(maskInstance, layer.id);\n        });\n      }\n    }\n  }, {\n    key: \"initMask\",\n    value: function initMask(layer) {\n      var _layer$getLayerConfig = layer.getLayerConfig(),\n        mask = _layer$getLayerConfig.mask,\n        maskfence = _layer$getLayerConfig.maskfence,\n        _layer$getLayerConfig2 = _layer$getLayerConfig.maskColor,\n        maskColor = _layer$getLayerConfig2 === void 0 ? '#000' : _layer$getLayerConfig2,\n        _layer$getLayerConfig3 = _layer$getLayerConfig.maskOpacity,\n        maskOpacity = _layer$getLayerConfig3 === void 0 ? 0 : _layer$getLayerConfig3;\n      if (!mask || !maskfence) {\n        return undefined;\n      }\n      var maskInstance = new MaskLayer().source(maskfence).shape('fill').style({\n        color: maskColor,\n        opacity: maskOpacity\n      });\n      return maskInstance;\n    }\n  }, {\n    key: \"addMask\",\n    value: function addMask(mask, layerId) {\n      if (!mask) {\n        return;\n      }\n      var parent = this.getLayer(layerId);\n      if (parent) {\n        var layerContainer = createLayerContainer(this.container);\n        mask.setContainer(layerContainer, this.container);\n        parent.addMaskLayer(mask);\n        this.sceneService.addMask(mask);\n      } else {\n        console.warn('parent layer not find!');\n      }\n    }\n  }, {\n    key: \"getPickedLayer\",\n    value: function getPickedLayer() {\n      return this.layerService.pickedLayerId;\n    }\n  }, {\n    key: \"getLayers\",\n    value: function getLayers() {\n      return this.layerService.getLayers();\n    }\n  }, {\n    key: \"getLayer\",\n    value: function getLayer(id) {\n      return this.layerService.getLayer(id);\n    }\n  }, {\n    key: \"getLayerByName\",\n    value: function getLayerByName(name) {\n      return this.layerService.getLayerByName(name);\n    }\n  }, {\n    key: \"removeLayer\",\n    value: function () {\n      var _removeLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(layer, parentLayer) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return this.layerService.remove(layer, parentLayer);\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function removeLayer(_x3, _x4) {\n        return _removeLayer.apply(this, arguments);\n      }\n      return removeLayer;\n    }()\n  }, {\n    key: \"removeAllLayer\",\n    value: function () {\n      var _removeAllLayer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return this.layerService.removeAllLayers();\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function removeAllLayer() {\n        return _removeAllLayer.apply(this, arguments);\n      }\n      return removeAllLayer;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.sceneService.render();\n    }\n  }, {\n    key: \"setEnableRender\",\n    value: function setEnableRender(flag) {\n      this.layerService.setEnableRender(flag);\n    }\n\n    // asset method\n    /**\n     * 为 layer/point/text 支持 iconfont 模式支持\n     * @param fontUnicode\n     * @param name\n     */\n  }, {\n    key: \"addIconFont\",\n    value: function addIconFont(name, fontUnicode) {\n      this.fontService.addIconFont(name, fontUnicode);\n    }\n  }, {\n    key: \"addIconFonts\",\n    value: function addIconFonts(options) {\n      var _this3 = this;\n      options.forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          name = _ref2[0],\n          fontUnicode = _ref2[1];\n        _this3.fontService.addIconFont(name, fontUnicode);\n      });\n    }\n    /**\n     * 用户自定义添加第三方字体\n     * @param fontFamily\n     * @param fontPath\n     */\n  }, {\n    key: \"addFontFace\",\n    value: function addFontFace(fontFamily, fontPath) {\n      var _this4 = this;\n      this.fontService.once('fontloaded', function (e) {\n        _this4.emit('fontloaded', e);\n      });\n      this.fontService.addFontFace(fontFamily, fontPath);\n    }\n  }, {\n    key: \"addImage\",\n    value: function () {\n      var _addImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id, img) {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.iconService.addImage(id, img);\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function addImage(_x5, _x6) {\n        return _addImage.apply(this, arguments);\n      }\n      return addImage;\n    }()\n  }, {\n    key: \"hasImage\",\n    value: function hasImage(id) {\n      return this.iconService.hasImage(id);\n    }\n  }, {\n    key: \"removeImage\",\n    value: function removeImage(id) {\n      this.iconService.removeImage(id);\n    }\n  }, {\n    key: \"addIconFontGlyphs\",\n    value: function addIconFontGlyphs(fontFamily, glyphs) {\n      this.fontService.addIconGlyphs(glyphs);\n    }\n\n    // map control method\n  }, {\n    key: \"addControl\",\n    value: function addControl(ctr) {\n      this.controlService.addControl(ctr, this.container);\n    }\n  }, {\n    key: \"removeControl\",\n    value: function removeControl(ctr) {\n      this.controlService.removeControl(ctr);\n    }\n  }, {\n    key: \"getControlByName\",\n    value: function getControlByName(name) {\n      return this.controlService.getControlByName(name);\n    }\n\n    // marker\n  }, {\n    key: \"addMarker\",\n    value: function addMarker(marker) {\n      this.markerService.addMarker(marker);\n    }\n  }, {\n    key: \"addMarkerLayer\",\n    value: function addMarkerLayer(layer) {\n      this.markerService.addMarkerLayer(layer);\n    }\n  }, {\n    key: \"removeMarkerLayer\",\n    value: function removeMarkerLayer(layer) {\n      this.markerService.removeMarkerLayer(layer);\n    }\n  }, {\n    key: \"removeAllMarkers\",\n    value: function removeAllMarkers() {\n      this.markerService.removeAllMarkers();\n    }\n  }, {\n    key: \"removeAllMakers\",\n    value: function removeAllMakers() {\n      console.warn('removeAllMakers 已废弃，请使用 removeAllMarkers');\n      this.markerService.removeAllMarkers();\n    }\n  }, {\n    key: \"addPopup\",\n    value: function addPopup(popup) {\n      this.popupService.addPopup(popup);\n    }\n  }, {\n    key: \"removePopup\",\n    value: function removePopup(popup) {\n      this.popupService.removePopup(popup);\n    }\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect;\n        (_this$boxSelect = this.boxSelect) === null || _this$boxSelect === void 0 || _this$boxSelect.on(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.on(type, handle);\n      } else {\n        this.mapService.on(type, handle);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect2;\n        (_this$boxSelect2 = this.boxSelect) === null || _this$boxSelect2 === void 0 || _this$boxSelect2.once(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.once(type, handle);\n      } else {\n        this.mapService.once(type, handle);\n      }\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(type, handle) {\n      SceneEventList.indexOf(type) === -1 ? this.mapService.on(type, handle) : this.sceneService.emit(type, handle);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      if (BoxSelectEventList.includes(type)) {\n        var _this$boxSelect3;\n        (_this$boxSelect3 = this.boxSelect) === null || _this$boxSelect3 === void 0 || _this$boxSelect3.off(type, handle);\n      } else if (SceneEventList.includes(type)) {\n        this.sceneService.off(type, handle);\n      } else {\n        this.mapService.off(type, handle);\n      }\n    }\n\n    // implements IMapController\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.mapService.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(options) {\n      return this.mapService.getCenter(options);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(center, options) {\n      return this.mapService.setCenter(center, options);\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.mapService.getPitch();\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      return this.mapService.setPitch(pitch);\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return this.mapService.getRotation();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      return this.mapService.getBounds();\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.mapService.setRotation(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.mapService.zoomIn();\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.mapService.zoomOut();\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(p) {\n      this.mapService.panTo(p);\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.mapService.panBy(x, y);\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.mapService.getContainer();\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.mapService.setZoom(zoom);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, options) {\n      var _this$sceneService$ge = this.sceneService.getSceneConfig(),\n        fitBoundsOptions = _this$sceneService$ge.fitBoundsOptions,\n        animate = _this$sceneService$ge.animate;\n      this.mapService.fitBounds(bound,\n      // 选项优先级：用户传入，覆盖animate直接配置，覆盖Scene配置项传入\n      options || _objectSpread(_objectSpread({}, fitBoundsOptions), {}, {\n        animate: animate\n      }));\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, center) {\n      this.mapService.setZoomAndCenter(zoom, center);\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(style) {\n      this.mapService.setMapStyle(style);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(options) {\n      this.mapService.setMapStatus(options);\n    }\n\n    // conversion Method\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(pixel) {\n      return this.mapService.pixelToLngLat(pixel);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(lnglat) {\n      return this.mapService.lngLatToPixel(lnglat);\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(pixel) {\n      return this.mapService.containerToLngLat(pixel);\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(lnglat) {\n      return this.mapService.lngLatToContainer(lnglat);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.sceneService.destroy();\n      // TODO: 清理其他 Service 例如 IconService\n    }\n  }, {\n    key: \"registerPostProcessingPass\",\n    value: function registerPostProcessingPass(constructor, name) {\n      this.container.bind(TYPES.IPostProcessingPass).to(constructor).whenTargetNamed(name);\n    }\n\n    // 控制 shader pick 计算\n  }, {\n    key: \"enableShaderPick\",\n    value: function enableShaderPick() {\n      this.layerService.enableShaderPick();\n    }\n  }, {\n    key: \"diasbleShaderPick\",\n    value: function diasbleShaderPick() {\n      this.layerService.disableShaderPick();\n    }\n  }, {\n    key: \"enableBoxSelect\",\n    value: function enableBoxSelect() {\n      var _this5 = this;\n      var once = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.boxSelect.enable();\n      if (once) {\n        this.boxSelect.once('selectend', function () {\n          _this5.disableBoxSelect();\n        });\n      }\n    }\n  }, {\n    key: \"disableBoxSelect\",\n    value: function disableBoxSelect() {\n      this.boxSelect.disable();\n    }\n\n    // 数据协议\n  }, {\n    key: \"getProtocol\",\n    value: function getProtocol(protocol) {\n      return SceneConifg.REGISTERED_PROTOCOLS[protocol];\n    }\n  }, {\n    key: \"startAnimate\",\n    value: function startAnimate() {\n      this.layerService.startAnimate();\n    }\n  }, {\n    key: \"stopAnimate\",\n    value: function stopAnimate() {\n      this.layerService.stopAnimate();\n    }\n\n    // get current point size info\n  }, {\n    key: \"getPointSizeRange\",\n    value: function getPointSizeRange() {\n      return this.sceneService.getPointSizeRange();\n    }\n  }, {\n    key: \"initComponent\",\n    value: function initComponent(id) {\n      this.controlService.init({\n        container: DOM.getContainer(id)\n      }, this.container);\n      this.markerService.init(this.container);\n      this.popupService.init(this.container);\n    }\n  }, {\n    key: \"initControl\",\n    value: function initControl() {\n      var _this$sceneService$ge2 = this.sceneService.getSceneConfig(),\n        logoVisible = _this$sceneService$ge2.logoVisible,\n        logoPosition = _this$sceneService$ge2.logoPosition;\n      if (logoVisible) {\n        this.addControl(new Logo({\n          position: logoPosition\n        }));\n      }\n    }\n  }], [{\n    key: \"addProtocol\",\n    value: function addProtocol(protocol, handler) {\n      SceneConifg.REGISTERED_PROTOCOLS[protocol] = handler;\n    }\n  }, {\n    key: \"removeProtocol\",\n    value: function removeProtocol(protocol) {\n      delete SceneConifg.REGISTERED_PROTOCOLS[protocol];\n    }\n  }]);\n  return Scene;\n}();\nexport { Scene };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}