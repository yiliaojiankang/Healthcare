{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.minBy = exports.notime = exports.time = exports.partition = exports.maxRank = exports.addBorderNode = exports.removeEmptyRanks = exports.normalizeRanks = exports.buildLayerMatrix = exports.intersectRect = exports.predecessorWeights = exports.successorWeights = exports.zipObject = exports.asNonCompoundGraph = exports.simplify = exports.addDummyNode = void 0;\nvar util_1 = require(\"../../../util\");\nvar graph_1 = require(\"../graph\");\nvar safeSort = function (valueA, valueB) {\n  return Number(valueA) - Number(valueB);\n};\n/*\n * Adds a dummy node to the graph and return v.\n */\nvar addDummyNode = function (g, type, attrs, name) {\n  var v;\n  do {\n    v = \"\".concat(name).concat(Math.random());\n  } while (g.hasNode(v));\n  attrs.dummy = type;\n  g.setNode(v, attrs);\n  return v;\n};\nexports.addDummyNode = addDummyNode;\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nvar simplify = function (g) {\n  var simplified = new graph_1.Graph().setGraph(g.graph());\n  g.nodes().forEach(function (v) {\n    simplified.setNode(v, g.node(v));\n  });\n  g.edges().forEach(function (e) {\n    var simpleLabel = simplified.edgeFromArgs(e.v, e.w) || {\n      weight: 0,\n      minlen: 1\n    };\n    var label = g.edge(e);\n    simplified.setEdge(e.v, e.w, {\n      weight: simpleLabel.weight + label.weight,\n      minlen: Math.max(simpleLabel.minlen, label.minlen)\n    });\n  });\n  return simplified;\n};\nexports.simplify = simplify;\nvar asNonCompoundGraph = function (g) {\n  var simplified = new graph_1.Graph({\n    multigraph: g.isMultigraph()\n  }).setGraph(g.graph());\n  g.nodes().forEach(function (node) {\n    var _a;\n    if (!((_a = g.children(node)) === null || _a === void 0 ? void 0 : _a.length)) {\n      simplified.setNode(node, g.node(node));\n    }\n  });\n  g.edges().forEach(function (edge) {\n    simplified.setEdgeObj(edge, g.edge(edge));\n  });\n  return simplified;\n};\nexports.asNonCompoundGraph = asNonCompoundGraph;\nvar zipObject = function (keys, values) {\n  return keys === null || keys === void 0 ? void 0 : keys.reduce(function (obj, key, i) {\n    obj[key] = values[i];\n    return obj;\n  }, {});\n};\nexports.zipObject = zipObject;\nvar successorWeights = function (g) {\n  var weightsMap = {};\n  g.nodes().forEach(function (node) {\n    var _a;\n    var sucs = {};\n    (_a = g.outEdges(node)) === null || _a === void 0 ? void 0 : _a.forEach(function (e) {\n      var _a;\n      sucs[e.w] = (sucs[e.w] || 0) + (((_a = g.edge(e)) === null || _a === void 0 ? void 0 : _a.weight) || 0);\n    });\n    weightsMap[node] = sucs;\n  });\n  return weightsMap;\n};\nexports.successorWeights = successorWeights;\nvar predecessorWeights = function (g) {\n  var nodes = g.nodes();\n  var weightMap = nodes.map(function (v) {\n    var _a;\n    var preds = {};\n    (_a = g.inEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach(function (e) {\n      preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n    });\n    return preds;\n  });\n  return (0, exports.zipObject)(nodes, weightMap);\n};\nexports.predecessorWeights = predecessorWeights;\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nvar intersectRect = function (rect, point) {\n  var x = Number(rect.x);\n  var y = Number(rect.y);\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  var dx = Number(point.x) - x;\n  var dy = Number(point.y) - y;\n  var w = Number(rect.width) / 2;\n  var h = Number(rect.height) / 2;\n  if (!dx && !dy) {\n    // completely overlapped directly, then return points its self\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n  var sx;\n  var sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = h * dx / dy;\n    sy = h;\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = w * dy / dx;\n  }\n  return {\n    x: x + sx,\n    y: y + sy\n  };\n};\nexports.intersectRect = intersectRect;\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * const will produce a matrix with the ids of each node.\n */\nvar buildLayerMatrix = function (g) {\n  var layeringNodes = [];\n  var rankMax = (0, exports.maxRank)(g) + 1;\n  for (var i = 0; i < rankMax; i++) {\n    layeringNodes.push([]);\n  }\n  // const layering = _.map(_.range(maxRank(g) + 1), function() { return []; });\n  g.nodes().forEach(function (v) {\n    var node = g.node(v);\n    if (!node) return;\n    var rank = node.rank;\n    if (rank !== undefined && layeringNodes[rank]) {\n      layeringNodes[rank].push(v);\n    }\n  });\n  for (var i = 0; i < rankMax; i++) {\n    layeringNodes[i] = layeringNodes[i].sort(function (va, vb) {\n      var _a, _b;\n      return safeSort((_a = g.node(va)) === null || _a === void 0 ? void 0 : _a.order, (_b = g.node(vb)) === null || _b === void 0 ? void 0 : _b.order);\n    });\n  }\n  return layeringNodes;\n};\nexports.buildLayerMatrix = buildLayerMatrix;\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nvar normalizeRanks = function (g) {\n  var nodeRanks = g.nodes().filter(function (v) {\n    var _a;\n    return ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) !== undefined;\n  }).map(function (v) {\n    return g.node(v).rank;\n  });\n  var min = Math.min.apply(Math, nodeRanks);\n  g.nodes().forEach(function (v) {\n    var node = g.node(v);\n    if (node.hasOwnProperty(\"rank\") && min !== Infinity) {\n      node.rank -= min;\n    }\n  });\n};\nexports.normalizeRanks = normalizeRanks;\nvar removeEmptyRanks = function (g) {\n  // Ranks may not start at 0, so we need to offset them\n  var nodes = g.nodes();\n  var nodeRanks = nodes.filter(function (v) {\n    var _a;\n    return ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) !== undefined;\n  }).map(function (v) {\n    return g.node(v).rank;\n  });\n  var offset = Math.min.apply(Math, nodeRanks);\n  var layers = [];\n  nodes.forEach(function (v) {\n    var _a;\n    var rank = (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) || 0) - offset;\n    if (!layers[rank]) {\n      layers[rank] = [];\n    }\n    layers[rank].push(v);\n  });\n  var delta = 0;\n  var nodeRankFactor = g.graph().nodeRankFactor || 0;\n  for (var i = 0; i < layers.length; i++) {\n    var vs = layers[i];\n    if (vs === undefined) {\n      if (i % nodeRankFactor !== 0) {\n        delta -= 1;\n      }\n    } else if (delta) {\n      vs === null || vs === void 0 ? void 0 : vs.forEach(function (v) {\n        var node = g.node(v);\n        if (node) {\n          node.rank = node.rank || 0;\n          node.rank += delta;\n        }\n      });\n    }\n  }\n};\nexports.removeEmptyRanks = removeEmptyRanks;\nvar addBorderNode = function (g, prefix, rank, order) {\n  var node = {\n    width: 0,\n    height: 0\n  };\n  if ((0, util_1.isNumber)(rank) && (0, util_1.isNumber)(order)) {\n    node.rank = rank;\n    node.order = order;\n  }\n  return (0, exports.addDummyNode)(g, \"border\", node, prefix);\n};\nexports.addBorderNode = addBorderNode;\nvar maxRank = function (g) {\n  var maxRank;\n  g.nodes().forEach(function (v) {\n    var _a;\n    var rank = (_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank;\n    if (rank !== undefined) {\n      if (maxRank === undefined || rank > maxRank) {\n        maxRank = rank;\n      }\n    }\n  });\n  if (!maxRank) {\n    maxRank = 0;\n  }\n  return maxRank;\n};\nexports.maxRank = maxRank;\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * const returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nvar partition = function (collection, fn) {\n  var result = {\n    lhs: [],\n    rhs: []\n  };\n  collection === null || collection === void 0 ? void 0 : collection.forEach(function (value) {\n    if (fn(value)) {\n      result.lhs.push(value);\n    } else {\n      result.rhs.push(value);\n    }\n  });\n  return result;\n};\nexports.partition = partition;\n/*\n * Returns a new const that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nvar time = function (name, fn) {\n  var start = Date.now();\n  try {\n    return fn();\n  } finally {\n    console.log(\"\".concat(name, \" time: \").concat(Date.now() - start, \"ms\"));\n  }\n};\nexports.time = time;\nvar notime = function (name, fn) {\n  return fn();\n};\nexports.notime = notime;\nvar minBy = function (array, func) {\n  return array.reduce(function (a, b) {\n    var valA = func(a);\n    var valB = func(b);\n    return valA > valB ? b : a;\n  });\n};\nexports.minBy = minBy;","map":{"version":3,"names":["util_1","require","graph_1","safeSort","valueA","valueB","Number","addDummyNode","g","type","attrs","name","v","concat","Math","random","hasNode","dummy","setNode","exports","simplify","simplified","Graph","setGraph","graph","nodes","forEach","node","edges","e","simpleLabel","edgeFromArgs","w","weight","minlen","label","edge","setEdge","max","asNonCompoundGraph","multigraph","isMultigraph","_a","children","length","setEdgeObj","zipObject","keys","values","reduce","obj","key","i","successorWeights","weightsMap","sucs","outEdges","predecessorWeights","weightMap","map","preds","inEdges","intersectRect","rect","point","x","y","dx","dy","width","h","height","sx","sy","abs","buildLayerMatrix","layeringNodes","rankMax","maxRank","push","rank","undefined","sort","va","vb","_b","order","normalizeRanks","nodeRanks","filter","min","apply","hasOwnProperty","Infinity","removeEmptyRanks","offset","layers","delta","nodeRankFactor","vs","addBorderNode","prefix","isNumber","partition","collection","fn","result","lhs","rhs","value","time","start","Date","now","console","log","notime","minBy","array","func","a","b","valA","valB"],"sources":["../../../../src/layout/dagre/src/util.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}