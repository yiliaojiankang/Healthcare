{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isNumber, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\nvar HtmlAnnotation = /** @class */function (_super) {\n  __extends(HtmlAnnotation, _super);\n  function HtmlAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  HtmlAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: \"<div class=\\\"g2-html-annotation\\\" style=\\\"position:absolute\\\"></div>\",\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7\n    });\n  };\n  HtmlAnnotation.prototype.render = function () {\n    var container = this.getContainer();\n    var html = this.get('html');\n    clearDom(container);\n    var rst = isFunction(html) ? html(container) : html;\n    if (isElement(rst)) {\n      container.appendChild(rst);\n    } else if (isString(rst) || isNumber(rst)) {\n      var dom = createDom(\"\" + rst);\n      if (dom) {\n        container.appendChild(dom);\n      }\n    }\n    this.resetPosition();\n  };\n  HtmlAnnotation.prototype.resetPosition = function () {\n    var container = this.getContainer();\n    var _a = this.getLocation(),\n      x = _a.x,\n      y = _a.y;\n    var alignX = this.get('alignX');\n    var alignY = this.get('alignY');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var domWidth = getOuterWidth(container);\n    var domHeight = getOuterHeight(container);\n    var position = {\n      x: x,\n      y: y\n    };\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n    if (offsetX) {\n      position.x += offsetX;\n    }\n    if (offsetY) {\n      position.y += offsetY;\n    }\n    modifyCSS(container, {\n      position: 'absolute',\n      left: position.x + \"px\",\n      top: position.y + \"px\",\n      zIndex: this.get('zIndex')\n    });\n  };\n  return HtmlAnnotation;\n}(HtmlComponent);\nexport default HtmlAnnotation;","map":{"version":3,"names":["createDom","getOuterHeight","getOuterWidth","modifyCSS","isElement","isFunction","isNumber","isString","HtmlComponent","clearDom","HtmlAnnotation","_super","__extends","prototype","getDefaultCfg","cfg","call","__assign","name","type","locationType","x","y","containerTpl","alignX","alignY","html","zIndex","render","container","getContainer","get","rst","appendChild","dom","resetPosition","_a","getLocation","offsetX","offsetY","domWidth","domHeight","position","Math","round","left","top"],"sources":["../../src/annotation/html.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}