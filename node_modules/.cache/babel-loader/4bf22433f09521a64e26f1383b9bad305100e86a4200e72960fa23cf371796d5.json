{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\nimport Point from \"../../geo/point\";\nimport { indexTouches } from \"../handler_util\";\nvar TouchPanHandler = /*#__PURE__*/function () {\n  function TouchPanHandler(options) {\n    _classCallCheck(this, TouchPanHandler);\n    this.minTouches = 1;\n    this.clickTolerance = options.clickTolerance || 1;\n    this.reset();\n  }\n  _createClass(TouchPanHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      this.touches = {};\n      this.sum = new Point(0, 0);\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      return this.calculateTransform(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      if (!this.active) {\n        return;\n      }\n      e.preventDefault();\n      return this.calculateTransform(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      this.calculateTransform(e, points, mapTouches);\n      if (this.active && mapTouches.length < this.minTouches) {\n        this.reset();\n      }\n    }\n  }, {\n    key: \"touchcancel\",\n    value: function touchcancel() {\n      this.reset();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.enabled = true;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.enabled = false;\n      this.reset();\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.enabled;\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.active;\n    }\n  }, {\n    key: \"calculateTransform\",\n    value: function calculateTransform(e, points, mapTouches) {\n      if (mapTouches.length > 0) {\n        this.active = true;\n      }\n      var touches = indexTouches(mapTouches, points);\n      var touchPointSum = new Point(0, 0);\n      var touchDeltaSum = new Point(0, 0);\n      var touchDeltaCount = 0;\n      for (var identifier in touches) {\n        if (touches[identifier]) {\n          var point = touches[identifier];\n          var prevPoint = this.touches[identifier];\n          if (prevPoint) {\n            touchPointSum._add(point);\n            touchDeltaSum._add(point.sub(prevPoint));\n            touchDeltaCount++;\n            touches[identifier] = point;\n          }\n        }\n      }\n      this.touches = touches;\n      if (touchDeltaCount < this.minTouches || !touchDeltaSum.mag()) {\n        return;\n      }\n      // @ts-ignore\n      var panDelta = touchDeltaSum.div(touchDeltaCount);\n      this.sum._add(panDelta);\n      if (this.sum.mag() < this.clickTolerance) {\n        return;\n      }\n      // @ts-ignore\n      var around = touchPointSum.div(touchDeltaCount);\n      return {\n        around: around,\n        panDelta: panDelta\n      };\n    }\n  }]);\n  return TouchPanHandler;\n}();\nexport { TouchPanHandler as default };","map":{"version":3,"names":["_classCallCheck","_createClass","Point","indexTouches","TouchPanHandler","options","minTouches","clickTolerance","reset","key","value","active","touches","sum","touchstart","e","points","mapTouches","calculateTransform","touchmove","preventDefault","touchend","length","touchcancel","enable","enabled","disable","isEnabled","isActive","touchPointSum","touchDeltaSum","touchDeltaCount","identifier","point","prevPoint","_add","sub","mag","panDelta","div","around","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/handler/touch/touch_pan.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\nimport Point from \"../../geo/point\";\nimport { indexTouches } from \"../handler_util\";\nvar TouchPanHandler = /*#__PURE__*/function () {\n  function TouchPanHandler(options) {\n    _classCallCheck(this, TouchPanHandler);\n    this.minTouches = 1;\n    this.clickTolerance = options.clickTolerance || 1;\n    this.reset();\n  }\n  _createClass(TouchPanHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      this.touches = {};\n      this.sum = new Point(0, 0);\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      return this.calculateTransform(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      if (!this.active) {\n        return;\n      }\n      e.preventDefault();\n      return this.calculateTransform(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      this.calculateTransform(e, points, mapTouches);\n      if (this.active && mapTouches.length < this.minTouches) {\n        this.reset();\n      }\n    }\n  }, {\n    key: \"touchcancel\",\n    value: function touchcancel() {\n      this.reset();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.enabled = true;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.enabled = false;\n      this.reset();\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.enabled;\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.active;\n    }\n  }, {\n    key: \"calculateTransform\",\n    value: function calculateTransform(e, points, mapTouches) {\n      if (mapTouches.length > 0) {\n        this.active = true;\n      }\n      var touches = indexTouches(mapTouches, points);\n      var touchPointSum = new Point(0, 0);\n      var touchDeltaSum = new Point(0, 0);\n      var touchDeltaCount = 0;\n      for (var identifier in touches) {\n        if (touches[identifier]) {\n          var point = touches[identifier];\n          var prevPoint = this.touches[identifier];\n          if (prevPoint) {\n            touchPointSum._add(point);\n            touchDeltaSum._add(point.sub(prevPoint));\n            touchDeltaCount++;\n            touches[identifier] = point;\n          }\n        }\n      }\n      this.touches = touches;\n      if (touchDeltaCount < this.minTouches || !touchDeltaSum.mag()) {\n        return;\n      }\n      // @ts-ignore\n      var panDelta = touchDeltaSum.div(touchDeltaCount);\n      this.sum._add(panDelta);\n      if (this.sum.mag() < this.clickTolerance) {\n        return;\n      }\n      // @ts-ignore\n      var around = touchPointSum.div(touchDeltaCount);\n      return {\n        around: around,\n        panDelta: panDelta\n      };\n    }\n  }]);\n  return TouchPanHandler;\n}();\nexport { TouchPanHandler as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}