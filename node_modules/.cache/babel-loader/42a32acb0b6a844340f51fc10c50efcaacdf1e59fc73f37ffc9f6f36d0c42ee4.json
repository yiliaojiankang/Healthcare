{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { deepMix, get, map } from '@antv/util';\n/**\n * @ignore\n * get the grid theme by type, will mix the common cfg of axis\n * @param theme\n * @param direction\n * @returns theme object\n */\nexport function getGridThemeCfg(theme, direction) {\n  var axisTheme = deepMix({}, get(theme, ['components', 'axis', 'common']), get(theme, ['components', 'axis', direction]));\n  return get(axisTheme, ['grid'], {});\n}\n/**\n * @ignore\n * get axis grid items\n * @param coordinate\n * @param scale\n * @param dim\n * @return items\n */\nexport function getLineGridItems(coordinate, scale, dim, alignTick) {\n  var items = [];\n  var ticks = scale.getTicks();\n  if (coordinate.isPolar) {\n    // 补全 ticks\n    ticks.push({\n      value: 1,\n      text: '',\n      tickValue: ''\n    });\n  }\n  ticks.reduce(function (preTick, currentTick, currentIndex) {\n    var currentValue = currentTick.value;\n    if (alignTick) {\n      items.push({\n        points: [coordinate.convert(dim === 'y' ? {\n          x: 0,\n          y: currentValue\n        } : {\n          x: currentValue,\n          y: 0\n        }), coordinate.convert(dim === 'y' ? {\n          x: 1,\n          y: currentValue\n        } : {\n          x: currentValue,\n          y: 1\n        })]\n      });\n    } else {\n      if (currentIndex) {\n        var preValue = preTick.value;\n        var middleValue = (preValue + currentValue) / 2;\n        items.push({\n          points: [coordinate.convert(dim === 'y' ? {\n            x: 0,\n            y: middleValue\n          } : {\n            x: middleValue,\n            y: 0\n          }), coordinate.convert(dim === 'y' ? {\n            x: 1,\n            y: middleValue\n          } : {\n            x: middleValue,\n            y: 1\n          })]\n        });\n      }\n    }\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n/**\n * @ignore\n * get\n * @param coordinate\n * @param xScale\n * @param yScale\n * @param dim\n * @returns items\n */\nexport function getCircleGridItems(coordinate, xScale, yScale, alignTick, dim) {\n  var count = xScale.values.length;\n  var items = [];\n  var ticks = yScale.getTicks();\n  ticks.reduce(function (preTick, currentTick) {\n    var preValue = preTick ? preTick.value : currentTick.value; // 只有一项数据时取当前值\n    var currentValue = currentTick.value;\n    var middleValue = (preValue + currentValue) / 2;\n    if (dim === 'x') {\n      // 如果是 x 轴作为半径轴，那么只需要取圆弧收尾两个即可\n      items.push({\n        points: [coordinate.convert({\n          x: alignTick ? currentValue : middleValue,\n          y: 0\n        }), coordinate.convert({\n          x: alignTick ? currentValue : middleValue,\n          y: 1\n        })]\n      });\n    } else {\n      items.push({\n        points: map(Array(count + 1), function (__, idx) {\n          return coordinate.convert({\n            x: idx / count,\n            y: alignTick ? currentValue : middleValue\n          });\n        })\n      });\n    }\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n/**\n * @ignore\n * show grid or not\n * @param axisTheme\n * @param axisOption\n */\nexport function showGrid(axisTheme, axisOption) {\n  var userGrid = get(axisOption, 'grid');\n  if (userGrid === null) {\n    return false;\n  }\n  var themeGrid = get(axisTheme, 'grid');\n  return !(userGrid === undefined && themeGrid === null);\n}","map":{"version":3,"names":["deepMix","get","map","getGridThemeCfg","theme","direction","axisTheme","getLineGridItems","coordinate","scale","dim","alignTick","items","ticks","getTicks","isPolar","push","value","text","tickValue","reduce","preTick","currentTick","currentIndex","currentValue","points","convert","x","y","preValue","middleValue","getCircleGridItems","xScale","yScale","count","values","length","Array","__","idx","showGrid","axisOption","userGrid","themeGrid","undefined"],"sources":["../../src/util/grid.ts"],"sourcesContent":["import { deepMix, get, map } from '@antv/util';\nimport { DIRECTION } from '../constant';\nimport { Coordinate, Scale, Tick } from '../dependents';\n\n/**\n * @ignore\n * get the grid theme by type, will mix the common cfg of axis\n * @param theme\n * @param direction\n * @returns theme object\n */\nexport function getGridThemeCfg(theme: object, direction: DIRECTION | 'common'): object {\n  const axisTheme = deepMix(\n    {},\n    get(theme, ['components', 'axis', 'common']),\n    get(theme, ['components', 'axis', direction])\n  );\n  return get(axisTheme, ['grid'], {});\n}\n\n/**\n * @ignore\n * get axis grid items\n * @param coordinate\n * @param scale\n * @param dim\n * @return items\n */\nexport function getLineGridItems(coordinate: Coordinate, scale: Scale, dim: string, alignTick?: boolean) {\n  const items = [];\n  const ticks = scale.getTicks();\n  if (coordinate.isPolar) {\n    // 补全 ticks\n    ticks.push({\n      value: 1,\n      text: '',\n      tickValue: '',\n    });\n  }\n  ticks.reduce((preTick: Tick, currentTick: Tick, currentIndex) => {\n    const currentValue = currentTick.value;\n    if (alignTick) {\n      items.push({\n        points: [\n          coordinate.convert(dim === 'y' ? { x: 0, y: currentValue } : { x: currentValue, y: 0 }),\n          coordinate.convert(dim === 'y' ? { x: 1, y: currentValue } : { x: currentValue, y: 1 }),\n        ],\n      });\n    } else {\n      if (currentIndex) {\n        const preValue = preTick.value;\n        const middleValue = (preValue + currentValue) / 2;\n        items.push({\n          points: [\n            coordinate.convert(dim === 'y' ? { x: 0, y: middleValue } : { x: middleValue, y: 0 }),\n            coordinate.convert(dim === 'y' ? { x: 1, y: middleValue } : { x: middleValue, y: 1 }),\n          ],\n        });\n      }\n    }\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n\n/**\n * @ignore\n * get\n * @param coordinate\n * @param xScale\n * @param yScale\n * @param dim\n * @returns items\n */\nexport function getCircleGridItems(\n  coordinate: Coordinate,\n  xScale: Scale,\n  yScale: Scale,\n  alignTick: boolean,\n  dim: string\n) {\n  const count = xScale.values.length;\n  const items = [];\n  const ticks = yScale.getTicks();\n\n  ticks.reduce((preTick: Tick, currentTick: Tick) => {\n    const preValue = preTick ? preTick.value : currentTick.value; // 只有一项数据时取当前值\n    const currentValue = currentTick.value;\n    const middleValue = (preValue + currentValue) / 2;\n    if (dim === 'x') {\n      // 如果是 x 轴作为半径轴，那么只需要取圆弧收尾两个即可\n      items.push({\n        points: [\n          coordinate.convert({\n            x: alignTick ? currentValue : middleValue,\n            y: 0,\n          }),\n          coordinate.convert({\n            x: alignTick ? currentValue : middleValue,\n            y: 1,\n          }),\n        ],\n      });\n    } else {\n      items.push({\n        points: map(Array(count + 1), (__: any, idx: number) => {\n          return coordinate.convert({\n            x: idx / count,\n            y: alignTick ? currentValue : middleValue,\n          });\n        }),\n      });\n    }\n\n    return currentTick;\n  }, ticks[0]);\n  return items;\n}\n\n/**\n * @ignore\n * show grid or not\n * @param axisTheme\n * @param axisOption\n */\nexport function showGrid(axisTheme: any, axisOption: any): boolean {\n  const userGrid = get(axisOption, 'grid');\n  if (userGrid === null) {\n    return false;\n  }\n\n  const themeGrid = get(axisTheme, 'grid');\n\n  return !(userGrid === undefined && themeGrid === null);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}