{"ast":null,"code":"\"use strict\";\n\n/**\n * @fileOverview fruchterman layout\n * @author shiwu.wyy@antfin.com\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GForceLayout = void 0;\nvar base_1 = require(\"./base\");\nvar util_1 = require(\"../util\");\nvar proccessToFunc = function (value, defaultV) {\n  var func;\n  if (!value) {\n    func = function (d) {\n      return defaultV || 1;\n    };\n  } else if ((0, util_1.isNumber)(value)) {\n    func = function (d) {\n      return value;\n    };\n  } else {\n    func = value;\n  }\n  return func;\n};\n/**\n * graphin 中的 force 布局\n */\nvar GForceLayout = /** @class */function (_super) {\n  __extends(GForceLayout, _super);\n  function GForceLayout(options) {\n    var _this = _super.call(this) || this;\n    /** 停止迭代的最大迭代数 */\n    _this.maxIteration = 500;\n    /** 是否启动 worker */\n    _this.workerEnabled = false;\n    /** 弹簧引力系数 */\n    _this.edgeStrength = 200;\n    /** 斥力系数 */\n    _this.nodeStrength = 1000;\n    /** 库伦系数 */\n    _this.coulombDisScale = 0.005;\n    /** 阻尼系数 */\n    _this.damping = 0.9;\n    /** 最大速度 */\n    _this.maxSpeed = 1000;\n    /** 一次迭代的平均移动距离小于该值时停止迭代 */\n    _this.minMovement = 0.5;\n    /** 迭代中衰减 */\n    _this.interval = 0.02;\n    /** 斥力的一个系数 */\n    _this.factor = 1;\n    /** 理想边长 */\n    _this.linkDistance = 1;\n    /** 重力大小 */\n    _this.gravity = 10;\n    /** 是否防止重叠 */\n    _this.preventOverlap = true;\n    /** 防止重叠的力大小参数 */\n    _this.collideStrength = 1;\n    /** 每次迭代结束的回调函数 */\n    _this.tick = function () {};\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.nodeMap = {};\n    _this.nodeIdxMap = {};\n    /** 是否使用 window.setInterval 运行迭代 */\n    _this.animate = true;\n    _this.updateCfg(options);\n    return _this;\n  }\n  GForceLayout.prototype.getDefaultCfg = function () {\n    return {\n      maxIteration: 500,\n      gravity: 10,\n      enableTick: true,\n      animate: true\n    };\n  };\n  /**\n   * 执行布局\n   */\n  GForceLayout.prototype.execute = function () {\n    var _a, _b;\n    var self = this;\n    var nodes = self.nodes;\n    if (self.timeInterval !== undefined && typeof window !== \"undefined\") {\n      window.clearInterval(self.timeInterval);\n    }\n    if (!nodes || nodes.length === 0) {\n      (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n      return;\n    }\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n    if (!self.center) {\n      self.center = [self.width / 2, self.height / 2];\n    }\n    var center = self.center;\n    if (nodes.length === 1) {\n      nodes[0].x = center[0];\n      nodes[0].y = center[1];\n      (_b = self.onLayoutEnd) === null || _b === void 0 ? void 0 : _b.call(self);\n      return;\n    }\n    var nodeMap = {};\n    var nodeIdxMap = {};\n    nodes.forEach(function (node, i) {\n      if (!(0, util_1.isNumber)(node.x)) node.x = Math.random() * self.width;\n      if (!(0, util_1.isNumber)(node.y)) node.y = Math.random() * self.height;\n      nodeMap[node.id] = node;\n      nodeIdxMap[node.id] = i;\n    });\n    self.nodeMap = nodeMap;\n    self.nodeIdxMap = nodeIdxMap;\n    self.linkDistance = proccessToFunc(self.linkDistance, 1);\n    self.nodeStrength = proccessToFunc(self.nodeStrength, 1);\n    self.edgeStrength = proccessToFunc(self.edgeStrength, 1);\n    // node size function\n    var nodeSize = self.nodeSize;\n    var nodeSizeFunc;\n    if (self.preventOverlap) {\n      var nodeSpacing_1 = self.nodeSpacing;\n      var nodeSpacingFunc_1;\n      if ((0, util_1.isNumber)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = function () {\n          return nodeSpacing_1;\n        };\n      } else if ((0, util_1.isFunction)(nodeSpacing_1)) {\n        nodeSpacingFunc_1 = nodeSpacing_1;\n      } else {\n        nodeSpacingFunc_1 = function () {\n          return 0;\n        };\n      }\n      if (!nodeSize) {\n        nodeSizeFunc = function (d) {\n          if (d.size) {\n            if ((0, util_1.isArray)(d.size)) {\n              return Math.max(d.size[0], d.size[1]) + nodeSpacingFunc_1(d);\n            }\n            if ((0, util_1.isObject)(d.size)) {\n              return Math.max(d.size.width, d.size.height) + nodeSpacingFunc_1(d);\n            }\n            return d.size + nodeSpacingFunc_1(d);\n          }\n          return 10 + nodeSpacingFunc_1(d);\n        };\n      } else if ((0, util_1.isArray)(nodeSize)) {\n        nodeSizeFunc = function (d) {\n          return Math.max(nodeSize[0], nodeSize[1]) + nodeSpacingFunc_1(d);\n        };\n      } else {\n        nodeSizeFunc = function (d) {\n          return nodeSize + nodeSpacingFunc_1(d);\n        };\n      }\n    }\n    self.nodeSize = nodeSizeFunc;\n    var edges = self.edges;\n    self.degrees = (0, util_1.getDegree)(nodes.length, self.nodeIdxMap, edges);\n    if (!self.getMass) {\n      self.getMass = function (d) {\n        var mass = d.mass || self.degrees[self.nodeIdxMap[d.id]].all || 1;\n        return mass;\n      };\n    }\n    // layout\n    self.run();\n  };\n  GForceLayout.prototype.run = function () {\n    var _a;\n    var self = this;\n    var maxIteration = self.maxIteration,\n      nodes = self.nodes,\n      workerEnabled = self.workerEnabled,\n      minMovement = self.minMovement,\n      animate = self.animate;\n    if (!nodes) return;\n    if (workerEnabled || !animate) {\n      for (var i = 0; i < maxIteration; i++) {\n        var previousPos = self.runOneStep(i);\n        if (self.reachMoveThreshold(nodes, previousPos, minMovement)) {\n          break;\n        }\n      }\n      (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n    } else {\n      if (typeof window === \"undefined\") return;\n      var iter_1 = 0;\n      // interval for render the result after each iteration\n      this.timeInterval = window.setInterval(function () {\n        var _a, _b;\n        if (!nodes) return;\n        var previousPos = self.runOneStep(iter_1) || [];\n        if (self.reachMoveThreshold(nodes, previousPos, minMovement)) {\n          (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n          window.clearInterval(self.timeInterval);\n        }\n        iter_1++;\n        if (iter_1 >= maxIteration) {\n          (_b = self.onLayoutEnd) === null || _b === void 0 ? void 0 : _b.call(self);\n          window.clearInterval(self.timeInterval);\n        }\n      }, 0);\n    }\n  };\n  GForceLayout.prototype.reachMoveThreshold = function (nodes, previousPos, minMovement) {\n    // whether to stop the iteration\n    var movement = 0;\n    nodes.forEach(function (node, j) {\n      var vx = node.x - previousPos[j].x;\n      var vy = node.y - previousPos[j].y;\n      movement += Math.sqrt(vx * vx + vy * vy);\n    });\n    movement /= nodes.length;\n    return movement < minMovement;\n  };\n  GForceLayout.prototype.runOneStep = function (iter) {\n    var _a;\n    var self = this;\n    var nodes = self.nodes,\n      edges = self.edges;\n    var accArray = [];\n    var velArray = [];\n    if (!nodes) return;\n    nodes.forEach(function (_, i) {\n      accArray[2 * i] = 0;\n      accArray[2 * i + 1] = 0;\n      velArray[2 * i] = 0;\n      velArray[2 * i + 1] = 0;\n    });\n    self.calRepulsive(accArray, nodes);\n    if (edges) self.calAttractive(accArray, edges);\n    self.calGravity(accArray, nodes);\n    var stepInterval = Math.max(0.02, self.interval - iter * 0.002);\n    self.updateVelocity(accArray, velArray, stepInterval, nodes);\n    var previousPos = [];\n    nodes.forEach(function (node) {\n      previousPos.push({\n        x: node.x,\n        y: node.y\n      });\n    });\n    self.updatePosition(velArray, stepInterval, nodes);\n    (_a = self.tick) === null || _a === void 0 ? void 0 : _a.call(self);\n    return previousPos;\n  };\n  GForceLayout.prototype.calRepulsive = function (accArray, nodes) {\n    var self = this;\n    var getMass = self.getMass,\n      factor = self.factor,\n      coulombDisScale = self.coulombDisScale,\n      preventOverlap = self.preventOverlap,\n      _a = self.collideStrength,\n      collideStrength = _a === void 0 ? 1 : _a;\n    var nodeStrength = self.nodeStrength;\n    var nodeSize = self.nodeSize;\n    nodes.forEach(function (ni, i) {\n      var massi = getMass ? getMass(ni) : 1;\n      nodes.forEach(function (nj, j) {\n        if (i >= j) return;\n        // if (!accArray[j]) accArray[j] = 0;\n        var vecX = ni.x - nj.x;\n        var vecY = ni.y - nj.y;\n        if (vecX === 0 && vecY === 0) {\n          vecX = Math.random() * 0.01;\n          vecY = Math.random() * 0.01;\n        }\n        var lengthSqr = vecX * vecX + vecY * vecY;\n        var vecLength = Math.sqrt(lengthSqr);\n        var nVecLength = (vecLength + 0.1) * coulombDisScale;\n        var direX = vecX / vecLength;\n        var direY = vecY / vecLength;\n        var param = (nodeStrength(ni) + nodeStrength(nj)) * 0.5 * factor / (nVecLength * nVecLength);\n        var massj = getMass ? getMass(nj) : 1;\n        accArray[2 * i] += direX * param;\n        accArray[2 * i + 1] += direY * param;\n        accArray[2 * j] -= direX * param;\n        accArray[2 * j + 1] -= direY * param;\n        if (preventOverlap && (nodeSize(ni) + nodeSize(nj)) / 2 > vecLength) {\n          var paramOverlap = collideStrength * (nodeStrength(ni) + nodeStrength(nj)) * 0.5 / lengthSqr;\n          accArray[2 * i] += direX * paramOverlap / massi;\n          accArray[2 * i + 1] += direY * paramOverlap / massi;\n          accArray[2 * j] -= direX * paramOverlap / massj;\n          accArray[2 * j + 1] -= direY * paramOverlap / massj;\n        }\n      });\n    });\n  };\n  GForceLayout.prototype.calAttractive = function (accArray, edges) {\n    var self = this;\n    var nodeMap = self.nodeMap,\n      nodeIdxMap = self.nodeIdxMap,\n      linkDistance = self.linkDistance,\n      edgeStrength = self.edgeStrength;\n    var nodeSize = self.nodeSize;\n    var getMass = self.getMass;\n    edges.forEach(function (edge, i) {\n      var source = (0, util_1.getEdgeTerminal)(edge, 'source');\n      var target = (0, util_1.getEdgeTerminal)(edge, 'target');\n      var sourceNode = nodeMap[source];\n      var targetNode = nodeMap[target];\n      var vecX = targetNode.x - sourceNode.x;\n      var vecY = targetNode.y - sourceNode.y;\n      if (vecX === 0 && vecY === 0) {\n        vecX = Math.random() * 0.01;\n        vecY = Math.random() * 0.01;\n      }\n      var vecLength = Math.sqrt(vecX * vecX + vecY * vecY);\n      var direX = vecX / vecLength;\n      var direY = vecY / vecLength;\n      var length = linkDistance(edge, sourceNode, targetNode) || 1 + (nodeSize(sourceNode) + nodeSize(targetNode) || 0) / 2;\n      var diff = length - vecLength;\n      var param = diff * edgeStrength(edge);\n      var sourceIdx = nodeIdxMap[source];\n      var targetIdx = nodeIdxMap[target];\n      var massSource = getMass ? getMass(sourceNode) : 1;\n      var massTarget = getMass ? getMass(targetNode) : 1;\n      accArray[2 * sourceIdx] -= direX * param / massSource;\n      accArray[2 * sourceIdx + 1] -= direY * param / massSource;\n      accArray[2 * targetIdx] += direX * param / massTarget;\n      accArray[2 * targetIdx + 1] += direY * param / massTarget;\n    });\n  };\n  GForceLayout.prototype.calGravity = function (accArray, nodes) {\n    var self = this;\n    // const nodes = self.nodes;\n    var center = self.center;\n    var defaultGravity = self.gravity;\n    var degrees = self.degrees;\n    var nodeLength = nodes.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      var vecX = node.x - center[0];\n      var vecY = node.y - center[1];\n      var gravity = defaultGravity;\n      if (self.getCenter) {\n        var customCenterOpt = self.getCenter(node, degrees[i].all);\n        if (customCenterOpt && (0, util_1.isNumber)(customCenterOpt[0]) && (0, util_1.isNumber)(customCenterOpt[1]) && (0, util_1.isNumber)(customCenterOpt[2])) {\n          vecX = node.x - customCenterOpt[0];\n          vecY = node.y - customCenterOpt[1];\n          gravity = customCenterOpt[2];\n        }\n      }\n      if (!gravity) continue;\n      accArray[2 * i] -= gravity * vecX;\n      accArray[2 * i + 1] -= gravity * vecY;\n    }\n  };\n  GForceLayout.prototype.updateVelocity = function (accArray, velArray, stepInterval, nodes) {\n    var self = this;\n    var param = stepInterval * self.damping;\n    // const nodes = self.nodes;\n    nodes.forEach(function (node, i) {\n      var vx = accArray[2 * i] * param || 0.01;\n      var vy = accArray[2 * i + 1] * param || 0.01;\n      var vLength = Math.sqrt(vx * vx + vy * vy);\n      if (vLength > self.maxSpeed) {\n        var param2 = self.maxSpeed / vLength;\n        vx = param2 * vx;\n        vy = param2 * vy;\n      }\n      velArray[2 * i] = vx;\n      velArray[2 * i + 1] = vy;\n    });\n  };\n  GForceLayout.prototype.updatePosition = function (velArray, stepInterval, nodes) {\n    nodes.forEach(function (node, i) {\n      if ((0, util_1.isNumber)(node.fx) && (0, util_1.isNumber)(node.fy)) {\n        node.x = node.fx;\n        node.y = node.fy;\n        return;\n      }\n      var distX = velArray[2 * i] * stepInterval;\n      var distY = velArray[2 * i + 1] * stepInterval;\n      node.x += distX;\n      node.y += distY;\n    });\n  };\n  GForceLayout.prototype.stop = function () {\n    if (this.timeInterval && typeof window !== \"undefined\") {\n      window.clearInterval(this.timeInterval);\n    }\n  };\n  GForceLayout.prototype.destroy = function () {\n    var self = this;\n    self.stop();\n    self.tick = null;\n    self.nodes = null;\n    self.edges = null;\n    self.destroyed = true;\n  };\n  GForceLayout.prototype.getType = function () {\n    return \"gForce\";\n  };\n  return GForceLayout;\n}(base_1.Base);\nexports.GForceLayout = GForceLayout;","map":{"version":3,"names":["require","base_1","util_1","proccessToFunc","value","defaultV","func","d","isNumber","GForceLayout","_super","__extends","options","_this","call","maxIteration","workerEnabled","edgeStrength","nodeStrength","coulombDisScale","damping","maxSpeed","minMovement","interval","factor","linkDistance","gravity","preventOverlap","collideStrength","tick","nodes","edges","width","height","nodeMap","nodeIdxMap","animate","updateCfg","prototype","getDefaultCfg","enableTick","execute","self","timeInterval","undefined","window","clearInterval","length","_a","onLayoutEnd","innerWidth","innerHeight","center","x","y","_b","forEach","node","i","Math","random","id","nodeSize","nodeSizeFunc","nodeSpacing_1","nodeSpacing","nodeSpacingFunc_1","isFunction","size","isArray","max","isObject","degrees","getDegree","getMass","mass","all","run","previousPos","runOneStep","reachMoveThreshold","iter_1","setInterval","movement","j","vx","vy","sqrt","iter","accArray","velArray","_","calRepulsive","calAttractive","calGravity","stepInterval","updateVelocity","push","updatePosition","ni","massi","nj","vecX","vecY","lengthSqr","vecLength","nVecLength","direX","direY","param","massj","paramOverlap","edge","source","getEdgeTerminal","target","sourceNode","targetNode","diff","sourceIdx","targetIdx","massSource","massTarget","defaultGravity","nodeLength","getCenter","customCenterOpt","vLength","param2","fx","fy","distX","distY","stop","destroy","destroyed","getType","Base","exports"],"sources":["../../src/layout/gForce.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}