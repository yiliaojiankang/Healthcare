{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { BufferUsage } from '@antv/g-device-api';\nimport { gl } from '@antv/l7-core';\nimport { hintMap, typedArrayCtorMap } from \"./constants\";\nimport { isTypedArray } from \"./utils/typedarray\";\n\n/**\n * Use Buffer from @antv/g-device-api\n */\nvar DeviceBuffer = /*#__PURE__*/function () {\n  function DeviceBuffer(device, options) {\n    _classCallCheck(this, DeviceBuffer);\n    _defineProperty(this, \"isDestroyed\", false);\n    var data = options.data,\n      usage = options.usage,\n      type = options.type,\n      isUBO = options.isUBO,\n      label = options.label;\n    var typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.type = type;\n    this.size = typed.byteLength;\n\n    // @see https://www.npmjs.com/package/@antv/g-device-api#createBuffer\n    this.buffer = device.createBuffer({\n      viewOrSize: typed,\n      usage: isUBO ? BufferUsage.UNIFORM : BufferUsage.VERTEX,\n      hint: hintMap[usage || gl.STATIC_DRAW]\n    });\n    if (label) {\n      device.setResourceName(this.buffer, label);\n    }\n  }\n  _createClass(DeviceBuffer, [{\n    key: \"get\",\n    value: function get() {\n      return this.buffer;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isDestroyed) {\n        this.buffer.destroy();\n      }\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(_ref) {\n      var data = _ref.data,\n        offset = _ref.offset;\n      var typed;\n      if (isTypedArray(data)) {\n        typed = data;\n      } else {\n        typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n      }\n      this.buffer.setSubData(offset, new Uint8Array(typed.buffer));\n    }\n  }]);\n  return DeviceBuffer;\n}();\nexport { DeviceBuffer as default };","map":{"version":3,"names":["_classCallCheck","_createClass","_defineProperty","BufferUsage","gl","hintMap","typedArrayCtorMap","isTypedArray","DeviceBuffer","device","options","data","usage","type","isUBO","label","typed","FLOAT","size","byteLength","buffer","createBuffer","viewOrSize","UNIFORM","VERTEX","hint","STATIC_DRAW","setResourceName","key","value","get","destroy","isDestroyed","subData","_ref","offset","setSubData","Uint8Array","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-renderer/es/device/DeviceBuffer.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { BufferUsage } from '@antv/g-device-api';\nimport { gl } from '@antv/l7-core';\nimport { hintMap, typedArrayCtorMap } from \"./constants\";\nimport { isTypedArray } from \"./utils/typedarray\";\n\n/**\n * Use Buffer from @antv/g-device-api\n */\nvar DeviceBuffer = /*#__PURE__*/function () {\n  function DeviceBuffer(device, options) {\n    _classCallCheck(this, DeviceBuffer);\n    _defineProperty(this, \"isDestroyed\", false);\n    var data = options.data,\n      usage = options.usage,\n      type = options.type,\n      isUBO = options.isUBO,\n      label = options.label;\n    var typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.type = type;\n    this.size = typed.byteLength;\n\n    // @see https://www.npmjs.com/package/@antv/g-device-api#createBuffer\n    this.buffer = device.createBuffer({\n      viewOrSize: typed,\n      usage: isUBO ? BufferUsage.UNIFORM : BufferUsage.VERTEX,\n      hint: hintMap[usage || gl.STATIC_DRAW]\n    });\n    if (label) {\n      device.setResourceName(this.buffer, label);\n    }\n  }\n  _createClass(DeviceBuffer, [{\n    key: \"get\",\n    value: function get() {\n      return this.buffer;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isDestroyed) {\n        this.buffer.destroy();\n      }\n      this.isDestroyed = true;\n    }\n  }, {\n    key: \"subData\",\n    value: function subData(_ref) {\n      var data = _ref.data,\n        offset = _ref.offset;\n      var typed;\n      if (isTypedArray(data)) {\n        typed = data;\n      } else {\n        typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n      }\n      this.buffer.setSubData(offset, new Uint8Array(typed.buffer));\n    }\n  }]);\n  return DeviceBuffer;\n}();\nexport { DeviceBuffer as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}