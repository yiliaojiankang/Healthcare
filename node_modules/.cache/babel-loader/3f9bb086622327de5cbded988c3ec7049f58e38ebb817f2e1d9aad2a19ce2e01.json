{"ast":null,"code":"import { get } from '@antv/util';\nimport { deepAssign } from '../../utils';\nimport { Area } from '../area';\nimport { adaptor as areaAdaptor } from '../area/adaptor';\nimport { Bar } from '../bar';\nimport { adaptor as barAdaptor } from '../bar/adaptor';\nimport { Column } from '../column';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nimport { Funnel } from '../funnel';\nimport { adaptor as funnelAdaptor } from '../funnel/adaptor';\nimport { Gauge } from '../gauge';\nimport { adaptor as gaugeAdaptor } from '../gauge/adaptor';\nimport { Histogram } from '../histogram';\nimport { adaptor as histogramAdaptor } from '../histogram/adaptor';\nimport { Line } from '../line';\nimport { adaptor as lineAdaptor } from '../line/adaptor';\nimport { Pie } from '../pie';\nimport { adaptor as pieAdaptor } from '../pie/adaptor';\nimport { Progress } from '../progress';\nimport { adaptor as progressAdaptor } from '../progress/adaptor';\nimport { RingProgress } from '../ring-progress';\nimport { adaptor as ringProgressAdaptor } from '../ring-progress/adaptor';\nimport { Scatter } from '../scatter';\nimport { adaptor as scatterAdaptor } from '../scatter/adaptor';\nimport { Stock } from '../stock';\nimport { adaptor as stockAdaptor } from '../stock/adaptor';\nimport { TinyArea } from '../tiny-area';\nimport { adaptor as tinyAreaAdaptor } from '../tiny-area/adaptor';\nimport { TinyColumn } from '../tiny-column';\nimport { adaptor as tinyColumnAdaptor } from '../tiny-column/adaptor';\nimport { TinyLine } from '../tiny-line';\nimport { adaptor as tinyLineAdaptor } from '../tiny-line/adaptor';\n/**\n * 可在 multi-view 中使用的 plots\n */\nvar PLOT_ADAPTORS = {\n  line: lineAdaptor,\n  pie: pieAdaptor,\n  column: columnAdaptor,\n  bar: barAdaptor,\n  area: areaAdaptor,\n  gauge: gaugeAdaptor,\n  'tiny-line': tinyLineAdaptor,\n  'tiny-column': tinyColumnAdaptor,\n  'tiny-area': tinyAreaAdaptor,\n  'ring-progress': ringProgressAdaptor,\n  progress: progressAdaptor,\n  scatter: scatterAdaptor,\n  histogram: histogramAdaptor,\n  funnel: funnelAdaptor,\n  stock: stockAdaptor\n};\n/**\n * 获取指定 plot 的 class contructor\n * @param {string} plot\n */\nvar PLOT_CONSTRUCTOR = {\n  line: Line,\n  pie: Pie,\n  column: Column,\n  bar: Bar,\n  area: Area,\n  gauge: Gauge,\n  'tiny-line': TinyLine,\n  'tiny-column': TinyColumn,\n  'tiny-area': TinyArea,\n  'ring-progress': RingProgress,\n  progress: Progress,\n  scatter: Scatter,\n  histogram: Histogram,\n  funnel: Funnel,\n  stock: Stock\n};\n/**\n * 在 mix 图表以及 facet 图表中，defaultOptions 进行复写简化\n */\nvar DEFAULT_OPTIONS_MAP = {\n  pie: {\n    label: false\n  },\n  column: {\n    tooltip: {\n      showMarkers: false\n    }\n  },\n  bar: {\n    tooltip: {\n      showMarkers: false\n    }\n  }\n};\n/**\n * 执行 plot 的 adaptor, 默认都带上 defaultOptions\n * @param {string} plot\n */\nexport function execPlotAdaptor(plot, view, options) {\n  var cls = PLOT_CONSTRUCTOR[plot];\n  if (!cls) {\n    console.error(\"could not find \".concat(plot, \" plot\"));\n    return;\n  }\n  var module = PLOT_ADAPTORS[plot];\n  module({\n    chart: view,\n    options: deepAssign({}, cls.getDefaultOptions(), get(DEFAULT_OPTIONS_MAP, plot, {}), options)\n  });\n}","map":{"version":3,"names":["get","deepAssign","Area","adaptor","areaAdaptor","Bar","barAdaptor","Column","columnAdaptor","Funnel","funnelAdaptor","Gauge","gaugeAdaptor","Histogram","histogramAdaptor","Line","lineAdaptor","Pie","pieAdaptor","Progress","progressAdaptor","RingProgress","ringProgressAdaptor","Scatter","scatterAdaptor","Stock","stockAdaptor","TinyArea","tinyAreaAdaptor","TinyColumn","tinyColumnAdaptor","TinyLine","tinyLineAdaptor","PLOT_ADAPTORS","line","pie","column","bar","area","gauge","progress","scatter","histogram","funnel","stock","PLOT_CONSTRUCTOR","DEFAULT_OPTIONS_MAP","label","tooltip","showMarkers","execPlotAdaptor","plot","view","options","cls","console","error","concat","module","chart","getDefaultOptions"],"sources":["../../../src/plots/mix/utils.ts"],"sourcesContent":["import { View } from '@antv/g2';\nimport { get } from '@antv/util';\nimport { Options } from '../../types';\nimport { deepAssign } from '../../utils';\nimport { Area, AreaOptions } from '../area';\nimport { adaptor as areaAdaptor } from '../area/adaptor';\nimport { Bar, BarOptions } from '../bar';\nimport { adaptor as barAdaptor } from '../bar/adaptor';\nimport { Column, ColumnOptions } from '../column';\nimport { adaptor as columnAdaptor } from '../column/adaptor';\nimport { Funnel, FunnelOptions } from '../funnel';\nimport { adaptor as funnelAdaptor } from '../funnel/adaptor';\nimport { Gauge, GaugeOptions } from '../gauge';\nimport { adaptor as gaugeAdaptor } from '../gauge/adaptor';\nimport { Histogram, HistogramOptions } from '../histogram';\nimport { adaptor as histogramAdaptor } from '../histogram/adaptor';\nimport { Line, LineOptions } from '../line';\nimport { adaptor as lineAdaptor } from '../line/adaptor';\nimport { Pie, PieOptions } from '../pie';\nimport { adaptor as pieAdaptor } from '../pie/adaptor';\nimport { Progress, ProgressOptions } from '../progress';\nimport { adaptor as progressAdaptor } from '../progress/adaptor';\nimport { RingProgress, RingProgressOptions } from '../ring-progress';\nimport { adaptor as ringProgressAdaptor } from '../ring-progress/adaptor';\nimport { Scatter, ScatterOptions } from '../scatter';\nimport { adaptor as scatterAdaptor } from '../scatter/adaptor';\nimport { Stock, StockOptions } from '../stock';\nimport { adaptor as stockAdaptor } from '../stock/adaptor';\nimport { TinyArea, TinyAreaOptions } from '../tiny-area';\nimport { adaptor as tinyAreaAdaptor } from '../tiny-area/adaptor';\nimport { TinyColumn, TinyColumnOptions } from '../tiny-column';\nimport { adaptor as tinyColumnAdaptor } from '../tiny-column/adaptor';\nimport { TinyLine, TinyLineOptions } from '../tiny-line';\nimport { adaptor as tinyLineAdaptor } from '../tiny-line/adaptor';\n\n/**\n * 移除 options 中的 width、height 设置, 将 options 的 data 设置为可选\n */\ntype PlotOptions<T> = Omit<T, 'width' | 'height' | 'data'> & Partial<Pick<T extends Options ? T : never, 'data'>>;\n\n/**\n * multi-view 中的支持的 plots 类型（带 options 定义）\n */\nexport type IPlotTypes =\n  | {\n      /**\n       * plot 类型\n       */\n      readonly type: 'line';\n      /**\n       * plot 配置\n       */\n      readonly options: PlotOptions<LineOptions>;\n    }\n  | {\n      readonly type: 'pie';\n      readonly options: PlotOptions<PieOptions>;\n    }\n  | {\n      readonly type: 'bar';\n      readonly options: PlotOptions<BarOptions>;\n    }\n  | {\n      readonly type: 'column';\n      readonly options: PlotOptions<ColumnOptions>;\n    }\n  | {\n      readonly type: 'area';\n      readonly options: PlotOptions<AreaOptions>;\n    }\n  | {\n      readonly type: 'gauge';\n      readonly options: PlotOptions<GaugeOptions>;\n    }\n  | {\n      readonly type: 'tiny-line';\n      readonly options: PlotOptions<TinyLineOptions>;\n    }\n  | {\n      readonly type: 'tiny-area';\n      readonly options: PlotOptions<TinyAreaOptions>;\n    }\n  | {\n      readonly type: 'tiny-column';\n      readonly options: PlotOptions<TinyColumnOptions>;\n    }\n  | {\n      readonly type: 'ring-progress';\n      readonly options: PlotOptions<RingProgressOptions>;\n    }\n  | {\n      readonly type: 'progress';\n      readonly options: PlotOptions<ProgressOptions>;\n    }\n  | {\n      readonly type: 'histogram';\n      readonly options: PlotOptions<HistogramOptions>;\n    }\n  | {\n      readonly type: 'scatter';\n      readonly options: PlotOptions<ScatterOptions>;\n    }\n  | {\n      readonly type: 'funnel';\n      readonly options: PlotOptions<FunnelOptions>;\n    }\n  | {\n      readonly type: 'stock';\n      readonly options: PlotOptions<StockOptions>;\n    };\n\n/**\n * 可在 multi-view 中使用的 plots\n */\nconst PLOT_ADAPTORS = {\n  line: lineAdaptor,\n  pie: pieAdaptor,\n  column: columnAdaptor,\n  bar: barAdaptor,\n  area: areaAdaptor,\n  gauge: gaugeAdaptor,\n  'tiny-line': tinyLineAdaptor,\n  'tiny-column': tinyColumnAdaptor,\n  'tiny-area': tinyAreaAdaptor,\n  'ring-progress': ringProgressAdaptor,\n  progress: progressAdaptor,\n  scatter: scatterAdaptor,\n  histogram: histogramAdaptor,\n  funnel: funnelAdaptor,\n  stock: stockAdaptor,\n};\n\n/**\n * 获取指定 plot 的 class contructor\n * @param {string} plot\n */\nconst PLOT_CONSTRUCTOR = {\n  line: Line,\n  pie: Pie,\n  column: Column,\n  bar: Bar,\n  area: Area,\n  gauge: Gauge,\n  'tiny-line': TinyLine,\n  'tiny-column': TinyColumn,\n  'tiny-area': TinyArea,\n  'ring-progress': RingProgress,\n  progress: Progress,\n  scatter: Scatter,\n  histogram: Histogram,\n  funnel: Funnel,\n  stock: Stock,\n};\n\n/**\n * 在 mix 图表以及 facet 图表中，defaultOptions 进行复写简化\n */\nconst DEFAULT_OPTIONS_MAP = {\n  pie: { label: false },\n  column: { tooltip: { showMarkers: false } },\n  bar: { tooltip: { showMarkers: false } },\n};\n\n/**\n * 执行 plot 的 adaptor, 默认都带上 defaultOptions\n * @param {string} plot\n */\nexport function execPlotAdaptor<T extends IPlotTypes['type']>(\n  plot: T,\n  view: View,\n  options: IPlotTypes['options']\n): void {\n  const cls = PLOT_CONSTRUCTOR[plot];\n  if (!cls) {\n    console.error(`could not find ${plot} plot`);\n    return;\n  }\n  const module = PLOT_ADAPTORS[plot];\n  module({\n    chart: view,\n    options: deepAssign({}, cls.getDefaultOptions(), get(DEFAULT_OPTIONS_MAP, plot, {}), options),\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}