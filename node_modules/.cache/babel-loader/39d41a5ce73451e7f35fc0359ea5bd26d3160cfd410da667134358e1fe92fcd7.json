{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"mapInstance\", \"center\", \"token\", \"minZoom\", \"maxZoom\", \"rotation\", \"pitch\", \"mapSize\", \"logoVisible\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\"img[src*='//mapapi.qq.com/web/jsapi/logo/logo_def.png'],.logo-text {\\n  display: none !important;\\n}\\n\");\nimport GMapLoader from \"./maploader\";\nvar GMAP_API_KEY = 'AIzaSyDBDCfl4pvuDtaazdCog3LmhA7CQLhmcRE';\nvar EventMap = {\n  mapmove: 'center_changed',\n  camerachange: ['drag', 'pan', 'rotate', 'tilt', 'zoom_changed'],\n  zoomchange: 'zoom_changed',\n  dragging: 'drag'\n};\nvar TMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(TMapService, _BaseMapService);\n  var _super = _createSuper(TMapService);\n  function TMapService() {\n    var _this;\n    _classCallCheck(this, TMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    // @ts-ignore\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", null);\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      _this.emit('mapchange');\n      var map = _this.map;\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng(), lat()],\n        viewportHeight: map.getDiv().clientHeight,\n        viewportWidth: map.getDiv().clientWidth,\n        bearing: map.getHeading(),\n        pitch: map.getTilt(),\n        zoom: map.getZoom() - 1\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(TMapService, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _window$google;\n        var _this$config, id, mapInstance, _this$config$center, center, _this$config$token, token, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$rotation, rotation, _this$config$pitch, pitch, _this$config$mapSize, mapSize, _this$config$logoVisi, logoVisible, rest, mapContainer, map;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n              _this$config = this.config, id = _this$config.id, mapInstance = _this$config.mapInstance, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? GMAP_API_KEY : _this$config$token, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 3 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$rotation = _this$config.rotation, rotation = _this$config$rotation === void 0 ? 0 : _this$config$rotation, _this$config$pitch = _this$config.pitch, pitch = _this$config$pitch === void 0 ? 0 : _this$config$pitch, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$logoVisi = _this$config.logoVisible, logoVisible = _this$config$logoVisi === void 0 ? true : _this$config$logoVisi, rest = _objectWithoutProperties(_this$config, _excluded);\n              if ((_window$google = window.google) !== null && _window$google !== void 0 && (_window$google = _window$google.maps) !== null && _window$google !== void 0 && _window$google.Map || mapInstance) {\n                _context.next = 5;\n                break;\n              }\n              _context.next = 5;\n              return GMapLoader.load({\n                key: token\n              });\n            case 5:\n              if (!mapInstance) {\n                _context.next = 11;\n                break;\n              }\n              // If there's already a map instance, maybe not setting any other configurations\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getDiv();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n              _context.next = 18;\n              break;\n            case 11:\n              if (id) {\n                _context.next = 13;\n                break;\n              }\n              throw Error('No container id specified');\n            case 13:\n              mapContainer = DOM.getContainer(id);\n              map = new google.maps.Map(mapContainer, _objectSpread({\n                maxZoom: maxZoom,\n                minZoom: minZoom,\n                zoomControl: false,\n                fullscreenControl: false,\n                center: new google.maps.LatLng(center[1], center[0])\n              }, rest));\n              this.map = map;\n              this.$mapContainer = map.getDiv();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n            case 18:\n              // TODO: 拖动快的时候，事件失效\n              google.maps.event.addListener(this.map, 'drag', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'pan', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'rotate', this.handleCameraChanged);\n\n              // 空闲时间\n              google.maps.event.addListener(this.map, 'idle', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'zoom_changed', this.handleCameraChanged);\n              this.handleCameraChanged();\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.map.setMap(null);\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {\n      // const container = this.map.getDiv();\n      // this.markerContainer = DOM.create('div', 'l7-marker-container', container);\n      // this.markerContainer.setAttribute('tabindex', '-1');\n      // this.markerContainer.style.zIndex = '2';\n    }\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.markerContainer;\n    }\n\n    // MapEvent\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      var _this2 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n      } else {\n        var onProxy = function onProxy(eventName) {\n          var cbProxyMap = _this2.evtCbProxyMap.get(eventName);\n          if (!cbProxyMap) {\n            _this2.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n          }\n          if (cbProxyMap.get(handle)) {\n            return;\n          }\n          var handleProxy = function handleProxy() {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n              args[0].lngLat = args[0].latlng || args[0].latLng;\n            }\n            handle.apply(void 0, args);\n          };\n          cbProxyMap.set(handle, handleProxy);\n          _this2.map.on(eventName, handleProxy);\n        };\n        if (Array.isArray(EventMap[type])) {\n          EventMap[type].forEach(function (eventName) {\n            onProxy(eventName || type);\n          });\n        } else {\n          onProxy(EventMap[type] || type);\n        }\n      }\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this3 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var offProxy = function offProxy(eventName) {\n        var _this3$evtCbProxyMap$, _this3$evtCbProxyMap$2;\n        var handleProxy = (_this3$evtCbProxyMap$ = _this3.evtCbProxyMap.get(type)) === null || _this3$evtCbProxyMap$ === void 0 ? void 0 : _this3$evtCbProxyMap$.get(handle);\n        if (!handleProxy) {\n          return;\n        }\n        (_this3$evtCbProxyMap$2 = _this3.evtCbProxyMap.get(eventName)) === null || _this3$evtCbProxyMap$2 === void 0 || _this3$evtCbProxyMap$2.delete(handle);\n        _this3.map.off(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(function (eventName) {\n          offProxy(eventName || type);\n        });\n      } else {\n        offProxy(EventMap[type] || type);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once() {\n      throw new Error('Method not implemented.');\n    }\n\n    // get dom\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.map.getDiv();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return [this.map.width, this.map.height];\n    }\n\n    // get map status method\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.map.transform._minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.map.transform._maxZoom;\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'googlemap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.map.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$map$getCenter = this.map.getCenter(),\n        lng = _this$map$getCenter.lng,\n        lat = _this$map$getCenter.lat;\n      return {\n        lng: lng(),\n        lat: lat()\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.map.getTilt();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var rotation = this.map.getHeading();\n      return rotation;\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      // TODO\n      // 官网解释：如果地图尚未初始化，或者尚未设置中心位置且未设置缩放，则结果为 undefine\n      var bounds = this.map.getBounds();\n      var ne = bounds === null || bounds === void 0 ? void 0 : bounds.getNorthEast();\n      var sw = bounds === null || bounds === void 0 ? void 0 : bounds.getSouthWest();\n      return [[sw.lng(), sw.lat()], [ne.lng(), ne.lat()]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.map.getDiv();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      var _this$map$getDiv;\n      return (_this$map$getDiv = this.map.getDiv()) === null || _this$map$getDiv === void 0 ? void 0 : _this$map$getDiv.getElementsByTagName('canvas')[0];\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(styleId) {\n      this.map.setMapStyleId(styleId);\n    }\n\n    // control with raw map\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.map.setHeading(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      var currentZoom = this.map.getZoom();\n      this.map.setZoom(currentZoom + 1);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      var currentZoom = this.map.getZoom();\n      this.map.setZoom(currentZoom - 1);\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.map.panTo({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.map.panBy(x, y);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      var _bound = _slicedToArray(bound, 2),\n        sw = _bound[0],\n        ne = _bound[1];\n      var bounds = new google.maps.LatLngBounds({\n        lat: sw[1],\n        lng: sw[0]\n      }, {\n        lat: ne[1],\n        lng: ne[0]\n      });\n      this.map.fitBounds(bounds, fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      this.map.setZoom(zoom);\n      this.map.setCenter({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        lng = _ref6[0],\n        lat = _ref6[1];\n      this.map.setCenter({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.map.setTilt(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this4 = this;\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            _this4.map.setOptions({\n              gestureHandling: option.doubleClickZoom ? 'auto' : 'none'\n            });\n            break;\n          case 'dragEnable':\n            _this4.map.setOptions({\n              draggable: option.dragEnable\n            });\n            break;\n          case 'rotateEnable':\n            // Google Map 默认支持旋转，无需额外设置\n            break;\n          case 'zoomEnable':\n            _this4.map.setOptions({\n              zoomControl: option.zoomEnable\n            });\n            break;\n          case 'keyboardEnable':\n          case 'resizeEnable':\n          case 'showIndoorMap':\n            throw Error('Options may not be supported');\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(_ref7, _ref8) {\n      var _ref9 = _slicedToArray(_ref7, 2),\n        centerLon = _ref9[0],\n        centerLat = _ref9[1];\n      var _ref10 = _slicedToArray(_ref8, 2),\n        outerLon = _ref10[0],\n        outerLat = _ref10[1];\n      // @ts-ignore\n      // https://developers.google.com/maps/documentation/javascript/reference/geometry?hl=zh-cn#spherical.computeDistanceBetween\n      var metreDistance = google.maps.geometry.spherical.computeDistanceBetween([new google.maps.LatLng(centerLat, centerLon), new google.maps.LatLng(outerLat, outerLon)]);\n      var _ref11 = this.lngLatToCoord([centerLon, centerLat]),\n        _ref12 = _slicedToArray(_ref11, 2),\n        x1 = _ref12[0],\n        y1 = _ref12[1];\n      var _ref13 = this.lngLatToCoord([outerLon, outerLat]),\n        _ref14 = _slicedToArray(_ref13, 2),\n        x2 = _ref14[0],\n        y2 = _ref14[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref15) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        x = _ref16[0],\n        y = _ref16[1];\n      var _this$map$getCenter2 = this.map.getCenter(),\n        clng = _this$map$getCenter2.lng,\n        clat = _this$map$getCenter2.lat;\n      var _this$lngLatToPixel = this.lngLatToPixel([clng(), clat()]),\n        centerPixelX = _this$lngLatToPixel.x,\n        centerPixelY = _this$lngLatToPixel.y;\n      var _this$lngLatToContain = this.lngLatToContainer([clng(), clat()]),\n        centerContainerX = _this$lngLatToContain.x,\n        centerContainerY = _this$lngLatToContain.y;\n      var _this$map$unprojectFr = this.map.unprojectFromContainer(new TMap.Point(centerContainerX + (x - centerPixelX), centerContainerY + (y - centerPixelY))),\n        lng = _this$map$unprojectFr.lng,\n        lat = _this$map$unprojectFr.lat;\n      return this.containerToLngLat([lng, lat]);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref17) {\n      var _ref18 = _slicedToArray(_ref17, 2),\n        lng = _ref18[0],\n        lat = _ref18[1];\n      var latLng = new google.maps.LatLng(lat, lng);\n      var point = this.map.getProjection().fromLatLngToPoint(latLng);\n      return {\n        x: point.x,\n        y: point.y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref19) {\n      var _this$map$getProjecti;\n      var _ref20 = _slicedToArray(_ref19, 2),\n        x = _ref20[0],\n        y = _ref20[1];\n      var pixelCoordinate = new google.maps.Point(x, y);\n      var lngLat = (_this$map$getProjecti = this.map.getProjection()) === null || _this$map$getProjecti === void 0 ? void 0 : _this$map$getProjecti.fromPointToLatLng(pixelCoordinate);\n      return {\n        lng: lngLat.lng(),\n        lat: lngLat.lat()\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref21) {\n      var _this$map$getProjecti2, _this$map$getProjecti3;\n      var _ref22 = _slicedToArray(_ref21, 2),\n        lng = _ref22[0],\n        lat = _ref22[1];\n      var latLng = new google.maps.LatLng(lat, lng);\n      var pixel = (_this$map$getProjecti2 = this.map.getProjection()) === null || _this$map$getProjecti2 === void 0 || (_this$map$getProjecti3 = _this$map$getProjecti2.fromLatLngToContainerPixel) === null || _this$map$getProjecti3 === void 0 ? void 0 : _this$map$getProjecti3.call(_this$map$getProjecti2, latLng);\n      return {\n        x: pixel.x,\n        y: pixel.y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref23) {\n      var _ref24 = _slicedToArray(_ref23, 2),\n        lng = _ref24[0],\n        lat = _ref24[1];\n      // TODO: Perhaps need to check the three.js coordinates\n      var _this$lngLatToPixel2 = this.lngLatToPixel([lng, lat]),\n        x = _this$lngLatToPixel2.x,\n        y = _this$lngLatToPixel2.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this5 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this5.lngLatToCoords(item) : _this5.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(lnglat, altitude) {\n      // Use built in mercator tools due to Tencent not provided related methods\n      var _MercatorCoordinate$f = MercatorCoordinate.fromLngLat(lnglat, altitude),\n        _MercatorCoordinate$f2 = _MercatorCoordinate$f.x,\n        x = _MercatorCoordinate$f2 === void 0 ? 0 : _MercatorCoordinate$f2,\n        _MercatorCoordinate$f3 = _MercatorCoordinate$f.y,\n        y = _MercatorCoordinate$f3 === void 0 ? 0 : _MercatorCoordinate$f3,\n        _MercatorCoordinate$f4 = _MercatorCoordinate$f.z,\n        z = _MercatorCoordinate$f4 === void 0 ? 0 : _MercatorCoordinate$f4;\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMapCanvasContainer();\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n\n    // Method on earth mode\n  }, {\n    key: \"rotateY\",\n    value: function rotateY() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getDiv();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'tmap-contianer--hide-logo');\n    }\n  }]);\n  return TMapService;\n}(BaseMapService);\nexport { TMapService as default };","map":{"version":3,"names":["_slicedToArray","_typeof","_objectSpread","_objectWithoutProperties","_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_excluded","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","MapServiceEvent","MercatorCoordinate","DOM","mat4","vec3","BaseMapService","Viewport","loadStyles","css","doc","isMiniAli","my","showToast","isFRM","isWeChatMiniProgram","wx","request","miniProgram","document","head","getElementsByTagName","createElement","body","parentNode","insertBefore","documentElement","appendChild","style","type","styleSheet","cssText","createTextNode","GMapLoader","GMAP_API_KEY","EventMap","mapmove","camerachange","zoomchange","dragging","TMapService","_BaseMapService","_super","_this","_len","length","args","Array","_key","concat","Map","emit","map","_map$getCenter","getCenter","lng","lat","option","center","viewportHeight","getDiv","clientHeight","viewportWidth","clientWidth","bearing","getHeading","pitch","getTilt","zoom","getZoom","viewport","syncWithMapCamera","updateCoordinateSystemService","cameraChangedCallback","key","value","_init","mark","_callee","_window$google","_this$config","id","mapInstance","_this$config$center","_this$config$token","token","_this$config$minZoom","minZoom","_this$config$maxZoom","maxZoom","_this$config$rotation","rotation","_this$config$pitch","_this$config$mapSize","mapSize","_this$config$logoVisi","logoVisible","rest","mapContainer","wrap","_callee$","_context","prev","next","config","window","google","maps","load","$mapContainer","hideLogo","Error","getContainer","zoomControl","fullscreenControl","LatLng","event","addListener","handleCameraChanged","stop","init","destroy","setMap","onCameraChanged","callback","addMarkerContainer","getMarkerContainer","markerContainer","on","handle","_this2","indexOf","eventEmitter","onProxy","eventName","cbProxyMap","evtCbProxyMap","get","set","handleProxy","_len2","_key2","lngLat","lnglat","latlng","latLng","isArray","forEach","off","_this3","offProxy","_this3$evtCbProxyMap$","_this3$evtCbProxyMap$2","delete","once","getSize","width","height","getMinZoom","transform","_minZoom","getMaxZoom","_maxZoom","getType","_this$map$getCenter","getPitch","getRotation","getBounds","bounds","ne","getNorthEast","sw","getSouthWest","getMapContainer","getMapCanvasContainer","_this$map$getDiv","getMapStyleConfig","setBgColor","color","bgColor","setMapStyle","styleId","setMapStyleId","setRotation","setHeading","zoomIn","currentZoom","setZoom","zoomOut","panTo","_ref","_ref2","panBy","x","y","fitBounds","bound","fitBoundsOptions","_bound","LatLngBounds","setZoomAndCenter","_ref3","_ref4","setCenter","_ref5","_ref6","setPitch","setTilt","setMapStatus","_this4","Object","keys","status","setOptions","gestureHandling","doubleClickZoom","draggable","dragEnable","zoomEnable","meterToCoord","_ref7","_ref8","_ref9","centerLon","centerLat","_ref10","outerLon","outerLat","metreDistance","geometry","spherical","computeDistanceBetween","_ref11","lngLatToCoord","_ref12","x1","y1","_ref13","_ref14","x2","y2","coordDistance","Math","sqrt","pow","pixelToLngLat","_ref15","_ref16","_this$map$getCenter2","clng","clat","_this$lngLatToPixel","lngLatToPixel","centerPixelX","centerPixelY","_this$lngLatToContain","lngLatToContainer","centerContainerX","centerContainerY","_this$map$unprojectFr","unprojectFromContainer","TMap","Point","containerToLngLat","_ref17","_ref18","point","getProjection","fromLatLngToPoint","_ref19","_this$map$getProjecti","_ref20","pixelCoordinate","fromPointToLatLng","_ref21","_this$map$getProjecti2","_this$map$getProjecti3","_ref22","pixel","fromLatLngToContainerPixel","_ref23","_ref24","_this$lngLatToPixel2","lngLatToCoords","list","_this5","item","lngLatToMercator","altitude","_MercatorCoordinate$f","fromLngLat","_MercatorCoordinate$f2","_MercatorCoordinate$f3","_MercatorCoordinate$f4","z","getModelMatrix","rotate","scale","undefined","flat","projectFlat","modelMatrix","create","translate","fromValues","rotateX","rotateY","rotateZ","getCustomCoordCenter","exportMap","renderCanvas","layersPng","toDataURL","container","addClass","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-maps/es/gmap/map.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"mapInstance\", \"center\", \"token\", \"minZoom\", \"maxZoom\", \"rotation\", \"pitch\", \"mapSize\", \"logoVisible\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\"img[src*='//mapapi.qq.com/web/jsapi/logo/logo_def.png'],.logo-text {\\n  display: none !important;\\n}\\n\");\nimport GMapLoader from \"./maploader\";\nvar GMAP_API_KEY = 'AIzaSyDBDCfl4pvuDtaazdCog3LmhA7CQLhmcRE';\nvar EventMap = {\n  mapmove: 'center_changed',\n  camerachange: ['drag', 'pan', 'rotate', 'tilt', 'zoom_changed'],\n  zoomchange: 'zoom_changed',\n  dragging: 'drag'\n};\nvar TMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(TMapService, _BaseMapService);\n  var _super = _createSuper(TMapService);\n  function TMapService() {\n    var _this;\n    _classCallCheck(this, TMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    // @ts-ignore\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", null);\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      _this.emit('mapchange');\n      var map = _this.map;\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng(), lat()],\n        viewportHeight: map.getDiv().clientHeight,\n        viewportWidth: map.getDiv().clientWidth,\n        bearing: map.getHeading(),\n        pitch: map.getTilt(),\n        zoom: map.getZoom() - 1\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(TMapService, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _window$google;\n        var _this$config, id, mapInstance, _this$config$center, center, _this$config$token, token, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$rotation, rotation, _this$config$pitch, pitch, _this$config$mapSize, mapSize, _this$config$logoVisi, logoVisible, rest, mapContainer, map;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n              _this$config = this.config, id = _this$config.id, mapInstance = _this$config.mapInstance, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? GMAP_API_KEY : _this$config$token, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 3 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$rotation = _this$config.rotation, rotation = _this$config$rotation === void 0 ? 0 : _this$config$rotation, _this$config$pitch = _this$config.pitch, pitch = _this$config$pitch === void 0 ? 0 : _this$config$pitch, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$logoVisi = _this$config.logoVisible, logoVisible = _this$config$logoVisi === void 0 ? true : _this$config$logoVisi, rest = _objectWithoutProperties(_this$config, _excluded);\n              if ((_window$google = window.google) !== null && _window$google !== void 0 && (_window$google = _window$google.maps) !== null && _window$google !== void 0 && _window$google.Map || mapInstance) {\n                _context.next = 5;\n                break;\n              }\n              _context.next = 5;\n              return GMapLoader.load({\n                key: token\n              });\n            case 5:\n              if (!mapInstance) {\n                _context.next = 11;\n                break;\n              }\n              // If there's already a map instance, maybe not setting any other configurations\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getDiv();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n              _context.next = 18;\n              break;\n            case 11:\n              if (id) {\n                _context.next = 13;\n                break;\n              }\n              throw Error('No container id specified');\n            case 13:\n              mapContainer = DOM.getContainer(id);\n              map = new google.maps.Map(mapContainer, _objectSpread({\n                maxZoom: maxZoom,\n                minZoom: minZoom,\n                zoomControl: false,\n                fullscreenControl: false,\n                center: new google.maps.LatLng(center[1], center[0])\n              }, rest));\n              this.map = map;\n              this.$mapContainer = map.getDiv();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n            case 18:\n              // TODO: 拖动快的时候，事件失效\n              google.maps.event.addListener(this.map, 'drag', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'pan', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'rotate', this.handleCameraChanged);\n\n              // 空闲时间\n              google.maps.event.addListener(this.map, 'idle', this.handleCameraChanged);\n              google.maps.event.addListener(this.map, 'zoom_changed', this.handleCameraChanged);\n              this.handleCameraChanged();\n            case 24:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.map.setMap(null);\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {\n      // const container = this.map.getDiv();\n      // this.markerContainer = DOM.create('div', 'l7-marker-container', container);\n      // this.markerContainer.setAttribute('tabindex', '-1');\n      // this.markerContainer.style.zIndex = '2';\n    }\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.markerContainer;\n    }\n\n    // MapEvent\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      var _this2 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n      } else {\n        var onProxy = function onProxy(eventName) {\n          var cbProxyMap = _this2.evtCbProxyMap.get(eventName);\n          if (!cbProxyMap) {\n            _this2.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n          }\n          if (cbProxyMap.get(handle)) {\n            return;\n          }\n          var handleProxy = function handleProxy() {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n              args[0].lngLat = args[0].latlng || args[0].latLng;\n            }\n            handle.apply(void 0, args);\n          };\n          cbProxyMap.set(handle, handleProxy);\n          _this2.map.on(eventName, handleProxy);\n        };\n        if (Array.isArray(EventMap[type])) {\n          EventMap[type].forEach(function (eventName) {\n            onProxy(eventName || type);\n          });\n        } else {\n          onProxy(EventMap[type] || type);\n        }\n      }\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this3 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var offProxy = function offProxy(eventName) {\n        var _this3$evtCbProxyMap$, _this3$evtCbProxyMap$2;\n        var handleProxy = (_this3$evtCbProxyMap$ = _this3.evtCbProxyMap.get(type)) === null || _this3$evtCbProxyMap$ === void 0 ? void 0 : _this3$evtCbProxyMap$.get(handle);\n        if (!handleProxy) {\n          return;\n        }\n        (_this3$evtCbProxyMap$2 = _this3.evtCbProxyMap.get(eventName)) === null || _this3$evtCbProxyMap$2 === void 0 || _this3$evtCbProxyMap$2.delete(handle);\n        _this3.map.off(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(function (eventName) {\n          offProxy(eventName || type);\n        });\n      } else {\n        offProxy(EventMap[type] || type);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once() {\n      throw new Error('Method not implemented.');\n    }\n\n    // get dom\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.map.getDiv();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return [this.map.width, this.map.height];\n    }\n\n    // get map status method\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.map.transform._minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.map.transform._maxZoom;\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'googlemap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.map.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$map$getCenter = this.map.getCenter(),\n        lng = _this$map$getCenter.lng,\n        lat = _this$map$getCenter.lat;\n      return {\n        lng: lng(),\n        lat: lat()\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.map.getTilt();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var rotation = this.map.getHeading();\n      return rotation;\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      // TODO\n      // 官网解释：如果地图尚未初始化，或者尚未设置中心位置且未设置缩放，则结果为 undefine\n      var bounds = this.map.getBounds();\n      var ne = bounds === null || bounds === void 0 ? void 0 : bounds.getNorthEast();\n      var sw = bounds === null || bounds === void 0 ? void 0 : bounds.getSouthWest();\n      return [[sw.lng(), sw.lat()], [ne.lng(), ne.lat()]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.map.getDiv();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      var _this$map$getDiv;\n      return (_this$map$getDiv = this.map.getDiv()) === null || _this$map$getDiv === void 0 ? void 0 : _this$map$getDiv.getElementsByTagName('canvas')[0];\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(styleId) {\n      this.map.setMapStyleId(styleId);\n    }\n\n    // control with raw map\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.map.setHeading(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      var currentZoom = this.map.getZoom();\n      this.map.setZoom(currentZoom + 1);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      var currentZoom = this.map.getZoom();\n      this.map.setZoom(currentZoom - 1);\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.map.panTo({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.map.panBy(x, y);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      var _bound = _slicedToArray(bound, 2),\n        sw = _bound[0],\n        ne = _bound[1];\n      var bounds = new google.maps.LatLngBounds({\n        lat: sw[1],\n        lng: sw[0]\n      }, {\n        lat: ne[1],\n        lng: ne[0]\n      });\n      this.map.fitBounds(bounds, fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      this.map.setZoom(zoom);\n      this.map.setCenter({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        lng = _ref6[0],\n        lat = _ref6[1];\n      this.map.setCenter({\n        lat: lat,\n        lng: lng\n      });\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.map.setTilt(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this4 = this;\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            _this4.map.setOptions({\n              gestureHandling: option.doubleClickZoom ? 'auto' : 'none'\n            });\n            break;\n          case 'dragEnable':\n            _this4.map.setOptions({\n              draggable: option.dragEnable\n            });\n            break;\n          case 'rotateEnable':\n            // Google Map 默认支持旋转，无需额外设置\n            break;\n          case 'zoomEnable':\n            _this4.map.setOptions({\n              zoomControl: option.zoomEnable\n            });\n            break;\n          case 'keyboardEnable':\n          case 'resizeEnable':\n          case 'showIndoorMap':\n            throw Error('Options may not be supported');\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(_ref7, _ref8) {\n      var _ref9 = _slicedToArray(_ref7, 2),\n        centerLon = _ref9[0],\n        centerLat = _ref9[1];\n      var _ref10 = _slicedToArray(_ref8, 2),\n        outerLon = _ref10[0],\n        outerLat = _ref10[1];\n      // @ts-ignore\n      // https://developers.google.com/maps/documentation/javascript/reference/geometry?hl=zh-cn#spherical.computeDistanceBetween\n      var metreDistance = google.maps.geometry.spherical.computeDistanceBetween([new google.maps.LatLng(centerLat, centerLon), new google.maps.LatLng(outerLat, outerLon)]);\n      var _ref11 = this.lngLatToCoord([centerLon, centerLat]),\n        _ref12 = _slicedToArray(_ref11, 2),\n        x1 = _ref12[0],\n        y1 = _ref12[1];\n      var _ref13 = this.lngLatToCoord([outerLon, outerLat]),\n        _ref14 = _slicedToArray(_ref13, 2),\n        x2 = _ref14[0],\n        y2 = _ref14[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref15) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        x = _ref16[0],\n        y = _ref16[1];\n      var _this$map$getCenter2 = this.map.getCenter(),\n        clng = _this$map$getCenter2.lng,\n        clat = _this$map$getCenter2.lat;\n      var _this$lngLatToPixel = this.lngLatToPixel([clng(), clat()]),\n        centerPixelX = _this$lngLatToPixel.x,\n        centerPixelY = _this$lngLatToPixel.y;\n      var _this$lngLatToContain = this.lngLatToContainer([clng(), clat()]),\n        centerContainerX = _this$lngLatToContain.x,\n        centerContainerY = _this$lngLatToContain.y;\n      var _this$map$unprojectFr = this.map.unprojectFromContainer(new TMap.Point(centerContainerX + (x - centerPixelX), centerContainerY + (y - centerPixelY))),\n        lng = _this$map$unprojectFr.lng,\n        lat = _this$map$unprojectFr.lat;\n      return this.containerToLngLat([lng, lat]);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref17) {\n      var _ref18 = _slicedToArray(_ref17, 2),\n        lng = _ref18[0],\n        lat = _ref18[1];\n      var latLng = new google.maps.LatLng(lat, lng);\n      var point = this.map.getProjection().fromLatLngToPoint(latLng);\n      return {\n        x: point.x,\n        y: point.y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref19) {\n      var _this$map$getProjecti;\n      var _ref20 = _slicedToArray(_ref19, 2),\n        x = _ref20[0],\n        y = _ref20[1];\n      var pixelCoordinate = new google.maps.Point(x, y);\n      var lngLat = (_this$map$getProjecti = this.map.getProjection()) === null || _this$map$getProjecti === void 0 ? void 0 : _this$map$getProjecti.fromPointToLatLng(pixelCoordinate);\n      return {\n        lng: lngLat.lng(),\n        lat: lngLat.lat()\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref21) {\n      var _this$map$getProjecti2, _this$map$getProjecti3;\n      var _ref22 = _slicedToArray(_ref21, 2),\n        lng = _ref22[0],\n        lat = _ref22[1];\n      var latLng = new google.maps.LatLng(lat, lng);\n      var pixel = (_this$map$getProjecti2 = this.map.getProjection()) === null || _this$map$getProjecti2 === void 0 || (_this$map$getProjecti3 = _this$map$getProjecti2.fromLatLngToContainerPixel) === null || _this$map$getProjecti3 === void 0 ? void 0 : _this$map$getProjecti3.call(_this$map$getProjecti2, latLng);\n      return {\n        x: pixel.x,\n        y: pixel.y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref23) {\n      var _ref24 = _slicedToArray(_ref23, 2),\n        lng = _ref24[0],\n        lat = _ref24[1];\n      // TODO: Perhaps need to check the three.js coordinates\n      var _this$lngLatToPixel2 = this.lngLatToPixel([lng, lat]),\n        x = _this$lngLatToPixel2.x,\n        y = _this$lngLatToPixel2.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this5 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this5.lngLatToCoords(item) : _this5.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(lnglat, altitude) {\n      // Use built in mercator tools due to Tencent not provided related methods\n      var _MercatorCoordinate$f = MercatorCoordinate.fromLngLat(lnglat, altitude),\n        _MercatorCoordinate$f2 = _MercatorCoordinate$f.x,\n        x = _MercatorCoordinate$f2 === void 0 ? 0 : _MercatorCoordinate$f2,\n        _MercatorCoordinate$f3 = _MercatorCoordinate$f.y,\n        y = _MercatorCoordinate$f3 === void 0 ? 0 : _MercatorCoordinate$f3,\n        _MercatorCoordinate$f4 = _MercatorCoordinate$f.z,\n        z = _MercatorCoordinate$f4 === void 0 ? 0 : _MercatorCoordinate$f4;\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMapCanvasContainer();\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n\n    // Method on earth mode\n  }, {\n    key: \"rotateY\",\n    value: function rotateY() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getDiv();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'tmap-contianer--hide-logo');\n    }\n  }]);\n  return TMapService;\n}(BaseMapService);\nexport { TMapService as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}