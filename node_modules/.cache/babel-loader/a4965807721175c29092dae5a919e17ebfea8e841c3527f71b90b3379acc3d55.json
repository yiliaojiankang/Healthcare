{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport DOM from \"../utils/dom\";\nimport { Event } from \"./events/event\";\n\n/**\n * The `BoxZoomHandler` allows the user to zoom the map to fit within a bounding box.\n * The bounding box is defined by clicking and holding `shift` while dragging the cursor.\n */\nvar BoxZoomHandler = /*#__PURE__*/function () {\n  /**\n   * @private\n   */\n  function BoxZoomHandler(map, options) {\n    _classCallCheck(this, BoxZoomHandler);\n    this.map = map;\n    this.el = map.getCanvasContainer();\n    this.container = map.getContainer();\n    this.clickTolerance = options.clickTolerance || 1;\n  }\n\n  /**\n   * Returns a Boolean indicating whether the \"box zoom\" interaction is enabled.\n   *\n   * @returns {boolean} `true` if the \"box zoom\" interaction is enabled.\n   */\n  _createClass(BoxZoomHandler, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return !!this.enabled;\n    }\n\n    /**\n     * Returns a Boolean indicating whether the \"box zoom\" interaction is active, i.e. currently being used.\n     *\n     * @returns {boolean} `true` if the \"box zoom\" interaction is active.\n     */\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return !!this.active;\n    }\n\n    /**\n     * Enables the \"box zoom\" interaction.\n     *\n     * @example\n     *   map.boxZoom.enable();\n     */\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      if (this.isEnabled()) {\n        return;\n      }\n      this.enabled = true;\n    }\n\n    /**\n     * Disables the \"box zoom\" interaction.\n     *\n     * @example\n     *   map.boxZoom.disable();\n     */\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      if (!this.isEnabled()) {\n        return;\n      }\n      this.enabled = false;\n    }\n  }, {\n    key: \"mousedown\",\n    value: function mousedown(e, point) {\n      if (!this.isEnabled()) {\n        return;\n      }\n      if (!(e.shiftKey && e.button === 0)) {\n        return;\n      }\n      DOM.disableDrag();\n      this.startPos = this.lastPos = point;\n      this.active = true;\n    }\n  }, {\n    key: \"mousemoveWindow\",\n    value: function mousemoveWindow(e, point) {\n      if (!this.active) {\n        return;\n      }\n      var pos = point;\n      if (this.lastPos.equals(pos) || !this.box && pos.dist(this.startPos) < this.clickTolerance) {\n        return;\n      }\n      var p0 = this.startPos;\n      this.lastPos = pos;\n      if (!this.box) {\n        this.box = DOM.create('div', 'l7-boxzoom', this.container);\n        this.container.classList.add('l7-crosshair');\n        this.fireEvent('boxzoomstart', e);\n      }\n      var minX = Math.min(p0.x, pos.x);\n      var maxX = Math.max(p0.x, pos.x);\n      var minY = Math.min(p0.y, pos.y);\n      var maxY = Math.max(p0.y, pos.y);\n      DOM.setTransform(this.box, \"translate(\".concat(minX, \"px,\").concat(minY, \"px)\"));\n      if (this.box) {\n        this.box.style.width = \"\".concat(maxX - minX, \"px\");\n        this.box.style.height = \"\".concat(maxY - minY, \"px\");\n      }\n    }\n  }, {\n    key: \"mouseupWindow\",\n    value: function mouseupWindow(e, point) {\n      var _this = this;\n      if (!this.active) {\n        return;\n      }\n      if (e.button !== 0) {\n        return;\n      }\n      var p0 = this.startPos;\n      var p1 = point;\n      this.reset();\n      DOM.suppressClick();\n      if (p0.x === p1.x && p0.y === p1.y) {\n        this.fireEvent('boxzoomcancel', e);\n      } else {\n        this.map.emit('boxzoomend', new Event('boxzoomend', {\n          originalEvent: e\n        }));\n        return {\n          cameraAnimation: function cameraAnimation(map) {\n            return map.fitScreenCoordinates(p0, p1, _this.map.getBearing(), {\n              linear: true\n            });\n          }\n        };\n      }\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(e) {\n      if (!this.active) {\n        return;\n      }\n      if (e.keyCode === 27) {\n        this.reset();\n        this.fireEvent('boxzoomcancel', e);\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      this.container.classList.remove('l7-crosshair');\n      if (this.box) {\n        DOM.remove(this.box);\n        this.box = null;\n      }\n      DOM.enableDrag();\n      // @ts-ignore\n      delete this.startPos;\n      // @ts-ignore\n      delete this.lastPos;\n    }\n  }, {\n    key: \"fireEvent\",\n    value: function fireEvent(type, e) {\n      return this.map.emit(type, new Event(type, {\n        originalEvent: e\n      }));\n    }\n  }]);\n  return BoxZoomHandler;\n}();\nexport default BoxZoomHandler;","map":{"version":3,"names":["_classCallCheck","_createClass","DOM","Event","BoxZoomHandler","map","options","el","getCanvasContainer","container","getContainer","clickTolerance","key","value","isEnabled","enabled","isActive","active","enable","disable","mousedown","e","point","shiftKey","button","disableDrag","startPos","lastPos","mousemoveWindow","pos","equals","box","dist","p0","create","classList","add","fireEvent","minX","Math","min","x","maxX","max","minY","y","maxY","setTransform","concat","style","width","height","mouseupWindow","_this","p1","reset","suppressClick","emit","originalEvent","cameraAnimation","fitScreenCoordinates","getBearing","linear","keydown","keyCode","remove","enableDrag","type"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/handler/box_zoom.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport DOM from \"../utils/dom\";\nimport { Event } from \"./events/event\";\n\n/**\n * The `BoxZoomHandler` allows the user to zoom the map to fit within a bounding box.\n * The bounding box is defined by clicking and holding `shift` while dragging the cursor.\n */\nvar BoxZoomHandler = /*#__PURE__*/function () {\n  /**\n   * @private\n   */\n  function BoxZoomHandler(map, options) {\n    _classCallCheck(this, BoxZoomHandler);\n    this.map = map;\n    this.el = map.getCanvasContainer();\n    this.container = map.getContainer();\n    this.clickTolerance = options.clickTolerance || 1;\n  }\n\n  /**\n   * Returns a Boolean indicating whether the \"box zoom\" interaction is enabled.\n   *\n   * @returns {boolean} `true` if the \"box zoom\" interaction is enabled.\n   */\n  _createClass(BoxZoomHandler, [{\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return !!this.enabled;\n    }\n\n    /**\n     * Returns a Boolean indicating whether the \"box zoom\" interaction is active, i.e. currently being used.\n     *\n     * @returns {boolean} `true` if the \"box zoom\" interaction is active.\n     */\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return !!this.active;\n    }\n\n    /**\n     * Enables the \"box zoom\" interaction.\n     *\n     * @example\n     *   map.boxZoom.enable();\n     */\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      if (this.isEnabled()) {\n        return;\n      }\n      this.enabled = true;\n    }\n\n    /**\n     * Disables the \"box zoom\" interaction.\n     *\n     * @example\n     *   map.boxZoom.disable();\n     */\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      if (!this.isEnabled()) {\n        return;\n      }\n      this.enabled = false;\n    }\n  }, {\n    key: \"mousedown\",\n    value: function mousedown(e, point) {\n      if (!this.isEnabled()) {\n        return;\n      }\n      if (!(e.shiftKey && e.button === 0)) {\n        return;\n      }\n      DOM.disableDrag();\n      this.startPos = this.lastPos = point;\n      this.active = true;\n    }\n  }, {\n    key: \"mousemoveWindow\",\n    value: function mousemoveWindow(e, point) {\n      if (!this.active) {\n        return;\n      }\n      var pos = point;\n      if (this.lastPos.equals(pos) || !this.box && pos.dist(this.startPos) < this.clickTolerance) {\n        return;\n      }\n      var p0 = this.startPos;\n      this.lastPos = pos;\n      if (!this.box) {\n        this.box = DOM.create('div', 'l7-boxzoom', this.container);\n        this.container.classList.add('l7-crosshair');\n        this.fireEvent('boxzoomstart', e);\n      }\n      var minX = Math.min(p0.x, pos.x);\n      var maxX = Math.max(p0.x, pos.x);\n      var minY = Math.min(p0.y, pos.y);\n      var maxY = Math.max(p0.y, pos.y);\n      DOM.setTransform(this.box, \"translate(\".concat(minX, \"px,\").concat(minY, \"px)\"));\n      if (this.box) {\n        this.box.style.width = \"\".concat(maxX - minX, \"px\");\n        this.box.style.height = \"\".concat(maxY - minY, \"px\");\n      }\n    }\n  }, {\n    key: \"mouseupWindow\",\n    value: function mouseupWindow(e, point) {\n      var _this = this;\n      if (!this.active) {\n        return;\n      }\n      if (e.button !== 0) {\n        return;\n      }\n      var p0 = this.startPos;\n      var p1 = point;\n      this.reset();\n      DOM.suppressClick();\n      if (p0.x === p1.x && p0.y === p1.y) {\n        this.fireEvent('boxzoomcancel', e);\n      } else {\n        this.map.emit('boxzoomend', new Event('boxzoomend', {\n          originalEvent: e\n        }));\n        return {\n          cameraAnimation: function cameraAnimation(map) {\n            return map.fitScreenCoordinates(p0, p1, _this.map.getBearing(), {\n              linear: true\n            });\n          }\n        };\n      }\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(e) {\n      if (!this.active) {\n        return;\n      }\n      if (e.keyCode === 27) {\n        this.reset();\n        this.fireEvent('boxzoomcancel', e);\n      }\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      this.container.classList.remove('l7-crosshair');\n      if (this.box) {\n        DOM.remove(this.box);\n        this.box = null;\n      }\n      DOM.enableDrag();\n      // @ts-ignore\n      delete this.startPos;\n      // @ts-ignore\n      delete this.lastPos;\n    }\n  }, {\n    key: \"fireEvent\",\n    value: function fireEvent(type, e) {\n      return this.map.emit(type, new Event(type, {\n        originalEvent: e\n      }));\n    }\n  }]);\n  return BoxZoomHandler;\n}();\nexport default BoxZoomHandler;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}