{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _dec, _class;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { EventEmitter } from 'eventemitter3';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { buildIconMaping } from \"../../utils/font_util\";\nvar BUFFER = 3;\nvar MAX_CANVAS_WIDTH = 1024;\nvar imageSize = 64;\nvar IconService = (_dec = injectable(), _dec(_class = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(IconService, _EventEmitter);\n  var _super = _createSuper(IconService);\n  function IconService() {\n    var _this;\n    _classCallCheck(this, IconService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"canvasHeight\", 128);\n    _defineProperty(_assertThisInitialized(_this), \"texture\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"canvas\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"iconData\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"iconMap\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"ctx\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"loadingImageCount\", 0);\n    return _this;\n  }\n  _createClass(IconService, [{\n    key: \"isLoading\",\n    value: function isLoading() {\n      return this.loadingImageCount === 0;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.iconData = [];\n      this.iconMap = {};\n      this.canvas = window.document.createElement('canvas');\n      this.canvas.width = 128;\n      this.canvas.height = 128;\n      this.ctx = this.canvas.getContext('2d');\n    }\n  }, {\n    key: \"addImage\",\n    value: function () {\n      var _addImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, image) {\n        var imagedata, iconImage;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              imagedata = new Image();\n              this.loadingImageCount++;\n              if (this.hasImage(id)) {\n                console.warn('Image Id already exists');\n              } else {\n                this.iconData.push({\n                  id: id,\n                  size: imageSize\n                });\n              }\n              this.updateIconMap(); // 先存储 ID，\n              _context.next = 6;\n              return this.loadImage(image);\n            case 6:\n              imagedata = _context.sent;\n              iconImage = this.iconData.find(function (icon) {\n                return icon.id === id;\n              });\n              if (iconImage) {\n                iconImage.image = imagedata;\n                iconImage.width = imagedata.width;\n                iconImage.height = imagedata.height;\n              }\n              this.update();\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function addImage(_x, _x2) {\n        return _addImage.apply(this, arguments);\n      }\n      return addImage;\n    }()\n    /**\n     * 适配小程序\n     * @param id\n     * @param image\n     * @param sceneService\n     */\n  }, {\n    key: \"addImageMini\",\n    value: function addImageMini(id, image, sceneService) {\n      var _this2 = this;\n      var canvas = sceneService.getSceneConfig().canvas;\n      // @ts-ignore\n      var imagedata = canvas.createImage();\n      this.loadingImageCount++;\n      if (this.hasImage(id)) {\n        throw new Error('Image Id already exists');\n      }\n      this.iconData.push({\n        id: id,\n        size: imageSize\n      });\n      this.updateIconMap();\n      this.loadImageMini(image, canvas).then(function (img) {\n        imagedata = img;\n        var iconImage = _this2.iconData.find(function (icon) {\n          return icon.id === id;\n        });\n        if (iconImage) {\n          iconImage.image = imagedata;\n          iconImage.width = imagedata.width;\n          iconImage.height = imagedata.height;\n        }\n        _this2.update();\n      });\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture() {\n      return this.texture;\n    }\n  }, {\n    key: \"getIconMap\",\n    value: function getIconMap() {\n      return this.iconMap;\n    }\n  }, {\n    key: \"getCanvas\",\n    value: function getCanvas() {\n      return this.canvas;\n    }\n  }, {\n    key: \"hasImage\",\n    value: function hasImage(id) {\n      return this.iconMap.hasOwnProperty(id);\n    }\n  }, {\n    key: \"removeImage\",\n    value: function removeImage(id) {\n      if (this.hasImage(id)) {\n        this.iconData = this.iconData.filter(function (icon) {\n          return icon.id !== id;\n        });\n        delete this.iconMap[id];\n        this.update();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // 在销毁的时候清除所有注册的监听\n      this.removeAllListeners('imageUpdate');\n      this.iconData = [];\n      this.iconMap = {};\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(url) {\n      return new Promise(function (resolve, reject) {\n        if (url instanceof HTMLImageElement) {\n          resolve(url);\n          return;\n        }\n        var image = new Image();\n        image.crossOrigin = 'anonymous';\n        image.onload = function () {\n          resolve(image);\n        };\n        image.onerror = function () {\n          reject(new Error('Could not load image at ' + url));\n        };\n        image.src = url instanceof File ? URL.createObjectURL(url) : url;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.updateIconMap();\n      this.updateIconAtlas();\n      this.loadingImageCount--;\n      if (this.loadingImageCount === 0) {\n        this.emit('imageUpdate');\n      }\n    }\n\n    /**\n     * 将新增的 icon 图像存储到画布上（正方形）\n     */\n  }, {\n    key: \"updateIconAtlas\",\n    value: function updateIconAtlas() {\n      var _this3 = this;\n      this.canvas.width = MAX_CANVAS_WIDTH;\n      this.canvas.height = this.canvasHeight;\n      Object.keys(this.iconMap).forEach(function (item) {\n        var _this3$iconMap$item = _this3.iconMap[item],\n          x = _this3$iconMap$item.x,\n          y = _this3$iconMap$item.y,\n          image = _this3$iconMap$item.image,\n          _this3$iconMap$item$w = _this3$iconMap$item.width,\n          width = _this3$iconMap$item$w === void 0 ? 64 : _this3$iconMap$item$w,\n          _this3$iconMap$item$h = _this3$iconMap$item.height,\n          height = _this3$iconMap$item$h === void 0 ? 64 : _this3$iconMap$item$h;\n        var max = Math.max(width, height);\n        var ratio = max / imageSize;\n        var drawHeight = height / ratio;\n        var drawWidth = width / ratio;\n        if (image) {\n          _this3.ctx.drawImage(image, x + (imageSize - drawWidth) / 2, y + (imageSize - drawHeight) / 2, drawWidth, drawHeight);\n        }\n      });\n    }\n\n    /**\n     * 计算 icon 在画布上的排布（是否需要换行）\n     */\n  }, {\n    key: \"updateIconMap\",\n    value: function updateIconMap() {\n      var _buildIconMaping = buildIconMaping(this.iconData, BUFFER, MAX_CANVAS_WIDTH),\n        mapping = _buildIconMaping.mapping,\n        canvasHeight = _buildIconMaping.canvasHeight;\n      this.iconMap = mapping;\n      this.canvasHeight = canvasHeight;\n    }\n\n    /**\n     * 适配小程序\n     * @param url\n     * @returns\n     */\n  }, {\n    key: \"loadImageMini\",\n    value: function loadImageMini(url, canvas) {\n      return new Promise(function (resolve, reject) {\n        // @ts-ignore\n        var image = canvas.createImage();\n        image.crossOrigin = 'anonymous';\n        image.onload = function () {\n          resolve(image);\n        };\n        image.onerror = function () {\n          reject(new Error('Could not load image at ' + url));\n        };\n        image.src = url;\n      });\n    }\n  }]);\n  return IconService;\n}(EventEmitter)) || _class);\nexport { IconService as default };","map":{"version":3,"names":["_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_dec","_class","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","EventEmitter","injectable","buildIconMaping","BUFFER","MAX_CANVAS_WIDTH","imageSize","IconService","_EventEmitter","_super","_this","_len","length","args","Array","_key","concat","key","value","isLoading","loadingImageCount","init","iconData","iconMap","canvas","window","document","createElement","width","height","ctx","getContext","_addImage","mark","_callee","id","image","imagedata","iconImage","wrap","_callee$","_context","prev","next","Image","hasImage","console","warn","push","size","updateIconMap","loadImage","sent","find","icon","update","stop","addImage","_x","_x2","addImageMini","sceneService","_this2","getSceneConfig","createImage","Error","loadImageMini","then","img","getTexture","texture","getIconMap","getCanvas","hasOwnProperty","removeImage","filter","destroy","removeAllListeners","url","Promise","resolve","reject","HTMLImageElement","crossOrigin","onload","onerror","src","File","URL","createObjectURL","updateIconAtlas","emit","_this3","canvasHeight","Object","keys","forEach","item","_this3$iconMap$item","x","y","_this3$iconMap$item$w","_this3$iconMap$item$h","max","Math","ratio","drawHeight","drawWidth","drawImage","_buildIconMaping","mapping","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-core/es/services/asset/IconService.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _dec, _class;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { EventEmitter } from 'eventemitter3';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { buildIconMaping } from \"../../utils/font_util\";\nvar BUFFER = 3;\nvar MAX_CANVAS_WIDTH = 1024;\nvar imageSize = 64;\nvar IconService = (_dec = injectable(), _dec(_class = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(IconService, _EventEmitter);\n  var _super = _createSuper(IconService);\n  function IconService() {\n    var _this;\n    _classCallCheck(this, IconService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"canvasHeight\", 128);\n    _defineProperty(_assertThisInitialized(_this), \"texture\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"canvas\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"iconData\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"iconMap\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"ctx\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"loadingImageCount\", 0);\n    return _this;\n  }\n  _createClass(IconService, [{\n    key: \"isLoading\",\n    value: function isLoading() {\n      return this.loadingImageCount === 0;\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.iconData = [];\n      this.iconMap = {};\n      this.canvas = window.document.createElement('canvas');\n      this.canvas.width = 128;\n      this.canvas.height = 128;\n      this.ctx = this.canvas.getContext('2d');\n    }\n  }, {\n    key: \"addImage\",\n    value: function () {\n      var _addImage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id, image) {\n        var imagedata, iconImage;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              imagedata = new Image();\n              this.loadingImageCount++;\n              if (this.hasImage(id)) {\n                console.warn('Image Id already exists');\n              } else {\n                this.iconData.push({\n                  id: id,\n                  size: imageSize\n                });\n              }\n              this.updateIconMap(); // 先存储 ID，\n              _context.next = 6;\n              return this.loadImage(image);\n            case 6:\n              imagedata = _context.sent;\n              iconImage = this.iconData.find(function (icon) {\n                return icon.id === id;\n              });\n              if (iconImage) {\n                iconImage.image = imagedata;\n                iconImage.width = imagedata.width;\n                iconImage.height = imagedata.height;\n              }\n              this.update();\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function addImage(_x, _x2) {\n        return _addImage.apply(this, arguments);\n      }\n      return addImage;\n    }()\n    /**\n     * 适配小程序\n     * @param id\n     * @param image\n     * @param sceneService\n     */\n  }, {\n    key: \"addImageMini\",\n    value: function addImageMini(id, image, sceneService) {\n      var _this2 = this;\n      var canvas = sceneService.getSceneConfig().canvas;\n      // @ts-ignore\n      var imagedata = canvas.createImage();\n      this.loadingImageCount++;\n      if (this.hasImage(id)) {\n        throw new Error('Image Id already exists');\n      }\n      this.iconData.push({\n        id: id,\n        size: imageSize\n      });\n      this.updateIconMap();\n      this.loadImageMini(image, canvas).then(function (img) {\n        imagedata = img;\n        var iconImage = _this2.iconData.find(function (icon) {\n          return icon.id === id;\n        });\n        if (iconImage) {\n          iconImage.image = imagedata;\n          iconImage.width = imagedata.width;\n          iconImage.height = imagedata.height;\n        }\n        _this2.update();\n      });\n    }\n  }, {\n    key: \"getTexture\",\n    value: function getTexture() {\n      return this.texture;\n    }\n  }, {\n    key: \"getIconMap\",\n    value: function getIconMap() {\n      return this.iconMap;\n    }\n  }, {\n    key: \"getCanvas\",\n    value: function getCanvas() {\n      return this.canvas;\n    }\n  }, {\n    key: \"hasImage\",\n    value: function hasImage(id) {\n      return this.iconMap.hasOwnProperty(id);\n    }\n  }, {\n    key: \"removeImage\",\n    value: function removeImage(id) {\n      if (this.hasImage(id)) {\n        this.iconData = this.iconData.filter(function (icon) {\n          return icon.id !== id;\n        });\n        delete this.iconMap[id];\n        this.update();\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      // 在销毁的时候清除所有注册的监听\n      this.removeAllListeners('imageUpdate');\n      this.iconData = [];\n      this.iconMap = {};\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(url) {\n      return new Promise(function (resolve, reject) {\n        if (url instanceof HTMLImageElement) {\n          resolve(url);\n          return;\n        }\n        var image = new Image();\n        image.crossOrigin = 'anonymous';\n        image.onload = function () {\n          resolve(image);\n        };\n        image.onerror = function () {\n          reject(new Error('Could not load image at ' + url));\n        };\n        image.src = url instanceof File ? URL.createObjectURL(url) : url;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      this.updateIconMap();\n      this.updateIconAtlas();\n      this.loadingImageCount--;\n      if (this.loadingImageCount === 0) {\n        this.emit('imageUpdate');\n      }\n    }\n\n    /**\n     * 将新增的 icon 图像存储到画布上（正方形）\n     */\n  }, {\n    key: \"updateIconAtlas\",\n    value: function updateIconAtlas() {\n      var _this3 = this;\n      this.canvas.width = MAX_CANVAS_WIDTH;\n      this.canvas.height = this.canvasHeight;\n      Object.keys(this.iconMap).forEach(function (item) {\n        var _this3$iconMap$item = _this3.iconMap[item],\n          x = _this3$iconMap$item.x,\n          y = _this3$iconMap$item.y,\n          image = _this3$iconMap$item.image,\n          _this3$iconMap$item$w = _this3$iconMap$item.width,\n          width = _this3$iconMap$item$w === void 0 ? 64 : _this3$iconMap$item$w,\n          _this3$iconMap$item$h = _this3$iconMap$item.height,\n          height = _this3$iconMap$item$h === void 0 ? 64 : _this3$iconMap$item$h;\n        var max = Math.max(width, height);\n        var ratio = max / imageSize;\n        var drawHeight = height / ratio;\n        var drawWidth = width / ratio;\n        if (image) {\n          _this3.ctx.drawImage(image, x + (imageSize - drawWidth) / 2, y + (imageSize - drawHeight) / 2, drawWidth, drawHeight);\n        }\n      });\n    }\n\n    /**\n     * 计算 icon 在画布上的排布（是否需要换行）\n     */\n  }, {\n    key: \"updateIconMap\",\n    value: function updateIconMap() {\n      var _buildIconMaping = buildIconMaping(this.iconData, BUFFER, MAX_CANVAS_WIDTH),\n        mapping = _buildIconMaping.mapping,\n        canvasHeight = _buildIconMaping.canvasHeight;\n      this.iconMap = mapping;\n      this.canvasHeight = canvasHeight;\n    }\n\n    /**\n     * 适配小程序\n     * @param url\n     * @returns\n     */\n  }, {\n    key: \"loadImageMini\",\n    value: function loadImageMini(url, canvas) {\n      return new Promise(function (resolve, reject) {\n        // @ts-ignore\n        var image = canvas.createImage();\n        image.crossOrigin = 'anonymous';\n        image.onload = function () {\n          resolve(image);\n        };\n        image.onerror = function () {\n          reject(new Error('Could not load image at ' + url));\n        };\n        image.src = url;\n      });\n    }\n  }]);\n  return IconService;\n}(EventEmitter)) || _class);\nexport { IconService as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}