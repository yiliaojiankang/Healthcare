{"ast":null,"code":"import { __spreadArray } from \"tslib\";\nimport { isString } from '@antv/util';\nimport { traverseTree } from './graphic';\n/**\n * 验证关系图或树图数据的合法性，必须符合以下规则才会渲染图：\n * 1. 必须传入数据\n * 2. 节点的 ID 必须为字符串，暂不支持数字类型，如果支持数字类型，会出现类似 123 与 '123' 是否相等的问题\n * 3. 边的 source 和 target 值必须在节点 ID 中存在\n * @param data 关系图或树图数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\nexport var dataValidation = function dataValidation(data) {\n  // 1. 必须传入数据\n  if (!data) {\n    console.error('G6 Error Tips: the data must be defined');\n    return false;\n  }\n  // 2. 节点的 ID 必须为字符串或数字类型\n  var nodes = data.nodes,\n    edges = data.edges,\n    _a = data.combos,\n    combos = _a === void 0 ? [] : _a;\n  if (!nodes && !edges) {\n    var validated_1 = true;\n    // 不存在 nodes 和 edges，则说明是 TreeGraphData，按 TreeGraphData 规则验证\n    traverseTree(data, function (param) {\n      if (!isString(param.id)) {\n        validated_1 = false;\n        return false;\n      }\n      return true;\n    });\n    return validated_1;\n  }\n  var nonNode = (nodes || []).find(function (node) {\n    return !isString(node.id);\n  });\n  if (nonNode) {\n    console.warn(\"G6 Warning Tips: missing 'id' property, or %c\".concat(nonNode.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n    return false;\n  }\n  // 3. 边的 source 和 target 必须存在于节点 或 Combo中\n  var nodeIds = (nodes || []).map(function (node) {\n    return node.id;\n  });\n  var comboIds = combos === null || combos === void 0 ? void 0 : combos.map(function (combo) {\n    return combo.id;\n  });\n  var ids = __spreadArray(__spreadArray([], nodeIds, true), comboIds, true);\n  var nonEdges = (edges || []).find(function (edge) {\n    return !ids.includes(edge.source) || !ids.includes(edge.target);\n  });\n  if (nonEdges) {\n    console.warn(\"G6 Warning Tips: The source %c\".concat(nonEdges.source, \"%c or the target %c\").concat(nonEdges.target, \"%c of the edge do not exist in the nodes or combos.\"), 'font-size: 20px; color: red;', '', 'font-size: 20px; color: red;', '');\n    return false;\n  }\n  return true;\n};\n/**\n * 验证添加节点、边或从combo时的数据\n * @param type 节点、边或从combo\n * @param data 添加的单条数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\nexport var singleDataValidation = function singleDataValidation(type, data) {\n  if (type === 'node' || type === 'combo') {\n    // 必须有 id 字段，且id必须为字符串类型\n    if (data.id && !isString(data.id)) {\n      console.warn(\"G6 Warning Tips: missing 'id' property, or the 'id' %c\".concat(data.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n      return false;\n    }\n  } else if (type === 'edge') {\n    // 必须有 source 和 target 字段\n    if (!data.source || !data.target) {\n      console.warn(\"G6 Warning Tips: missing 'source' or 'target' for the edge.\");\n      return false;\n    }\n  }\n  return true;\n};","map":{"version":3,"names":["__spreadArray","isString","traverseTree","dataValidation","data","console","error","nodes","edges","_a","combos","validated_1","param","id","nonNode","find","node","warn","concat","nodeIds","map","comboIds","combo","ids","nonEdges","edge","includes","source","target","singleDataValidation","type"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-core/es/util/validation.js"],"sourcesContent":["import { __spreadArray } from \"tslib\";\nimport { isString } from '@antv/util';\nimport { traverseTree } from './graphic';\n/**\n * 验证关系图或树图数据的合法性，必须符合以下规则才会渲染图：\n * 1. 必须传入数据\n * 2. 节点的 ID 必须为字符串，暂不支持数字类型，如果支持数字类型，会出现类似 123 与 '123' 是否相等的问题\n * 3. 边的 source 和 target 值必须在节点 ID 中存在\n * @param data 关系图或树图数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\nexport var dataValidation = function dataValidation(data) {\n  // 1. 必须传入数据\n  if (!data) {\n    console.error('G6 Error Tips: the data must be defined');\n    return false;\n  }\n  // 2. 节点的 ID 必须为字符串或数字类型\n  var nodes = data.nodes,\n    edges = data.edges,\n    _a = data.combos,\n    combos = _a === void 0 ? [] : _a;\n  if (!nodes && !edges) {\n    var validated_1 = true;\n    // 不存在 nodes 和 edges，则说明是 TreeGraphData，按 TreeGraphData 规则验证\n    traverseTree(data, function (param) {\n      if (!isString(param.id)) {\n        validated_1 = false;\n        return false;\n      }\n      return true;\n    });\n    return validated_1;\n  }\n  var nonNode = (nodes || []).find(function (node) {\n    return !isString(node.id);\n  });\n  if (nonNode) {\n    console.warn(\"G6 Warning Tips: missing 'id' property, or %c\".concat(nonNode.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n    return false;\n  }\n  // 3. 边的 source 和 target 必须存在于节点 或 Combo中\n  var nodeIds = (nodes || []).map(function (node) {\n    return node.id;\n  });\n  var comboIds = combos === null || combos === void 0 ? void 0 : combos.map(function (combo) {\n    return combo.id;\n  });\n  var ids = __spreadArray(__spreadArray([], nodeIds, true), comboIds, true);\n  var nonEdges = (edges || []).find(function (edge) {\n    return !ids.includes(edge.source) || !ids.includes(edge.target);\n  });\n  if (nonEdges) {\n    console.warn(\"G6 Warning Tips: The source %c\".concat(nonEdges.source, \"%c or the target %c\").concat(nonEdges.target, \"%c of the edge do not exist in the nodes or combos.\"), 'font-size: 20px; color: red;', '', 'font-size: 20px; color: red;', '');\n    return false;\n  }\n  return true;\n};\n/**\n * 验证添加节点、边或从combo时的数据\n * @param type 节点、边或从combo\n * @param data 添加的单条数据\n * @return boolean 全部验证通过返回 true，否则返回 false\n */\nexport var singleDataValidation = function singleDataValidation(type, data) {\n  if (type === 'node' || type === 'combo') {\n    // 必须有 id 字段，且id必须为字符串类型\n    if (data.id && !isString(data.id)) {\n      console.warn(\"G6 Warning Tips: missing 'id' property, or the 'id' %c\".concat(data.id, \"%c is not a string.\"), 'font-size: 20px; color: red;', '');\n      return false;\n    }\n  } else if (type === 'edge') {\n    // 必须有 source 和 target 字段\n    if (!data.source || !data.target) {\n      console.warn(\"G6 Warning Tips: missing 'source' or 'target' for the edge.\");\n      return false;\n    }\n  }\n  return true;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}