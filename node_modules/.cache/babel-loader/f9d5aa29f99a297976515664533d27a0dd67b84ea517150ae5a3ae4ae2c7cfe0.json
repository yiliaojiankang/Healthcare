{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\nfunction xrange(n, exception) {\n  let range = [];\n  for (let i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\nfunction dependenciesOneRow(error, matrix, index, thresholdValue = 10e-10, thresholdError = 10e-10) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    let returnArray = matrix.addRow(index, [0]);\n    for (let i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\nexport function linearDependencies(matrix, options = {}) {\n  const {\n    thresholdValue = 10e-10,\n    thresholdError = 10e-10\n  } = options;\n  matrix = Matrix.checkMatrix(matrix);\n  let n = matrix.rows;\n  let results = new Matrix(n, n);\n  for (let i = 0; i < n; i++) {\n    let b = Matrix.columnVector(matrix.getRow(i));\n    let Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    let svd = new SingularValueDecomposition(Abis);\n    let x = svd.solve(b);\n    let error = Matrix.sub(b, Abis.mmul(x)).abs().max();\n    results.setRow(i, dependenciesOneRow(error, x, i, thresholdValue, thresholdError));\n  }\n  return results;\n}","map":{"version":3,"names":["SingularValueDecomposition","Matrix","xrange","n","exception","range","i","push","dependenciesOneRow","error","matrix","index","thresholdValue","thresholdError","Array","rows","fill","returnArray","addRow","Math","abs","get","set","to1DArray","linearDependencies","options","checkMatrix","results","b","columnVector","getRow","Abis","subMatrixRow","transpose","svd","x","solve","sub","mmul","max","setRow"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/layout/node_modules/ml-matrix/src/linearDependencies.js"],"sourcesContent":["import SingularValueDecomposition from './dc/svd';\nimport Matrix from './matrix';\n\nfunction xrange(n, exception) {\n  let range = [];\n  for (let i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\n\nfunction dependenciesOneRow(\n  error,\n  matrix,\n  index,\n  thresholdValue = 10e-10,\n  thresholdError = 10e-10,\n) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    let returnArray = matrix.addRow(index, [0]);\n    for (let i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\n\nexport function linearDependencies(matrix, options = {}) {\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\n  matrix = Matrix.checkMatrix(matrix);\n\n  let n = matrix.rows;\n  let results = new Matrix(n, n);\n\n  for (let i = 0; i < n; i++) {\n    let b = Matrix.columnVector(matrix.getRow(i));\n    let Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    let svd = new SingularValueDecomposition(Abis);\n    let x = svd.solve(b);\n    let error = Matrix.sub(b, Abis.mmul(x)).abs().max();\n    results.setRow(\n      i,\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError),\n    );\n  }\n  return results;\n}\n"],"mappings":";AAAA,OAAOA,0BAA0B,MAAM,UAAU;AACjD,OAAOC,MAAM,MAAM,UAAU;AAE7B,SAASC,MAAMA,CAACC,CAAC,EAAEC,SAAS,EAAE;EAC5B,IAAIC,KAAK,GAAG,EAAE;EACd,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,CAAC,EAAEG,CAAC,EAAE,EAAE;IAC1B,IAAIA,CAAC,KAAKF,SAAS,EAAE;MACnBC,KAAK,CAACE,IAAI,CAACD,CAAC,CAAC;IACf;EACF;EACA,OAAOD,KAAK;AACd;AAEA,SAASG,kBAAkBA,CACzBC,KAAK,EACLC,MAAM,EACNC,KAAK,EACLC,cAAc,GAAG,MAAM,EACvBC,cAAc,GAAG,MAAM,EACvB;EACA,IAAIJ,KAAK,GAAGI,cAAc,EAAE;IAC1B,OAAO,IAAIC,KAAK,CAACJ,MAAM,CAACK,IAAI,GAAG,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC3C,CAAC,MAAM;IACL,IAAIC,WAAW,GAAGP,MAAM,CAACQ,MAAM,CAACP,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;IAC3C,KAAK,IAAIL,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGW,WAAW,CAACF,IAAI,EAAET,CAAC,EAAE,EAAE;MACzC,IAAIa,IAAI,CAACC,GAAG,CAACH,WAAW,CAACI,GAAG,CAACf,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGM,cAAc,EAAE;QACpDK,WAAW,CAACK,GAAG,CAAChB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;MAC1B;IACF;IACA,OAAOW,WAAW,CAACM,SAAS,CAAC,CAAC;EAChC;AACF;AAEA,OAAO,SAASC,kBAAkBA,CAACd,MAAM,EAAEe,OAAO,GAAG,CAAC,CAAC,EAAE;EACvD,MAAM;IAAEb,cAAc,GAAG,MAAM;IAAEC,cAAc,GAAG;EAAO,CAAC,GAAGY,OAAO;EACpEf,MAAM,GAAGT,MAAM,CAACyB,WAAW,CAAChB,MAAM,CAAC;EAEnC,IAAIP,CAAC,GAAGO,MAAM,CAACK,IAAI;EACnB,IAAIY,OAAO,GAAG,IAAI1B,MAAM,CAACE,CAAC,EAAEA,CAAC,CAAC;EAE9B,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,CAAC,EAAEG,CAAC,EAAE,EAAE;IAC1B,IAAIsB,CAAC,GAAG3B,MAAM,CAAC4B,YAAY,CAACnB,MAAM,CAACoB,MAAM,CAACxB,CAAC,CAAC,CAAC;IAC7C,IAAIyB,IAAI,GAAGrB,MAAM,CAACsB,YAAY,CAAC9B,MAAM,CAACC,CAAC,EAAEG,CAAC,CAAC,CAAC,CAAC2B,SAAS,CAAC,CAAC;IACxD,IAAIC,GAAG,GAAG,IAAIlC,0BAA0B,CAAC+B,IAAI,CAAC;IAC9C,IAAII,CAAC,GAAGD,GAAG,CAACE,KAAK,CAACR,CAAC,CAAC;IACpB,IAAInB,KAAK,GAAGR,MAAM,CAACoC,GAAG,CAACT,CAAC,EAAEG,IAAI,CAACO,IAAI,CAACH,CAAC,CAAC,CAAC,CAACf,GAAG,CAAC,CAAC,CAACmB,GAAG,CAAC,CAAC;IACnDZ,OAAO,CAACa,MAAM,CACZlC,CAAC,EACDE,kBAAkB,CAACC,KAAK,EAAE0B,CAAC,EAAE7B,CAAC,EAAEM,cAAc,EAAEC,cAAc,CAChE,CAAC;EACH;EACA,OAAOc,OAAO;AAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}