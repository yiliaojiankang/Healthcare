{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\n/**\n * adaptor for regl.Framebuffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#framebuffers\n */\nvar ReglFramebuffer = /*#__PURE__*/function () {\n  function ReglFramebuffer(reGl, options) {\n    _classCallCheck(this, ReglFramebuffer);\n    this.framebuffer = void 0;\n    var width = options.width,\n      height = options.height,\n      color = options.color,\n      colors = options.colors,\n      depth = options.depth,\n      stencil = options.stencil;\n    var framebufferOptions = {\n      width: width,\n      height: height\n    };\n    if (Array.isArray(colors)) {\n      framebufferOptions.colors = colors.map(function (c) {\n        return c.get();\n      });\n    }\n    if (color && typeof color !== 'boolean') {\n      framebufferOptions.color = color.get();\n    }\n\n    // TODO: depth & stencil\n\n    this.framebuffer = reGl.framebuffer(framebufferOptions);\n  }\n  _createClass(ReglFramebuffer, [{\n    key: \"get\",\n    value: function get() {\n      return this.framebuffer;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.framebuffer.destroy();\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var width = _ref.width,\n        height = _ref.height;\n      this.framebuffer.resize(width, height);\n    }\n  }]);\n  return ReglFramebuffer;\n}();\nexport { ReglFramebuffer as default };","map":{"version":3,"names":["ReglFramebuffer","reGl","options","_classCallCheck","framebuffer","width","height","color","colors","depth","stencil","framebufferOptions","Array","isArray","map","c","get","_createClass","key","value","destroy","resize","_ref","default"],"sources":["../../src/webgl/ReglFramebuffer.ts"],"sourcesContent":["import {\n  gl,\n  IFramebuffer,\n  IFramebufferInitializationOptions,\n  IRenderbuffer,\n  ITexture2D,\n} from '@antv/g-webgpu-core';\nimport regl from 'regl';\nimport ReglTexture2D from './ReglTexture2D';\n\n/**\n * adaptor for regl.Framebuffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#framebuffers\n */\nexport default class ReglFramebuffer implements IFramebuffer {\n  private framebuffer: regl.Framebuffer;\n\n  constructor(reGl: regl.Regl, options: IFramebufferInitializationOptions) {\n    const { width, height, color, colors, depth, stencil } = options;\n\n    const framebufferOptions: regl.FramebufferOptions = {\n      width,\n      height,\n    };\n\n    if (Array.isArray(colors)) {\n      framebufferOptions.colors = colors.map((c: ITexture2D | IRenderbuffer) =>\n        (c as ReglTexture2D).get(),\n      );\n    }\n\n    if (color && typeof color !== 'boolean') {\n      framebufferOptions.color = (color as ReglTexture2D).get();\n    }\n\n    // TODO: depth & stencil\n\n    this.framebuffer = reGl.framebuffer(framebufferOptions);\n  }\n\n  public get() {\n    return this.framebuffer;\n  }\n\n  public destroy() {\n    this.framebuffer.destroy();\n  }\n\n  public resize({ width, height }: { width: number; height: number }) {\n    this.framebuffer.resize(width, height);\n  }\n}\n"],"mappings":";;AAUA;AACA;AACA;AACA;AAHA,IAIqBA,eAAe;EAGlC,SAAAA,gBAAYC,IAAe,EAAEC,OAA0C,EAAE;IAAAC,eAAA,OAAAH,eAAA;IAAA,KAFjEI,WAAW;IAGjB,IAAQC,KAAK,GAA4CH,OAAO,CAAxDG,KAAK;MAAEC,MAAM,GAAoCJ,OAAO,CAAjDI,MAAM;MAAEC,KAAK,GAA6BL,OAAO,CAAzCK,KAAK;MAAEC,MAAM,GAAqBN,OAAO,CAAlCM,MAAM;MAAEC,KAAK,GAAcP,OAAO,CAA1BO,KAAK;MAAEC,OAAO,GAAKR,OAAO,CAAnBQ,OAAO;IAEpD,IAAMC,kBAA2C,GAAG;MAClDN,KAAK,EAALA,KAAK;MACLC,MAAM,EAANA;IACF,CAAC;IAED,IAAIM,KAAK,CAACC,OAAO,CAACL,MAAM,CAAC,EAAE;MACzBG,kBAAkB,CAACH,MAAM,GAAGA,MAAM,CAACM,GAAG,CAAC,UAACC,CAA6B;QAAA,OAClEA,CAAC,CAAmBC,GAAG,EAAE;MAAA,EAC3B;IACH;IAEA,IAAIT,KAAK,IAAI,OAAOA,KAAK,KAAK,SAAS,EAAE;MACvCI,kBAAkB,CAACJ,KAAK,GAAIA,KAAK,CAAmBS,GAAG,EAAE;IAC3D;;IAEA;;IAEA,IAAI,CAACZ,WAAW,GAAGH,IAAI,CAACG,WAAW,CAACO,kBAAkB,CAAC;EACzD;EAACM,YAAA,CAAAjB,eAAA;IAAAkB,GAAA;IAAAC,KAAA,EAED,SAAAH,IAAA,EAAa;MACX,OAAO,IAAI,CAACZ,WAAW;IACzB;EAAC;IAAAc,GAAA;IAAAC,KAAA,EAED,SAAAC,QAAA,EAAiB;MACf,IAAI,CAAChB,WAAW,CAACgB,OAAO,EAAE;IAC5B;EAAC;IAAAF,GAAA;IAAAC,KAAA,EAED,SAAAE,OAAAC,IAAA,EAAoE;MAAA,IAApDjB,KAAK,GAAAiB,IAAA,CAALjB,KAAK;QAAEC,MAAM,GAAAgB,IAAA,CAANhB,MAAM;MAC3B,IAAI,CAACF,WAAW,CAACiB,MAAM,CAAChB,KAAK,EAAEC,MAAM,CAAC;IACxC;EAAC;EAAA,OAAAN,eAAA;AAAA;AAAA,SApCkBA,eAAe,IAAAuB,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}