{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base';\nimport { isArray, isNumber, uniqueId } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { Canvas } from '@antv/g-canvas';\nvar ALLOW_EVENTS = ['click', 'mouseenter'];\nvar Legend = /** @class */function (_super) {\n  __extends(Legend, _super);\n  function Legend(config) {\n    return _super.call(this, config) || this;\n  }\n  Legend.prototype.getDefaultCfgs = function () {\n    return {\n      data: {},\n      position: 'top',\n      padding: 8,\n      margin: 8,\n      offsetX: 0,\n      offsetY: 0,\n      layout: 'horizontal',\n      flipPage: false,\n      containerStyle: {},\n      align: undefined,\n      horiSep: 8,\n      vertiSep: 8,\n      filter: {\n        enable: false,\n        trigger: 'click'\n      }\n    };\n  };\n  Legend.prototype.init = function () {\n    this.formatArray('padding');\n    this.formatArray('margin');\n    var filter = this.get('filter') || {};\n    var multiple = filter.multiple;\n    if (multiple && filter.trigger === 'mouseenter') this.set('multiple', false);\n    var align = this.get('align');\n    if (!align) {\n      var positions = this.get('position').split('-');\n      if (positions.includes('left')) align = 'left';\n      if (positions.includes('right')) align = 'right';else align = 'center';\n      this.set('align', align);\n    }\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = createDom(\"<div class='g6-legend-container' style=\\\"position: absolute;\\\"></div>\");\n    graphContainer.appendChild(container);\n    this.set('container', container);\n    var size = this.render();\n    modifyCSS(container, this.getContainerPos(size));\n    this.bindEvents();\n  };\n  Legend.prototype.getContainerPos = function (size) {\n    if (size === void 0) {\n      size = [0, 0];\n    }\n    var self = this;\n    var graph = self.get('graph');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var margin = this.get('margin');\n    var positions = this.get('position').split('-');\n    var posIdxMap = {\n      'top': 0,\n      'right': 1,\n      'bottom': 2,\n      'left': 3\n    };\n    var x = 0,\n      y = 0;\n    var containerCSS = {\n      left: (graph.getWidth() - size[0]) / 2 + x,\n      top: (graph.getHeight() - size[1]) / 2 + y\n    };\n    positions.forEach(function (pos) {\n      var marginValue = margin[posIdxMap[pos]];\n      var key = pos;\n      switch (pos) {\n        case 'top':\n          marginValue += y;\n          break;\n        case 'left':\n          marginValue += x;\n          break;\n        case 'bottom':\n          marginValue = graph.getHeight() - size[1] - marginValue + y;\n          key = 'top';\n          break;\n        default:\n          marginValue = graph.getWidth() - size[0] - marginValue + x;\n          key = 'left';\n          break;\n      }\n      containerCSS[key] = marginValue;\n    });\n    containerCSS.top += offsetY + graph.getContainer().offsetTop;\n    containerCSS.left += offsetX + graph.getContainer().offsetLeft;\n    Object.keys(containerCSS).forEach(function (key) {\n      containerCSS[key] = \"\".concat(containerCSS[key], \"px\");\n    });\n    return containerCSS;\n  };\n  // class-methods-use-this\n  Legend.prototype.bindEvents = function () {\n    var self = this;\n    var filter = self.get('filter');\n    if (!filter || !filter.enable) return;\n    var trigger = filter.trigger || 'click';\n    if (!ALLOW_EVENTS.includes(trigger)) {\n      console.warn('Trigger for legend filterling must be \\'click\\' or \\'mouseenter\\', \\'click\\' will take effect by default.');\n      trigger = 'click';\n    }\n    var lc = self.get('legendCanvas');\n    if (trigger === 'mouseenter') {\n      lc.on('node-container:mouseenter', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('node-container:mouseleave', function (e) {\n        self.clearFilter();\n        self.clearActiveLegend();\n      });\n    } else {\n      lc.on('node-container:click', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('click', function (e) {\n        if (e.target && e.target.isCanvas && e.target.isCanvas()) {\n          self.clearFilter();\n          self.clearActiveLegend();\n        }\n      });\n    }\n  };\n  /**\n   * 更新 legend 数据，开放给用户控制\n   * @param param\n   */\n  Legend.prototype.changeData = function (data) {\n    this.set('data', data);\n    var size = this.render();\n    modifyCSS(this.get('container'), this.getContainerPos(size));\n  };\n  Legend.prototype.activateLegend = function (shape) {\n    var filter = this.get('filter');\n    var multiple = filter === null || filter === void 0 ? void 0 : filter.multiple;\n    if (!multiple) this.clearActiveLegend();\n    var shapeGroup = shape.get('parent');\n    // 若被高亮元素已经处于 active 状态，则取消它的 active 状态\n    // 并根据目前是否有其他 active 状态的元素决定是否要设置为 inactive 状态\n    if (shapeGroup.get('active')) {\n      shapeGroup.set('active', false);\n      if (this.findLegendItemsByState('active').length) shapeGroup.set('inactive', true);\n    } else {\n      shapeGroup.set('inactive', false);\n      shapeGroup.set('active', true);\n    }\n    // 当目前有元素为 active 状态时，将非 active 的元素设置为 inactive\n    if (this.findLegendItemsByState('active').length) {\n      this.findLegendItemsByState('active', 'all', false).forEach(function (subGroup) {\n        subGroup.set('inactive', true);\n      });\n    } else {\n      this.clearActiveLegend();\n    }\n    // 设置样式\n    var stateStyles = (filter === null || filter === void 0 ? void 0 : filter.legendStateStyles) || {};\n    var legendInactive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.inactive) || {\n      opacity: 0.5,\n      'text-shape': {\n        opacity: 0.5\n      }\n    };\n    var legendTextInactive = legendInactive['text-shape'] || {};\n    this.findLegendItemsByState('inactive').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n        keyShape = _a[0],\n        text = _a[1];\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendInactive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextInactive));\n    });\n    var legendActive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.active) || {\n      stroke: '#000',\n      lineWidth: 2,\n      'text-shape': {\n        fontWeight: 'bold'\n      }\n    };\n    var legendTextActive = legendActive['text-shape'] || {};\n    this.findLegendItemsByState('active').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n        keyShape = _a[0],\n        text = _a[1];\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendActive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextActive));\n    });\n  };\n  Legend.prototype.findLegendItemsByState = function (stateName, type, value) {\n    if (type === void 0) {\n      type = 'all';\n    }\n    if (value === void 0) {\n      value = true;\n    }\n    var group = this.get('legendCanvas').find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    if (type === 'node') return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    if (type === 'edge') return edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }).concat(edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }));\n  };\n  Legend.prototype.clearActiveLegend = function () {\n    var lg = this.get('legendCanvas');\n    var group = lg.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var groups = [group.find(function (e) {\n      return e.get('name') === 'node-group';\n    }), group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    })];\n    groups.forEach(function (itemGroup) {\n      itemGroup.get('children').forEach(function (subGroup) {\n        subGroup.set('active', false);\n        subGroup.set('inactive', false);\n        var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n        keyShape.attr(keyShape.get('oriAttrs'));\n        text.attr(text.get('oriAttrs'));\n      });\n    });\n  };\n  /**\n   * 高亮和置灰图例，并过滤主图元素\n   * @param param\n   */\n  Legend.prototype.filterData = function (e) {\n    var filter = this.get('filter');\n    var filterFunctions = filter === null || filter === void 0 ? void 0 : filter.filterFunctions;\n    if (!filter || !filterFunctions) return;\n    var lc = this.get('legendCanvas');\n    var graph = this.get('graph');\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    var multiple = filter.multiple;\n    this.clearFilter();\n    if (!multiple) this.clearActiveLegend();\n    // 设置 legend 的高亮状态\n    this.activateLegend(e.target);\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var activeNodeLegend = nodeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeEdgeLegend = edgeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeCount = 0;\n    var typeFuncs = ['getNodes', 'getEdges'];\n    typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        var active = false;\n        var activeLegend = typeFunc === 'getNodes' ? activeNodeLegend : activeEdgeLegend;\n        activeLegend.forEach(function (itemGroup) {\n          var func = filterFunctions[itemGroup.get('id')];\n          active = active || func(graphItem.getModel());\n        });\n        if (active) {\n          graph.setItemState(graphItem, inactiveState, false);\n          graph.setItemState(graphItem, activeState, true);\n          activeCount++;\n        } else {\n          graph.setItemState(graphItem, activeState, false);\n          graph.setItemState(graphItem, inactiveState, true);\n        }\n      });\n    });\n    if (!activeCount) typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        graph.clearItemStates(graphItem, [inactiveState]);\n      });\n    });\n  };\n  /**\n   * 清除主图相关状态\n   * @param param\n   */\n  Legend.prototype.clearFilter = function () {\n    // 清除 legend 的高亮状态\n    var graph = this.get('graph');\n    var filter = this.get('filter');\n    if (!filter) return;\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node, [activeState, inactiveState]);\n    });\n    graph.getEdges().forEach(function (edge) {\n      graph.clearItemStates(edge, [activeState, inactiveState]);\n    });\n  };\n  /**\n   * 渲染 legend 图\n   * @param param\n   */\n  Legend.prototype.render = function () {\n    var _this = this;\n    this.processData();\n    var lc = this.get('legendCanvas');\n    if (!lc) {\n      lc = new Canvas({\n        container: this.get('container'),\n        width: 200,\n        height: 200\n      });\n    } else {\n      lc.clear();\n    }\n    var group = lc.addGroup({\n      name: 'root'\n    });\n    var nodeGroup = group.addGroup({\n      name: 'node-group'\n    });\n    var edgeGroup = group.addGroup({\n      name: 'edge-group'\n    });\n    this.set('legendCanvas', lc);\n    var itemsData = this.get('itemsData');\n    var itemTypes = ['nodes', 'edges'];\n    var itemGroup = [nodeGroup, edgeGroup];\n    itemTypes.forEach(function (itemType, i) {\n      itemsData[itemType].forEach(function (data) {\n        var _a;\n        var subGroup = itemGroup[i].addGroup({\n          id: data.id,\n          name: 'node-container'\n        });\n        var attrs;\n        var shapeType = data.type;\n        var _b = _this.getShapeSize(data),\n          width = _b.width,\n          height = _b.height,\n          r = _b.r;\n        var style = _this.getStyle(itemType.substr(0, 4), data);\n        switch (data.type) {\n          case 'circle':\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n          case 'rect':\n            attrs = {\n              width: width,\n              height: height,\n              x: -width / 2,\n              y: -height / 2\n            };\n            break;\n          case 'ellipse':\n            attrs = {\n              rx: width,\n              ry: height,\n              x: 0,\n              y: 0\n            };\n            shapeType = 'ellipse';\n            break;\n          case 'line':\n            attrs = {\n              x1: -width / 2,\n              y1: 0,\n              x2: width / 2,\n              y2: 0\n            };\n            shapeType = 'line';\n            break;\n          case 'quadratic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['Q', 0, width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n          case 'cubic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['C', -width / 6, width / 2, width / 6, -width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n          case 'diamond':\n            attrs = {\n              path: [['M', 0, -height], ['L', width, 0], ['L', 0, height], ['L', -width, 0], ['Z']]\n            };\n            shapeType = 'path';\n            break;\n          case 'triangle':\n            attrs = {\n              path: [['M', -width, height], ['L', 0, -height], ['L', width, height], ['Z']]\n            };\n            shapeType = 'path';\n            break;\n          case 'star':\n            attrs = {\n              path: Util.getStarPath(r * 3, r * 1.2)\n            };\n            shapeType = 'path';\n            break;\n          default:\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n        }\n        var keyShape = subGroup.addShape(shapeType, {\n          attrs: __assign(__assign({}, attrs), style),\n          name: \"\".concat(data.type, \"-node-keyShape\"),\n          oriAttrs: __assign({\n            opacity: 1\n          }, style)\n        });\n        if (data.label) {\n          var keyShapeBBox = keyShape.getBBox();\n          var labelStyle = ((_a = data.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n          var attrs_1 = __assign({\n            textAlign: 'begin',\n            fontSize: 12,\n            textBaseline: 'middle',\n            fill: '#000',\n            opacity: 1,\n            fontWeight: 'normal'\n          }, labelStyle);\n          subGroup.addShape('text', {\n            attrs: __assign({\n              x: keyShapeBBox.maxX + 4,\n              y: 0,\n              text: data.label\n            }, attrs_1),\n            className: 'legend-label',\n            name: \"\".concat(data.type, \"-node-text\"),\n            oriAttrs: attrs_1\n          });\n        }\n      });\n    });\n    var padding = this.get('padding');\n    var titleShape;\n    var titleGroup = group.find(function (e) {\n      return e.get('name') === 'title-container';\n    });\n    var titleGroupBBox = {\n      height: 0,\n      maxY: 0,\n      width: 0\n    };\n    if (this.get('title')) {\n      if (!titleGroup) {\n        titleGroup = group.addGroup({\n          name: 'title-container'\n        });\n      }\n      var defaultTitleStyle = {\n        fontSize: 20,\n        fontFamily: 'Arial',\n        fontWeight: 300,\n        textBaseline: 'top',\n        textAlign: 'center',\n        fill: \"#000\",\n        x: 0,\n        y: padding[0]\n      };\n      var titleConfig = this.get('titleConfig') || {};\n      var style = Object.assign(defaultTitleStyle, titleConfig.style || {});\n      titleShape = titleGroup.addShape('text', {\n        attrs: __assign({\n          text: this.get('title')\n        }, style)\n      });\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      titleGroup.setMatrix([1, 0, 0, 0, 1, 0, titleConfig.offsetX, titleConfig.offsetY, 1]);\n    }\n    this.layoutItems();\n    var lcBBox = group.getCanvasBBox();\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    // 若有图形超过边界的情况，平移回来\n    var nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n    var nodeGroupBeginY = titleGroupBBox.maxY < nodeGroupBBox.minY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n    var nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n    nodeGroup.setMatrix(nodeGroupMatrix);\n    lcBBox = group.getCanvasBBox();\n    var size = [lcBBox.minX + lcBBox.width + padding[1], lcBBox.minY + lcBBox.height + padding[2]];\n    // 根据 size 和 titleConfig 调整 title 位置，再调整 nodeGroup 位置\n    if (titleShape) {\n      var titleConfig = __assign({\n        position: 'center',\n        offsetX: 0,\n        offsetY: 0\n      }, this.get('titleConfig'));\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      var titleGroupMatrix = titleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (titleConfig.position === 'center') {\n        titleGroupMatrix[6] = size[0] / 2 + titleConfig.offsetX;\n      } else if (titleConfig.position === 'right') {\n        titleGroupMatrix[6] = size[0] - padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'right'\n        });\n      } else {\n        titleGroupMatrix[6] = padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'left'\n        });\n      }\n      titleGroup.setMatrix(titleGroupMatrix);\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      // 若有图形超过边界的情况，平移回来\n      nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n      nodeGroupBeginY = nodeGroupBBox.minY < titleGroupBBox.maxY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n      nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      nodeGroup.setMatrix(nodeGroupMatrix);\n      var edgeGroupMatrix_1 = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_1[6] += nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_1[7] += nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_1);\n    } else {\n      // 没有 title，也需要平移 edgeGroup\n      nodeGroupBBox = nodeGroup.getCanvasBBox();\n      var edgeGroupMatrix_2 = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_2[6] += nodeGroupMatrix[6] + nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_2[7] += nodeGroupMatrix[7] + nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_2);\n    }\n    lcBBox = group.getCanvasBBox();\n    nodeGroupBBox = nodeGroup.getCanvasBBox();\n    nodeGroupMatrix = nodeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupMatrix = edgeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupBBox = edgeGroup.getCanvasBBox();\n    size = [Math.max(nodeGroupBBox.width + nodeGroupMatrix[6], edgeGroupBBox.width + edgeGroupMatrix[6]) + padding[1], Math.max(nodeGroupBBox.height + nodeGroupMatrix[7], edgeGroupBBox.height + edgeGroupMatrix[7]) + padding[2]];\n    lc.changeSize(size[0], size[1]);\n    // 更新容器背景样式\n    var containerStyle = this.get('containerStyle');\n    var viewportMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var beginPos = Util.invertMatrix({\n      x: 0,\n      y: 0\n    }, viewportMatrix);\n    var backRect = group.addShape('rect', {\n      attrs: __assign({\n        x: beginPos.x + (containerStyle.lineWidth || 1),\n        y: beginPos.y + (containerStyle.lineWidth || 1),\n        width: size[0] - 2 * (containerStyle.lineWidth || 1),\n        height: size[1] - 2 * (containerStyle.lineWidth || 1),\n        fill: \"#f00\",\n        stroke: '#000',\n        lineWidth: 1,\n        opacity: 0.5\n      }, containerStyle),\n      name: 'legend-back-rect',\n      capture: false\n    });\n    backRect.toBack();\n    return size;\n  };\n  Legend.prototype.layoutItems = function () {\n    var lc = this.get('legendCanvas');\n    var horiSep = this.get('horiSep');\n    var vertiSep = this.get('vertiSep');\n    var layout = this.get('layout');\n    var align = this.get('align');\n    var begin = [0, 0];\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var nodeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var rowMaxY = -Infinity;\n    nodeGroup.get('children').forEach(function (cNodeGroup, i) {\n      if (i === 0) nodeLegendSize.min = begin[0];\n      var keyShape = cNodeGroup.get('children')[0];\n      var bbox = cNodeGroup.getCanvasBBox();\n      var _a = keyShape.getBBox(),\n        keyShapeWidth = _a.width,\n        keyShapeHeight = _a.height;\n      var curHeight = 0,\n        x = 0,\n        y = 0;\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0] + keyShapeWidth / 2;\n        begin[0] = y + bbox.height + vertiSep;\n        curHeight = bbox.maxX + x + keyShapeWidth / 2;\n      } else {\n        x = begin[0] + keyShapeWidth / 2;\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        curHeight = bbox.maxY + y + keyShapeHeight / 2;\n      }\n      if (begin[0] > nodeLegendSize.max) nodeLegendSize.max = begin[0];\n      if (curHeight > rowMaxY) rowMaxY = curHeight;\n      cNodeGroup.setMatrix([1, 0, 0, 0, 1, 0, x, y, 1]);\n    });\n    var nw = nodeLegendSize.max - nodeLegendSize.min;\n    var edgeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    begin[0] = 0;\n    begin[1] = layout === 'vertical' ? nodeGroupBBox.maxX + horiSep : nodeGroupBBox.maxY + vertiSep;\n    edgeGroup.get('children').forEach(function (subGroup, i) {\n      if (i === 0) edgeLegendSize.min = begin[0];\n      var keyShape = subGroup.get('children')[0];\n      var bbox = subGroup.getCanvasBBox();\n      var _a = keyShape.getBBox(),\n        keyShapeWidth = _a.width,\n        keyShapeHeight = _a.height;\n      var x = 0,\n        y = 0;\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0];\n        begin[0] = y + bbox.height + vertiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight / 2, 1]);\n      } else {\n        x = begin[0];\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, x + keyShapeWidth / 2, 0, 1]);\n      }\n      if (begin[0] > edgeLegendSize.max) edgeLegendSize.max = begin[0];\n    });\n    var ew = edgeLegendSize.max - edgeLegendSize.min;\n    if (align && align !== '' && align !== 'left') {\n      var widthDiff = nw - ew;\n      var movement_1 = align === 'center' ? Math.abs(widthDiff) / 2 : Math.abs(widthDiff);\n      var shouldAdjustGroup = widthDiff < 0 ? nodeGroup : edgeGroup;\n      shouldAdjustGroup.get('children').forEach(function (subGroup) {\n        var matrix = subGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        if (layout === 'vertical') matrix[7] += movement_1;else matrix[6] += movement_1;\n        subGroup.setMatrix(matrix);\n      });\n    }\n  };\n  Legend.prototype.processData = function () {\n    var data = this.get('data');\n    var itemsData = {\n      nodes: [],\n      edges: []\n    };\n    if (data.nodes) {\n      data.nodes.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.nodes.forEach(function (node) {\n        var _a, _b, _c, _d, _e;\n        var size = node.size || [((_a = node.style) === null || _a === void 0 ? void 0 : _a.width) || ((_b = node.style) === null || _b === void 0 ? void 0 : _b.r) || 8, ((_c = node.style) === null || _c === void 0 ? void 0 : _c.height) || ((_d = node.style) === null || _d === void 0 ? void 0 : _d.r) || 8];\n        var labelStyle = ((_e = node.labelCfg) === null || _e === void 0 ? void 0 : _e.style) || {};\n        itemsData.nodes.push({\n          id: node.id || uniqueId(),\n          type: node.type || 'circle',\n          style: __assign({}, node.style),\n          order: node.order,\n          label: node.label,\n          itemType: 'node',\n          size: size,\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n    if (data.edges) {\n      data.edges.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.edges.forEach(function (edge) {\n        var _a, _b;\n        var type = edge.type || 'line';\n        if (edge.type === 'cubic-horizontal') type = 'cubic';\n        var labelStyle = ((_a = edge.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n        var size = edge.size || [((_b = edge.style) === null || _b === void 0 ? void 0 : _b.width) || 8, 1];\n        itemsData.edges.push({\n          id: edge.id || uniqueId(),\n          type: type,\n          size: size,\n          style: __assign({\n            lineWidth: isArray(size) ? size[1] : 1\n          }, edge.style),\n          order: edge.order,\n          label: edge.label,\n          itemType: 'edge',\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n    this.set('itemsData', itemsData);\n  };\n  Legend.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  Legend.prototype.formatArray = function (key) {\n    var value = this.get(key);\n    if (isNumber(value)) this.set(key, [value, value, value, value]);else if (isArray(value)) {\n      switch (value.length) {\n        case 0:\n          this.set(key, [0, 0, 0, 0]);\n          break;\n        case 1:\n          this.set(key, [value[0], value[0], value[0], value[0]]);\n          break;\n        case 2:\n          this.set(key, [value[0], value[1], value[0], value[1]]);\n          break;\n        case 3:\n          this.set(key, [value[0], value[1], value[2], value[1]]);\n          break;\n        default:\n          break;\n      }\n    }\n    return this.get(key);\n  };\n  Legend.prototype.getShapeSize = function (data) {\n    var width, height, r;\n    if (data.size) {\n      if (isArray(data.size)) {\n        width = data.size[0];\n        height = data.size[1] || data.size[0];\n        r = data.size[0] / 2;\n      } else if (isNumber(data.size)) {\n        width = data.size;\n        height = data.size;\n        r = data.size / 2;\n      }\n    }\n    if (data.style) {\n      if (data.style.width) width = data.style.width;\n      if (data.style.height) height = data.style.height;\n      if (data.style.r) r = data.style.r;\n    }\n    if (!r) r = 5;\n    if (!width) width = r;\n    if (!height) height = r;\n    return {\n      width: width,\n      height: height,\n      r: r\n    };\n  };\n  Legend.prototype.getStyle = function (type, data) {\n    var defaultStyle = type === 'node' ? {\n      fill: '#ccc',\n      lineWidth: 0\n    } : {\n      stroke: '#000',\n      lineWidth: 1\n    };\n    return __assign(__assign({}, defaultStyle), data.style || {});\n  };\n  Legend.prototype.destroy = function () {\n    var lc = this.get('legendCanvas');\n    lc === null || lc === void 0 ? void 0 : lc.destroy();\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n  return Legend;\n}(Base);\nexport default Legend;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","modifyCSS","createDom","Base","isArray","isNumber","uniqueId","Util","Canvas","ALLOW_EVENTS","Legend","_super","config","getDefaultCfgs","data","position","padding","margin","offsetX","offsetY","layout","flipPage","containerStyle","align","undefined","horiSep","vertiSep","filter","enable","trigger","init","formatArray","get","multiple","set","positions","split","includes","graph","graphContainer","container","appendChild","size","render","getContainerPos","bindEvents","self","posIdxMap","x","y","containerCSS","left","getWidth","top","getHeight","forEach","pos","marginValue","key","getContainer","offsetTop","offsetLeft","keys","concat","console","warn","lc","on","e","filterData","clearFilter","clearActiveLegend","target","isCanvas","changeData","activateLegend","shape","shapeGroup","findLegendItemsByState","subGroup","stateStyles","legendStateStyles","legendInactive","inactive","opacity","legendTextInactive","_a","keyShape","text","attr","legendActive","active","stroke","lineWidth","fontWeight","legendTextActive","stateName","type","value","group","find","nodeGroup","edgeGroup","g","lg","groups","itemGroup","filterFunctions","activeState","graphActiveState","inactiveState","graphInactiveState","activeNodeLegend","activeEdgeLegend","activeCount","typeFuncs","typeFunc","graphItem","activeLegend","func","getModel","setItemState","clearItemStates","getNodes","node","getEdges","edge","_this","processData","width","height","clear","addGroup","name","itemsData","itemTypes","itemType","id","attrs","shapeType","_b","getShapeSize","r","style","getStyle","substr","rx","ry","x1","y1","x2","y2","path","getStarPath","addShape","oriAttrs","label","keyShapeBBox","getBBox","labelStyle","labelCfg","attrs_1","textAlign","fontSize","textBaseline","fill","maxX","className","titleShape","titleGroup","titleGroupBBox","maxY","defaultTitleStyle","fontFamily","titleConfig","getCanvasBBox","setMatrix","layoutItems","lcBBox","nodeGroupBBox","nodeGroupBeginX","minX","Math","abs","nodeGroupBeginY","minY","nodeGroupMatrix","titleGroupMatrix","getMatrix","edgeGroupMatrix_1","edgeGroupMatrix_2","edgeGroupMatrix","edgeGroupBBox","max","changeSize","viewportMatrix","beginPos","invertMatrix","backRect","capture","toBack","begin","nodeLegendSize","min","Infinity","rowMaxY","cNodeGroup","bbox","keyShapeWidth","keyShapeHeight","curHeight","nw","edgeLegendSize","ew","widthDiff","movement_1","shouldAdjustGroup","matrix","nodes","edges","sort","a","order","_c","_d","_e","push","defaultStyle","destroy","removeChild"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-plugin/es/legend/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport Base from '../base';\nimport { isArray, isNumber, uniqueId } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { Canvas } from '@antv/g-canvas';\nvar ALLOW_EVENTS = ['click', 'mouseenter'];\nvar Legend = /** @class */function (_super) {\n  __extends(Legend, _super);\n  function Legend(config) {\n    return _super.call(this, config) || this;\n  }\n  Legend.prototype.getDefaultCfgs = function () {\n    return {\n      data: {},\n      position: 'top',\n      padding: 8,\n      margin: 8,\n      offsetX: 0,\n      offsetY: 0,\n      layout: 'horizontal',\n      flipPage: false,\n      containerStyle: {},\n      align: undefined,\n      horiSep: 8,\n      vertiSep: 8,\n      filter: {\n        enable: false,\n        trigger: 'click'\n      }\n    };\n  };\n  Legend.prototype.init = function () {\n    this.formatArray('padding');\n    this.formatArray('margin');\n    var filter = this.get('filter') || {};\n    var multiple = filter.multiple;\n    if (multiple && filter.trigger === 'mouseenter') this.set('multiple', false);\n    var align = this.get('align');\n    if (!align) {\n      var positions = this.get('position').split('-');\n      if (positions.includes('left')) align = 'left';\n      if (positions.includes('right')) align = 'right';else align = 'center';\n      this.set('align', align);\n    }\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = createDom(\"<div class='g6-legend-container' style=\\\"position: absolute;\\\"></div>\");\n    graphContainer.appendChild(container);\n    this.set('container', container);\n    var size = this.render();\n    modifyCSS(container, this.getContainerPos(size));\n    this.bindEvents();\n  };\n  Legend.prototype.getContainerPos = function (size) {\n    if (size === void 0) {\n      size = [0, 0];\n    }\n    var self = this;\n    var graph = self.get('graph');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var margin = this.get('margin');\n    var positions = this.get('position').split('-');\n    var posIdxMap = {\n      'top': 0,\n      'right': 1,\n      'bottom': 2,\n      'left': 3\n    };\n    var x = 0,\n      y = 0;\n    var containerCSS = {\n      left: (graph.getWidth() - size[0]) / 2 + x,\n      top: (graph.getHeight() - size[1]) / 2 + y\n    };\n    positions.forEach(function (pos) {\n      var marginValue = margin[posIdxMap[pos]];\n      var key = pos;\n      switch (pos) {\n        case 'top':\n          marginValue += y;\n          break;\n        case 'left':\n          marginValue += x;\n          break;\n        case 'bottom':\n          marginValue = graph.getHeight() - size[1] - marginValue + y;\n          key = 'top';\n          break;\n        default:\n          marginValue = graph.getWidth() - size[0] - marginValue + x;\n          key = 'left';\n          break;\n      }\n      containerCSS[key] = marginValue;\n    });\n    containerCSS.top += offsetY + graph.getContainer().offsetTop;\n    containerCSS.left += offsetX + graph.getContainer().offsetLeft;\n    Object.keys(containerCSS).forEach(function (key) {\n      containerCSS[key] = \"\".concat(containerCSS[key], \"px\");\n    });\n    return containerCSS;\n  };\n  // class-methods-use-this\n  Legend.prototype.bindEvents = function () {\n    var self = this;\n    var filter = self.get('filter');\n    if (!filter || !filter.enable) return;\n    var trigger = filter.trigger || 'click';\n    if (!ALLOW_EVENTS.includes(trigger)) {\n      console.warn('Trigger for legend filterling must be \\'click\\' or \\'mouseenter\\', \\'click\\' will take effect by default.');\n      trigger = 'click';\n    }\n    var lc = self.get('legendCanvas');\n    if (trigger === 'mouseenter') {\n      lc.on('node-container:mouseenter', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('node-container:mouseleave', function (e) {\n        self.clearFilter();\n        self.clearActiveLegend();\n      });\n    } else {\n      lc.on('node-container:click', function (e) {\n        return self.filterData(e);\n      });\n      lc.on('click', function (e) {\n        if (e.target && e.target.isCanvas && e.target.isCanvas()) {\n          self.clearFilter();\n          self.clearActiveLegend();\n        }\n      });\n    }\n  };\n  /**\n   * 更新 legend 数据，开放给用户控制\n   * @param param\n   */\n  Legend.prototype.changeData = function (data) {\n    this.set('data', data);\n    var size = this.render();\n    modifyCSS(this.get('container'), this.getContainerPos(size));\n  };\n  Legend.prototype.activateLegend = function (shape) {\n    var filter = this.get('filter');\n    var multiple = filter === null || filter === void 0 ? void 0 : filter.multiple;\n    if (!multiple) this.clearActiveLegend();\n    var shapeGroup = shape.get('parent');\n    // 若被高亮元素已经处于 active 状态，则取消它的 active 状态\n    // 并根据目前是否有其他 active 状态的元素决定是否要设置为 inactive 状态\n    if (shapeGroup.get('active')) {\n      shapeGroup.set('active', false);\n      if (this.findLegendItemsByState('active').length) shapeGroup.set('inactive', true);\n    } else {\n      shapeGroup.set('inactive', false);\n      shapeGroup.set('active', true);\n    }\n    // 当目前有元素为 active 状态时，将非 active 的元素设置为 inactive\n    if (this.findLegendItemsByState('active').length) {\n      this.findLegendItemsByState('active', 'all', false).forEach(function (subGroup) {\n        subGroup.set('inactive', true);\n      });\n    } else {\n      this.clearActiveLegend();\n    }\n    // 设置样式\n    var stateStyles = (filter === null || filter === void 0 ? void 0 : filter.legendStateStyles) || {};\n    var legendInactive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.inactive) || {\n      opacity: 0.5,\n      'text-shape': {\n        opacity: 0.5\n      }\n    };\n    var legendTextInactive = legendInactive['text-shape'] || {};\n    this.findLegendItemsByState('inactive').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n        keyShape = _a[0],\n        text = _a[1];\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendInactive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextInactive));\n    });\n    var legendActive = (stateStyles === null || stateStyles === void 0 ? void 0 : stateStyles.active) || {\n      stroke: '#000',\n      lineWidth: 2,\n      'text-shape': {\n        fontWeight: 'bold'\n      }\n    };\n    var legendTextActive = legendActive['text-shape'] || {};\n    this.findLegendItemsByState('active').forEach(function (subGroup) {\n      var _a = subGroup.get('children'),\n        keyShape = _a[0],\n        text = _a[1];\n      keyShape.attr(__assign(__assign({}, keyShape.get('oriAttrs')), legendActive));\n      text.attr(__assign(__assign({}, text.get('oriAttrs')), legendTextActive));\n    });\n  };\n  Legend.prototype.findLegendItemsByState = function (stateName, type, value) {\n    if (type === void 0) {\n      type = 'all';\n    }\n    if (value === void 0) {\n      value = true;\n    }\n    var group = this.get('legendCanvas').find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    if (type === 'node') return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    if (type === 'edge') return edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    });\n    return nodeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }).concat(edgeGroup.get('children').filter(function (g) {\n      return !!g.get(stateName) === value;\n    }));\n  };\n  Legend.prototype.clearActiveLegend = function () {\n    var lg = this.get('legendCanvas');\n    var group = lg.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var groups = [group.find(function (e) {\n      return e.get('name') === 'node-group';\n    }), group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    })];\n    groups.forEach(function (itemGroup) {\n      itemGroup.get('children').forEach(function (subGroup) {\n        subGroup.set('active', false);\n        subGroup.set('inactive', false);\n        var _a = subGroup.get('children'),\n          keyShape = _a[0],\n          text = _a[1];\n        keyShape.attr(keyShape.get('oriAttrs'));\n        text.attr(text.get('oriAttrs'));\n      });\n    });\n  };\n  /**\n   * 高亮和置灰图例，并过滤主图元素\n   * @param param\n   */\n  Legend.prototype.filterData = function (e) {\n    var filter = this.get('filter');\n    var filterFunctions = filter === null || filter === void 0 ? void 0 : filter.filterFunctions;\n    if (!filter || !filterFunctions) return;\n    var lc = this.get('legendCanvas');\n    var graph = this.get('graph');\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    var multiple = filter.multiple;\n    this.clearFilter();\n    if (!multiple) this.clearActiveLegend();\n    // 设置 legend 的高亮状态\n    this.activateLegend(e.target);\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var activeNodeLegend = nodeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeEdgeLegend = edgeGroup.get('children').filter(function (e) {\n      return e.get('active');\n    });\n    var activeCount = 0;\n    var typeFuncs = ['getNodes', 'getEdges'];\n    typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        var active = false;\n        var activeLegend = typeFunc === 'getNodes' ? activeNodeLegend : activeEdgeLegend;\n        activeLegend.forEach(function (itemGroup) {\n          var func = filterFunctions[itemGroup.get('id')];\n          active = active || func(graphItem.getModel());\n        });\n        if (active) {\n          graph.setItemState(graphItem, inactiveState, false);\n          graph.setItemState(graphItem, activeState, true);\n          activeCount++;\n        } else {\n          graph.setItemState(graphItem, activeState, false);\n          graph.setItemState(graphItem, inactiveState, true);\n        }\n      });\n    });\n    if (!activeCount) typeFuncs.forEach(function (typeFunc) {\n      graph[typeFunc]().forEach(function (graphItem) {\n        graph.clearItemStates(graphItem, [inactiveState]);\n      });\n    });\n  };\n  /**\n   * 清除主图相关状态\n   * @param param\n   */\n  Legend.prototype.clearFilter = function () {\n    // 清除 legend 的高亮状态\n    var graph = this.get('graph');\n    var filter = this.get('filter');\n    if (!filter) return;\n    var activeState = filter.graphActiveState || 'active';\n    var inactiveState = filter.graphInactiveState || 'inactive';\n    graph.getNodes().forEach(function (node) {\n      graph.clearItemStates(node, [activeState, inactiveState]);\n    });\n    graph.getEdges().forEach(function (edge) {\n      graph.clearItemStates(edge, [activeState, inactiveState]);\n    });\n  };\n  /**\n   * 渲染 legend 图\n   * @param param\n   */\n  Legend.prototype.render = function () {\n    var _this = this;\n    this.processData();\n    var lc = this.get('legendCanvas');\n    if (!lc) {\n      lc = new Canvas({\n        container: this.get('container'),\n        width: 200,\n        height: 200\n      });\n    } else {\n      lc.clear();\n    }\n    var group = lc.addGroup({\n      name: 'root'\n    });\n    var nodeGroup = group.addGroup({\n      name: 'node-group'\n    });\n    var edgeGroup = group.addGroup({\n      name: 'edge-group'\n    });\n    this.set('legendCanvas', lc);\n    var itemsData = this.get('itemsData');\n    var itemTypes = ['nodes', 'edges'];\n    var itemGroup = [nodeGroup, edgeGroup];\n    itemTypes.forEach(function (itemType, i) {\n      itemsData[itemType].forEach(function (data) {\n        var _a;\n        var subGroup = itemGroup[i].addGroup({\n          id: data.id,\n          name: 'node-container'\n        });\n        var attrs;\n        var shapeType = data.type;\n        var _b = _this.getShapeSize(data),\n          width = _b.width,\n          height = _b.height,\n          r = _b.r;\n        var style = _this.getStyle(itemType.substr(0, 4), data);\n        switch (data.type) {\n          case 'circle':\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n          case 'rect':\n            attrs = {\n              width: width,\n              height: height,\n              x: -width / 2,\n              y: -height / 2\n            };\n            break;\n          case 'ellipse':\n            attrs = {\n              rx: width,\n              ry: height,\n              x: 0,\n              y: 0\n            };\n            shapeType = 'ellipse';\n            break;\n          case 'line':\n            attrs = {\n              x1: -width / 2,\n              y1: 0,\n              x2: width / 2,\n              y2: 0\n            };\n            shapeType = 'line';\n            break;\n          case 'quadratic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['Q', 0, width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n          case 'cubic':\n            attrs = {\n              path: [['M', -width / 2, 0], ['C', -width / 6, width / 2, width / 6, -width / 2, width / 2, 0]]\n            };\n            shapeType = 'path';\n            break;\n          case 'diamond':\n            attrs = {\n              path: [['M', 0, -height], ['L', width, 0], ['L', 0, height], ['L', -width, 0], ['Z']]\n            };\n            shapeType = 'path';\n            break;\n          case 'triangle':\n            attrs = {\n              path: [['M', -width, height], ['L', 0, -height], ['L', width, height], ['Z']]\n            };\n            shapeType = 'path';\n            break;\n          case 'star':\n            attrs = {\n              path: Util.getStarPath(r * 3, r * 1.2)\n            };\n            shapeType = 'path';\n            break;\n          default:\n            attrs = {\n              r: r,\n              x: 0,\n              y: 0\n            };\n            break;\n        }\n        var keyShape = subGroup.addShape(shapeType, {\n          attrs: __assign(__assign({}, attrs), style),\n          name: \"\".concat(data.type, \"-node-keyShape\"),\n          oriAttrs: __assign({\n            opacity: 1\n          }, style)\n        });\n        if (data.label) {\n          var keyShapeBBox = keyShape.getBBox();\n          var labelStyle = ((_a = data.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n          var attrs_1 = __assign({\n            textAlign: 'begin',\n            fontSize: 12,\n            textBaseline: 'middle',\n            fill: '#000',\n            opacity: 1,\n            fontWeight: 'normal'\n          }, labelStyle);\n          subGroup.addShape('text', {\n            attrs: __assign({\n              x: keyShapeBBox.maxX + 4,\n              y: 0,\n              text: data.label\n            }, attrs_1),\n            className: 'legend-label',\n            name: \"\".concat(data.type, \"-node-text\"),\n            oriAttrs: attrs_1\n          });\n        }\n      });\n    });\n    var padding = this.get('padding');\n    var titleShape;\n    var titleGroup = group.find(function (e) {\n      return e.get('name') === 'title-container';\n    });\n    var titleGroupBBox = {\n      height: 0,\n      maxY: 0,\n      width: 0\n    };\n    if (this.get('title')) {\n      if (!titleGroup) {\n        titleGroup = group.addGroup({\n          name: 'title-container'\n        });\n      }\n      var defaultTitleStyle = {\n        fontSize: 20,\n        fontFamily: 'Arial',\n        fontWeight: 300,\n        textBaseline: 'top',\n        textAlign: 'center',\n        fill: \"#000\",\n        x: 0,\n        y: padding[0]\n      };\n      var titleConfig = this.get('titleConfig') || {};\n      var style = Object.assign(defaultTitleStyle, titleConfig.style || {});\n      titleShape = titleGroup.addShape('text', {\n        attrs: __assign({\n          text: this.get('title')\n        }, style)\n      });\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      titleGroup.setMatrix([1, 0, 0, 0, 1, 0, titleConfig.offsetX, titleConfig.offsetY, 1]);\n    }\n    this.layoutItems();\n    var lcBBox = group.getCanvasBBox();\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    // 若有图形超过边界的情况，平移回来\n    var nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n    var nodeGroupBeginY = titleGroupBBox.maxY < nodeGroupBBox.minY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n    var nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n    nodeGroup.setMatrix(nodeGroupMatrix);\n    lcBBox = group.getCanvasBBox();\n    var size = [lcBBox.minX + lcBBox.width + padding[1], lcBBox.minY + lcBBox.height + padding[2]];\n    // 根据 size 和 titleConfig 调整 title 位置，再调整 nodeGroup 位置\n    if (titleShape) {\n      var titleConfig = __assign({\n        position: 'center',\n        offsetX: 0,\n        offsetY: 0\n      }, this.get('titleConfig'));\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      var titleGroupMatrix = titleGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (titleConfig.position === 'center') {\n        titleGroupMatrix[6] = size[0] / 2 + titleConfig.offsetX;\n      } else if (titleConfig.position === 'right') {\n        titleGroupMatrix[6] = size[0] - padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'right'\n        });\n      } else {\n        titleGroupMatrix[6] = padding[3] + titleConfig.offsetX;\n        titleShape.attr({\n          textAlign: 'left'\n        });\n      }\n      titleGroup.setMatrix(titleGroupMatrix);\n      titleGroupBBox = titleGroup.getCanvasBBox();\n      // 若有图形超过边界的情况，平移回来\n      nodeGroupBeginX = nodeGroupBBox.minX < 0 ? Math.abs(nodeGroupBBox.minX) + padding[3] : padding[3];\n      nodeGroupBeginY = nodeGroupBBox.minY < titleGroupBBox.maxY ? Math.abs(titleGroupBBox.maxY - nodeGroupBBox.minY) + padding[0] : titleGroupBBox.maxY + padding[0];\n      nodeGroupMatrix = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      nodeGroup.setMatrix(nodeGroupMatrix);\n      var edgeGroupMatrix_1 = [1, 0, 0, 0, 1, 0, nodeGroupBeginX, nodeGroupBeginY, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_1[6] += nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_1[7] += nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_1);\n    } else {\n      // 没有 title，也需要平移 edgeGroup\n      nodeGroupBBox = nodeGroup.getCanvasBBox();\n      var edgeGroupMatrix_2 = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n      if (this.get('layout') === 'vertical') edgeGroupMatrix_2[6] += nodeGroupMatrix[6] + nodeGroupBBox.maxX + this.get('horiSep');else edgeGroupMatrix_2[7] += nodeGroupMatrix[7] + nodeGroupBBox.maxY + this.get('vertiSep');\n      edgeGroup.setMatrix(edgeGroupMatrix_2);\n    }\n    lcBBox = group.getCanvasBBox();\n    nodeGroupBBox = nodeGroup.getCanvasBBox();\n    nodeGroupMatrix = nodeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupMatrix = edgeGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var edgeGroupBBox = edgeGroup.getCanvasBBox();\n    size = [Math.max(nodeGroupBBox.width + nodeGroupMatrix[6], edgeGroupBBox.width + edgeGroupMatrix[6]) + padding[1], Math.max(nodeGroupBBox.height + nodeGroupMatrix[7], edgeGroupBBox.height + edgeGroupMatrix[7]) + padding[2]];\n    lc.changeSize(size[0], size[1]);\n    // 更新容器背景样式\n    var containerStyle = this.get('containerStyle');\n    var viewportMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var beginPos = Util.invertMatrix({\n      x: 0,\n      y: 0\n    }, viewportMatrix);\n    var backRect = group.addShape('rect', {\n      attrs: __assign({\n        x: beginPos.x + (containerStyle.lineWidth || 1),\n        y: beginPos.y + (containerStyle.lineWidth || 1),\n        width: size[0] - 2 * (containerStyle.lineWidth || 1),\n        height: size[1] - 2 * (containerStyle.lineWidth || 1),\n        fill: \"#f00\",\n        stroke: '#000',\n        lineWidth: 1,\n        opacity: 0.5\n      }, containerStyle),\n      name: 'legend-back-rect',\n      capture: false\n    });\n    backRect.toBack();\n    return size;\n  };\n  Legend.prototype.layoutItems = function () {\n    var lc = this.get('legendCanvas');\n    var horiSep = this.get('horiSep');\n    var vertiSep = this.get('vertiSep');\n    var layout = this.get('layout');\n    var align = this.get('align');\n    var begin = [0, 0];\n    var group = lc.find(function (e) {\n      return e.get('name') === 'root';\n    });\n    var nodeGroup = group.find(function (e) {\n      return e.get('name') === 'node-group';\n    });\n    var edgeGroup = group.find(function (e) {\n      return e.get('name') === 'edge-group';\n    });\n    var nodeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var rowMaxY = -Infinity;\n    nodeGroup.get('children').forEach(function (cNodeGroup, i) {\n      if (i === 0) nodeLegendSize.min = begin[0];\n      var keyShape = cNodeGroup.get('children')[0];\n      var bbox = cNodeGroup.getCanvasBBox();\n      var _a = keyShape.getBBox(),\n        keyShapeWidth = _a.width,\n        keyShapeHeight = _a.height;\n      var curHeight = 0,\n        x = 0,\n        y = 0;\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0] + keyShapeWidth / 2;\n        begin[0] = y + bbox.height + vertiSep;\n        curHeight = bbox.maxX + x + keyShapeWidth / 2;\n      } else {\n        x = begin[0] + keyShapeWidth / 2;\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        curHeight = bbox.maxY + y + keyShapeHeight / 2;\n      }\n      if (begin[0] > nodeLegendSize.max) nodeLegendSize.max = begin[0];\n      if (curHeight > rowMaxY) rowMaxY = curHeight;\n      cNodeGroup.setMatrix([1, 0, 0, 0, 1, 0, x, y, 1]);\n    });\n    var nw = nodeLegendSize.max - nodeLegendSize.min;\n    var edgeLegendSize = {\n      min: 0,\n      max: -Infinity\n    };\n    var nodeGroupBBox = nodeGroup.getCanvasBBox();\n    begin[0] = 0;\n    begin[1] = layout === 'vertical' ? nodeGroupBBox.maxX + horiSep : nodeGroupBBox.maxY + vertiSep;\n    edgeGroup.get('children').forEach(function (subGroup, i) {\n      if (i === 0) edgeLegendSize.min = begin[0];\n      var keyShape = subGroup.get('children')[0];\n      var bbox = subGroup.getCanvasBBox();\n      var _a = keyShape.getBBox(),\n        keyShapeWidth = _a.width,\n        keyShapeHeight = _a.height;\n      var x = 0,\n        y = 0;\n      if (layout === 'vertical') {\n        x = begin[1];\n        y = begin[0];\n        begin[0] = y + bbox.height + vertiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight / 2, 1]);\n      } else {\n        x = begin[0];\n        y = begin[1];\n        begin[0] = x + bbox.width + horiSep;\n        subGroup.setMatrix([1, 0, 0, 0, 1, 0, x + keyShapeWidth / 2, 0, 1]);\n      }\n      if (begin[0] > edgeLegendSize.max) edgeLegendSize.max = begin[0];\n    });\n    var ew = edgeLegendSize.max - edgeLegendSize.min;\n    if (align && align !== '' && align !== 'left') {\n      var widthDiff = nw - ew;\n      var movement_1 = align === 'center' ? Math.abs(widthDiff) / 2 : Math.abs(widthDiff);\n      var shouldAdjustGroup = widthDiff < 0 ? nodeGroup : edgeGroup;\n      shouldAdjustGroup.get('children').forEach(function (subGroup) {\n        var matrix = subGroup.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n        if (layout === 'vertical') matrix[7] += movement_1;else matrix[6] += movement_1;\n        subGroup.setMatrix(matrix);\n      });\n    }\n  };\n  Legend.prototype.processData = function () {\n    var data = this.get('data');\n    var itemsData = {\n      nodes: [],\n      edges: []\n    };\n    if (data.nodes) {\n      data.nodes.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.nodes.forEach(function (node) {\n        var _a, _b, _c, _d, _e;\n        var size = node.size || [((_a = node.style) === null || _a === void 0 ? void 0 : _a.width) || ((_b = node.style) === null || _b === void 0 ? void 0 : _b.r) || 8, ((_c = node.style) === null || _c === void 0 ? void 0 : _c.height) || ((_d = node.style) === null || _d === void 0 ? void 0 : _d.r) || 8];\n        var labelStyle = ((_e = node.labelCfg) === null || _e === void 0 ? void 0 : _e.style) || {};\n        itemsData.nodes.push({\n          id: node.id || uniqueId(),\n          type: node.type || 'circle',\n          style: __assign({}, node.style),\n          order: node.order,\n          label: node.label,\n          itemType: 'node',\n          size: size,\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n    if (data.edges) {\n      data.edges.sort(function (a, b) {\n        return a.order - b.order;\n      });\n      data.edges.forEach(function (edge) {\n        var _a, _b;\n        var type = edge.type || 'line';\n        if (edge.type === 'cubic-horizontal') type = 'cubic';\n        var labelStyle = ((_a = edge.labelCfg) === null || _a === void 0 ? void 0 : _a.style) || {};\n        var size = edge.size || [((_b = edge.style) === null || _b === void 0 ? void 0 : _b.width) || 8, 1];\n        itemsData.edges.push({\n          id: edge.id || uniqueId(),\n          type: type,\n          size: size,\n          style: __assign({\n            lineWidth: isArray(size) ? size[1] : 1\n          }, edge.style),\n          order: edge.order,\n          label: edge.label,\n          itemType: 'edge',\n          labelCfg: {\n            position: 'right',\n            style: __assign({\n              fontFamily: \"Arial\"\n            }, labelStyle)\n          }\n        });\n      });\n    }\n    this.set('itemsData', itemsData);\n  };\n  Legend.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  Legend.prototype.formatArray = function (key) {\n    var value = this.get(key);\n    if (isNumber(value)) this.set(key, [value, value, value, value]);else if (isArray(value)) {\n      switch (value.length) {\n        case 0:\n          this.set(key, [0, 0, 0, 0]);\n          break;\n        case 1:\n          this.set(key, [value[0], value[0], value[0], value[0]]);\n          break;\n        case 2:\n          this.set(key, [value[0], value[1], value[0], value[1]]);\n          break;\n        case 3:\n          this.set(key, [value[0], value[1], value[2], value[1]]);\n          break;\n        default:\n          break;\n      }\n    }\n    return this.get(key);\n  };\n  Legend.prototype.getShapeSize = function (data) {\n    var width, height, r;\n    if (data.size) {\n      if (isArray(data.size)) {\n        width = data.size[0];\n        height = data.size[1] || data.size[0];\n        r = data.size[0] / 2;\n      } else if (isNumber(data.size)) {\n        width = data.size;\n        height = data.size;\n        r = data.size / 2;\n      }\n    }\n    if (data.style) {\n      if (data.style.width) width = data.style.width;\n      if (data.style.height) height = data.style.height;\n      if (data.style.r) r = data.style.r;\n    }\n    if (!r) r = 5;\n    if (!width) width = r;\n    if (!height) height = r;\n    return {\n      width: width,\n      height: height,\n      r: r\n    };\n  };\n  Legend.prototype.getStyle = function (type, data) {\n    var defaultStyle = type === 'node' ? {\n      fill: '#ccc',\n      lineWidth: 0\n    } : {\n      stroke: '#000',\n      lineWidth: 1\n    };\n    return __assign(__assign({}, defaultStyle), data.style || {});\n  };\n  Legend.prototype.destroy = function () {\n    var lc = this.get('legendCanvas');\n    lc === null || lc === void 0 ? void 0 : lc.destroy();\n    var graph = this.get('graph');\n    var graphContainer = graph.get('container');\n    var container = this.get('container');\n    graphContainer.removeChild(container);\n  };\n  return Legend;\n}(Base);\nexport default Legend;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}