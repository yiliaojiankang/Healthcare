{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { each, isNumber } from '@antv/util';\nimport { timeFormat, toTimeStamp } from '../util/time';\nimport Category from './base';\n/**\n * 时间分类度量\n * @class\n */\nvar TimeCat = /** @class */function (_super) {\n  __extends(TimeCat, _super);\n  function TimeCat() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'timeCat';\n    return _this;\n  }\n  /**\n   * @override\n   */\n  TimeCat.prototype.translate = function (value) {\n    value = toTimeStamp(value);\n    var index = this.values.indexOf(value);\n    if (index === -1) {\n      if (isNumber(value) && value < this.values.length) {\n        index = value;\n      } else {\n        index = NaN;\n      }\n    }\n    return index;\n  };\n  /**\n   * 由于时间类型数据需要转换一下，所以复写 getText\n   * @override\n   */\n  TimeCat.prototype.getText = function (value, tickIndex) {\n    var index = this.translate(value);\n    if (index > -1) {\n      var result = this.values[index];\n      var formatter = this.formatter;\n      result = formatter ? formatter(result, tickIndex) : timeFormat(result, this.mask);\n      return result;\n    }\n    return value;\n  };\n  TimeCat.prototype.initCfg = function () {\n    this.tickMethod = 'time-cat';\n    this.mask = 'YYYY-MM-DD';\n    this.tickCount = 7; // 一般时间数据会显示 7， 14， 30 天的数字\n  };\n\n  TimeCat.prototype.setDomain = function () {\n    var values = this.values;\n    // 针对时间分类类型，会将时间统一转换为时间戳\n    each(values, function (v, i) {\n      values[i] = toTimeStamp(v);\n    });\n    values.sort(function (v1, v2) {\n      return v1 - v2;\n    });\n    _super.prototype.setDomain.call(this);\n  };\n  return TimeCat;\n}(Category);\nexport default TimeCat;","map":{"version":3,"names":["each","isNumber","timeFormat","toTimeStamp","Category","TimeCat","_super","__extends","_this","apply","arguments","type","prototype","translate","value","index","values","indexOf","length","NaN","getText","tickIndex","result","formatter","mask","initCfg","tickMethod","tickCount","setDomain","v","i","sort","v1","v2","call"],"sources":["../../src/category/time.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,IAAI,EAAEC,QAAQ,QAAQ,YAAY;AAC3C,SAASC,UAAU,EAAEC,WAAW,QAAQ,cAAc;AACtD,OAAOC,QAAQ,MAAM,QAAQ;AAE7B;;;;AAIA,IAAAC,OAAA,0BAAAC,MAAA;EAAsBC,SAAA,CAAAF,OAAA,EAAAC,MAAA;EAAtB,SAAAD,QAAA;IAAA,IAAAG,KAAA,GAAAF,MAAA,aAAAA,MAAA,CAAAG,KAAA,OAAAC,SAAA;IACkBF,KAAA,CAAAG,IAAI,GAAW,SAAS;;EAiD1C;EA/CE;;;EAGON,OAAA,CAAAO,SAAA,CAAAC,SAAS,GAAhB,UAAiBC,KAAK;IACpBA,KAAK,GAAGX,WAAW,CAACW,KAAK,CAAC;IAC1B,IAAIC,KAAK,GAAG,IAAI,CAACC,MAAM,CAACC,OAAO,CAACH,KAAK,CAAC;IACtC,IAAIC,KAAK,KAAK,CAAC,CAAC,EAAE;MAChB,IAAId,QAAQ,CAACa,KAAK,CAAC,IAAIA,KAAK,GAAG,IAAI,CAACE,MAAM,CAACE,MAAM,EAAE;QACjDH,KAAK,GAAGD,KAAK;OACd,MAAM;QACLC,KAAK,GAAGI,GAAG;;;IAGf,OAAOJ,KAAK;EACd,CAAC;EAED;;;;EAIOV,OAAA,CAAAO,SAAA,CAAAQ,OAAO,GAAd,UAAeN,KAAsB,EAAEO,SAAkB;IACvD,IAAMN,KAAK,GAAG,IAAI,CAACF,SAAS,CAACC,KAAK,CAAC;IACnC,IAAIC,KAAK,GAAG,CAAC,CAAC,EAAE;MACd,IAAIO,MAAM,GAAG,IAAI,CAACN,MAAM,CAACD,KAAK,CAAC;MAC/B,IAAMQ,SAAS,GAAG,IAAI,CAACA,SAAS;MAChCD,MAAM,GAAGC,SAAS,GAAGA,SAAS,CAACD,MAAM,EAAED,SAAS,CAAC,GAAGnB,UAAU,CAACoB,MAAM,EAAE,IAAI,CAACE,IAAI,CAAC;MACjF,OAAOF,MAAM;;IAEf,OAAOR,KAAK;EACd,CAAC;EACST,OAAA,CAAAO,SAAA,CAAAa,OAAO,GAAjB;IACE,IAAI,CAACC,UAAU,GAAG,UAAU;IAC5B,IAAI,CAACF,IAAI,GAAG,YAAY;IACxB,IAAI,CAACG,SAAS,GAAG,CAAC,CAAC,CAAC;EACtB,CAAC;;EAEStB,OAAA,CAAAO,SAAA,CAAAgB,SAAS,GAAnB;IACE,IAAMZ,MAAM,GAAG,IAAI,CAACA,MAAM;IAC1B;IACAhB,IAAI,CAACgB,MAAM,EAAE,UAACa,CAAC,EAAEC,CAAC;MAChBd,MAAM,CAACc,CAAC,CAAC,GAAG3B,WAAW,CAAC0B,CAAC,CAAC;IAC5B,CAAC,CAAC;IACFb,MAAM,CAACe,IAAI,CAAC,UAACC,EAAE,EAAEC,EAAE;MACjB,OAAOD,EAAE,GAAGC,EAAE;IAChB,CAAC,CAAC;IACF3B,MAAA,CAAAM,SAAA,CAAMgB,SAAS,CAAAM,IAAA,MAAE;EACnB,CAAC;EACH,OAAA7B,OAAC;AAAD,CAAC,CAlDqBD,QAAQ;AAoD9B,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}