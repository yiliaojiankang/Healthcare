{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __extends } from \"tslib\";\nimport { get } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport Theme from '../util/theme';\nimport { pointsToBBox } from '../util/util';\nimport { renderTag } from '../util/graphic';\nvar DataRegionAnnotation = /** @class */function (_super) {\n  __extends(DataRegionAnnotation, _super);\n  function DataRegionAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n  DataRegionAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'dataRegion',\n      locationType: 'points',\n      points: [],\n      lineLength: 0,\n      region: {},\n      text: {},\n      defaultCfg: {\n        region: {\n          style: {\n            lineWidth: 0,\n            fill: Theme.regionColor,\n            opacity: 0.4\n          }\n        },\n        text: {\n          content: '',\n          style: {\n            textAlign: 'center',\n            textBaseline: 'bottom',\n            fontSize: 12,\n            fill: Theme.textColor,\n            fontFamily: Theme.fontFamily\n          }\n        }\n      }\n    });\n  };\n  DataRegionAnnotation.prototype.renderInner = function (group) {\n    var regionStyle = get(this.get('region'), 'style', {});\n    var textStyle = get(this.get('text'), 'style', {});\n    var lineLength = this.get('lineLength') || 0;\n    var points = this.get('points');\n    if (!points.length) {\n      return;\n    }\n    var bbox = pointsToBBox(points);\n    // render region\n    var path = [];\n    path.push(['M', points[0].x, bbox.minY - lineLength]);\n    points.forEach(function (point) {\n      path.push(['L', point.x, point.y]);\n    });\n    path.push(['L', points[points.length - 1].x, points[points.length - 1].y - lineLength]);\n    this.addShape(group, {\n      type: 'path',\n      id: this.getElementId('region'),\n      name: 'annotation-region',\n      attrs: __assign({\n        path: path\n      }, regionStyle)\n    });\n    // render text\n    var textCfg = __assign({\n      id: this.getElementId('text'),\n      name: 'annotation-text',\n      x: (bbox.minX + bbox.maxX) / 2,\n      y: bbox.minY - lineLength\n    }, this.get('text'));\n    renderTag(group, textCfg);\n  };\n  return DataRegionAnnotation;\n}(GroupComponent);\nexport default DataRegionAnnotation;","map":{"version":3,"names":["get","GroupComponent","Theme","pointsToBBox","renderTag","DataRegionAnnotation","_super","__extends","prototype","getDefaultCfg","cfg","call","__assign","name","type","locationType","points","lineLength","region","text","defaultCfg","style","lineWidth","fill","regionColor","opacity","content","textAlign","textBaseline","fontSize","textColor","fontFamily","renderInner","group","regionStyle","textStyle","length","bbox","path","push","x","minY","forEach","point","y","addShape","id","getElementId","attrs","textCfg","minX","maxX"],"sources":["../../src/annotation/data-region.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}