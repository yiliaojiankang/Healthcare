{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"style\", \"minZoom\", \"maxZoom\", \"token\", \"mapInstance\", \"plugin\"];\nvar _dec, _class;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * AMapService\n */\n\nimport { CoordinateSystem } from '@antv/l7-core';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport AMapBaseService from \"../utils/amap/AMapBaseService\";\nimport AMapLoader from \"../utils/amaploader\";\nimport Viewport from \"./Viewport\";\n// @ts-ignore\nwindow.forceWebGL = true;\nvar AMAP_API_KEY = '15cd8a57710d40c9b7c0e3cc120f1200';\nvar AMAP_VERSION = '1.4.15';\n\n/**\n * 高德地图脚本是否加载完毕\n */\nvar amapLoaded = false;\n/**\n * 高德地图脚本加载成功等待队列，成功之后依次触发\n */\nvar pendingResolveQueue = [];\nvar LNGLAT_OFFSET_ZOOM_THRESHOLD = 12; // 暂时关闭 fix 统一不同坐标系，不同底图的高度位置\n\n/**\n * AMapService\n */\nvar AMapService = (_dec = injectable(), _dec(_class = /*#__PURE__*/function (_AMapBaseService) {\n  _inherits(AMapService, _AMapBaseService);\n  var _super = _createSuper(AMapService);\n  function AMapService() {\n    var _this;\n    _classCallCheck(this, AMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"version\", 'GAODE1.x');\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function (e) {\n      var _e$camera = e.camera,\n        fov = _e$camera.fov,\n        near = _e$camera.near,\n        far = _e$camera.far,\n        height = _e$camera.height,\n        pitch = _e$camera.pitch,\n        rotation = _e$camera.rotation,\n        aspect = _e$camera.aspect,\n        position = _e$camera.position;\n      var _this$getCenter = _this.getCenter(),\n        lng = _this$getCenter.lng,\n        lat = _this$getCenter.lat;\n      // Tip: 触发地图变化事件\n      _this.emit('mapchange');\n      if (_this.cameraChangedCallback) {\n        _this.viewport.syncWithMapCamera({\n          aspect: aspect,\n          // AMap 定义 rotation 为顺时针方向，而 Mapbox 为逆时针\n          // @see https://docs.mapbox.com/mapbox-gl-js/api/#map#getbearing\n          bearing: 360 - rotation,\n          far: far,\n          fov: fov,\n          cameraHeight: height,\n          near: near,\n          pitch: pitch,\n          // AMap 定义的缩放等级 与 Mapbox 相差 1\n          zoom: _this.map.getZoom() - 1,\n          center: [lng, lat],\n          offsetOrigin: [position.x, position.y]\n        });\n        var _this$config$offsetZo = _this.config.offsetZoom,\n          offsetZoom = _this$config$offsetZo === void 0 ? LNGLAT_OFFSET_ZOOM_THRESHOLD : _this$config$offsetZo;\n        // console.log('this.viewport', this.viewport)\n        // set coordinate system\n        if (_this.viewport.getZoom() > offsetZoom) {\n          _this.coordinateSystemService.setCoordinateSystem(CoordinateSystem.P20_OFFSET);\n        } else {\n          _this.coordinateSystemService.setCoordinateSystem(CoordinateSystem.P20);\n        }\n        _this.cameraChangedCallback(_this.viewport);\n      }\n    });\n    return _this;\n  }\n  _createClass(AMapService, [{\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      // @ts-ignore\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n        var _this$config, id, _this$config$style, style, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$token, token, mapInstance, _this$config$plugin, plugin, rest;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this$config = this.config, id = _this$config.id, _this$config$style = _this$config.style, style = _this$config$style === void 0 ? 'light' : _this$config$style, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 0 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? AMAP_API_KEY : _this$config$token, mapInstance = _this$config.mapInstance, _this$config$plugin = _this$config.plugin, plugin = _this$config$plugin === void 0 ? [] : _this$config$plugin, rest = _objectWithoutProperties(_this$config, _excluded); // 高德地图创建独立的container；\n              // tslint:disable-next-line:typedef\n              _context.next = 3;\n              return new Promise(function (resolve) {\n                var resolveMap = function resolveMap() {\n                  if (mapInstance) {\n                    _this2.map = mapInstance;\n                    _this2.$mapContainer = _this2.map.getContainer();\n                    setTimeout(function () {\n                      _this2.map.on('camerachange', _this2.handleCameraChanged);\n                      resolve();\n                    }, 30);\n                  } else {\n                    _this2.$mapContainer = _this2.creatMapContainer(id);\n                    var mapConstructorOptions = _objectSpread({\n                      mapStyle: _this2.getMapStyleValue(style),\n                      zooms: [minZoom, maxZoom],\n                      viewMode: '3D'\n                    }, rest);\n                    if (mapConstructorOptions.zoom) {\n                      // 高德地图在相同大小下需要比 MapBox 多一个 zoom 层级\n                      mapConstructorOptions.zoom += 1;\n                    }\n                    // @ts-ignore\n                    var map = new AMap.Map(_this2.$mapContainer, mapConstructorOptions);\n                    // 监听地图相机事件\n                    map.on('camerachange', _this2.handleCameraChanged);\n                    // Tip: 为了兼容开启 MultiPassRender 的情况\n                    // 修复 MultiPassRender 在高德地图 1.x 的情况下，缩放地图改变 zoom 时存在可视化层和底图不同步的现象\n                    map.on('camerachange', function () {\n                      setTimeout(function () {\n                        return _this2.handleAfterMapChange();\n                      });\n                    });\n\n                    // @ts-ignore\n                    _this2.map = map;\n                    setTimeout(function () {\n                      resolve();\n                    }, 10);\n                  }\n                };\n                if (!amapLoaded && !mapInstance) {\n                  if (token === AMAP_API_KEY) {\n                    console.warn(_this2.configService.getSceneWarninfo('MapToken'));\n                  }\n                  amapLoaded = true;\n                  plugin.push('Map3D');\n                  AMapLoader.load({\n                    key: token,\n                    // 申请好的Web端开发者Key，首次调用 load 时必填\n                    version: AMAP_VERSION,\n                    // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n                    plugins: plugin // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n                  }).then(function (AMap) {\n                    resolveMap();\n                    if (pendingResolveQueue.length) {\n                      pendingResolveQueue.forEach(function (r) {\n                        return r();\n                      });\n                      pendingResolveQueue = [];\n                    }\n                  }).catch(function (e) {\n                    throw new Error(e);\n                  });\n                } else {\n                  if (amapLoaded && window.AMap || mapInstance) {\n                    resolveMap();\n                  } else {\n                    pendingResolveQueue.push(resolveMap);\n                  }\n                }\n              });\n            case 3:\n              this.viewport = new Viewport();\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(center, outer) {\n      // 统一根据经纬度来转化\n      // Tip: 实际米距离 unit meter\n      var meterDis = AMap.GeometryUtil.distance(_construct(AMap.LngLat, _toConsumableArray(center)), _construct(AMap.LngLat, _toConsumableArray(outer)));\n\n      // Tip: 三维世界坐标距离\n      var _this$lngLatToCoord = this.lngLatToCoord(center),\n        _this$lngLatToCoord2 = _slicedToArray(_this$lngLatToCoord, 2),\n        x1 = _this$lngLatToCoord2[0],\n        y1 = _this$lngLatToCoord2[1];\n      var _this$lngLatToCoord3 = this.lngLatToCoord(outer),\n        _this$lngLatToCoord4 = _slicedToArray(_this$lngLatToCoord3, 2),\n        x2 = _this$lngLatToCoord4[0],\n        y2 = _this$lngLatToCoord4[1];\n      var coordDis = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDis / meterDis;\n    }\n\n    // tslint:disable-next-line:no-empty\n  }, {\n    key: \"updateView\",\n    value: function updateView(viewOption) {}\n  }, {\n    key: \"getOverlayContainer\",\n    value: function getOverlayContainer() {\n      return undefined;\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var _this$getContainer;\n      var renderCanvas = (_this$getContainer = this.getContainer()) === null || _this$getContainer === void 0 ? void 0 : _this$getContainer.getElementsByClassName('amap-layer')[0];\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }]);\n  return AMapService;\n}(AMapBaseService)) || _class);\nexport { AMapService as default };","map":{"version":3,"names":["_slicedToArray","_construct","_toConsumableArray","_objectSpread","_objectWithoutProperties","_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_excluded","_dec","_class","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","CoordinateSystem","mat4","vec3","injectable","AMapBaseService","AMapLoader","Viewport","window","forceWebGL","AMAP_API_KEY","AMAP_VERSION","amapLoaded","pendingResolveQueue","LNGLAT_OFFSET_ZOOM_THRESHOLD","AMapService","_AMapBaseService","_super","_this","_len","length","args","Array","_key","concat","_e$camera","camera","fov","near","far","height","pitch","rotation","aspect","position","_this$getCenter","getCenter","lng","lat","emit","cameraChangedCallback","viewport","syncWithMapCamera","bearing","cameraHeight","zoom","map","getZoom","center","offsetOrigin","x","y","_this$config$offsetZo","config","offsetZoom","coordinateSystemService","setCoordinateSystem","P20_OFFSET","P20","key","value","getModelMatrix","lnglat","altitude","rotate","scale","undefined","flat","projectFlat","modelMatrix","create","translate","fromValues","rotateX","rotateY","rotateZ","_init","mark","_callee","_this2","_this$config","id","_this$config$style","style","_this$config$minZoom","minZoom","_this$config$maxZoom","maxZoom","_this$config$token","token","mapInstance","_this$config$plugin","plugin","rest","wrap","_callee$","_context","prev","next","Promise","resolve","resolveMap","$mapContainer","getContainer","setTimeout","on","handleCameraChanged","creatMapContainer","mapConstructorOptions","mapStyle","getMapStyleValue","zooms","viewMode","AMap","Map","handleAfterMapChange","console","warn","configService","getSceneWarninfo","push","load","version","plugins","then","forEach","r","catch","Error","stop","init","meterToCoord","outer","meterDis","GeometryUtil","distance","LngLat","_this$lngLatToCoord","lngLatToCoord","_this$lngLatToCoord2","x1","y1","_this$lngLatToCoord3","_this$lngLatToCoord4","x2","y2","coordDis","Math","sqrt","pow","updateView","viewOption","getOverlayContainer","exportMap","type","_this$getContainer","renderCanvas","getElementsByClassName","layersPng","toDataURL","onCameraChanged","callback","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-maps/es/amap/map.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"style\", \"minZoom\", \"maxZoom\", \"token\", \"mapInstance\", \"plugin\"];\nvar _dec, _class;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * AMapService\n */\n\nimport { CoordinateSystem } from '@antv/l7-core';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport AMapBaseService from \"../utils/amap/AMapBaseService\";\nimport AMapLoader from \"../utils/amaploader\";\nimport Viewport from \"./Viewport\";\n// @ts-ignore\nwindow.forceWebGL = true;\nvar AMAP_API_KEY = '15cd8a57710d40c9b7c0e3cc120f1200';\nvar AMAP_VERSION = '1.4.15';\n\n/**\n * 高德地图脚本是否加载完毕\n */\nvar amapLoaded = false;\n/**\n * 高德地图脚本加载成功等待队列，成功之后依次触发\n */\nvar pendingResolveQueue = [];\nvar LNGLAT_OFFSET_ZOOM_THRESHOLD = 12; // 暂时关闭 fix 统一不同坐标系，不同底图的高度位置\n\n/**\n * AMapService\n */\nvar AMapService = (_dec = injectable(), _dec(_class = /*#__PURE__*/function (_AMapBaseService) {\n  _inherits(AMapService, _AMapBaseService);\n  var _super = _createSuper(AMapService);\n  function AMapService() {\n    var _this;\n    _classCallCheck(this, AMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"version\", 'GAODE1.x');\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function (e) {\n      var _e$camera = e.camera,\n        fov = _e$camera.fov,\n        near = _e$camera.near,\n        far = _e$camera.far,\n        height = _e$camera.height,\n        pitch = _e$camera.pitch,\n        rotation = _e$camera.rotation,\n        aspect = _e$camera.aspect,\n        position = _e$camera.position;\n      var _this$getCenter = _this.getCenter(),\n        lng = _this$getCenter.lng,\n        lat = _this$getCenter.lat;\n      // Tip: 触发地图变化事件\n      _this.emit('mapchange');\n      if (_this.cameraChangedCallback) {\n        _this.viewport.syncWithMapCamera({\n          aspect: aspect,\n          // AMap 定义 rotation 为顺时针方向，而 Mapbox 为逆时针\n          // @see https://docs.mapbox.com/mapbox-gl-js/api/#map#getbearing\n          bearing: 360 - rotation,\n          far: far,\n          fov: fov,\n          cameraHeight: height,\n          near: near,\n          pitch: pitch,\n          // AMap 定义的缩放等级 与 Mapbox 相差 1\n          zoom: _this.map.getZoom() - 1,\n          center: [lng, lat],\n          offsetOrigin: [position.x, position.y]\n        });\n        var _this$config$offsetZo = _this.config.offsetZoom,\n          offsetZoom = _this$config$offsetZo === void 0 ? LNGLAT_OFFSET_ZOOM_THRESHOLD : _this$config$offsetZo;\n        // console.log('this.viewport', this.viewport)\n        // set coordinate system\n        if (_this.viewport.getZoom() > offsetZoom) {\n          _this.coordinateSystemService.setCoordinateSystem(CoordinateSystem.P20_OFFSET);\n        } else {\n          _this.coordinateSystemService.setCoordinateSystem(CoordinateSystem.P20);\n        }\n        _this.cameraChangedCallback(_this.viewport);\n      }\n    });\n    return _this;\n  }\n  _createClass(AMapService, [{\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      // @ts-ignore\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n        var _this$config, id, _this$config$style, style, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$token, token, mapInstance, _this$config$plugin, plugin, rest;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this$config = this.config, id = _this$config.id, _this$config$style = _this$config.style, style = _this$config$style === void 0 ? 'light' : _this$config$style, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 0 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? AMAP_API_KEY : _this$config$token, mapInstance = _this$config.mapInstance, _this$config$plugin = _this$config.plugin, plugin = _this$config$plugin === void 0 ? [] : _this$config$plugin, rest = _objectWithoutProperties(_this$config, _excluded); // 高德地图创建独立的container；\n              // tslint:disable-next-line:typedef\n              _context.next = 3;\n              return new Promise(function (resolve) {\n                var resolveMap = function resolveMap() {\n                  if (mapInstance) {\n                    _this2.map = mapInstance;\n                    _this2.$mapContainer = _this2.map.getContainer();\n                    setTimeout(function () {\n                      _this2.map.on('camerachange', _this2.handleCameraChanged);\n                      resolve();\n                    }, 30);\n                  } else {\n                    _this2.$mapContainer = _this2.creatMapContainer(id);\n                    var mapConstructorOptions = _objectSpread({\n                      mapStyle: _this2.getMapStyleValue(style),\n                      zooms: [minZoom, maxZoom],\n                      viewMode: '3D'\n                    }, rest);\n                    if (mapConstructorOptions.zoom) {\n                      // 高德地图在相同大小下需要比 MapBox 多一个 zoom 层级\n                      mapConstructorOptions.zoom += 1;\n                    }\n                    // @ts-ignore\n                    var map = new AMap.Map(_this2.$mapContainer, mapConstructorOptions);\n                    // 监听地图相机事件\n                    map.on('camerachange', _this2.handleCameraChanged);\n                    // Tip: 为了兼容开启 MultiPassRender 的情况\n                    // 修复 MultiPassRender 在高德地图 1.x 的情况下，缩放地图改变 zoom 时存在可视化层和底图不同步的现象\n                    map.on('camerachange', function () {\n                      setTimeout(function () {\n                        return _this2.handleAfterMapChange();\n                      });\n                    });\n\n                    // @ts-ignore\n                    _this2.map = map;\n                    setTimeout(function () {\n                      resolve();\n                    }, 10);\n                  }\n                };\n                if (!amapLoaded && !mapInstance) {\n                  if (token === AMAP_API_KEY) {\n                    console.warn(_this2.configService.getSceneWarninfo('MapToken'));\n                  }\n                  amapLoaded = true;\n                  plugin.push('Map3D');\n                  AMapLoader.load({\n                    key: token,\n                    // 申请好的Web端开发者Key，首次调用 load 时必填\n                    version: AMAP_VERSION,\n                    // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n                    plugins: plugin // 需要使用的的插件列表，如比例尺'AMap.Scale'等\n                  }).then(function (AMap) {\n                    resolveMap();\n                    if (pendingResolveQueue.length) {\n                      pendingResolveQueue.forEach(function (r) {\n                        return r();\n                      });\n                      pendingResolveQueue = [];\n                    }\n                  }).catch(function (e) {\n                    throw new Error(e);\n                  });\n                } else {\n                  if (amapLoaded && window.AMap || mapInstance) {\n                    resolveMap();\n                  } else {\n                    pendingResolveQueue.push(resolveMap);\n                  }\n                }\n              });\n            case 3:\n              this.viewport = new Viewport();\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(center, outer) {\n      // 统一根据经纬度来转化\n      // Tip: 实际米距离 unit meter\n      var meterDis = AMap.GeometryUtil.distance(_construct(AMap.LngLat, _toConsumableArray(center)), _construct(AMap.LngLat, _toConsumableArray(outer)));\n\n      // Tip: 三维世界坐标距离\n      var _this$lngLatToCoord = this.lngLatToCoord(center),\n        _this$lngLatToCoord2 = _slicedToArray(_this$lngLatToCoord, 2),\n        x1 = _this$lngLatToCoord2[0],\n        y1 = _this$lngLatToCoord2[1];\n      var _this$lngLatToCoord3 = this.lngLatToCoord(outer),\n        _this$lngLatToCoord4 = _slicedToArray(_this$lngLatToCoord3, 2),\n        x2 = _this$lngLatToCoord4[0],\n        y2 = _this$lngLatToCoord4[1];\n      var coordDis = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDis / meterDis;\n    }\n\n    // tslint:disable-next-line:no-empty\n  }, {\n    key: \"updateView\",\n    value: function updateView(viewOption) {}\n  }, {\n    key: \"getOverlayContainer\",\n    value: function getOverlayContainer() {\n      return undefined;\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var _this$getContainer;\n      var renderCanvas = (_this$getContainer = this.getContainer()) === null || _this$getContainer === void 0 ? void 0 : _this$getContainer.getElementsByClassName('amap-layer')[0];\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }]);\n  return AMapService;\n}(AMapBaseService)) || _class);\nexport { AMapService as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}