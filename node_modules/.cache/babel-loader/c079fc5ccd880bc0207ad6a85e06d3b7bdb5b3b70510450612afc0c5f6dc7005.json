{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __extends } from \"tslib\";\nimport { Action, registerComponentController, TooltipController, Util } from '@antv/g2';\nimport { isNil } from '@antv/util';\nvar RadarTooltipController = /** @class */function (_super) {\n  __extends(RadarTooltipController, _super);\n  function RadarTooltipController() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Object.defineProperty(RadarTooltipController.prototype, \"name\", {\n    get: function () {\n      return 'radar-tooltip';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  RadarTooltipController.prototype.getTooltipItems = function (point) {\n    var _a = this.getTooltipCfg(),\n      shared = _a.shared,\n      cfgTitle = _a.title;\n    var hintItems = _super.prototype.getTooltipItems.call(this, point);\n    if (hintItems.length > 0) {\n      var geometry_1 = this.view.geometries[0];\n      var dataArray = geometry_1.dataArray;\n      var title_1 = hintItems[0].name;\n      var result_1 = [];\n      dataArray.forEach(function (mappingData) {\n        mappingData.forEach(function (d) {\n          var items = Util.getTooltipItems(d, geometry_1);\n          var item = items[0];\n          if (!shared && item && item.name === title_1) {\n            var displayTitle = isNil(cfgTitle) ? title_1 : cfgTitle;\n            result_1.push(__assign(__assign({}, item), {\n              name: item.title,\n              title: displayTitle\n            }));\n          } else if (shared && item) {\n            var displayTitle = isNil(cfgTitle) ? item.name || title_1 : cfgTitle;\n            result_1.push(__assign(__assign({}, item), {\n              name: item.title,\n              title: displayTitle\n            }));\n          }\n        });\n      });\n      return result_1;\n    }\n    return [];\n  };\n  return RadarTooltipController;\n}(TooltipController);\nexport { RadarTooltipController };\nregisterComponentController('radar-tooltip', RadarTooltipController);\n/**\n * 雷达图 tooltip 激活 action\n */\nvar RadarTooltipAction = /** @class */function (_super) {\n  __extends(RadarTooltipAction, _super);\n  function RadarTooltipAction() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  RadarTooltipAction.prototype.init = function () {\n    var view = this.context.view;\n    view.removeInteraction('tooltip');\n  };\n  RadarTooltipAction.prototype.show = function () {\n    var event = this.context.event;\n    var controller = this.getTooltipController();\n    controller.showTooltip({\n      x: event.x,\n      y: event.y\n    });\n  };\n  RadarTooltipAction.prototype.hide = function () {\n    var controller = this.getTooltipController();\n    controller.hideTooltip();\n  };\n  RadarTooltipAction.prototype.getTooltipController = function () {\n    var view = this.context.view;\n    return view.getController('radar-tooltip');\n  };\n  return RadarTooltipAction;\n}(Action);\nexport { RadarTooltipAction };","map":{"version":3,"names":["Action","registerComponentController","TooltipController","Util","isNil","RadarTooltipController","_super","__extends","Object","defineProperty","prototype","get","getTooltipItems","point","_a","getTooltipCfg","shared","cfgTitle","title","hintItems","call","length","geometry_1","view","geometries","dataArray","title_1","name","result_1","forEach","mappingData","d","items","item","displayTitle","push","__assign","RadarTooltipAction","init","context","removeInteraction","show","event","controller","getTooltipController","showTooltip","x","y","hide","hideTooltip","getController"],"sources":["../../../../src/plots/radar/interactions/radar-tooltip-action.ts"],"sourcesContent":["import { Action, registerComponentController, TooltipController, Util } from '@antv/g2';\nimport { isNil } from '@antv/util';\nimport { Point } from '../../../types';\n\nexport class RadarTooltipController extends TooltipController {\n  public get name(): string {\n    return 'radar-tooltip';\n  }\n\n  public getTooltipItems(point: Point) {\n    const { shared, title: cfgTitle } = this.getTooltipCfg();\n    const hintItems = super.getTooltipItems(point);\n\n    if (hintItems.length > 0) {\n      const geometry = this.view.geometries[0];\n      const dataArray = geometry.dataArray;\n      const title = hintItems[0].name;\n      const result = [];\n      dataArray.forEach((mappingData) => {\n        mappingData.forEach((d) => {\n          const items = Util.getTooltipItems(d, geometry);\n          const item = items[0];\n          if (!shared && item && item.name === title) {\n            const displayTitle = isNil(cfgTitle) ? title : cfgTitle;\n            result.push({ ...item, name: item.title, title: displayTitle });\n          } else if (shared && item) {\n            const displayTitle = isNil(cfgTitle) ? item.name || title : cfgTitle;\n            result.push({ ...item, name: item.title, title: displayTitle });\n          }\n        });\n      });\n\n      return result;\n    }\n    return [];\n  }\n}\nregisterComponentController('radar-tooltip', RadarTooltipController);\n\n/**\n * 雷达图 tooltip 激活 action\n */\nexport class RadarTooltipAction extends Action {\n  init() {\n    const { view } = this.context;\n    view.removeInteraction('tooltip');\n  }\n\n  public show() {\n    const { event } = this.context;\n    const controller = this.getTooltipController();\n    controller.showTooltip({ x: event.x, y: event.y });\n  }\n\n  public hide() {\n    const controller = this.getTooltipController();\n    controller.hideTooltip();\n  }\n\n  private getTooltipController() {\n    const { view } = this.context;\n    return view.getController('radar-tooltip') as TooltipController;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}