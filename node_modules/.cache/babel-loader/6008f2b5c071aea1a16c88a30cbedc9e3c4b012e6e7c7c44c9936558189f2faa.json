{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5;\nimport { CameraUniform, CoordinateUniform, TYPES } from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\n\n/**\n * 在渲染之前需要获取当前 Shader 所需 Uniform，例如：\n * 1. 从相机服务中获取 View & ProjectionMatrix，当前缩放等级等等\n * 2. 从坐标系服务中获取当前坐标系，例如是否是偏移坐标系\n *    @see https://yuque.antfin-inc.com/yuqi.pyq/fgetpa/doml91\n * 3. 当前 Layer 本身的样式属性\n */\nvar ShaderUniformPlugin = (_dec = injectable(), _dec2 = inject(TYPES.ICameraService), _dec3 = inject(TYPES.ICoordinateSystemService), _dec4 = inject(TYPES.IRendererService), _dec5 = inject(TYPES.IMapService), _dec6 = inject(TYPES.ILayerService), _dec(_class = (_class2 = /*#__PURE__*/function () {\n  function ShaderUniformPlugin() {\n    _classCallCheck(this, ShaderUniformPlugin);\n    _initializerDefineProperty(this, \"cameraService\", _descriptor, this);\n    _initializerDefineProperty(this, \"coordinateSystemService\", _descriptor2, this);\n    _initializerDefineProperty(this, \"rendererService\", _descriptor3, this);\n    _initializerDefineProperty(this, \"mapService\", _descriptor4, this);\n    _initializerDefineProperty(this, \"layerService\", _descriptor5, this);\n  }\n  _createClass(ShaderUniformPlugin, [{\n    key: \"apply\",\n    value: function apply(layer) {\n      var _this = this;\n      var version = this.mapService.version;\n      var mvp = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]; // default matrix (for gaode2.x)\n      var sceneCenterMercator = [0, 0];\n      var uniformBuffer;\n      if (!this.rendererService.uniformBuffers[0]) {\n        // Create a Uniform Buffer Object(UBO).\n        uniformBuffer = this.rendererService.createBuffer({\n          data: new Float32Array(16 * 4 + 4 * 7),\n          isUBO: true\n        });\n        this.rendererService.uniformBuffers[0] = uniformBuffer;\n      }\n      layer.hooks.beforeRender.tap('ShaderUniformPlugin', function () {\n        // @ts-ignore\n        var offset = layer.getLayerConfig().tileOrigin;\n        // 重新计算坐标系参数\n        _this.coordinateSystemService.refresh(offset);\n        if (version === 'GAODE2.x') {\n          _this.setLayerCenter(layer);\n          // @ts-ignore\n          mvp = _this.mapService.map.customCoords.getMVPMatrix();\n          // mvp = amapCustomCoords.getMVPMatrix()\n          // @ts-ignore\n          sceneCenterMercator = _this.mapService.getCustomCoordCenter();\n          var _uniformBuffer = layer.getLayerUniformBuffer();\n          _uniformBuffer.subData({\n            offset: 0,\n            data: new Uint8Array(new Float32Array([].concat(_toConsumableArray(mvp), _toConsumableArray(sceneCenterMercator))).buffer)\n          });\n        }\n        var _this$rendererService = _this.rendererService.getViewportSize(),\n          width = _this$rendererService.width,\n          height = _this$rendererService.height;\n        var _this$generateUBO = _this.generateUBO(mvp, sceneCenterMercator, width, height),\n          data = _this$generateUBO.data,\n          uniforms = _this$generateUBO.uniforms;\n        if (_this.layerService.alreadyInRendering && _this.rendererService.uniformBuffers[0]) {\n          var renderUniformBuffer = _this.rendererService.uniformBuffers[0];\n          // Update only once since all models can share one UBO.\n          renderUniformBuffer.subData({\n            offset: 0,\n            data: data\n          });\n        }\n\n        // For WebGL1. regl \n        var platformString = _this.rendererService.queryVerdorInfo();\n        if (platformString === 'WebGL1') {\n          layer.models.forEach(function (model) {\n            model.addUniforms(_objectSpread(_objectSpread({}, uniforms), {}, {\n              // TODO: move these 2 uniforms to PixelPickingPlugin\n              u_PickingBuffer: layer.getLayerConfig().pickingBuffer || 0,\n              // Tip: 当前地图是否在拖动\n              u_shaderPick: Number(layer.getShaderPickStat())\n            }));\n          });\n        }\n      });\n    }\n\n    /**\n     * 对于每个 layer 都有不同的几何中心点，因此在绘制每个 layer 的时候都需要重新设置\n     * @param layer\n     */\n  }, {\n    key: \"setLayerCenter\",\n    value: function setLayerCenter(layer) {\n      if (layer.coordCenter === undefined) {\n        layer.coordCenter = layer.getSource().center;\n      }\n      if (this.mapService.setCoordCenter) {\n        this.mapService.setCoordCenter(layer.coordCenter);\n      }\n    }\n  }, {\n    key: \"generateUBO\",\n    value: function generateUBO(u_Mvp, sceneCenterMercator, width, height) {\n      var _uniforms;\n      var u_ProjectionMatrix = this.cameraService.getProjectionMatrix();\n      var u_ViewMatrix = this.cameraService.getViewMatrix();\n      var u_ViewProjectionMatrix = this.cameraService.getViewProjectionMatrix();\n      var u_ModelMatrix = this.cameraService.getModelMatrix();\n      var u_ViewportCenterProjection = this.coordinateSystemService.getViewportCenterProjection();\n      var u_PixelsPerDegree = this.coordinateSystemService.getPixelsPerDegree();\n      var u_Zoom = this.cameraService.getZoom();\n      var u_PixelsPerDegree2 = this.coordinateSystemService.getPixelsPerDegree2();\n      var u_ZoomScale = this.cameraService.getZoomScale();\n      var u_PixelsPerMeter = this.coordinateSystemService.getPixelsPerMeter();\n      var u_CoordinateSystem = this.coordinateSystemService.getCoordinateSystem();\n      var u_CameraPosition = this.cameraService.getCameraPosition();\n      var u_DevicePixelRatio = window.devicePixelRatio;\n      var u_ViewportCenter = this.coordinateSystemService.getViewportCenter();\n      var u_ViewportSize = [width, height];\n      var u_FocalDistance = this.cameraService.getFocalDistance();\n      var data = [].concat(_toConsumableArray(u_ViewMatrix), _toConsumableArray(u_ProjectionMatrix), _toConsumableArray(u_ViewProjectionMatrix), _toConsumableArray(u_ModelMatrix), _toConsumableArray(u_ViewportCenterProjection), _toConsumableArray(u_PixelsPerDegree), [\n      // 4\n      u_Zoom], _toConsumableArray(u_PixelsPerDegree2), [\n      // 4\n      u_ZoomScale], _toConsumableArray(u_PixelsPerMeter), [\n      // 4\n      u_CoordinateSystem], _toConsumableArray(u_CameraPosition), [\n      // 4\n      u_DevicePixelRatio], _toConsumableArray(u_ViewportCenter), u_ViewportSize, [\n      // 4\n      u_FocalDistance,\n      // 1\n      0, 0, 0]);\n      return {\n        data: data,\n        uniforms: (_uniforms = {}, _defineProperty(_uniforms, CameraUniform.ProjectionMatrix, u_ProjectionMatrix), _defineProperty(_uniforms, CameraUniform.ViewMatrix, u_ViewMatrix), _defineProperty(_uniforms, CameraUniform.ViewProjectionMatrix, u_ViewProjectionMatrix), _defineProperty(_uniforms, CameraUniform.Zoom, u_Zoom), _defineProperty(_uniforms, CameraUniform.ZoomScale, u_ZoomScale), _defineProperty(_uniforms, CameraUniform.FocalDistance, u_FocalDistance), _defineProperty(_uniforms, CameraUniform.CameraPosition, u_CameraPosition), _defineProperty(_uniforms, CoordinateUniform.CoordinateSystem, u_CoordinateSystem), _defineProperty(_uniforms, CoordinateUniform.ViewportCenter, u_ViewportCenter), _defineProperty(_uniforms, CoordinateUniform.ViewportCenterProjection, u_ViewportCenterProjection), _defineProperty(_uniforms, CoordinateUniform.PixelsPerDegree, u_PixelsPerDegree), _defineProperty(_uniforms, CoordinateUniform.PixelsPerDegree2, u_PixelsPerDegree2), _defineProperty(_uniforms, CoordinateUniform.PixelsPerMeter, u_PixelsPerMeter), _defineProperty(_uniforms, CoordinateUniform.Mvp, u_Mvp), _defineProperty(_uniforms, \"u_sceneCenterMercator\", sceneCenterMercator), _defineProperty(_uniforms, \"u_ViewportSize\", u_ViewportSize), _defineProperty(_uniforms, \"u_ModelMatrix\", u_ModelMatrix), _defineProperty(_uniforms, \"u_DevicePixelRatio\", u_DevicePixelRatio), _uniforms)\n      };\n    }\n  }]);\n  return ShaderUniformPlugin;\n}(), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"cameraService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"coordinateSystemService\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"rendererService\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"mapService\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"layerService\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nexport { ShaderUniformPlugin as default };","map":{"version":3,"names":["_objectSpread","_toConsumableArray","_initializerDefineProperty","_classCallCheck","_createClass","_defineProperty","_applyDecoratedDescriptor","_initializerWarningHelper","_dec","_dec2","_dec3","_dec4","_dec5","_dec6","_class","_class2","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","CameraUniform","CoordinateUniform","TYPES","inject","injectable","ShaderUniformPlugin","ICameraService","ICoordinateSystemService","IRendererService","IMapService","ILayerService","key","value","apply","layer","_this","version","mapService","mvp","sceneCenterMercator","uniformBuffer","rendererService","uniformBuffers","createBuffer","data","Float32Array","isUBO","hooks","beforeRender","tap","offset","getLayerConfig","tileOrigin","coordinateSystemService","refresh","setLayerCenter","map","customCoords","getMVPMatrix","getCustomCoordCenter","_uniformBuffer","getLayerUniformBuffer","subData","Uint8Array","concat","buffer","_this$rendererService","getViewportSize","width","height","_this$generateUBO","generateUBO","uniforms","layerService","alreadyInRendering","renderUniformBuffer","platformString","queryVerdorInfo","models","forEach","model","addUniforms","u_PickingBuffer","pickingBuffer","u_shaderPick","Number","getShaderPickStat","coordCenter","undefined","getSource","center","setCoordCenter","u_Mvp","_uniforms","u_ProjectionMatrix","cameraService","getProjectionMatrix","u_ViewMatrix","getViewMatrix","u_ViewProjectionMatrix","getViewProjectionMatrix","u_ModelMatrix","getModelMatrix","u_ViewportCenterProjection","getViewportCenterProjection","u_PixelsPerDegree","getPixelsPerDegree","u_Zoom","getZoom","u_PixelsPerDegree2","getPixelsPerDegree2","u_ZoomScale","getZoomScale","u_PixelsPerMeter","getPixelsPerMeter","u_CoordinateSystem","getCoordinateSystem","u_CameraPosition","getCameraPosition","u_DevicePixelRatio","window","devicePixelRatio","u_ViewportCenter","getViewportCenter","u_ViewportSize","u_FocalDistance","getFocalDistance","ProjectionMatrix","ViewMatrix","ViewProjectionMatrix","Zoom","ZoomScale","FocalDistance","CameraPosition","CoordinateSystem","ViewportCenter","ViewportCenterProjection","PixelsPerDegree","PixelsPerDegree2","PixelsPerMeter","Mvp","prototype","configurable","enumerable","writable","initializer","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-layers/es/plugins/ShaderUniformPlugin.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5;\nimport { CameraUniform, CoordinateUniform, TYPES } from '@antv/l7-core';\nimport { inject, injectable } from 'inversify';\nimport 'reflect-metadata';\n\n/**\n * 在渲染之前需要获取当前 Shader 所需 Uniform，例如：\n * 1. 从相机服务中获取 View & ProjectionMatrix，当前缩放等级等等\n * 2. 从坐标系服务中获取当前坐标系，例如是否是偏移坐标系\n *    @see https://yuque.antfin-inc.com/yuqi.pyq/fgetpa/doml91\n * 3. 当前 Layer 本身的样式属性\n */\nvar ShaderUniformPlugin = (_dec = injectable(), _dec2 = inject(TYPES.ICameraService), _dec3 = inject(TYPES.ICoordinateSystemService), _dec4 = inject(TYPES.IRendererService), _dec5 = inject(TYPES.IMapService), _dec6 = inject(TYPES.ILayerService), _dec(_class = (_class2 = /*#__PURE__*/function () {\n  function ShaderUniformPlugin() {\n    _classCallCheck(this, ShaderUniformPlugin);\n    _initializerDefineProperty(this, \"cameraService\", _descriptor, this);\n    _initializerDefineProperty(this, \"coordinateSystemService\", _descriptor2, this);\n    _initializerDefineProperty(this, \"rendererService\", _descriptor3, this);\n    _initializerDefineProperty(this, \"mapService\", _descriptor4, this);\n    _initializerDefineProperty(this, \"layerService\", _descriptor5, this);\n  }\n  _createClass(ShaderUniformPlugin, [{\n    key: \"apply\",\n    value: function apply(layer) {\n      var _this = this;\n      var version = this.mapService.version;\n      var mvp = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]; // default matrix (for gaode2.x)\n      var sceneCenterMercator = [0, 0];\n      var uniformBuffer;\n      if (!this.rendererService.uniformBuffers[0]) {\n        // Create a Uniform Buffer Object(UBO).\n        uniformBuffer = this.rendererService.createBuffer({\n          data: new Float32Array(16 * 4 + 4 * 7),\n          isUBO: true\n        });\n        this.rendererService.uniformBuffers[0] = uniformBuffer;\n      }\n      layer.hooks.beforeRender.tap('ShaderUniformPlugin', function () {\n        // @ts-ignore\n        var offset = layer.getLayerConfig().tileOrigin;\n        // 重新计算坐标系参数\n        _this.coordinateSystemService.refresh(offset);\n        if (version === 'GAODE2.x') {\n          _this.setLayerCenter(layer);\n          // @ts-ignore\n          mvp = _this.mapService.map.customCoords.getMVPMatrix();\n          // mvp = amapCustomCoords.getMVPMatrix()\n          // @ts-ignore\n          sceneCenterMercator = _this.mapService.getCustomCoordCenter();\n          var _uniformBuffer = layer.getLayerUniformBuffer();\n          _uniformBuffer.subData({\n            offset: 0,\n            data: new Uint8Array(new Float32Array([].concat(_toConsumableArray(mvp), _toConsumableArray(sceneCenterMercator))).buffer)\n          });\n        }\n        var _this$rendererService = _this.rendererService.getViewportSize(),\n          width = _this$rendererService.width,\n          height = _this$rendererService.height;\n        var _this$generateUBO = _this.generateUBO(mvp, sceneCenterMercator, width, height),\n          data = _this$generateUBO.data,\n          uniforms = _this$generateUBO.uniforms;\n        if (_this.layerService.alreadyInRendering && _this.rendererService.uniformBuffers[0]) {\n          var renderUniformBuffer = _this.rendererService.uniformBuffers[0];\n          // Update only once since all models can share one UBO.\n          renderUniformBuffer.subData({\n            offset: 0,\n            data: data\n          });\n        }\n\n        // For WebGL1. regl \n        var platformString = _this.rendererService.queryVerdorInfo();\n        if (platformString === 'WebGL1') {\n          layer.models.forEach(function (model) {\n            model.addUniforms(_objectSpread(_objectSpread({}, uniforms), {}, {\n              // TODO: move these 2 uniforms to PixelPickingPlugin\n              u_PickingBuffer: layer.getLayerConfig().pickingBuffer || 0,\n              // Tip: 当前地图是否在拖动\n              u_shaderPick: Number(layer.getShaderPickStat())\n            }));\n          });\n        }\n      });\n    }\n\n    /**\n     * 对于每个 layer 都有不同的几何中心点，因此在绘制每个 layer 的时候都需要重新设置\n     * @param layer\n     */\n  }, {\n    key: \"setLayerCenter\",\n    value: function setLayerCenter(layer) {\n      if (layer.coordCenter === undefined) {\n        layer.coordCenter = layer.getSource().center;\n      }\n      if (this.mapService.setCoordCenter) {\n        this.mapService.setCoordCenter(layer.coordCenter);\n      }\n    }\n  }, {\n    key: \"generateUBO\",\n    value: function generateUBO(u_Mvp, sceneCenterMercator, width, height) {\n      var _uniforms;\n      var u_ProjectionMatrix = this.cameraService.getProjectionMatrix();\n      var u_ViewMatrix = this.cameraService.getViewMatrix();\n      var u_ViewProjectionMatrix = this.cameraService.getViewProjectionMatrix();\n      var u_ModelMatrix = this.cameraService.getModelMatrix();\n      var u_ViewportCenterProjection = this.coordinateSystemService.getViewportCenterProjection();\n      var u_PixelsPerDegree = this.coordinateSystemService.getPixelsPerDegree();\n      var u_Zoom = this.cameraService.getZoom();\n      var u_PixelsPerDegree2 = this.coordinateSystemService.getPixelsPerDegree2();\n      var u_ZoomScale = this.cameraService.getZoomScale();\n      var u_PixelsPerMeter = this.coordinateSystemService.getPixelsPerMeter();\n      var u_CoordinateSystem = this.coordinateSystemService.getCoordinateSystem();\n      var u_CameraPosition = this.cameraService.getCameraPosition();\n      var u_DevicePixelRatio = window.devicePixelRatio;\n      var u_ViewportCenter = this.coordinateSystemService.getViewportCenter();\n      var u_ViewportSize = [width, height];\n      var u_FocalDistance = this.cameraService.getFocalDistance();\n      var data = [].concat(_toConsumableArray(u_ViewMatrix), _toConsumableArray(u_ProjectionMatrix), _toConsumableArray(u_ViewProjectionMatrix), _toConsumableArray(u_ModelMatrix), _toConsumableArray(u_ViewportCenterProjection), _toConsumableArray(u_PixelsPerDegree), [\n      // 4\n      u_Zoom], _toConsumableArray(u_PixelsPerDegree2), [\n      // 4\n      u_ZoomScale], _toConsumableArray(u_PixelsPerMeter), [\n      // 4\n      u_CoordinateSystem], _toConsumableArray(u_CameraPosition), [\n      // 4\n      u_DevicePixelRatio], _toConsumableArray(u_ViewportCenter), u_ViewportSize, [\n      // 4\n      u_FocalDistance,\n      // 1\n      0, 0, 0]);\n      return {\n        data: data,\n        uniforms: (_uniforms = {}, _defineProperty(_uniforms, CameraUniform.ProjectionMatrix, u_ProjectionMatrix), _defineProperty(_uniforms, CameraUniform.ViewMatrix, u_ViewMatrix), _defineProperty(_uniforms, CameraUniform.ViewProjectionMatrix, u_ViewProjectionMatrix), _defineProperty(_uniforms, CameraUniform.Zoom, u_Zoom), _defineProperty(_uniforms, CameraUniform.ZoomScale, u_ZoomScale), _defineProperty(_uniforms, CameraUniform.FocalDistance, u_FocalDistance), _defineProperty(_uniforms, CameraUniform.CameraPosition, u_CameraPosition), _defineProperty(_uniforms, CoordinateUniform.CoordinateSystem, u_CoordinateSystem), _defineProperty(_uniforms, CoordinateUniform.ViewportCenter, u_ViewportCenter), _defineProperty(_uniforms, CoordinateUniform.ViewportCenterProjection, u_ViewportCenterProjection), _defineProperty(_uniforms, CoordinateUniform.PixelsPerDegree, u_PixelsPerDegree), _defineProperty(_uniforms, CoordinateUniform.PixelsPerDegree2, u_PixelsPerDegree2), _defineProperty(_uniforms, CoordinateUniform.PixelsPerMeter, u_PixelsPerMeter), _defineProperty(_uniforms, CoordinateUniform.Mvp, u_Mvp), _defineProperty(_uniforms, \"u_sceneCenterMercator\", sceneCenterMercator), _defineProperty(_uniforms, \"u_ViewportSize\", u_ViewportSize), _defineProperty(_uniforms, \"u_ModelMatrix\", u_ModelMatrix), _defineProperty(_uniforms, \"u_DevicePixelRatio\", u_DevicePixelRatio), _uniforms)\n      };\n    }\n  }]);\n  return ShaderUniformPlugin;\n}(), (_descriptor = _applyDecoratedDescriptor(_class2.prototype, \"cameraService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"coordinateSystemService\", [_dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"rendererService\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"mapService\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class2.prototype, \"layerService\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class2)) || _class);\nexport { ShaderUniformPlugin as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}