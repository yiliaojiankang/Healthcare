{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __extends, __values } from \"tslib\";\nimport { deepMix, find, get, isEqual, isFunction, mix, isString, isBoolean, flatten, isArray } from '@antv/util';\nimport { Crosshair, HtmlTooltip } from '../../dependents';\nimport { getAngleByPoint, getDistanceToCenter, getCoordinateClipCfg } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport { findItemsFromView } from '../../util/tooltip';\nimport { BBox } from '../../util/bbox';\nimport { Controller } from './base';\nimport Event from '../event';\n// Filter duplicates, use `name`, `color`, `value` and `title` property values as condition\nfunction uniq(items) {\n  var uniqItems = [];\n  var _loop_1 = function (index) {\n    var item = items[index];\n    var result = find(uniqItems, function (subItem) {\n      return subItem.color === item.color && subItem.name === item.name && subItem.value === item.value && subItem.title === item.title;\n    });\n    if (!result) {\n      uniqItems.push(item);\n    }\n  };\n  for (var index = 0; index < items.length; index++) {\n    _loop_1(index);\n  }\n  return uniqItems;\n}\n/** @ignore */\nvar Tooltip = /** @class */function (_super) {\n  __extends(Tooltip, _super);\n  function Tooltip() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.isLocked = false;\n    return _this;\n  }\n  Object.defineProperty(Tooltip.prototype, \"name\", {\n    get: function () {\n      return 'tooltip';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Tooltip.prototype.init = function () {};\n  Tooltip.prototype.isVisible = function () {\n    var option = this.view.getOptions().tooltip;\n    return option !== false;\n  };\n  Tooltip.prototype.render = function () {};\n  /**\n   * Shows tooltip\n   * @param point\n   */\n  Tooltip.prototype.showTooltip = function (point) {\n    this.point = point;\n    if (!this.isVisible()) {\n      // 如果设置 tooltip(false) 则始终不显示\n      return;\n    }\n    var view = this.view;\n    var items = this.getTooltipItems(point);\n    if (!items.length) {\n      // 无内容则不展示，同时 tooltip 需要隐藏\n      this.hideTooltip();\n      return;\n    }\n    var title = this.getTitle(items);\n    var dataPoint = {\n      x: items[0].x,\n      y: items[0].y\n    }; // 数据点位置\n    view.emit('tooltip:show', Event.fromData(view, 'tooltip:show', __assign({\n      items: items,\n      title: title\n    }, point)));\n    var cfg = this.getTooltipCfg();\n    var follow = cfg.follow,\n      showMarkers = cfg.showMarkers,\n      showCrosshairs = cfg.showCrosshairs,\n      showContent = cfg.showContent,\n      marker = cfg.marker;\n    var lastItems = this.items;\n    var lastTitle = this.title;\n    if (!isEqual(lastTitle, title) || !isEqual(lastItems, items)) {\n      // 内容发生变化了更新 tooltip\n      view.emit('tooltip:change', Event.fromData(view, 'tooltip:change', __assign({\n        items: items,\n        title: title\n      }, point)));\n      if (isFunction(showContent) ? showContent(items) : showContent) {\n        // 展示 tooltip 内容框才渲染 tooltip\n        if (!this.tooltip) {\n          // 延迟生成\n          this.renderTooltip();\n        }\n        this.tooltip.update(mix({}, cfg, {\n          items: this.getItemsAfterProcess(items),\n          title: title\n        }, follow ? point : {}));\n        this.tooltip.show();\n      }\n      if (showMarkers) {\n        // 展示 tooltipMarkers，tooltipMarkers 跟随数据\n        this.renderTooltipMarkers(items, marker);\n      }\n    } else {\n      // 内容未发生变化，则更新位置\n      if (this.tooltip && follow) {\n        this.tooltip.update(point);\n        this.tooltip.show(); // tooltip 有可能被隐藏，需要保证显示状态\n      }\n\n      if (this.tooltipMarkersGroup) {\n        this.tooltipMarkersGroup.show();\n      }\n    }\n    this.items = items;\n    this.title = title;\n    if (showCrosshairs) {\n      // 展示 tooltip 辅助线\n      var isCrosshairsFollowCursor = get(cfg, ['crosshairs', 'follow'], false); // 辅助线是否要跟随鼠标\n      this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\n    }\n  };\n  Tooltip.prototype.hideTooltip = function () {\n    var follow = this.getTooltipCfg().follow;\n    if (!follow) {\n      this.point = null;\n      return;\n    }\n    // hide the tooltipMarkers\n    var tooltipMarkersGroup = this.tooltipMarkersGroup;\n    if (tooltipMarkersGroup) {\n      tooltipMarkersGroup.hide();\n    }\n    // hide crosshairs\n    var xCrosshair = this.xCrosshair;\n    var yCrosshair = this.yCrosshair;\n    if (xCrosshair) {\n      xCrosshair.hide();\n    }\n    if (yCrosshair) {\n      yCrosshair.hide();\n    }\n    var tooltip = this.tooltip;\n    if (tooltip) {\n      tooltip.hide();\n    }\n    this.view.emit('tooltip:hide', Event.fromData(this.view, 'tooltip:hide', {}));\n    this.point = null;\n  };\n  /**\n   * lockTooltip\n   */\n  Tooltip.prototype.lockTooltip = function () {\n    this.isLocked = true;\n    if (this.tooltip) {\n      // tooltip contianer 可捕获事件\n      this.tooltip.setCapture(true);\n    }\n  };\n  /**\n   * unlockTooltip\n   */\n  Tooltip.prototype.unlockTooltip = function () {\n    this.isLocked = false;\n    var cfg = this.getTooltipCfg();\n    if (this.tooltip) {\n      // 重置 capture 属性\n      this.tooltip.setCapture(cfg.capture);\n    }\n  };\n  /**\n   * isTooltipLocked\n   */\n  Tooltip.prototype.isTooltipLocked = function () {\n    return this.isLocked;\n  };\n  Tooltip.prototype.clear = function () {\n    var _a = this,\n      tooltip = _a.tooltip,\n      xCrosshair = _a.xCrosshair,\n      yCrosshair = _a.yCrosshair,\n      tooltipMarkersGroup = _a.tooltipMarkersGroup;\n    if (tooltip) {\n      tooltip.hide();\n      tooltip.clear();\n    }\n    if (xCrosshair) {\n      xCrosshair.clear();\n    }\n    if (yCrosshair) {\n      yCrosshair.clear();\n    }\n    if (tooltipMarkersGroup) {\n      tooltipMarkersGroup.clear();\n    }\n    // 如果 customContent 不为空，就重新生成 tooltip\n    if (tooltip === null || tooltip === void 0 ? void 0 : tooltip.get('customContent')) {\n      this.tooltip.destroy();\n      this.tooltip = null;\n    }\n    // title 和 items 需要清空, 否则 tooltip 内容会出现置空的情况\n    // 即：需要走进 !isEqual(lastTitle, title) || !isEqual(lastItems, items) 的逻辑，更新 tooltip 的内容\n    this.title = null;\n    this.items = null;\n  };\n  Tooltip.prototype.destroy = function () {\n    if (this.tooltip) {\n      this.tooltip.destroy();\n    }\n    if (this.xCrosshair) {\n      this.xCrosshair.destroy();\n    }\n    if (this.yCrosshair) {\n      this.yCrosshair.destroy();\n    }\n    if (this.guideGroup) {\n      this.guideGroup.remove(true);\n    }\n    this.reset();\n  };\n  Tooltip.prototype.reset = function () {\n    this.items = null;\n    this.title = null;\n    this.tooltipMarkersGroup = null;\n    this.tooltipCrosshairsGroup = null;\n    this.xCrosshair = null;\n    this.yCrosshair = null;\n    this.tooltip = null;\n    this.guideGroup = null;\n    this.isLocked = false;\n    this.point = null;\n  };\n  Tooltip.prototype.changeVisible = function (visible) {\n    if (this.visible === visible) {\n      return;\n    }\n    var _a = this,\n      tooltip = _a.tooltip,\n      tooltipMarkersGroup = _a.tooltipMarkersGroup,\n      xCrosshair = _a.xCrosshair,\n      yCrosshair = _a.yCrosshair;\n    if (visible) {\n      if (tooltip) {\n        tooltip.show();\n      }\n      if (tooltipMarkersGroup) {\n        tooltipMarkersGroup.show();\n      }\n      if (xCrosshair) {\n        xCrosshair.show();\n      }\n      if (yCrosshair) {\n        yCrosshair.show();\n      }\n    } else {\n      if (tooltip) {\n        tooltip.hide();\n      }\n      if (tooltipMarkersGroup) {\n        tooltipMarkersGroup.hide();\n      }\n      if (xCrosshair) {\n        xCrosshair.hide();\n      }\n      if (yCrosshair) {\n        yCrosshair.hide();\n      }\n    }\n    this.visible = visible;\n  };\n  Tooltip.prototype.getTooltipItems = function (point) {\n    var e_1, _a, e_2, _b, e_3, _c;\n    var items = this.findItemsFromView(this.view, point);\n    if (items.length) {\n      // 三层\n      items = flatten(items);\n      try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n          var itemArr = items_1_1.value;\n          try {\n            for (var itemArr_1 = (e_2 = void 0, __values(itemArr)), itemArr_1_1 = itemArr_1.next(); !itemArr_1_1.done; itemArr_1_1 = itemArr_1.next()) {\n              var item = itemArr_1_1.value;\n              var _d = item.mappingData,\n                x = _d.x,\n                y = _d.y;\n              item.x = isArray(x) ? x[x.length - 1] : x;\n              item.y = isArray(y) ? y[y.length - 1] : y;\n            }\n          } catch (e_2_1) {\n            e_2 = {\n              error: e_2_1\n            };\n          } finally {\n            try {\n              if (itemArr_1_1 && !itemArr_1_1.done && (_b = itemArr_1.return)) _b.call(itemArr_1);\n            } finally {\n              if (e_2) throw e_2.error;\n            }\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n      var shared = this.getTooltipCfg().shared;\n      // shared: false 代表只显示当前拾取到的 shape 的数据，但是一个 view 会有多个 Geometry，所以有可能会拾取到多个 shape\n      if (shared === false && items.length > 1) {\n        var snapItem = items[0];\n        var min = Math.abs(point.y - snapItem[0].y);\n        try {\n          for (var items_2 = __values(items), items_2_1 = items_2.next(); !items_2_1.done; items_2_1 = items_2.next()) {\n            var aItem = items_2_1.value;\n            var yDistance = Math.abs(point.y - aItem[0].y);\n            if (yDistance <= min) {\n              snapItem = aItem;\n              min = yDistance;\n            }\n          }\n        } catch (e_3_1) {\n          e_3 = {\n            error: e_3_1\n          };\n        } finally {\n          try {\n            if (items_2_1 && !items_2_1.done && (_c = items_2.return)) _c.call(items_2);\n          } finally {\n            if (e_3) throw e_3.error;\n          }\n        }\n        items = [snapItem];\n      }\n      return uniq(flatten(items));\n    }\n    return [];\n  };\n  Tooltip.prototype.layout = function () {};\n  Tooltip.prototype.update = function () {\n    if (this.point) {\n      this.showTooltip(this.point);\n    }\n    if (this.tooltip) {\n      // #2279 修复resize之后tooltip越界的问题\n      // 确保tooltip已经创建的情况下\n      var canvas = this.view.getCanvas();\n      // TODO 逍为 tooltip 的区域不应该是 canvas，而应该是整个 特别是在图比较小的时候\n      // 更新 region\n      this.tooltip.set('region', {\n        start: {\n          x: 0,\n          y: 0\n        },\n        end: {\n          x: canvas.get('width'),\n          y: canvas.get('height')\n        }\n      });\n    }\n  };\n  /**\n   * 当前鼠标点是在 enter tooltip 中\n   * @param point\n   */\n  Tooltip.prototype.isCursorEntered = function (point) {\n    // 是可捕获的，并且点在 tooltip dom 上\n    if (this.tooltip) {\n      var el = this.tooltip.getContainer();\n      var capture = this.tooltip.get('capture');\n      if (el && capture) {\n        var _a = el.getBoundingClientRect(),\n          x = _a.x,\n          y = _a.y,\n          width = _a.width,\n          height = _a.height;\n        return new BBox(x, y, width, height).isPointIn(point);\n      }\n    }\n    return false;\n  };\n  // 获取 tooltip 配置，因为用户可能会通过 view.tooltip() 重新配置 tooltip，所以就不做缓存，每次直接读取\n  Tooltip.prototype.getTooltipCfg = function () {\n    var view = this.view;\n    var option = view.getOptions().tooltip;\n    var processOption = this.processCustomContent(option);\n    var theme = view.getTheme();\n    var defaultCfg = get(theme, ['components', 'tooltip'], {});\n    var enterable = get(processOption, 'enterable', defaultCfg.enterable);\n    return deepMix({}, defaultCfg, processOption, {\n      capture: enterable || this.isLocked ? true : false\n    });\n  };\n  // process customContent\n  Tooltip.prototype.processCustomContent = function (option) {\n    if (isBoolean(option) || !get(option, 'customContent')) {\n      return option;\n    }\n    var currentCustomContent = option.customContent;\n    var customContent = function (title, items) {\n      var content = currentCustomContent(title, items) || '';\n      return isString(content) ? '<div class=\"g2-tooltip\">' + content + '</div>' : content;\n    };\n    return __assign(__assign({}, option), {\n      customContent: customContent\n    });\n  };\n  Tooltip.prototype.getTitle = function (items) {\n    var title = items[0].title || items[0].name;\n    this.title = title;\n    return title;\n  };\n  Tooltip.prototype.renderTooltip = function () {\n    var canvas = this.view.getCanvas();\n    var region = {\n      start: {\n        x: 0,\n        y: 0\n      },\n      end: {\n        x: canvas.get('width'),\n        y: canvas.get('height')\n      }\n    };\n    var cfg = this.getTooltipCfg();\n    var tooltip = new HtmlTooltip(__assign(__assign({\n      parent: canvas.get('el').parentNode,\n      region: region\n    }, cfg), {\n      visible: false,\n      crosshairs: null\n    }));\n    tooltip.init();\n    this.tooltip = tooltip;\n  };\n  Tooltip.prototype.renderTooltipMarkers = function (items, marker) {\n    var e_4, _a;\n    var tooltipMarkersGroup = this.getTooltipMarkersGroup();\n    var rootView = this.view.getRootView();\n    var limitInPlot = rootView.limitInPlot;\n    try {\n      for (var items_3 = __values(items), items_3_1 = items_3.next(); !items_3_1.done; items_3_1 = items_3.next()) {\n        var item = items_3_1.value;\n        var x = item.x,\n          y = item.y;\n        // 有裁剪就剪切\n        if (limitInPlot || (tooltipMarkersGroup === null || tooltipMarkersGroup === void 0 ? void 0 : tooltipMarkersGroup.getClip())) {\n          var _b = getCoordinateClipCfg(rootView.getCoordinate()),\n            type = _b.type,\n            attrs_1 = _b.attrs;\n          tooltipMarkersGroup === null || tooltipMarkersGroup === void 0 ? void 0 : tooltipMarkersGroup.setClip({\n            type: type,\n            attrs: attrs_1\n          });\n        } else {\n          // 清除已有的 clip\n          tooltipMarkersGroup === null || tooltipMarkersGroup === void 0 ? void 0 : tooltipMarkersGroup.setClip(undefined);\n        }\n        var theme = this.view.getTheme();\n        var markerDefaultCfg = get(theme, ['components', 'tooltip', 'marker'], {});\n        var attrs = __assign(__assign({\n          fill: item.color,\n          symbol: 'circle',\n          shadowColor: item.color\n        }, isFunction(marker) ? __assign(__assign({}, markerDefaultCfg), marker(item)) : marker), {\n          x: x,\n          y: y\n        });\n        tooltipMarkersGroup.addShape('marker', {\n          attrs: attrs\n        });\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (items_3_1 && !items_3_1.done && (_a = items_3.return)) _a.call(items_3);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n  };\n  Tooltip.prototype.renderCrosshairs = function (point, cfg) {\n    var crosshairsType = get(cfg, ['crosshairs', 'type'], 'x'); // 默认展示 x 轴上的辅助线\n    if (crosshairsType === 'x') {\n      if (this.yCrosshair) {\n        this.yCrosshair.hide();\n      }\n      this.renderXCrosshairs(point, cfg);\n    } else if (crosshairsType === 'y') {\n      if (this.xCrosshair) {\n        this.xCrosshair.hide();\n      }\n      this.renderYCrosshairs(point, cfg);\n    } else if (crosshairsType === 'xy') {\n      this.renderXCrosshairs(point, cfg);\n      this.renderYCrosshairs(point, cfg);\n    }\n  };\n  // 渲染 x 轴上的 tooltip 辅助线\n  Tooltip.prototype.renderXCrosshairs = function (point, tooltipCfg) {\n    var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n    var start;\n    var end;\n    if (coordinate.isRect) {\n      if (coordinate.isTransposed) {\n        start = {\n          x: coordinate.start.x,\n          y: point.y\n        };\n        end = {\n          x: coordinate.end.x,\n          y: point.y\n        };\n      } else {\n        start = {\n          x: point.x,\n          y: coordinate.end.y\n        };\n        end = {\n          x: point.x,\n          y: coordinate.start.y\n        };\n      }\n    } else {\n      // 极坐标下 x 轴上的 crosshairs 表现为半径\n      var angle = getAngleByPoint(coordinate, point);\n      var center = coordinate.getCenter();\n      var radius = coordinate.getRadius();\n      end = polarToCartesian(center.x, center.y, radius, angle);\n      start = center;\n    }\n    var cfg = deepMix({\n      start: start,\n      end: end,\n      container: this.getTooltipCrosshairsGroup()\n    }, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('x', point, tooltipCfg));\n    delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n    var xCrosshair = this.xCrosshair;\n    if (xCrosshair) {\n      xCrosshair.update(cfg);\n    } else {\n      xCrosshair = new Crosshair.Line(cfg);\n      xCrosshair.init();\n    }\n    xCrosshair.render();\n    xCrosshair.show();\n    this.xCrosshair = xCrosshair;\n  };\n  // 渲染 y 轴上的辅助线\n  Tooltip.prototype.renderYCrosshairs = function (point, tooltipCfg) {\n    var coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n    var cfg;\n    var type;\n    if (coordinate.isRect) {\n      var start = void 0;\n      var end = void 0;\n      if (coordinate.isTransposed) {\n        start = {\n          x: point.x,\n          y: coordinate.end.y\n        };\n        end = {\n          x: point.x,\n          y: coordinate.start.y\n        };\n      } else {\n        start = {\n          x: coordinate.start.x,\n          y: point.y\n        };\n        end = {\n          x: coordinate.end.x,\n          y: point.y\n        };\n      }\n      cfg = {\n        start: start,\n        end: end\n      };\n      type = 'Line';\n    } else {\n      // 极坐标下 y 轴上的 crosshairs 表现为圆弧\n      cfg = {\n        center: coordinate.getCenter(),\n        // @ts-ignore\n        radius: getDistanceToCenter(coordinate, point),\n        startAngle: coordinate.startAngle,\n        endAngle: coordinate.endAngle\n      };\n      type = 'Circle';\n    }\n    cfg = deepMix({\n      container: this.getTooltipCrosshairsGroup()\n    }, cfg, get(tooltipCfg, 'crosshairs', {}), this.getCrosshairsText('y', point, tooltipCfg));\n    delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n    var yCrosshair = this.yCrosshair;\n    if (yCrosshair) {\n      // 如果坐标系发生直角坐标系与极坐标的切换操作\n      if (coordinate.isRect && yCrosshair.get('type') === 'circle' || !coordinate.isRect && yCrosshair.get('type') === 'line') {\n        yCrosshair = new Crosshair[type](cfg);\n        yCrosshair.init();\n      } else {\n        yCrosshair.update(cfg);\n      }\n    } else {\n      yCrosshair = new Crosshair[type](cfg);\n      yCrosshair.init();\n    }\n    yCrosshair.render();\n    yCrosshair.show();\n    this.yCrosshair = yCrosshair;\n  };\n  Tooltip.prototype.getCrosshairsText = function (type, point, tooltipCfg) {\n    var textCfg = get(tooltipCfg, ['crosshairs', 'text']);\n    var follow = get(tooltipCfg, ['crosshairs', 'follow']);\n    var items = this.items;\n    if (textCfg) {\n      var view = this.getViewWithGeometry(this.view);\n      // 需要展示文本\n      var firstItem = items[0];\n      var xScale = view.getXScale();\n      var yScale = view.getYScales()[0];\n      var xValue = void 0;\n      var yValue = void 0;\n      if (follow) {\n        // 如果需要跟随鼠标移动，就需要将当前鼠标坐标点转换为对应的数值\n        var invertPoint = this.view.getCoordinate().invert(point);\n        xValue = xScale.invert(invertPoint.x); // 转换为原始值\n        yValue = yScale.invert(invertPoint.y); // 转换为原始值\n      } else {\n        xValue = firstItem.data[xScale.field];\n        yValue = firstItem.data[yScale.field];\n      }\n      var content = type === 'x' ? xValue : yValue;\n      if (isFunction(textCfg)) {\n        textCfg = textCfg(type, content, items, point);\n      } else {\n        textCfg.content = content;\n      }\n      return {\n        text: textCfg\n      };\n    }\n  };\n  // 获取存储 tooltipMarkers 和 crosshairs 的容器\n  Tooltip.prototype.getGuideGroup = function () {\n    if (!this.guideGroup) {\n      var foregroundGroup = this.view.foregroundGroup;\n      this.guideGroup = foregroundGroup.addGroup({\n        name: 'tooltipGuide',\n        capture: false\n      });\n    }\n    return this.guideGroup;\n  };\n  // 获取 tooltipMarkers 存储的容器\n  Tooltip.prototype.getTooltipMarkersGroup = function () {\n    var tooltipMarkersGroup = this.tooltipMarkersGroup;\n    if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\n      tooltipMarkersGroup.clear();\n      tooltipMarkersGroup.show();\n    } else {\n      tooltipMarkersGroup = this.getGuideGroup().addGroup({\n        name: 'tooltipMarkersGroup'\n      });\n      tooltipMarkersGroup.toFront();\n      this.tooltipMarkersGroup = tooltipMarkersGroup;\n    }\n    return tooltipMarkersGroup;\n  };\n  // 获取 tooltip crosshairs 存储的容器\n  Tooltip.prototype.getTooltipCrosshairsGroup = function () {\n    var tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\n    if (!tooltipCrosshairsGroup) {\n      tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\n        name: 'tooltipCrosshairsGroup',\n        capture: false\n      });\n      tooltipCrosshairsGroup.toBack();\n      this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\n    }\n    return tooltipCrosshairsGroup;\n  };\n  Tooltip.prototype.findItemsFromView = function (view, point) {\n    var e_5, _a;\n    if (view.getOptions().tooltip === false) {\n      // 如果 view 关闭了 tooltip\n      return [];\n    }\n    var tooltipCfg = this.getTooltipCfg();\n    var result = findItemsFromView(view, point, tooltipCfg);\n    try {\n      // 递归查找，并合并结果\n      for (var _b = __values(view.views), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var childView = _c.value;\n        result = result.concat(this.findItemsFromView(childView, point));\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n    return result;\n  };\n  // FIXME: hack 方法\n  // 因为 tooltip 的交互是挂载在 Chart 上，所以当chart 上没有绘制 Geometry 的时候，就查找不到数据，并且绘图区域同子 View 的区域不同\n  Tooltip.prototype.getViewWithGeometry = function (view) {\n    var _this = this;\n    if (view.geometries.length) {\n      return view;\n    }\n    return find(view.views, function (childView) {\n      return _this.getViewWithGeometry(childView);\n    });\n  };\n  /**\n   * 根据用户配置的 items 配置，来进行用户自定义的处理，并返回最终的 items\n   * 默认不做任何处理\n   */\n  Tooltip.prototype.getItemsAfterProcess = function (originalItems) {\n    var customItems = this.getTooltipCfg().customItems;\n    var fn = customItems ? customItems : function (v) {\n      return v;\n    };\n    return fn(originalItems);\n  };\n  return Tooltip;\n}(Controller);\nexport default Tooltip;","map":{"version":3,"names":["deepMix","find","get","isEqual","isFunction","mix","isString","isBoolean","flatten","isArray","Crosshair","HtmlTooltip","getAngleByPoint","getDistanceToCenter","getCoordinateClipCfg","polarToCartesian","findItemsFromView","BBox","Controller","Event","uniq","items","uniqItems","index","item","result","subItem","color","name","value","title","push","length","Tooltip","_super","__extends","_this","apply","arguments","isLocked","Object","defineProperty","prototype","init","isVisible","option","view","getOptions","tooltip","render","showTooltip","point","getTooltipItems","hideTooltip","getTitle","dataPoint","x","y","emit","fromData","__assign","cfg","getTooltipCfg","follow","showMarkers","showCrosshairs","showContent","marker","lastItems","lastTitle","renderTooltip","update","getItemsAfterProcess","show","renderTooltipMarkers","tooltipMarkersGroup","isCrosshairsFollowCursor","renderCrosshairs","hide","xCrosshair","yCrosshair","lockTooltip","setCapture","unlockTooltip","capture","isTooltipLocked","clear","_a","destroy","guideGroup","remove","reset","tooltipCrosshairsGroup","changeVisible","visible","items_1","__values","items_1_1","next","done","itemArr","itemArr_1","e_2","itemArr_1_1","_d","mappingData","shared","snapItem","min","Math","abs","items_2","items_2_1","aItem","yDistance","layout","canvas","getCanvas","set","start","end","isCursorEntered","el","getContainer","getBoundingClientRect","width","height","isPointIn","processOption","processCustomContent","theme","getTheme","defaultCfg","enterable","currentCustomContent","customContent","content","region","parent","parentNode","crosshairs","getTooltipMarkersGroup","rootView","getRootView","limitInPlot","items_3","items_3_1","getClip","_b","getCoordinate","type","attrs_1","attrs","setClip","undefined","markerDefaultCfg","fill","symbol","shadowColor","addShape","crosshairsType","renderXCrosshairs","renderYCrosshairs","tooltipCfg","coordinate","getViewWithGeometry","isRect","isTransposed","angle","center","getCenter","radius","getRadius","container","getTooltipCrosshairsGroup","getCrosshairsText","Line","startAngle","endAngle","textCfg","firstItem","xScale","getXScale","yScale","getYScales","xValue","yValue","invertPoint","invert","data","field","text","getGuideGroup","foregroundGroup","addGroup","destroyed","toFront","toBack","views","_c","childView","concat","geometries","originalItems","customItems","fn","v"],"sources":["../../../src/chart/controller/tooltip.ts"],"sourcesContent":["import { deepMix, find, get, isEqual, isFunction, mix, isString, isBoolean, flatten, isArray } from '@antv/util';\nimport { Crosshair, HtmlTooltip, IGroup } from '../../dependents';\nimport { Point, TooltipItem, TooltipOption } from '../../interface';\nimport { getAngleByPoint, getDistanceToCenter, getCoordinateClipCfg } from '../../util/coordinate';\nimport { polarToCartesian } from '../../util/graphics';\nimport { findItemsFromView } from '../../util/tooltip';\nimport { BBox } from '../../util/bbox';\nimport { Controller } from './base';\nimport Event from '../event';\nimport View from '../view';\n\n// Filter duplicates, use `name`, `color`, `value` and `title` property values as condition\nfunction uniq(items) {\n  const uniqItems = [];\n  for (let index = 0; index < items.length; index++) {\n    const item = items[index];\n    const result = find(uniqItems, (subItem) => {\n      return (\n        subItem.color === item.color &&\n        subItem.name === item.name &&\n        subItem.value === item.value &&\n        subItem.title === item.title\n      );\n    });\n    if (!result) {\n      uniqItems.push(item);\n    }\n  }\n  return uniqItems;\n}\n\n/** @ignore */\nexport default class Tooltip extends Controller<TooltipOption> {\n  private tooltip;\n  private tooltipMarkersGroup: IGroup;\n  private tooltipCrosshairsGroup: IGroup;\n  private xCrosshair;\n  private yCrosshair;\n  private guideGroup: IGroup;\n\n  private isLocked: boolean = false;\n  private items;\n  private title: string;\n  private point: Point;\n\n  public get name(): string {\n    return 'tooltip';\n  }\n\n  public init() { }\n\n  private isVisible() {\n    const option = this.view.getOptions().tooltip;\n    return option !== false;\n  }\n\n  public render() { }\n\n  /**\n   * Shows tooltip\n   * @param point\n   */\n  public showTooltip(point: Point) {\n    this.point = point;\n    if (!this.isVisible()) {\n      // 如果设置 tooltip(false) 则始终不显示\n      return;\n    }\n    const view = this.view;\n    const items = this.getTooltipItems(point);\n    if (!items.length) {\n      // 无内容则不展示，同时 tooltip 需要隐藏\n      this.hideTooltip();\n      return;\n    }\n    const title = this.getTitle(items);\n    const dataPoint = {\n      x: items[0].x,\n      y: items[0].y,\n    }; // 数据点位置\n\n    view.emit(\n      'tooltip:show',\n      Event.fromData(view, 'tooltip:show', {\n        items,\n        title,\n        ...point,\n      })\n    );\n\n    const cfg = this.getTooltipCfg();\n    const { follow, showMarkers, showCrosshairs, showContent, marker } = cfg;\n    const lastItems = this.items;\n    const lastTitle = this.title;\n    if (!isEqual(lastTitle, title) || !isEqual(lastItems, items)) {\n      // 内容发生变化了更新 tooltip\n      view.emit(\n        'tooltip:change',\n        Event.fromData(view, 'tooltip:change', {\n          items,\n          title,\n          ...point,\n        })\n      );\n\n      if (isFunction(showContent) ? showContent(items) : showContent) {\n        // 展示 tooltip 内容框才渲染 tooltip\n        if (!this.tooltip) {\n          // 延迟生成\n          this.renderTooltip();\n        }\n        this.tooltip.update(\n          mix(\n            {},\n            cfg,\n            {\n              items: this.getItemsAfterProcess(items),\n              title,\n            },\n            follow ? point : {}\n          )\n        );\n        this.tooltip.show();\n      }\n\n      if (showMarkers) {\n        // 展示 tooltipMarkers，tooltipMarkers 跟随数据\n        this.renderTooltipMarkers(items, marker);\n      }\n    } else {\n      // 内容未发生变化，则更新位置\n      if (this.tooltip && follow) {\n        this.tooltip.update(point);\n        this.tooltip.show(); // tooltip 有可能被隐藏，需要保证显示状态\n      }\n\n      if (this.tooltipMarkersGroup) {\n        this.tooltipMarkersGroup.show();\n      }\n    }\n\n    this.items = items;\n    this.title = title;\n\n    if (showCrosshairs) {\n      // 展示 tooltip 辅助线\n      const isCrosshairsFollowCursor = get(cfg, ['crosshairs', 'follow'], false); // 辅助线是否要跟随鼠标\n      this.renderCrosshairs(isCrosshairsFollowCursor ? point : dataPoint, cfg);\n    }\n  }\n\n  public hideTooltip() {\n    const { follow } = this.getTooltipCfg();\n    if (!follow) {\n      this.point = null;\n      return;\n    }\n    // hide the tooltipMarkers\n    const tooltipMarkersGroup = this.tooltipMarkersGroup;\n    if (tooltipMarkersGroup) {\n      tooltipMarkersGroup.hide();\n    }\n\n    // hide crosshairs\n    const xCrosshair = this.xCrosshair;\n    const yCrosshair = this.yCrosshair;\n    if (xCrosshair) {\n      xCrosshair.hide();\n    }\n    if (yCrosshair) {\n      yCrosshair.hide();\n    }\n\n    const tooltip = this.tooltip;\n    if (tooltip) {\n      tooltip.hide();\n    }\n\n    this.view.emit('tooltip:hide', Event.fromData(this.view, 'tooltip:hide', {}));\n\n    this.point = null;\n  }\n\n  /**\n   * lockTooltip\n   */\n  public lockTooltip() {\n    this.isLocked = true;\n    if (this.tooltip) {\n      // tooltip contianer 可捕获事件\n      this.tooltip.setCapture(true);\n    }\n  }\n\n  /**\n   * unlockTooltip\n   */\n  public unlockTooltip() {\n    this.isLocked = false;\n    const cfg = this.getTooltipCfg();\n    if (this.tooltip) {\n      // 重置 capture 属性\n      this.tooltip.setCapture(cfg.capture);\n    }\n  }\n\n  /**\n   * isTooltipLocked\n   */\n  public isTooltipLocked() {\n    return this.isLocked;\n  }\n\n  public clear() {\n    const { tooltip, xCrosshair, yCrosshair, tooltipMarkersGroup } = this;\n    if (tooltip) {\n      tooltip.hide();\n      tooltip.clear();\n    }\n\n    if (xCrosshair) {\n      xCrosshair.clear();\n    }\n\n    if (yCrosshair) {\n      yCrosshair.clear();\n    }\n\n    if (tooltipMarkersGroup) {\n      tooltipMarkersGroup.clear();\n    }\n\n    // 如果 customContent 不为空，就重新生成 tooltip\n    if (tooltip?.get('customContent')) {\n      this.tooltip.destroy();\n      this.tooltip = null;\n    }\n\n    // title 和 items 需要清空, 否则 tooltip 内容会出现置空的情况\n    // 即：需要走进 !isEqual(lastTitle, title) || !isEqual(lastItems, items) 的逻辑，更新 tooltip 的内容\n    this.title = null;\n    this.items = null;\n  }\n\n  public destroy() {\n    if (this.tooltip) {\n      this.tooltip.destroy();\n    }\n    if (this.xCrosshair) {\n      this.xCrosshair.destroy();\n    }\n    if (this.yCrosshair) {\n      this.yCrosshair.destroy();\n    }\n\n    if (this.guideGroup) {\n      this.guideGroup.remove(true);\n    }\n\n    this.reset();\n  }\n\n  public reset() {\n    this.items = null;\n    this.title = null;\n    this.tooltipMarkersGroup = null;\n    this.tooltipCrosshairsGroup = null;\n    this.xCrosshair = null;\n    this.yCrosshair = null;\n    this.tooltip = null;\n    this.guideGroup = null;\n    this.isLocked = false;\n    this.point = null;\n  }\n\n  public changeVisible(visible: boolean) {\n    if (this.visible === visible) {\n      return;\n    }\n    const { tooltip, tooltipMarkersGroup, xCrosshair, yCrosshair } = this;\n    if (visible) {\n      if (tooltip) {\n        tooltip.show();\n      }\n      if (tooltipMarkersGroup) {\n        tooltipMarkersGroup.show();\n      }\n      if (xCrosshair) {\n        xCrosshair.show();\n      }\n      if (yCrosshair) {\n        yCrosshair.show();\n      }\n    } else {\n      if (tooltip) {\n        tooltip.hide();\n      }\n      if (tooltipMarkersGroup) {\n        tooltipMarkersGroup.hide();\n      }\n      if (xCrosshair) {\n        xCrosshair.hide();\n      }\n      if (yCrosshair) {\n        yCrosshair.hide();\n      }\n    }\n    this.visible = visible;\n  }\n\n  public getTooltipItems(point: Point) {\n    let items = this.findItemsFromView(this.view, point);\n    if (items.length) {\n      // 三层\n      items = flatten(items);\n      for (const itemArr of items) {\n        for (const item of itemArr) {\n          const { x, y } = item.mappingData;\n          item.x = isArray(x) ? x[x.length - 1] : x;\n          item.y = isArray(y) ? y[y.length - 1] : y;\n        }\n      }\n\n      const { shared } = this.getTooltipCfg();\n      // shared: false 代表只显示当前拾取到的 shape 的数据，但是一个 view 会有多个 Geometry，所以有可能会拾取到多个 shape\n      if (shared === false && items.length > 1) {\n        let snapItem = items[0];\n        let min = Math.abs(point.y - snapItem[0].y);\n        for (const aItem of items) {\n          const yDistance = Math.abs(point.y - aItem[0].y);\n          if (yDistance <= min) {\n            snapItem = aItem;\n            min = yDistance;\n          }\n        }\n        items = [snapItem];\n      }\n\n      return uniq(flatten(items));\n    }\n\n    return [];\n  }\n\n  public layout() { }\n\n  public update() {\n    if (this.point) {\n      this.showTooltip(this.point);\n    }\n\n    if (this.tooltip) {\n      // #2279 修复resize之后tooltip越界的问题\n      // 确保tooltip已经创建的情况下\n      const canvas = this.view.getCanvas();\n      // TODO 逍为 tooltip 的区域不应该是 canvas，而应该是整个 特别是在图比较小的时候\n      // 更新 region\n      this.tooltip.set('region', {\n        start: { x: 0, y: 0 },\n        end: { x: canvas.get('width'), y: canvas.get('height') },\n      });\n    }\n  }\n\n  /**\n   * 当前鼠标点是在 enter tooltip 中\n   * @param point\n   */\n  public isCursorEntered(point: Point) {\n    // 是可捕获的，并且点在 tooltip dom 上\n    if (this.tooltip) {\n      const el: HTMLElement = this.tooltip.getContainer();\n      const capture = this.tooltip.get('capture');\n\n      if (el && capture) {\n        const { x, y, width, height } = el.getBoundingClientRect();\n        return new BBox(x, y, width, height).isPointIn(point);\n      }\n    }\n\n    return false;\n  }\n\n  // 获取 tooltip 配置，因为用户可能会通过 view.tooltip() 重新配置 tooltip，所以就不做缓存，每次直接读取\n  public getTooltipCfg() {\n    const view = this.view;\n    const option = view.getOptions().tooltip;\n    const processOption = this.processCustomContent(option);\n    const theme = view.getTheme();\n    const defaultCfg = get(theme, ['components', 'tooltip'], {});\n    const enterable = get(processOption, 'enterable', defaultCfg.enterable);\n    return deepMix({}, defaultCfg, processOption, {\n      capture: enterable || this.isLocked ? true : false,\n    });\n  }\n\n  // process customContent\n  protected processCustomContent(option: TooltipOption) {\n    if (isBoolean(option) || !get(option, 'customContent')) {\n      return option;\n    }\n    const currentCustomContent = option.customContent;\n    const customContent = (title: string, items: any[]) => {\n      const content = currentCustomContent(title, items) || '';\n      return isString(content) ? '<div class=\"g2-tooltip\">' + content + '</div>' : content;\n    };\n    return {\n      ...option,\n      customContent,\n    };\n  }\n\n  private getTitle(items) {\n    const title = items[0].title || items[0].name;\n    this.title = title;\n\n    return title;\n  }\n\n  private renderTooltip() {\n    const canvas = this.view.getCanvas();\n    const region = {\n      start: { x: 0, y: 0 },\n      end: { x: canvas.get('width'), y: canvas.get('height') },\n    };\n\n    const cfg = this.getTooltipCfg();\n    const tooltip = new HtmlTooltip({\n      parent: canvas.get('el').parentNode,\n      region,\n      ...cfg,\n      visible: false,\n      crosshairs: null,\n    });\n\n    tooltip.init();\n    this.tooltip = tooltip;\n  }\n\n  private renderTooltipMarkers(items, marker) {\n    const tooltipMarkersGroup = this.getTooltipMarkersGroup();\n    const rootView = this.view.getRootView();\n    const { limitInPlot } = rootView;\n    for (const item of items) {\n      const { x, y } = item;\n\n      // 有裁剪就剪切\n      if (limitInPlot || tooltipMarkersGroup?.getClip()) {\n        const { type, attrs } = getCoordinateClipCfg(rootView.getCoordinate());\n        tooltipMarkersGroup?.setClip({\n          type,\n          attrs,\n        });\n      } else {\n        // 清除已有的 clip\n        tooltipMarkersGroup?.setClip(undefined);\n      }\n\n      const theme = this.view.getTheme();\n      const markerDefaultCfg = get(theme, ['components', 'tooltip', 'marker'], {});\n\n      const attrs = {\n        fill: item.color,\n        symbol: 'circle',\n        shadowColor: item.color,\n        ...(isFunction(marker) ? { ...markerDefaultCfg, ...marker(item) } : marker),\n        x,\n        y,\n      };\n\n      tooltipMarkersGroup.addShape('marker', {\n        attrs,\n      });\n    }\n  }\n\n  private renderCrosshairs(point: Point, cfg) {\n    const crosshairsType = get(cfg, ['crosshairs', 'type'], 'x'); // 默认展示 x 轴上的辅助线\n    if (crosshairsType === 'x') {\n      if (this.yCrosshair) {\n        this.yCrosshair.hide();\n      }\n      this.renderXCrosshairs(point, cfg);\n    } else if (crosshairsType === 'y') {\n      if (this.xCrosshair) {\n        this.xCrosshair.hide();\n      }\n      this.renderYCrosshairs(point, cfg);\n    } else if (crosshairsType === 'xy') {\n      this.renderXCrosshairs(point, cfg);\n      this.renderYCrosshairs(point, cfg);\n    }\n  }\n\n  // 渲染 x 轴上的 tooltip 辅助线\n  private renderXCrosshairs(point: Point, tooltipCfg) {\n    const coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n    let start;\n    let end;\n    if (coordinate.isRect) {\n      if (coordinate.isTransposed) {\n        start = {\n          x: coordinate.start.x,\n          y: point.y,\n        };\n        end = {\n          x: coordinate.end.x,\n          y: point.y,\n        };\n      } else {\n        start = {\n          x: point.x,\n          y: coordinate.end.y,\n        };\n        end = {\n          x: point.x,\n          y: coordinate.start.y,\n        };\n      }\n    } else {\n      // 极坐标下 x 轴上的 crosshairs 表现为半径\n      const angle = getAngleByPoint(coordinate, point);\n      const center = coordinate.getCenter();\n      const radius = coordinate.getRadius();\n      end = polarToCartesian(center.x, center.y, radius, angle);\n      start = center;\n    }\n\n    const cfg = deepMix(\n      {\n        start,\n        end,\n        container: this.getTooltipCrosshairsGroup(),\n      },\n      get(tooltipCfg, 'crosshairs', {}),\n      this.getCrosshairsText('x', point, tooltipCfg)\n    );\n    delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n\n    let xCrosshair = this.xCrosshair;\n    if (xCrosshair) {\n      xCrosshair.update(cfg);\n    } else {\n      xCrosshair = new Crosshair.Line(cfg);\n      xCrosshair.init();\n    }\n    xCrosshair.render();\n    xCrosshair.show();\n    this.xCrosshair = xCrosshair;\n  }\n\n  // 渲染 y 轴上的辅助线\n  private renderYCrosshairs(point: Point, tooltipCfg) {\n    const coordinate = this.getViewWithGeometry(this.view).getCoordinate();\n    let cfg;\n    let type;\n    if (coordinate.isRect) {\n      let start;\n      let end;\n      if (coordinate.isTransposed) {\n        start = {\n          x: point.x,\n          y: coordinate.end.y,\n        };\n        end = {\n          x: point.x,\n          y: coordinate.start.y,\n        };\n      } else {\n        start = {\n          x: coordinate.start.x,\n          y: point.y,\n        };\n        end = {\n          x: coordinate.end.x,\n          y: point.y,\n        };\n      }\n      cfg = {\n        start,\n        end,\n      };\n      type = 'Line';\n    } else {\n      // 极坐标下 y 轴上的 crosshairs 表现为圆弧\n      cfg = {\n        center: coordinate.getCenter(),\n        // @ts-ignore\n        radius: getDistanceToCenter(coordinate, point),\n        startAngle: coordinate.startAngle,\n        endAngle: coordinate.endAngle,\n      };\n      type = 'Circle';\n    }\n\n    cfg = deepMix(\n      {\n        container: this.getTooltipCrosshairsGroup(),\n      },\n      cfg,\n      get(tooltipCfg, 'crosshairs', {}),\n      this.getCrosshairsText('y', point, tooltipCfg)\n    );\n    delete cfg.type; // 与 Crosshairs 组件的 type 冲突故删除\n\n    let yCrosshair = this.yCrosshair;\n    if (yCrosshair) {\n      // 如果坐标系发生直角坐标系与极坐标的切换操作\n      if (\n        (coordinate.isRect && yCrosshair.get('type') === 'circle') ||\n        (!coordinate.isRect && yCrosshair.get('type') === 'line')\n      ) {\n        yCrosshair = new Crosshair[type](cfg);\n        yCrosshair.init();\n      } else {\n        yCrosshair.update(cfg);\n      }\n    } else {\n      yCrosshair = new Crosshair[type](cfg);\n      yCrosshair.init();\n    }\n    yCrosshair.render();\n    yCrosshair.show();\n    this.yCrosshair = yCrosshair;\n  }\n\n  private getCrosshairsText(type, point: Point, tooltipCfg) {\n    let textCfg = get(tooltipCfg, ['crosshairs', 'text']);\n    const follow = get(tooltipCfg, ['crosshairs', 'follow']);\n    const items = this.items;\n\n    if (textCfg) {\n      const view = this.getViewWithGeometry(this.view);\n      // 需要展示文本\n      const firstItem = items[0];\n      const xScale = view.getXScale();\n      const yScale = view.getYScales()[0];\n      let xValue;\n      let yValue;\n      if (follow) {\n        // 如果需要跟随鼠标移动，就需要将当前鼠标坐标点转换为对应的数值\n        const invertPoint = this.view.getCoordinate().invert(point);\n        xValue = xScale.invert(invertPoint.x); // 转换为原始值\n        yValue = yScale.invert(invertPoint.y); // 转换为原始值\n      } else {\n        xValue = firstItem.data[xScale.field];\n        yValue = firstItem.data[yScale.field];\n      }\n\n      const content = type === 'x' ? xValue : yValue;\n      if (isFunction(textCfg)) {\n        textCfg = textCfg(type, content, items, point);\n      } else {\n        textCfg.content = content;\n      }\n\n      return {\n        text: textCfg,\n      };\n    }\n  }\n\n  // 获取存储 tooltipMarkers 和 crosshairs 的容器\n  private getGuideGroup() {\n    if (!this.guideGroup) {\n      const foregroundGroup = this.view.foregroundGroup;\n      this.guideGroup = foregroundGroup.addGroup({\n        name: 'tooltipGuide',\n        capture: false,\n      });\n    }\n\n    return this.guideGroup;\n  }\n\n  // 获取 tooltipMarkers 存储的容器\n  private getTooltipMarkersGroup() {\n    let tooltipMarkersGroup = this.tooltipMarkersGroup;\n    if (tooltipMarkersGroup && !tooltipMarkersGroup.destroyed) {\n      tooltipMarkersGroup.clear();\n      tooltipMarkersGroup.show();\n    } else {\n      tooltipMarkersGroup = this.getGuideGroup().addGroup({\n        name: 'tooltipMarkersGroup',\n      });\n      tooltipMarkersGroup.toFront();\n      this.tooltipMarkersGroup = tooltipMarkersGroup;\n    }\n    return tooltipMarkersGroup;\n  }\n\n  // 获取 tooltip crosshairs 存储的容器\n  private getTooltipCrosshairsGroup() {\n    let tooltipCrosshairsGroup = this.tooltipCrosshairsGroup;\n    if (!tooltipCrosshairsGroup) {\n      tooltipCrosshairsGroup = this.getGuideGroup().addGroup({\n        name: 'tooltipCrosshairsGroup',\n        capture: false,\n      });\n      tooltipCrosshairsGroup.toBack();\n      this.tooltipCrosshairsGroup = tooltipCrosshairsGroup;\n    }\n    return tooltipCrosshairsGroup;\n  }\n\n  private findItemsFromView(view: View, point: Point) {\n    if (view.getOptions().tooltip === false) {\n      // 如果 view 关闭了 tooltip\n      return [];\n    }\n\n    const tooltipCfg = this.getTooltipCfg();\n    let result = findItemsFromView(view, point, tooltipCfg);\n    // 递归查找，并合并结果\n    for (const childView of view.views) {\n      result = result.concat(this.findItemsFromView(childView, point));\n    }\n\n    return result;\n  }\n\n  // FIXME: hack 方法\n  // 因为 tooltip 的交互是挂载在 Chart 上，所以当chart 上没有绘制 Geometry 的时候，就查找不到数据，并且绘图区域同子 View 的区域不同\n  private getViewWithGeometry(view) {\n    if (view.geometries.length) {\n      return view;\n    }\n\n    return find(view.views, (childView) => this.getViewWithGeometry(childView));\n  }\n\n  /**\n   * 根据用户配置的 items 配置，来进行用户自定义的处理，并返回最终的 items\n   * 默认不做任何处理\n   */\n  private getItemsAfterProcess(originalItems: TooltipItem[]): TooltipItem[] {\n    const { customItems } = this.getTooltipCfg();\n    const fn = customItems ? customItems : (v) => v;\n\n    return fn(originalItems);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}