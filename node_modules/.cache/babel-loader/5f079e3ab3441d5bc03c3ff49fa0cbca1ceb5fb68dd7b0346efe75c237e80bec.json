{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.width = exports.sep = exports.positionX = exports.balance = exports.alignCoordinates = exports.findSmallestWidthAlignment = exports.buildBlockGraph = exports.horizontalCompaction = exports.verticalAlignment = exports.hasConflict = exports.addConflict = exports.findOtherInnerSegmentNode = exports.findType2Conflicts = exports.findType1Conflicts = void 0;\n/*\n * This module provides coordinate assignment based on Brandes and Köpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\nvar graphlib_1 = require(\"@antv/graphlib\");\nvar util_1 = require(\"@antv/util\");\nvar util_2 = require(\"../util\");\nvar BlockGraph = /** @class */function (_super) {\n  __extends(BlockGraph, _super);\n  function BlockGraph() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  return BlockGraph;\n}(graphlib_1.Graph);\nvar findType1Conflicts = function (g, layering) {\n  var conflicts = {};\n  var visitLayer = function (prevLayer, layer) {\n    // last visited node in the previous layer that is incident on an inner\n    // segment.\n    var k0 = 0;\n    // Tracks the last node in this layer scanned for crossings with a type-1\n    // segment.\n    var scanPos = 0;\n    var prevLayerLength = prevLayer.length;\n    var lastNode = layer === null || layer === void 0 ? void 0 : layer[(layer === null || layer === void 0 ? void 0 : layer.length) - 1];\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v, i) {\n      var _a;\n      var w = (0, exports.findOtherInnerSegmentNode)(g, v);\n      var k1 = w ? g.node(w).order : prevLayerLength;\n      if (w || v === lastNode) {\n        (_a = layer.slice(scanPos, i + 1)) === null || _a === void 0 ? void 0 : _a.forEach(function (scanNode) {\n          var _a;\n          (_a = g.predecessors(scanNode)) === null || _a === void 0 ? void 0 : _a.forEach(function (u) {\n            var _a;\n            var uLabel = g.node(u);\n            var uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) && !(uLabel.dummy && ((_a = g.node(scanNode)) === null || _a === void 0 ? void 0 : _a.dummy))) {\n              (0, exports.addConflict)(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n    return layer;\n  };\n  if (layering === null || layering === void 0 ? void 0 : layering.length) {\n    layering.reduce(visitLayer);\n  }\n  return conflicts;\n};\nexports.findType1Conflicts = findType1Conflicts;\nvar findType2Conflicts = function (g, layering) {\n  var conflicts = {};\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    var _a, _b;\n    var v;\n    for (var i = southPos; i < southEnd; i++) {\n      v = south[i];\n      if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n        (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.forEach(function (u) {\n          var uNode = g.node(u);\n          if (uNode.dummy && (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            (0, exports.addConflict)(conflicts, u, v);\n          }\n        });\n      }\n    }\n  }\n  ;\n  function getScannedKey(params) {\n    // south数组可能很大，不适合做key\n    return JSON.stringify(params.slice(1));\n  }\n  function scanIfNeeded(params, scanCache) {\n    var cacheKey = getScannedKey(params);\n    if (scanCache.get(cacheKey)) return;\n    scan.apply(void 0, params);\n    scanCache.set(cacheKey, true);\n  }\n  var visitLayer = function (north, south) {\n    var prevNorthPos = -1;\n    var nextNorthPos;\n    var southPos = 0;\n    var scanned = new Map();\n    south === null || south === void 0 ? void 0 : south.forEach(function (v, southLookahead) {\n      var _a;\n      if (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) === \"border\") {\n        var predecessors = g.predecessors(v) || [];\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scanIfNeeded([south, southPos, southLookahead, prevNorthPos, nextNorthPos], scanned);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scanIfNeeded([south, southPos, south.length, nextNorthPos, north.length], scanned);\n    });\n    return south;\n  };\n  if (layering === null || layering === void 0 ? void 0 : layering.length) {\n    layering.reduce(visitLayer);\n  }\n  return conflicts;\n};\nexports.findType2Conflicts = findType2Conflicts;\nvar findOtherInnerSegmentNode = function (g, v) {\n  var _a, _b;\n  if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n    return (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.find(function (u) {\n      return g.node(u).dummy;\n    });\n  }\n};\nexports.findOtherInnerSegmentNode = findOtherInnerSegmentNode;\nvar addConflict = function (conflicts, v, w) {\n  var vv = v;\n  var ww = w;\n  if (vv > ww) {\n    var tmp = vv;\n    vv = ww;\n    ww = tmp;\n  }\n  var conflictsV = conflicts[vv];\n  if (!conflictsV) {\n    conflicts[vv] = conflictsV = {};\n  }\n  conflictsV[ww] = true;\n};\nexports.addConflict = addConflict;\nvar hasConflict = function (conflicts, v, w) {\n  var vv = v;\n  var ww = w;\n  if (vv > ww) {\n    var tmp = v;\n    vv = ww;\n    ww = tmp;\n  }\n  return !!conflicts[vv];\n};\nexports.hasConflict = hasConflict;\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nvar verticalAlignment = function (g, layering, conflicts, neighborFn) {\n  var root = {};\n  var align = {};\n  var pos = {};\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v, order) {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    var prevIdx = -1;\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v) {\n      var ws = neighborFn(v);\n      if (ws.length) {\n        ws = ws.sort(function (a, b) {\n          return pos[a] - pos[b];\n        });\n        var mp = (ws.length - 1) / 2;\n        for (var i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          var w = ws[i];\n          if (align[v] === v && prevIdx < pos[w] && !(0, exports.hasConflict)(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n  return {\n    root: root,\n    align: align\n  };\n};\nexports.verticalAlignment = verticalAlignment;\nvar horizontalCompaction = function (g, layering, root, align, reverseSep) {\n  var _a;\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  var xs = {};\n  var blockG = (0, exports.buildBlockGraph)(g, layering, root, reverseSep);\n  var borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n  var iterate = function (setXsFunc, nextNodesFunc) {\n    var stack = blockG.nodes();\n    var elem = stack.pop();\n    var visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n      elem = stack.pop();\n    }\n  };\n  // First pass, assign smallest coordinates\n  var pass1 = function (elem) {\n    xs[elem] = (blockG.inEdges(elem) || []).reduce(function (acc, e) {\n      return Math.max(acc, (xs[e.v] || 0) + blockG.edge(e));\n    }, 0);\n  };\n  // Second pass, assign greatest coordinates\n  var pass2 = function (elem) {\n    var min = (blockG.outEdges(elem) || []).reduce(function (acc, e) {\n      return Math.min(acc, (xs[e.w] || 0) - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n    var node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  };\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n  // Assign x coordinates to all nodes\n  (_a = Object.values(align)) === null || _a === void 0 ? void 0 : _a.forEach(function (v) {\n    xs[v] = xs[root[v]];\n  });\n  return xs;\n};\nexports.horizontalCompaction = horizontalCompaction;\nvar buildBlockGraph = function (g, layering, root, reverseSep) {\n  var blockGraph = new BlockGraph();\n  var graphLabel = g.graph();\n  var sepFn = (0, exports.sep)(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n  layering === null || layering === void 0 ? void 0 : layering.forEach(function (layer) {\n    var u;\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v) {\n      var vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u];\n        var prevMax = blockGraph.edgeFromArgs(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n  return blockGraph;\n};\nexports.buildBlockGraph = buildBlockGraph;\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nvar findSmallestWidthAlignment = function (g, xss) {\n  return (0, util_2.minBy)(Object.values(xss), function (xs) {\n    var _a;\n    var max = Number.NEGATIVE_INFINITY;\n    var min = Number.POSITIVE_INFINITY;\n    (_a = Object.keys(xs)) === null || _a === void 0 ? void 0 : _a.forEach(function (v) {\n      var x = xs[v];\n      var halfWidth = (0, exports.width)(g, v) / 2;\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n    return max - min;\n  });\n};\nexports.findSmallestWidthAlignment = findSmallestWidthAlignment;\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  var alignToVals = Object.values(alignTo);\n  var alignToMin = (0, util_1.min)(alignToVals);\n  var alignToMax = (0, util_1.max)(alignToVals);\n  [\"u\", \"d\"].forEach(function (vert) {\n    [\"l\", \"r\"].forEach(function (horiz) {\n      var alignment = vert + horiz;\n      var xs = xss[alignment];\n      var delta;\n      if (xs === alignTo) return;\n      var xsVals = Object.values(xs);\n      delta = horiz === \"l\" ? alignToMin - (0, util_1.min)(xsVals) : alignToMax - (0, util_1.max)(xsVals);\n      if (delta) {\n        xss[alignment] = {};\n        Object.keys(xs).forEach(function (key) {\n          xss[alignment][key] = xs[key] + delta;\n        });\n      }\n    });\n  });\n}\nexports.alignCoordinates = alignCoordinates;\nvar balance = function (xss, align) {\n  var result = {};\n  Object.keys(xss.ul).forEach(function (key) {\n    if (align) {\n      result[key] = xss[align.toLowerCase()][key];\n    } else {\n      var values = Object.values(xss).map(function (x) {\n        return x[key];\n      });\n      result[key] = (values[0] + values[1]) / 2; // (ur + ul) / 2\n    }\n  });\n\n  return result;\n};\nexports.balance = balance;\nvar positionX = function (g) {\n  var layering = (0, util_2.buildLayerMatrix)(g);\n  var conflicts = Object.assign((0, exports.findType1Conflicts)(g, layering), (0, exports.findType2Conflicts)(g, layering));\n  var xss = {};\n  var adjustedLayering;\n  [\"u\", \"d\"].forEach(function (vert) {\n    adjustedLayering = vert === \"u\" ? layering : Object.values(layering).reverse();\n    [\"l\", \"r\"].forEach(function (horiz) {\n      if (horiz === \"r\") {\n        adjustedLayering = adjustedLayering.map(function (inner) {\n          return Object.values(inner).reverse();\n        });\n      }\n      var neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      var align = (0, exports.verticalAlignment)(g, adjustedLayering, conflicts, neighborFn);\n      var xs = (0, exports.horizontalCompaction)(g, adjustedLayering, align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        Object.keys(xs).forEach(function (key) {\n          xs[key] = -xs[key];\n        });\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n  var smallestWidth = (0, exports.findSmallestWidthAlignment)(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return (0, exports.balance)(xss, g.graph().align);\n};\nexports.positionX = positionX;\nvar sep = function (nodeSep, edgeSep, reverseSep) {\n  return function (g, v, w) {\n    var vLabel = g.node(v);\n    var wLabel = g.node(w);\n    var sum = 0;\n    var delta;\n    sum += vLabel.width / 2;\n    if (vLabel.hasOwnProperty(\"labelpos\")) {\n      switch ((vLabel.labelpos || \"\").toLowerCase()) {\n        case \"l\":\n          delta = -vLabel.width / 2;\n          break;\n        case \"r\":\n          delta = vLabel.width / 2;\n          break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += wLabel.width / 2;\n    if (wLabel.labelpos) {\n      switch ((wLabel.labelpos || \"\").toLowerCase()) {\n        case \"l\":\n          delta = wLabel.width / 2;\n          break;\n        case \"r\":\n          delta = -wLabel.width / 2;\n          break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n    return sum;\n  };\n};\nexports.sep = sep;\nvar width = function (g, v) {\n  return g.node(v).width || 0;\n};\nexports.width = width;","map":{"version":3,"names":["graphlib_1","require","util_1","util_2","BlockGraph","_super","__extends","Graph","findType1Conflicts","g","layering","conflicts","visitLayer","prevLayer","layer","k0","scanPos","prevLayerLength","length","lastNode","forEach","v","i","w","exports","findOtherInnerSegmentNode","k1","node","order","_a","slice","scanNode","predecessors","u","uLabel","uPos","dummy","addConflict","reduce","findType2Conflicts","scan","south","southPos","southEnd","prevNorthBorder","nextNorthBorder","_b","uNode","getScannedKey","params","JSON","stringify","scanIfNeeded","scanCache","cacheKey","get","apply","set","north","prevNorthPos","nextNorthPos","scanned","Map","southLookahead","find","vv","ww","tmp","conflictsV","hasConflict","verticalAlignment","neighborFn","root","align","pos","prevIdx","ws","sort","a","b","mp","Math","floor","il","ceil","horizontalCompaction","reverseSep","xs","blockG","buildBlockGraph","borderType","iterate","setXsFunc","nextNodesFunc","stack","nodes","elem","pop","visited","push","concat","pass1","inEdges","acc","e","max","edge","pass2","min","outEdges","Number","POSITIVE_INFINITY","bind","successors","Object","values","blockGraph","graphLabel","graph","sepFn","sep","nodesep","edgesep","vRoot","setNode","uRoot","prevMax","edgeFromArgs","setEdge","findSmallestWidthAlignment","xss","minBy","NEGATIVE_INFINITY","keys","x","halfWidth","width","alignCoordinates","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","alignment","delta","xsVals","key","balance","result","ul","toLowerCase","map","positionX","buildLayerMatrix","assign","adjustedLayering","reverse","inner","smallestWidth","nodeSep","edgeSep","vLabel","wLabel","sum","hasOwnProperty","labelpos"],"sources":["../../../../../src/layout/dagre/src/position/bk.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}