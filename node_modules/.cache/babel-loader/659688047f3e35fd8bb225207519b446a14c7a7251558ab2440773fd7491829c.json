{"ast":null,"code":"import { distance, getBBoxByArray } from './util';\nimport * as vec2 from 'gl-matrix/vec2';\nexport default {\n  /**\n   * 计算线段的包围盒\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @return {object} 包围盒对象\n   */\n  box: function (x1, y1, x2, y2) {\n    return getBBoxByArray([x1, x2], [y1, y2]);\n  },\n  /**\n   * 线段的长度\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @return {number} 距离\n   */\n  length: function (x1, y1, x2, y2) {\n    return distance(x1, y1, x2, y2);\n  },\n  /**\n   * 根据比例获取点\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @param {number} t 指定比例\n   * @return {object} 包含 x, y 的点\n   */\n  pointAt: function (x1, y1, x2, y2, t) {\n    return {\n      x: (1 - t) * x1 + t * x2,\n      y: (1 - t) * y1 + t * y2\n    };\n  },\n  /**\n   * 点到线段的距离\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @param {number} x  测试点 x\n   * @param {number} y  测试点 y\n   * @return {number} 距离\n   */\n  pointDistance: function (x1, y1, x2, y2, x, y) {\n    // 投影距离 x1, y1 的向量，假设 p, p1, p2 三个点，投影点为 a\n    // p1a = p1p.p1p2/|p1p2| * (p1p 的单位向量)\n    var cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n    if (cross < 0) {\n      return distance(x1, y1, x, y);\n    }\n    var lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n    if (cross > lengthSquare) {\n      return distance(x2, y2, x, y);\n    }\n    return this.pointToLine(x1, y1, x2, y2, x, y);\n  },\n  /**\n   * 点到直线的距离，而不是点到线段的距离\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @param {number} x  测试点 x\n   * @param {number} y  测试点 y\n   * @return {number} 距离\n   */\n  pointToLine: function (x1, y1, x2, y2, x, y) {\n    var d = [x2 - x1, y2 - y1];\n    // 如果端点相等，则判定点到点的距离\n    if (vec2.exactEquals(d, [0, 0])) {\n      return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n    }\n    var u = [-d[1], d[0]];\n    vec2.normalize(u, u);\n    var a = [x - x1, y - y1];\n    return Math.abs(vec2.dot(a, u));\n  },\n  /**\n   * 线段的角度\n   * @param {number} x1 起始点 x\n   * @param {number} y1 起始点 y\n   * @param {number} x2 结束点 x\n   * @param {number} y2 结束点 y\n   * @return {number} 导数\n   */\n  tangentAngle: function (x1, y1, x2, y2) {\n    return Math.atan2(y2 - y1, x2 - x1);\n  }\n};","map":{"version":3,"names":["distance","getBBoxByArray","vec2","box","x1","y1","x2","y2","length","pointAt","t","x","y","pointDistance","cross","lengthSquare","pointToLine","d","exactEquals","Math","sqrt","u","normalize","a","abs","dot","tangentAngle","atan2"],"sources":["../src/line.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}