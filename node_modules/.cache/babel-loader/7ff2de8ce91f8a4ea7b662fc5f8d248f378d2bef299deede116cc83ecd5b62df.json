{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport { ConfigService, createEntity as _createEntity } from '@antv/g-webgpu-core';\nimport { WebGLEngine } from '@antv/g-webgpu-engine';\nimport { Kernel } from './Kernel';\nexport var World = /*#__PURE__*/function () {\n  function World() {\n    _classCallCheck(this, World);\n    this.engine = void 0;\n    this.configService = new ConfigService();\n  }\n  _createClass(World, [{\n    key: \"setConfig\",\n    value: function setConfig(config) {\n      this.configService.set(config);\n    }\n  }, {\n    key: \"setEngine\",\n    value: function setEngine(engine) {\n      this.engine = engine;\n    }\n  }, {\n    key: \"createEntity\",\n    value: function createEntity() {\n      return _createEntity();\n    }\n  }, {\n    key: \"createKernel\",\n    value: function createKernel(precompiledBundle) {\n      var kernel = new Kernel(this.engine, this.configService);\n      if (typeof precompiledBundle === 'string') {\n        kernel.setBundle(JSON.parse(precompiledBundle));\n      } else {\n        kernel.setBundle(precompiledBundle);\n      }\n      kernel.init();\n      return kernel;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.engine.destroy();\n    }\n  }], [{\n    key: \"create\",\n    value: function create() {\n      var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var world = new World();\n      world.setConfig(config);\n      world.setEngine(new WebGLEngine());\n      return world;\n    }\n  }]);\n  return World;\n}();","map":{"version":3,"names":["ConfigService","createEntity","_createEntity","WebGLEngine","Kernel","World","_classCallCheck","engine","configService","_createClass","key","value","setConfig","config","set","setEngine","createKernel","precompiledBundle","kernel","setBundle","JSON","parse","init","destroy","create","arguments","length","undefined","world"],"sources":["../src/World.ts"],"sourcesContent":["import {\n  ConfigService,\n  createEntity,\n  IConfig,\n  IConfigService,\n  KernelBundle,\n} from '@antv/g-webgpu-core';\nimport { WebGLEngine } from '@antv/g-webgpu-engine';\nimport { Kernel } from './Kernel';\n\nexport class World {\n  public static create(config: Partial<IConfig> = {}) {\n    const world = new World();\n    world.setConfig(config);\n    world.setEngine(new WebGLEngine());\n    return world;\n  }\n\n  public engine: WebGLEngine;\n\n  private readonly configService: IConfigService = new ConfigService();\n\n  public setConfig(config: Partial<IConfig>) {\n    this.configService.set(config);\n  }\n  public setEngine(engine: WebGLEngine) {\n    this.engine = engine;\n  }\n\n  public createEntity() {\n    return createEntity();\n  }\n\n  public createKernel(precompiledBundle: KernelBundle | string) {\n    const kernel = new Kernel(this.engine, this.configService);\n    if (typeof precompiledBundle === 'string') {\n      kernel.setBundle(JSON.parse(precompiledBundle));\n    } else {\n      kernel.setBundle(precompiledBundle);\n    }\n    kernel.init();\n    return kernel;\n  }\n\n  public destroy() {\n    this.engine.destroy();\n  }\n}\n"],"mappings":";;AAAA,SACEA,aAAa,EACbC,YAAY,IAAZC,aAAY,QAIP,qBAAqB;AAC5B,SAASC,WAAW,QAAQ,uBAAuB;AACnD,SAASC,MAAM,QAAQ,UAAU;AAEjC,WAAaC,KAAK;EAAA,SAAAA,MAAA;IAAAC,eAAA,OAAAD,KAAA;IAAA,KAQTE,MAAM;IAAA,KAEIC,aAAa,GAAmB,IAAIR,aAAa,EAAE;EAAA;EAAAS,YAAA,CAAAJ,KAAA;IAAAK,GAAA;IAAAC,KAAA,EAEpE,SAAAC,UAAiBC,MAAwB,EAAE;MACzC,IAAI,CAACL,aAAa,CAACM,GAAG,CAACD,MAAM,CAAC;IAChC;EAAC;IAAAH,GAAA;IAAAC,KAAA,EACD,SAAAI,UAAiBR,MAAmB,EAAE;MACpC,IAAI,CAACA,MAAM,GAAGA,MAAM;IACtB;EAAC;IAAAG,GAAA;IAAAC,KAAA,EAED,SAAAV,aAAA,EAAsB;MACpB,OAAOC,aAAY,EAAE;IACvB;EAAC;IAAAQ,GAAA;IAAAC,KAAA,EAED,SAAAK,aAAoBC,iBAAwC,EAAE;MAC5D,IAAMC,MAAM,GAAG,IAAId,MAAM,CAAC,IAAI,CAACG,MAAM,EAAE,IAAI,CAACC,aAAa,CAAC;MAC1D,IAAI,OAAOS,iBAAiB,KAAK,QAAQ,EAAE;QACzCC,MAAM,CAACC,SAAS,CAACC,IAAI,CAACC,KAAK,CAACJ,iBAAiB,CAAC,CAAC;MACjD,CAAC,MAAM;QACLC,MAAM,CAACC,SAAS,CAACF,iBAAiB,CAAC;MACrC;MACAC,MAAM,CAACI,IAAI,EAAE;MACb,OAAOJ,MAAM;IACf;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAY,QAAA,EAAiB;MACf,IAAI,CAAChB,MAAM,CAACgB,OAAO,EAAE;IACvB;EAAC;IAAAb,GAAA;IAAAC,KAAA,EAnCD,SAAAa,OAAA,EAAoD;MAAA,IAA/BX,MAAwB,GAAAY,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;MAChD,IAAMG,KAAK,GAAG,IAAIvB,KAAK,EAAE;MACzBuB,KAAK,CAAChB,SAAS,CAACC,MAAM,CAAC;MACvBe,KAAK,CAACb,SAAS,CAAC,IAAIZ,WAAW,EAAE,CAAC;MAClC,OAAOyB,KAAK;IACd;EAAC;EAAA,OAAAvB,KAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}