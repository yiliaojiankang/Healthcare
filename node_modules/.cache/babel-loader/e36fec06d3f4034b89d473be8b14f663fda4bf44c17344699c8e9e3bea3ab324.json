{"ast":null,"code":"import SVD from './dc/svd';\nimport Matrix from './matrix';\nexport function pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  let svdSolution = new SVD(matrix, {\n    autoTranspose: true\n  });\n  let U = svdSolution.leftSingularVectors;\n  let V = svdSolution.rightSingularVectors;\n  let s = svdSolution.diagonal;\n  for (let i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}","map":{"version":3,"names":["SVD","Matrix","pseudoInverse","matrix","threshold","Number","EPSILON","checkMatrix","svdSolution","autoTranspose","U","leftSingularVectors","V","rightSingularVectors","s","diagonal","i","length","Math","abs","mmul","diag","transpose"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/layout/node_modules/ml-matrix/src/pseudoInverse.js"],"sourcesContent":["import SVD from './dc/svd';\nimport Matrix from './matrix';\n\nexport function pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  let svdSolution = new SVD(matrix, { autoTranspose: true });\n\n  let U = svdSolution.leftSingularVectors;\n  let V = svdSolution.rightSingularVectors;\n  let s = svdSolution.diagonal;\n\n  for (let i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,UAAU;AAC1B,OAAOC,MAAM,MAAM,UAAU;AAE7B,OAAO,SAASC,aAAaA,CAACC,MAAM,EAAEC,SAAS,GAAGC,MAAM,CAACC,OAAO,EAAE;EAChEH,MAAM,GAAGF,MAAM,CAACM,WAAW,CAACJ,MAAM,CAAC;EACnC,IAAIK,WAAW,GAAG,IAAIR,GAAG,CAACG,MAAM,EAAE;IAAEM,aAAa,EAAE;EAAK,CAAC,CAAC;EAE1D,IAAIC,CAAC,GAAGF,WAAW,CAACG,mBAAmB;EACvC,IAAIC,CAAC,GAAGJ,WAAW,CAACK,oBAAoB;EACxC,IAAIC,CAAC,GAAGN,WAAW,CAACO,QAAQ;EAE5B,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;IACjC,IAAIE,IAAI,CAACC,GAAG,CAACL,CAAC,CAACE,CAAC,CAAC,CAAC,GAAGZ,SAAS,EAAE;MAC9BU,CAAC,CAACE,CAAC,CAAC,GAAG,GAAG,GAAGF,CAAC,CAACE,CAAC,CAAC;IACnB,CAAC,MAAM;MACLF,CAAC,CAACE,CAAC,CAAC,GAAG,GAAG;IACZ;EACF;EAEA,OAAOJ,CAAC,CAACQ,IAAI,CAACnB,MAAM,CAACoB,IAAI,CAACP,CAAC,CAAC,CAACM,IAAI,CAACV,CAAC,CAACY,SAAS,CAAC,CAAC,CAAC,CAAC;AACnD"},"metadata":{},"sourceType":"module","externalDependencies":[]}