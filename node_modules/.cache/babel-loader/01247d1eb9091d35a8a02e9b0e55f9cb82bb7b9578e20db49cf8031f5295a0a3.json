{"ast":null,"code":"import { getURLFromTemplate } from '@antv/l7-utils';\n\n/**\n * 根据不同的输入，将对应的 url 路径进行转化\n * https://{a-c}.xxx.ccc => https://a.xxx.ccc\n * https://{a-c}.xxx.ccc => https://b.xxx.ccc\n * https://{a-c}.xxx.ccc => https://c.xxx.ccc\n * @param url\n * 'https://a.xxx.ccc '\n * or\n * ['https://a.xxx.ccc', 'https://c.ddd.ccc']\n * or\n * [\n *  {\n *    url: 'https://a.xxx.ccc',\n *    bands: [0]\n *  },\n * ...\n * ]\n * @param tileParams\n * @returns\n */\nexport function getTileUrl(url, tileParams) {\n  if (Array.isArray(url)) {\n    if (typeof url[0] === 'string') {\n      return url.map(function (src) {\n        return getURLFromTemplate(src, tileParams);\n      });\n    } else {\n      return url.map(function (o) {\n        return {\n          url: getURLFromTemplate(o.url, tileParams),\n          bands: o.bands || [0]\n        };\n      });\n    }\n  } else {\n    return getURLFromTemplate(url, tileParams);\n  }\n}\n\n/**\n * 处理 url 中的波段参数，将不同的 url 格式处理成统一格式\n * @param urlBandParam\n * 'https://a.bb.xxx'\n * or\n * [\n * 'https://a.bb.xxx',\n * 'https://a.bb.xxx'\n * ]\n * or\n * [\n *  {\n *    url: 'https://a.bb.xxx',\n *    bands: [0, 1]\n *  },\n *  ...\n * ]\n * @returns\n */\nexport function getTileBandParams(urlBandParam) {\n  if (typeof urlBandParam === 'string') {\n    return [{\n      url: urlBandParam,\n      bands: [0]\n    }];\n  } else if (typeof urlBandParam[0] === 'string') {\n    return urlBandParam.map(function (param) {\n      return {\n        url: param,\n        bands: [0]\n      };\n    });\n  } else {\n    return urlBandParam;\n  }\n}\n\n/**\n * 设置 tile 文件请求的取消函数\n * @param tile\n * @param xhrList\n */\nexport function bindCancel(tile, xhrList) {\n  tile.xhrCancel = function () {\n    xhrList.map(function (xhr) {\n      xhr.abort();\n    });\n  };\n}","map":{"version":3,"names":["getURLFromTemplate","getTileUrl","url","tileParams","Array","isArray","map","src","o","bands","getTileBandParams","urlBandParam","param","bindCancel","tile","xhrList","xhrCancel","xhr","abort"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-source/es/utils/tile/request.js"],"sourcesContent":["import { getURLFromTemplate } from '@antv/l7-utils';\n\n/**\n * 根据不同的输入，将对应的 url 路径进行转化\n * https://{a-c}.xxx.ccc => https://a.xxx.ccc\n * https://{a-c}.xxx.ccc => https://b.xxx.ccc\n * https://{a-c}.xxx.ccc => https://c.xxx.ccc\n * @param url\n * 'https://a.xxx.ccc '\n * or\n * ['https://a.xxx.ccc', 'https://c.ddd.ccc']\n * or\n * [\n *  {\n *    url: 'https://a.xxx.ccc',\n *    bands: [0]\n *  },\n * ...\n * ]\n * @param tileParams\n * @returns\n */\nexport function getTileUrl(url, tileParams) {\n  if (Array.isArray(url)) {\n    if (typeof url[0] === 'string') {\n      return url.map(function (src) {\n        return getURLFromTemplate(src, tileParams);\n      });\n    } else {\n      return url.map(function (o) {\n        return {\n          url: getURLFromTemplate(o.url, tileParams),\n          bands: o.bands || [0]\n        };\n      });\n    }\n  } else {\n    return getURLFromTemplate(url, tileParams);\n  }\n}\n\n/**\n * 处理 url 中的波段参数，将不同的 url 格式处理成统一格式\n * @param urlBandParam\n * 'https://a.bb.xxx'\n * or\n * [\n * 'https://a.bb.xxx',\n * 'https://a.bb.xxx'\n * ]\n * or\n * [\n *  {\n *    url: 'https://a.bb.xxx',\n *    bands: [0, 1]\n *  },\n *  ...\n * ]\n * @returns\n */\nexport function getTileBandParams(urlBandParam) {\n  if (typeof urlBandParam === 'string') {\n    return [{\n      url: urlBandParam,\n      bands: [0]\n    }];\n  } else if (typeof urlBandParam[0] === 'string') {\n    return urlBandParam.map(function (param) {\n      return {\n        url: param,\n        bands: [0]\n      };\n    });\n  } else {\n    return urlBandParam;\n  }\n}\n\n/**\n * 设置 tile 文件请求的取消函数\n * @param tile\n * @param xhrList\n */\nexport function bindCancel(tile, xhrList) {\n  tile.xhrCancel = function () {\n    xhrList.map(function (xhr) {\n      xhr.abort();\n    });\n  };\n}"],"mappings":"AAAA,SAASA,kBAAkB,QAAQ,gBAAgB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,UAAUA,CAACC,GAAG,EAAEC,UAAU,EAAE;EAC1C,IAAIC,KAAK,CAACC,OAAO,CAACH,GAAG,CAAC,EAAE;IACtB,IAAI,OAAOA,GAAG,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;MAC9B,OAAOA,GAAG,CAACI,GAAG,CAAC,UAAUC,GAAG,EAAE;QAC5B,OAAOP,kBAAkB,CAACO,GAAG,EAAEJ,UAAU,CAAC;MAC5C,CAAC,CAAC;IACJ,CAAC,MAAM;MACL,OAAOD,GAAG,CAACI,GAAG,CAAC,UAAUE,CAAC,EAAE;QAC1B,OAAO;UACLN,GAAG,EAAEF,kBAAkB,CAACQ,CAAC,CAACN,GAAG,EAAEC,UAAU,CAAC;UAC1CM,KAAK,EAAED,CAAC,CAACC,KAAK,IAAI,CAAC,CAAC;QACtB,CAAC;MACH,CAAC,CAAC;IACJ;EACF,CAAC,MAAM;IACL,OAAOT,kBAAkB,CAACE,GAAG,EAAEC,UAAU,CAAC;EAC5C;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASO,iBAAiBA,CAACC,YAAY,EAAE;EAC9C,IAAI,OAAOA,YAAY,KAAK,QAAQ,EAAE;IACpC,OAAO,CAAC;MACNT,GAAG,EAAES,YAAY;MACjBF,KAAK,EAAE,CAAC,CAAC;IACX,CAAC,CAAC;EACJ,CAAC,MAAM,IAAI,OAAOE,YAAY,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;IAC9C,OAAOA,YAAY,CAACL,GAAG,CAAC,UAAUM,KAAK,EAAE;MACvC,OAAO;QACLV,GAAG,EAAEU,KAAK;QACVH,KAAK,EAAE,CAAC,CAAC;MACX,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,OAAOE,YAAY;EACrB;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASE,UAAUA,CAACC,IAAI,EAAEC,OAAO,EAAE;EACxCD,IAAI,CAACE,SAAS,GAAG,YAAY;IAC3BD,OAAO,CAACT,GAAG,CAAC,UAAUW,GAAG,EAAE;MACzBA,GAAG,CAACC,KAAK,CAAC,CAAC;IACb,CAAC,CAAC;EACJ,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}