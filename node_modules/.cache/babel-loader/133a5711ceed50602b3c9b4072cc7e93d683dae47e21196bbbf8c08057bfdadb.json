{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n// @ts-ignore\n\nimport TwoTouchHandler from \"./two_touch\";\nvar ROTATION_THRESHOLD = 25; // pixels along circumference of touch circle\n\nfunction getBearingDelta(a, b) {\n  return a.angleWith(b) * 180 / Math.PI;\n}\nvar TouchRotateHandler = /*#__PURE__*/function (_TwoTouchHandler) {\n  _inherits(TouchRotateHandler, _TwoTouchHandler);\n  var _super = _createSuper(TouchRotateHandler);\n  function TouchRotateHandler() {\n    _classCallCheck(this, TouchRotateHandler);\n    return _super.apply(this, arguments);\n  }\n  _createClass(TouchRotateHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(TouchRotateHandler.prototype), \"reset\", this).call(this);\n      // @ts-ignore\n      delete this.minDiameter;\n      // @ts-ignore\n      delete this.startVector;\n      // @ts-ignore\n      delete this.vector;\n    }\n  }, {\n    key: \"start\",\n    value: function start(points) {\n      this.startVector = this.vector = points[0].sub(points[1]);\n      this.minDiameter = points[0].dist(points[1]);\n    }\n  }, {\n    key: \"move\",\n    value: function move(points, pinchAround) {\n      var lastVector = this.vector;\n      this.vector = points[0].sub(points[1]);\n      if (!this.active && this.isBelowThreshold(this.vector)) {\n        return;\n      }\n      this.active = true;\n      return {\n        bearingDelta: getBearingDelta(this.vector, lastVector),\n        pinchAround: pinchAround\n      };\n    }\n  }, {\n    key: \"isBelowThreshold\",\n    value: function isBelowThreshold(vector) {\n      /*\n       * The threshold before a rotation actually happens is configured in\n       * pixels alongth circumference of the circle formed by the two fingers.\n       * This makes the threshold in degrees larger when the fingers are close\n       * together and smaller when the fingers are far apart.\n       *\n       * Use the smallest diameter from the whole gesture to reduce sensitivity\n       * when pinching in and out.\n       */\n\n      this.minDiameter = Math.min(this.minDiameter, vector.mag());\n      var circumference = Math.PI * this.minDiameter;\n      var threshold = ROTATION_THRESHOLD / circumference * 360;\n      var bearingDeltaSinceStart = getBearingDelta(vector, this.startVector);\n      return Math.abs(bearingDeltaSinceStart) < threshold;\n    }\n  }]);\n  return TouchRotateHandler;\n}(TwoTouchHandler);\nexport { TouchRotateHandler as default };","map":{"version":3,"names":["_classCallCheck","_createClass","_get","_inherits","_possibleConstructorReturn","_getPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","TwoTouchHandler","ROTATION_THRESHOLD","getBearingDelta","a","b","angleWith","Math","PI","TouchRotateHandler","_TwoTouchHandler","_super","key","value","reset","minDiameter","startVector","vector","start","points","sub","dist","move","pinchAround","lastVector","active","isBelowThreshold","bearingDelta","min","mag","circumference","threshold","bearingDeltaSinceStart","abs","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/handler/touch/touch_rotate.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n// @ts-ignore\n\nimport TwoTouchHandler from \"./two_touch\";\nvar ROTATION_THRESHOLD = 25; // pixels along circumference of touch circle\n\nfunction getBearingDelta(a, b) {\n  return a.angleWith(b) * 180 / Math.PI;\n}\nvar TouchRotateHandler = /*#__PURE__*/function (_TwoTouchHandler) {\n  _inherits(TouchRotateHandler, _TwoTouchHandler);\n  var _super = _createSuper(TouchRotateHandler);\n  function TouchRotateHandler() {\n    _classCallCheck(this, TouchRotateHandler);\n    return _super.apply(this, arguments);\n  }\n  _createClass(TouchRotateHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      _get(_getPrototypeOf(TouchRotateHandler.prototype), \"reset\", this).call(this);\n      // @ts-ignore\n      delete this.minDiameter;\n      // @ts-ignore\n      delete this.startVector;\n      // @ts-ignore\n      delete this.vector;\n    }\n  }, {\n    key: \"start\",\n    value: function start(points) {\n      this.startVector = this.vector = points[0].sub(points[1]);\n      this.minDiameter = points[0].dist(points[1]);\n    }\n  }, {\n    key: \"move\",\n    value: function move(points, pinchAround) {\n      var lastVector = this.vector;\n      this.vector = points[0].sub(points[1]);\n      if (!this.active && this.isBelowThreshold(this.vector)) {\n        return;\n      }\n      this.active = true;\n      return {\n        bearingDelta: getBearingDelta(this.vector, lastVector),\n        pinchAround: pinchAround\n      };\n    }\n  }, {\n    key: \"isBelowThreshold\",\n    value: function isBelowThreshold(vector) {\n      /*\n       * The threshold before a rotation actually happens is configured in\n       * pixels alongth circumference of the circle formed by the two fingers.\n       * This makes the threshold in degrees larger when the fingers are close\n       * together and smaller when the fingers are far apart.\n       *\n       * Use the smallest diameter from the whole gesture to reduce sensitivity\n       * when pinching in and out.\n       */\n\n      this.minDiameter = Math.min(this.minDiameter, vector.mag());\n      var circumference = Math.PI * this.minDiameter;\n      var threshold = ROTATION_THRESHOLD / circumference * 360;\n      var bearingDeltaSinceStart = getBearingDelta(vector, this.startVector);\n      return Math.abs(bearingDeltaSinceStart) < threshold;\n    }\n  }]);\n  return TouchRotateHandler;\n}(TwoTouchHandler);\nexport { TouchRotateHandler as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}