{"ast":null,"code":"\"use strict\";\n\n// @ts-nocheck\n/**\n * @fileOverview fruchterman layout\n * @author shiwu.wyy@antfin.com\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (g && (g = 0, op[0] && (_ = 0)), _) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FruchtermanGPULayout = void 0;\nvar base_1 = require(\"../base\");\nvar util_1 = require(\"../../util\");\n// @ts-ignore\nvar g_webgpu_1 = require(\"@antv/g-webgpu\");\n// compile at runtime in dev mode\nvar gpu_1 = require(\"../../util/gpu\");\n// use compiled bundle in prod mode\nvar fruchtermanShader_1 = require(\"./fruchtermanShader\");\nvar constants_1 = require(\"../constants\");\n/**\n * fruchterman 布局\n */\nvar FruchtermanGPULayout = /** @class */function (_super) {\n  __extends(FruchtermanGPULayout, _super);\n  function FruchtermanGPULayout(options) {\n    var _this = _super.call(this) || this;\n    /** 停止迭代的最大迭代数 */\n    _this.maxIteration = 1000;\n    /** 重力大小，影响图的紧凑程度 */\n    _this.gravity = 10;\n    /** 速度 */\n    _this.speed = 1;\n    /** 是否产生聚类力 */\n    _this.clustering = false;\n    /** 根据哪个字段聚类 */\n    _this.clusterField = \"cluster\";\n    /** 聚类力大小 */\n    _this.clusterGravity = 10;\n    /** 是否启用web worker。前提是在web worker里执行布局，否则无效\t*/\n    _this.workerEnabled = false;\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    _this.nodeMap = {};\n    _this.nodeIdxMap = {};\n    _this.updateCfg(options);\n    return _this;\n  }\n  FruchtermanGPULayout.prototype.getDefaultCfg = function () {\n    return {\n      maxIteration: 1000,\n      gravity: 10,\n      speed: 1,\n      clustering: false,\n      clusterGravity: 10\n    };\n  };\n  /**\n   * 执行布局\n   */\n  FruchtermanGPULayout.prototype.execute = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var self, nodes, center, nodeMap, nodeIdxMap;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            self = this;\n            nodes = self.nodes;\n            if (!nodes || nodes.length === 0) {\n              if (self.onLayoutEnd) self.onLayoutEnd();\n              return [2 /*return*/];\n            }\n\n            if (!self.width && typeof window !== \"undefined\") {\n              self.width = window.innerWidth;\n            }\n            if (!self.height && typeof window !== \"undefined\") {\n              self.height = window.innerHeight;\n            }\n            if (!self.center) {\n              self.center = [self.width / 2, self.height / 2];\n            }\n            center = self.center;\n            if (nodes.length === 1) {\n              nodes[0].x = center[0];\n              nodes[0].y = center[1];\n              if (self.onLayoutEnd) self.onLayoutEnd();\n              return [2 /*return*/];\n            }\n\n            nodeMap = {};\n            nodeIdxMap = {};\n            nodes.forEach(function (node, i) {\n              if (!(0, util_1.isNumber)(node.x)) node.x = Math.random() * _this.width;\n              if (!(0, util_1.isNumber)(node.y)) node.y = Math.random() * _this.height;\n              nodeMap[node.id] = node;\n              nodeIdxMap[node.id] = i;\n            });\n            self.nodeMap = nodeMap;\n            self.nodeIdxMap = nodeIdxMap;\n            // layout\n            return [4 /*yield*/, self.run()];\n          case 1:\n            // layout\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  FruchtermanGPULayout.prototype.executeWithWorker = function (canvas, ctx) {\n    return __awaiter(this, void 0, void 0, function () {\n      var self, nodes, center, nodeMap, nodeIdxMap;\n      var _this = this;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            self = this;\n            nodes = self.nodes;\n            center = self.center;\n            if (!nodes || nodes.length === 0) {\n              return [2 /*return*/];\n            }\n\n            if (nodes.length === 1) {\n              nodes[0].x = center[0];\n              nodes[0].y = center[1];\n              return [2 /*return*/];\n            }\n\n            nodeMap = {};\n            nodeIdxMap = {};\n            nodes.forEach(function (node, i) {\n              if (!(0, util_1.isNumber)(node.x)) node.x = Math.random() * _this.width;\n              if (!(0, util_1.isNumber)(node.y)) node.y = Math.random() * _this.height;\n              nodeMap[node.id] = node;\n              nodeIdxMap[node.id] = i;\n            });\n            self.nodeMap = nodeMap;\n            self.nodeIdxMap = nodeIdxMap;\n            // layout\n            return [4 /*yield*/, self.run(canvas, ctx)];\n          case 1:\n            // layout\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  FruchtermanGPULayout.prototype.run = function (canvas, ctx) {\n    return __awaiter(this, void 0, void 0, function () {\n      var self, nodes, edges, maxIteration, center, area, maxDisplace, k2, k, speed, clustering, _a, attributeArray, clusterCount, numParticles, _b, maxEdgePerVetex, nodesEdgesArray, workerEnabled, world, onLayoutEnd, clusterCenters, i, kernelFruchterman, kernelCluster, execute;\n      var _this = this;\n      return __generator(this, function (_c) {\n        switch (_c.label) {\n          case 0:\n            self = this;\n            nodes = self.nodes;\n            edges = self.edges;\n            maxIteration = self.maxIteration;\n            center = self.center;\n            area = self.height * self.width;\n            maxDisplace = Math.sqrt(area) / 10;\n            k2 = area / (nodes.length + 1);\n            k = Math.sqrt(k2);\n            speed = self.speed;\n            clustering = self.clustering;\n            _a = (0, gpu_1.attributesToTextureData)([self.clusterField], nodes), attributeArray = _a.array, clusterCount = _a.count;\n            // pushing the fx and fy\n            nodes.forEach(function (node, i) {\n              var fx = 0;\n              var fy = 0;\n              if ((0, util_1.isNumber)(node.fx) && (0, util_1.isNumber)(node.fy)) {\n                fx = node.fx || 0.001;\n                fy = node.fy || 0.001;\n              }\n              attributeArray[4 * i + 1] = fx;\n              attributeArray[4 * i + 2] = fy;\n            });\n            numParticles = nodes.length;\n            _b = (0, gpu_1.buildTextureData)(nodes, edges), maxEdgePerVetex = _b.maxEdgePerVetex, nodesEdgesArray = _b.array;\n            workerEnabled = self.workerEnabled;\n            if (workerEnabled) {\n              world = g_webgpu_1.World.create({\n                canvas: canvas,\n                engineOptions: {\n                  supportCompute: true\n                }\n              });\n            } else {\n              world = g_webgpu_1.World.create({\n                engineOptions: {\n                  supportCompute: true\n                }\n              });\n            }\n            onLayoutEnd = self.onLayoutEnd;\n            clusterCenters = [];\n            for (i = 0; i < clusterCount; i++) {\n              clusterCenters.push(0, 0, 0, 0);\n            }\n            kernelFruchterman = world.createKernel(fruchtermanShader_1.fruchtermanBundle).setDispatch([numParticles, 1, 1]).setBinding({\n              u_Data: nodesEdgesArray,\n              u_K: k,\n              u_K2: k2,\n              u_Gravity: self.gravity,\n              u_ClusterGravity: self.clusterGravity || self.gravity || 1,\n              u_Speed: speed,\n              u_MaxDisplace: maxDisplace,\n              u_Clustering: clustering ? 1 : 0,\n              u_Center: center,\n              u_AttributeArray: attributeArray,\n              u_ClusterCenters: clusterCenters,\n              MAX_EDGE_PER_VERTEX: maxEdgePerVetex,\n              VERTEX_COUNT: numParticles\n            });\n            if (clustering) {\n              kernelCluster = world.createKernel(fruchtermanShader_1.clusterBundle).setDispatch([clusterCount, 1, 1]).setBinding({\n                u_Data: nodesEdgesArray,\n                u_NodeAttributes: attributeArray,\n                u_ClusterCenters: clusterCenters,\n                VERTEX_COUNT: numParticles,\n                CLUSTER_COUNT: clusterCount\n              });\n            }\n            execute = function () {\n              return __awaiter(_this, void 0, void 0, function () {\n                var i, finalParticleData;\n                return __generator(this, function (_a) {\n                  switch (_a.label) {\n                    case 0:\n                      i = 0;\n                      _a.label = 1;\n                    case 1:\n                      if (!(i < maxIteration)) return [3 /*break*/, 6];\n                      // eslint-disable-next-line no-await-in-loop\n                      return [4 /*yield*/, kernelFruchterman.execute()];\n                    case 2:\n                      // eslint-disable-next-line no-await-in-loop\n                      _a.sent();\n                      if (!clustering) return [3 /*break*/, 4];\n                      kernelCluster.setBinding({\n                        u_Data: kernelFruchterman\n                      });\n                      // eslint-disable-next-line no-await-in-loop\n                      return [4 /*yield*/, kernelCluster.execute()];\n                    case 3:\n                      // eslint-disable-next-line no-await-in-loop\n                      _a.sent();\n                      kernelFruchterman.setBinding({\n                        u_ClusterCenters: kernelCluster\n                      });\n                      _a.label = 4;\n                    case 4:\n                      kernelFruchterman.setBinding({\n                        u_MaxDisplace: maxDisplace *= 0.99\n                      });\n                      _a.label = 5;\n                    case 5:\n                      i++;\n                      return [3 /*break*/, 1];\n                    case 6:\n                      return [4 /*yield*/, kernelFruchterman.getOutput()];\n                    case 7:\n                      finalParticleData = _a.sent();\n                      if (canvas) {\n                        // 传递数据给主线程\n                        ctx.postMessage({\n                          type: constants_1.LAYOUT_MESSAGE.GPUEND,\n                          vertexEdgeData: finalParticleData\n                          // edgeIndexBufferData,\n                        });\n                      } else {\n                        nodes.forEach(function (node, i) {\n                          var x = finalParticleData[4 * i];\n                          var y = finalParticleData[4 * i + 1];\n                          node.x = x;\n                          node.y = y;\n                        });\n                      }\n                      if (onLayoutEnd) onLayoutEnd();\n                      return [2 /*return*/];\n                  }\n                });\n              });\n            };\n\n            return [4 /*yield*/, execute()];\n          case 1:\n            _c.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  FruchtermanGPULayout.prototype.getType = function () {\n    return \"fruchterman-gpu\";\n  };\n  return FruchtermanGPULayout;\n}(base_1.Base);\nexports.FruchtermanGPULayout = FruchtermanGPULayout;","map":{"version":3,"names":["require","base_1","util_1","g_webgpu_1","gpu_1","fruchtermanShader_1","constants_1","FruchtermanGPULayout","_super","__extends","options","_this","call","maxIteration","gravity","speed","clustering","clusterField","clusterGravity","workerEnabled","nodes","edges","width","height","nodeMap","nodeIdxMap","updateCfg","prototype","getDefaultCfg","execute","self","length","onLayoutEnd","window","innerWidth","innerHeight","center","x","y","forEach","node","i","isNumber","Math","random","id","run","_a","sent","executeWithWorker","canvas","ctx","area","maxDisplace","sqrt","k2","k","attributesToTextureData","attributeArray","array","clusterCount","count","fx","fy","numParticles","_b","buildTextureData","maxEdgePerVetex","nodesEdgesArray","world","World","create","engineOptions","supportCompute","clusterCenters","push","kernelFruchterman","createKernel","fruchtermanBundle","setDispatch","setBinding","u_Data","u_K","u_K2","u_Gravity","u_ClusterGravity","u_Speed","u_MaxDisplace","u_Clustering","u_Center","u_AttributeArray","u_ClusterCenters","MAX_EDGE_PER_VERTEX","VERTEX_COUNT","kernelCluster","clusterBundle","u_NodeAttributes","CLUSTER_COUNT","__awaiter","getOutput","finalParticleData","postMessage","type","LAYOUT_MESSAGE","GPUEND","vertexEdgeData","_c","getType","Base","exports"],"sources":["../../../src/layout/gpu/fruchterman.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}