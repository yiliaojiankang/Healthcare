{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\nimport { lodashUtil } from '@antv/l7-utils';\nvar throttle = lodashUtil.throttle;\n/*\n * Adds the map's position to its page's location hash.\n * Passed as an option to the map object.\n *\n * @returns {Hash} `this`\n */\nvar Hash = /*#__PURE__*/function () {\n  function Hash(hashName) {\n    var _this = this;\n    _classCallCheck(this, Hash);\n    _defineProperty(this, \"onHashChange\", function () {\n      var loc = _this.getCurrentHash();\n      if (loc.length >= 3 && !loc.some(function (v) {\n        return isNaN(+v);\n      })) {\n        var bearing = _this.map.dragRotate.isEnabled() && _this.map.touchZoomRotate.isEnabled() ? +(loc[3] || 0) : _this.map.getBearing();\n        _this.map.jumpTo({\n          center: [+loc[2], +loc[1]],\n          zoom: +loc[0],\n          bearing: bearing,\n          pitch: +(loc[4] || 0)\n        });\n        return true;\n      }\n      return false;\n    });\n    _defineProperty(this, \"getCurrentHash\", function () {\n      // Get the current hash from location, stripped from its number sign\n      var hash = window.location.hash.replace('#', '');\n      if (_this.hashName) {\n        // Split the parameter-styled hash into parts and find the value we need\n        var keyval;\n        hash.split('&').map(function (part) {\n          return part.split('=');\n        }).forEach(function (part) {\n          if (part[0] === _this.hashName) {\n            keyval = part;\n          }\n        });\n        return (keyval ? keyval[1] || '' : '').split('/');\n      }\n      return hash.split('/');\n    });\n    _defineProperty(this, \"updateHashUnthrottled\", function () {\n      var hash = _this.getHashString();\n      try {\n        window.history.replaceState(window.history.state, '', hash);\n      } catch (SecurityError) {\n        // IE11 does not allow this if the page is within an iframe created\n        // with iframe.contentWindow.document.write(...).\n        // https://github.com/mapbox/mapbox-gl-js/issues/7410\n      }\n    });\n    this.hashName = hashName && encodeURIComponent(hashName);\n\n    // Mobile Safari doesn't allow updating the hash more than 100 times per 30 seconds.\n    this.updateHash = throttle(this.updateHashUnthrottled, 30 * 1000 / 100);\n  }\n  _createClass(Hash, [{\n    key: \"addTo\",\n    value: function addTo(map) {\n      this.map = map;\n      window.addEventListener('hashchange', this.onHashChange, false);\n      this.map.on('moveend', this.updateHash);\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      window.removeEventListener('hashchange', this.onHashChange, false);\n      this.map.off('moveend', this.updateHash);\n      // clearTimeout(this.updateHash());\n\n      // @ts-ignore\n      delete this.map;\n      return this;\n    }\n  }, {\n    key: \"getHashString\",\n    value: function getHashString(mapFeedback) {\n      var center = this.map.getCenter();\n      var zoom = Math.round(this.map.getZoom() * 100) / 100;\n      // derived from equation: 512px * 2^z / 360 / 10^d < 0.5px\n      var precision = Math.ceil((zoom * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10);\n      var m = Math.pow(10, precision);\n      var lng = Math.round(center.lng * m) / m;\n      var lat = Math.round(center.lat * m) / m;\n      var bearing = this.map.getBearing();\n      var pitch = this.map.getPitch();\n      var hash = '';\n      if (mapFeedback) {\n        // new map feedback site has some constraints that don't allow\n        // us to use the same hash format as we do for the Map hash option.\n        hash += \"/\".concat(lng, \"/\").concat(lat, \"/\").concat(zoom);\n      } else {\n        hash += \"\".concat(zoom, \"/\").concat(lat, \"/\").concat(lng);\n      }\n      if (bearing || pitch) {\n        hash += \"/\".concat(Math.round(bearing * 10) / 10);\n      }\n      if (pitch) {\n        hash += \"/\".concat(Math.round(pitch));\n      }\n      if (this.hashName) {\n        var hashName = this.hashName;\n        var found = false;\n        var parts = window.location.hash.slice(1).split('&').map(function (part) {\n          var key = part.split('=')[0];\n          if (key === hashName) {\n            found = true;\n            return \"\".concat(key, \"=\").concat(hash);\n          }\n          return part;\n        }).filter(function (a) {\n          return a;\n        });\n        if (!found) {\n          parts.push(\"\".concat(hashName, \"=\").concat(hash));\n        }\n        return \"#\".concat(parts.join('&'));\n      }\n      return \"#\".concat(hash);\n    }\n  }]);\n  return Hash;\n}();\nexport default Hash;","map":{"version":3,"names":["_classCallCheck","_createClass","_defineProperty","lodashUtil","throttle","Hash","hashName","_this","loc","getCurrentHash","length","some","v","isNaN","bearing","map","dragRotate","isEnabled","touchZoomRotate","getBearing","jumpTo","center","zoom","pitch","hash","window","location","replace","keyval","split","part","forEach","getHashString","history","replaceState","state","SecurityError","encodeURIComponent","updateHash","updateHashUnthrottled","key","value","addTo","addEventListener","onHashChange","on","remove","removeEventListener","off","mapFeedback","getCenter","Math","round","getZoom","precision","ceil","LN2","log","LN10","m","pow","lng","lat","getPitch","concat","found","parts","slice","filter","a","push","join"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/hash.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\nimport { lodashUtil } from '@antv/l7-utils';\nvar throttle = lodashUtil.throttle;\n/*\n * Adds the map's position to its page's location hash.\n * Passed as an option to the map object.\n *\n * @returns {Hash} `this`\n */\nvar Hash = /*#__PURE__*/function () {\n  function Hash(hashName) {\n    var _this = this;\n    _classCallCheck(this, Hash);\n    _defineProperty(this, \"onHashChange\", function () {\n      var loc = _this.getCurrentHash();\n      if (loc.length >= 3 && !loc.some(function (v) {\n        return isNaN(+v);\n      })) {\n        var bearing = _this.map.dragRotate.isEnabled() && _this.map.touchZoomRotate.isEnabled() ? +(loc[3] || 0) : _this.map.getBearing();\n        _this.map.jumpTo({\n          center: [+loc[2], +loc[1]],\n          zoom: +loc[0],\n          bearing: bearing,\n          pitch: +(loc[4] || 0)\n        });\n        return true;\n      }\n      return false;\n    });\n    _defineProperty(this, \"getCurrentHash\", function () {\n      // Get the current hash from location, stripped from its number sign\n      var hash = window.location.hash.replace('#', '');\n      if (_this.hashName) {\n        // Split the parameter-styled hash into parts and find the value we need\n        var keyval;\n        hash.split('&').map(function (part) {\n          return part.split('=');\n        }).forEach(function (part) {\n          if (part[0] === _this.hashName) {\n            keyval = part;\n          }\n        });\n        return (keyval ? keyval[1] || '' : '').split('/');\n      }\n      return hash.split('/');\n    });\n    _defineProperty(this, \"updateHashUnthrottled\", function () {\n      var hash = _this.getHashString();\n      try {\n        window.history.replaceState(window.history.state, '', hash);\n      } catch (SecurityError) {\n        // IE11 does not allow this if the page is within an iframe created\n        // with iframe.contentWindow.document.write(...).\n        // https://github.com/mapbox/mapbox-gl-js/issues/7410\n      }\n    });\n    this.hashName = hashName && encodeURIComponent(hashName);\n\n    // Mobile Safari doesn't allow updating the hash more than 100 times per 30 seconds.\n    this.updateHash = throttle(this.updateHashUnthrottled, 30 * 1000 / 100);\n  }\n  _createClass(Hash, [{\n    key: \"addTo\",\n    value: function addTo(map) {\n      this.map = map;\n      window.addEventListener('hashchange', this.onHashChange, false);\n      this.map.on('moveend', this.updateHash);\n      return this;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      window.removeEventListener('hashchange', this.onHashChange, false);\n      this.map.off('moveend', this.updateHash);\n      // clearTimeout(this.updateHash());\n\n      // @ts-ignore\n      delete this.map;\n      return this;\n    }\n  }, {\n    key: \"getHashString\",\n    value: function getHashString(mapFeedback) {\n      var center = this.map.getCenter();\n      var zoom = Math.round(this.map.getZoom() * 100) / 100;\n      // derived from equation: 512px * 2^z / 360 / 10^d < 0.5px\n      var precision = Math.ceil((zoom * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10);\n      var m = Math.pow(10, precision);\n      var lng = Math.round(center.lng * m) / m;\n      var lat = Math.round(center.lat * m) / m;\n      var bearing = this.map.getBearing();\n      var pitch = this.map.getPitch();\n      var hash = '';\n      if (mapFeedback) {\n        // new map feedback site has some constraints that don't allow\n        // us to use the same hash format as we do for the Map hash option.\n        hash += \"/\".concat(lng, \"/\").concat(lat, \"/\").concat(zoom);\n      } else {\n        hash += \"\".concat(zoom, \"/\").concat(lat, \"/\").concat(lng);\n      }\n      if (bearing || pitch) {\n        hash += \"/\".concat(Math.round(bearing * 10) / 10);\n      }\n      if (pitch) {\n        hash += \"/\".concat(Math.round(pitch));\n      }\n      if (this.hashName) {\n        var hashName = this.hashName;\n        var found = false;\n        var parts = window.location.hash.slice(1).split('&').map(function (part) {\n          var key = part.split('=')[0];\n          if (key === hashName) {\n            found = true;\n            return \"\".concat(key, \"=\").concat(hash);\n          }\n          return part;\n        }).filter(function (a) {\n          return a;\n        });\n        if (!found) {\n          parts.push(\"\".concat(hashName, \"=\").concat(hash));\n        }\n        return \"#\".concat(parts.join('&'));\n      }\n      return \"#\".concat(hash);\n    }\n  }]);\n  return Hash;\n}();\nexport default Hash;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}