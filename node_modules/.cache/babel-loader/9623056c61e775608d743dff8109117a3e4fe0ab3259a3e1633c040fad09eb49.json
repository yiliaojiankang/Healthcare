{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { TOOLTIP_CSS_CONST } from '@antv/component';\nimport { deepMix } from '@antv/util';\nimport { HtmlTooltip } from '../../../../dependents';\nimport Action from '../../base';\nimport { getDelegationObject } from '../../util';\nvar AXIS_DESCRIPTION_TOOLTIP = 'aixs-description-tooltip';\nvar AxisDescription = /** @class */function (_super) {\n  __extends(AxisDescription, _super);\n  function AxisDescription() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  AxisDescription.prototype.show = function () {\n    var context = this.context;\n    var axis = getDelegationObject(context).axis;\n    var _a = axis.cfg.title,\n      description = _a.description,\n      text = _a.text,\n      descriptionTooltipStyle = _a.descriptionTooltipStyle;\n    var _b = context.event,\n      x = _b.x,\n      y = _b.y;\n    if (!this.tooltip) {\n      this.renderTooltip();\n    }\n    this.tooltip.update({\n      title: text || '',\n      customContent: function () {\n        return \"\\n          <div class=\\\"\".concat(TOOLTIP_CSS_CONST.CONTAINER_CLASS, \"\\\" style={\").concat(descriptionTooltipStyle, \"}>\\n            <div class=\\\"\").concat(TOOLTIP_CSS_CONST.TITLE_CLASS, \"\\\">\\n              \\u5B57\\u6BB5\\u8BF4\\u660E\\uFF1A\").concat(description, \"\\n            </div>\\n          </div>\\n        \");\n      },\n      x: x,\n      y: y\n    });\n    this.tooltip.show();\n  };\n  AxisDescription.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n    this.tooltip && this.tooltip.destroy();\n  };\n  AxisDescription.prototype.hide = function () {\n    this.tooltip && this.tooltip.hide();\n  };\n  AxisDescription.prototype.renderTooltip = function () {\n    var _a;\n    var view = this.context.view;\n    var canvas = view.canvas;\n    var region = {\n      start: {\n        x: 0,\n        y: 0\n      },\n      end: {\n        x: canvas.get('width'),\n        y: canvas.get('height')\n      }\n    };\n    var tooltip = new HtmlTooltip({\n      parent: canvas.get('el').parentNode,\n      region: region,\n      visible: false,\n      containerId: AXIS_DESCRIPTION_TOOLTIP,\n      domStyles: __assign({}, deepMix({}, (_a = {},\n      // 超长的时候，tooltip tip 最大宽度为 50%，然后可以换行\n      _a[TOOLTIP_CSS_CONST.CONTAINER_CLASS] = {\n        'max-width': '50%',\n        padding: '10px',\n        'line-height': '15px',\n        'font-size': '12px',\n        color: 'rgba(0, 0, 0, .65)'\n      }, _a[TOOLTIP_CSS_CONST.TITLE_CLASS] = {\n        'word-break': 'break-all',\n        'margin-bottom': '3px'\n      }, _a)))\n    });\n    tooltip.init();\n    tooltip.setCapture(false);\n    this.tooltip = tooltip;\n  };\n  return AxisDescription;\n}(Action);\nexport default AxisDescription;","map":{"version":3,"names":["TOOLTIP_CSS_CONST","deepMix","HtmlTooltip","Action","getDelegationObject","AXIS_DESCRIPTION_TOOLTIP","AxisDescription","_super","__extends","prototype","show","context","axis","_a","cfg","title","description","text","descriptionTooltipStyle","_b","event","x","y","tooltip","renderTooltip","update","customContent","concat","CONTAINER_CLASS","TITLE_CLASS","destroy","call","hide","view","canvas","region","start","end","get","parent","parentNode","visible","containerId","domStyles","__assign","padding","color","init","setCapture"],"sources":["../../../../../src/interaction/action/component/axis/axis-description.ts"],"sourcesContent":["import { TOOLTIP_CSS_CONST } from '@antv/component';\nimport { deepMix } from '@antv/util';\nimport { HtmlTooltip } from '../../../../dependents';\nimport Action from '../../base';\nimport { getDelegationObject } from '../../util';\nimport cx from 'classnames';\n\nconst AXIS_DESCRIPTION_TOOLTIP = 'aixs-description-tooltip';\n\nclass AxisDescription extends Action {\n  private tooltip;\n\n  public show() {\n    const context = this.context;\n    const { axis } = getDelegationObject(context);\n    const { description, text, descriptionTooltipStyle } = axis.cfg.title;\n    const { x, y } = context.event;\n    if (!this.tooltip) {\n      this.renderTooltip();\n    }\n    this.tooltip.update({\n      title: text || '',\n      customContent: () => {\n        return `\n          <div class=\"${TOOLTIP_CSS_CONST.CONTAINER_CLASS}\" style={${descriptionTooltipStyle}}>\n            <div class=\"${TOOLTIP_CSS_CONST.TITLE_CLASS}\">\n              字段说明：${description}\n            </div>\n          </div>\n        `;\n      },\n      x,\n      y,\n    });\n    this.tooltip.show();\n  }\n\n  public destroy() {\n    super.destroy();\n    this.tooltip && this.tooltip.destroy();\n  }\n\n  public hide() {\n    this.tooltip && this.tooltip.hide();\n  }\n\n  public renderTooltip() {\n    const view = this.context.view;\n    const canvas = view.canvas;\n    const region = {\n      start: { x: 0, y: 0 },\n      end: { x: canvas.get('width'), y: canvas.get('height') },\n    };\n    const tooltip = new HtmlTooltip({\n      parent: canvas.get('el').parentNode,\n      region,\n      visible: false,\n      containerId: AXIS_DESCRIPTION_TOOLTIP,\n      domStyles: {\n        ...deepMix(\n          {},\n          {\n            // 超长的时候，tooltip tip 最大宽度为 50%，然后可以换行\n            [TOOLTIP_CSS_CONST.CONTAINER_CLASS]: {\n              'max-width': '50%',\n              padding: '10px',\n              'line-height': '15px',\n              'font-size': '12px',\n              color: 'rgba(0, 0, 0, .65)',\n            },\n            [TOOLTIP_CSS_CONST.TITLE_CLASS]: {\n              'word-break': 'break-all',\n              'margin-bottom': '3px',\n            },\n          }\n        ),\n      },\n    });\n    tooltip.init();\n    tooltip.setCapture(false);\n    this.tooltip = tooltip;\n  }\n}\nexport default AxisDescription;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}