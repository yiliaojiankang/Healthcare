{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { Popper } from \"../../utils/popper\";\nimport ButtonControl from \"./buttonControl\";\nexport { PopperControl };\nvar PopperPlacementMap = {\n  topleft: 'right-start',\n  topcenter: 'bottom',\n  topright: 'left-start',\n  bottomleft: 'right-end',\n  bottomcenter: 'top',\n  bottomright: 'left-end',\n  lefttop: 'bottom-start',\n  leftcenter: 'right',\n  leftbottom: 'top-start',\n  righttop: 'bottom-end',\n  rightcenter: 'left',\n  rightbottom: 'top-end'\n};\nvar PopperControl = /*#__PURE__*/function (_ButtonControl) {\n  _inherits(PopperControl, _ButtonControl);\n  var _super = _createSuper(PopperControl);\n  function PopperControl() {\n    _classCallCheck(this, PopperControl);\n    return _super.apply(this, arguments);\n  }\n  _createClass(PopperControl, [{\n    key: \"getPopper\",\n    value:\n    /**\n     * 气泡实例\n     * @protected\n     */\n\n    function getPopper() {\n      return this.popper;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.popper.hide();\n      _get(_getPrototypeOf(PopperControl.prototype), \"hide\", this).call(this);\n    }\n\n    /**\n     * 获取默认配置\n     * @param option\n     */\n  }, {\n    key: \"getDefault\",\n    value: function getDefault(option) {\n      var _option$position;\n      var defaultOption = _get(_getPrototypeOf(PopperControl.prototype), \"getDefault\", this).call(this, option);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      var position = (_option$position = option === null || option === void 0 ? void 0 : option.position) !== null && _option$position !== void 0 ? _option$position : defaultOption.position;\n      return _objectSpread(_objectSpread({}, _get(_getPrototypeOf(PopperControl.prototype), \"getDefault\", this).call(this, option)), {}, {\n        popperPlacement: position instanceof Element ? 'bottom' : PopperPlacementMap[position],\n        popperTrigger: 'click'\n      });\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd() {\n      var button = _get(_getPrototypeOf(PopperControl.prototype), \"onAdd\", this).call(this);\n      this.initPopper();\n      return button;\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      this.popper.destroy();\n    }\n  }, {\n    key: \"initPopper\",\n    value: function initPopper() {\n      var _this = this;\n      var _this$controlOption = this.controlOption,\n        popperClassName = _this$controlOption.popperClassName,\n        popperPlacement = _this$controlOption.popperPlacement,\n        popperTrigger = _this$controlOption.popperTrigger;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      var popperContainer = this.mapsService.getMapContainer();\n\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      this.popper = new Popper(this.button, {\n        className: popperClassName,\n        placement: popperPlacement,\n        trigger: popperTrigger,\n        container: popperContainer,\n        unique: true\n      });\n      this.popper.on('show', function () {\n        _this.emit('popperShow', _this);\n      }).on('hide', function () {\n        _this.emit('popperHide', _this);\n      });\n      return this.popper;\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(option) {\n      _get(_getPrototypeOf(PopperControl.prototype), \"setOptions\", this).call(this, option);\n      if (this.checkUpdateOption(option, ['popperPlacement', 'popperTrigger', 'popperClassName'])) {\n        var content = this.popper.getContent();\n        this.popper.destroy();\n        this.initPopper();\n        this.popper.setContent(content);\n      }\n    }\n  }]);\n  return PopperControl;\n}(ButtonControl);\nexport { PopperControl as default };","map":{"version":3,"names":["_objectSpread","_classCallCheck","_createClass","_get","_inherits","_possibleConstructorReturn","_getPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","Popper","ButtonControl","PopperControl","PopperPlacementMap","topleft","topcenter","topright","bottomleft","bottomcenter","bottomright","lefttop","leftcenter","leftbottom","righttop","rightcenter","rightbottom","_ButtonControl","_super","key","value","getPopper","popper","hide","getDefault","option","_option$position","defaultOption","position","popperPlacement","Element","popperTrigger","onAdd","button","initPopper","onRemove","destroy","_this","_this$controlOption","controlOption","popperClassName","popperContainer","mapsService","getMapContainer","className","placement","trigger","container","unique","on","emit","setOptions","checkUpdateOption","content","getContent","setContent","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-component/es/control/baseControl/popperControl.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { Popper } from \"../../utils/popper\";\nimport ButtonControl from \"./buttonControl\";\nexport { PopperControl };\nvar PopperPlacementMap = {\n  topleft: 'right-start',\n  topcenter: 'bottom',\n  topright: 'left-start',\n  bottomleft: 'right-end',\n  bottomcenter: 'top',\n  bottomright: 'left-end',\n  lefttop: 'bottom-start',\n  leftcenter: 'right',\n  leftbottom: 'top-start',\n  righttop: 'bottom-end',\n  rightcenter: 'left',\n  rightbottom: 'top-end'\n};\nvar PopperControl = /*#__PURE__*/function (_ButtonControl) {\n  _inherits(PopperControl, _ButtonControl);\n  var _super = _createSuper(PopperControl);\n  function PopperControl() {\n    _classCallCheck(this, PopperControl);\n    return _super.apply(this, arguments);\n  }\n  _createClass(PopperControl, [{\n    key: \"getPopper\",\n    value:\n    /**\n     * 气泡实例\n     * @protected\n     */\n\n    function getPopper() {\n      return this.popper;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.popper.hide();\n      _get(_getPrototypeOf(PopperControl.prototype), \"hide\", this).call(this);\n    }\n\n    /**\n     * 获取默认配置\n     * @param option\n     */\n  }, {\n    key: \"getDefault\",\n    value: function getDefault(option) {\n      var _option$position;\n      var defaultOption = _get(_getPrototypeOf(PopperControl.prototype), \"getDefault\", this).call(this, option);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      var position = (_option$position = option === null || option === void 0 ? void 0 : option.position) !== null && _option$position !== void 0 ? _option$position : defaultOption.position;\n      return _objectSpread(_objectSpread({}, _get(_getPrototypeOf(PopperControl.prototype), \"getDefault\", this).call(this, option)), {}, {\n        popperPlacement: position instanceof Element ? 'bottom' : PopperPlacementMap[position],\n        popperTrigger: 'click'\n      });\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd() {\n      var button = _get(_getPrototypeOf(PopperControl.prototype), \"onAdd\", this).call(this);\n      this.initPopper();\n      return button;\n    }\n  }, {\n    key: \"onRemove\",\n    value: function onRemove() {\n      this.popper.destroy();\n    }\n  }, {\n    key: \"initPopper\",\n    value: function initPopper() {\n      var _this = this;\n      var _this$controlOption = this.controlOption,\n        popperClassName = _this$controlOption.popperClassName,\n        popperPlacement = _this$controlOption.popperPlacement,\n        popperTrigger = _this$controlOption.popperTrigger;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      var popperContainer = this.mapsService.getMapContainer();\n\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      this.popper = new Popper(this.button, {\n        className: popperClassName,\n        placement: popperPlacement,\n        trigger: popperTrigger,\n        container: popperContainer,\n        unique: true\n      });\n      this.popper.on('show', function () {\n        _this.emit('popperShow', _this);\n      }).on('hide', function () {\n        _this.emit('popperHide', _this);\n      });\n      return this.popper;\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(option) {\n      _get(_getPrototypeOf(PopperControl.prototype), \"setOptions\", this).call(this, option);\n      if (this.checkUpdateOption(option, ['popperPlacement', 'popperTrigger', 'popperClassName'])) {\n        var content = this.popper.getContent();\n        this.popper.destroy();\n        this.initPopper();\n        this.popper.setContent(content);\n      }\n    }\n  }]);\n  return PopperControl;\n}(ButtonControl);\nexport { PopperControl as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}