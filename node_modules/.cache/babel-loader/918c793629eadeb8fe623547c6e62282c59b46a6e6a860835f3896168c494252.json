{"ast":null,"code":"import Matrix from './matrix';\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (typeof yMatrix === 'object' && !Matrix.isMatrix(yMatrix) && !Array.isArray(yMatrix)) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const {\n    center = true,\n    scale = true\n  } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n  const sdx = xMatrix.standardDeviation('column', {\n    unbiased: true\n  });\n  const sdy = yIsSame ? sdx : yMatrix.standardDeviation('column', {\n    unbiased: true\n  });\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(i, j, corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return corr;\n}","map":{"version":3,"names":["Matrix","correlation","xMatrix","yMatrix","options","yIsSame","isMatrix","Array","isArray","rows","TypeError","center","scale","sdx","standardDeviation","unbiased","sdy","corr","transpose","mmul","i","j","columns","set","get"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/layout/node_modules/ml-matrix/src/correlation.js"],"sourcesContent":["import Matrix from './matrix';\n\nexport function correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !Array.isArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame\n    ? sdx\n    : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(\n        i,\n        j,\n        corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)),\n      );\n    }\n  }\n  return corr;\n}\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,UAAU;AAE7B,OAAO,SAASC,WAAWA,CAACC,OAAO,EAAEC,OAAO,GAAGD,OAAO,EAAEE,OAAO,GAAG,CAAC,CAAC,EAAE;EACpEF,OAAO,GAAG,IAAIF,MAAM,CAACE,OAAO,CAAC;EAC7B,IAAIG,OAAO,GAAG,KAAK;EACnB,IACE,OAAOF,OAAO,KAAK,QAAQ,IAC3B,CAACH,MAAM,CAACM,QAAQ,CAACH,OAAO,CAAC,IACzB,CAACI,KAAK,CAACC,OAAO,CAACL,OAAO,CAAC,EACvB;IACAC,OAAO,GAAGD,OAAO;IACjBA,OAAO,GAAGD,OAAO;IACjBG,OAAO,GAAG,IAAI;EAChB,CAAC,MAAM;IACLF,OAAO,GAAG,IAAIH,MAAM,CAACG,OAAO,CAAC;EAC/B;EACA,IAAID,OAAO,CAACO,IAAI,KAAKN,OAAO,CAACM,IAAI,EAAE;IACjC,MAAM,IAAIC,SAAS,CAAC,iDAAiD,CAAC;EACxE;EAEA,MAAM;IAAEC,MAAM,GAAG,IAAI;IAAEC,KAAK,GAAG;EAAK,CAAC,GAAGR,OAAO;EAC/C,IAAIO,MAAM,EAAE;IACVT,OAAO,CAACS,MAAM,CAAC,QAAQ,CAAC;IACxB,IAAI,CAACN,OAAO,EAAE;MACZF,OAAO,CAACQ,MAAM,CAAC,QAAQ,CAAC;IAC1B;EACF;EACA,IAAIC,KAAK,EAAE;IACTV,OAAO,CAACU,KAAK,CAAC,QAAQ,CAAC;IACvB,IAAI,CAACP,OAAO,EAAE;MACZF,OAAO,CAACS,KAAK,CAAC,QAAQ,CAAC;IACzB;EACF;EAEA,MAAMC,GAAG,GAAGX,OAAO,CAACY,iBAAiB,CAAC,QAAQ,EAAE;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC;EACnE,MAAMC,GAAG,GAAGX,OAAO,GACfQ,GAAG,GACHV,OAAO,CAACW,iBAAiB,CAAC,QAAQ,EAAE;IAAEC,QAAQ,EAAE;EAAK,CAAC,CAAC;EAE3D,MAAME,IAAI,GAAGf,OAAO,CAACgB,SAAS,CAAC,CAAC,CAACC,IAAI,CAAChB,OAAO,CAAC;EAC9C,KAAK,IAAIiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,IAAI,CAACR,IAAI,EAAEW,CAAC,EAAE,EAAE;IAClC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,IAAI,CAACK,OAAO,EAAED,CAAC,EAAE,EAAE;MACrCJ,IAAI,CAACM,GAAG,CACNH,CAAC,EACDC,CAAC,EACDJ,IAAI,CAACO,GAAG,CAACJ,CAAC,EAAEC,CAAC,CAAC,IAAI,CAAC,IAAIR,GAAG,CAACO,CAAC,CAAC,GAAGJ,GAAG,CAACK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAInB,OAAO,CAACO,IAAI,GAAG,CAAC,CAAC,CACpE,CAAC;IACH;EACF;EACA,OAAOQ,IAAI;AACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}