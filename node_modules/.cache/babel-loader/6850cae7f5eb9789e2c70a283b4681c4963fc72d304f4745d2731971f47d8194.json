{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nimport { TransparentBlack, bindingsDescriptorCopy, bindingsDescriptorEquals, inputLayoutDescriptorCopy, inputLayoutDescriptorEquals, renderPipelineDescriptorCopy, renderPipelineDescriptorEquals } from '@antv/g-device-api';\nimport { HashMap, hashCodeNumberFinish, hashCodeNumberUpdate, nullHashFunc } from \"./utils/HashMap\";\nfunction blendStateHash(hash, a) {\n  hash = hashCodeNumberUpdate(hash, a.blendMode);\n  hash = hashCodeNumberUpdate(hash, a.blendSrcFactor);\n  hash = hashCodeNumberUpdate(hash, a.blendDstFactor);\n  return hash;\n}\nfunction attachmentStateHash(hash, a) {\n  hash = blendStateHash(hash, a.rgbBlendState);\n  hash = blendStateHash(hash, a.alphaBlendState);\n  hash = hashCodeNumberUpdate(hash, a.channelWriteMask);\n  return hash;\n}\nfunction colorHash(hash, a) {\n  hash = hashCodeNumberUpdate(hash, a.r << 24 | a.g << 16 | a.b << 8 | a.a);\n  return hash;\n}\nfunction megaStateDescriptorHash(hash, a) {\n  var _a$stencilFront, _a$stencilFront2, _a$stencilFront3, _a$stencilFront4, _a$stencilBack, _a$stencilBack2, _a$stencilBack3, _a$stencilBack4;\n  for (var i = 0; i < a.attachmentsState.length; i++) hash = attachmentStateHash(hash, a.attachmentsState[i]);\n  hash = colorHash(hash, a.blendConstant || TransparentBlack);\n  hash = hashCodeNumberUpdate(hash, a.depthCompare);\n  hash = hashCodeNumberUpdate(hash, a.depthWrite ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront = a.stencilFront) === null || _a$stencilFront === void 0 ? void 0 : _a$stencilFront.compare);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront2 = a.stencilFront) === null || _a$stencilFront2 === void 0 ? void 0 : _a$stencilFront2.passOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront3 = a.stencilFront) === null || _a$stencilFront3 === void 0 ? void 0 : _a$stencilFront3.failOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront4 = a.stencilFront) === null || _a$stencilFront4 === void 0 ? void 0 : _a$stencilFront4.depthFailOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack = a.stencilBack) === null || _a$stencilBack === void 0 ? void 0 : _a$stencilBack.compare);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack2 = a.stencilBack) === null || _a$stencilBack2 === void 0 ? void 0 : _a$stencilBack2.passOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack3 = a.stencilBack) === null || _a$stencilBack3 === void 0 ? void 0 : _a$stencilBack3.failOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack4 = a.stencilBack) === null || _a$stencilBack4 === void 0 ? void 0 : _a$stencilBack4.depthFailOp);\n  hash = hashCodeNumberUpdate(hash, a.stencilWrite ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, a.cullMode);\n  hash = hashCodeNumberUpdate(hash, a.frontFace ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, a.polygonOffset ? 1 : 0);\n  return hash;\n}\nfunction renderPipelineDescriptorHash(a) {\n  var hash = 0;\n  hash = hashCodeNumberUpdate(hash, a.program.id);\n  if (a.inputLayout !== null) hash = hashCodeNumberUpdate(hash, a.inputLayout.id);\n  hash = megaStateDescriptorHash(hash, a.megaStateDescriptor);\n  for (var i = 0; i < a.colorAttachmentFormats.length; i++) hash = hashCodeNumberUpdate(hash, a.colorAttachmentFormats[i] || 0);\n  hash = hashCodeNumberUpdate(hash, a.depthStencilAttachmentFormat || 0);\n  return hashCodeNumberFinish(hash);\n}\nfunction bindingsDescriptorHash(a) {\n  var hash = 0;\n  if (a.samplerBindings) {\n    for (var i = 0; i < a.samplerBindings.length; i++) {\n      var binding = a.samplerBindings[i];\n      if (binding !== null && binding.texture !== null) hash = hashCodeNumberUpdate(hash, binding.texture.id);\n    }\n  }\n  if (a.uniformBufferBindings) {\n    for (var _i = 0; _i < a.uniformBufferBindings.length; _i++) {\n      var _binding = a.uniformBufferBindings[_i];\n      if (_binding !== null && _binding.buffer !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding.buffer.id);\n        hash = hashCodeNumberUpdate(hash, _binding.binding);\n        hash = hashCodeNumberUpdate(hash, _binding.offset);\n        hash = hashCodeNumberUpdate(hash, _binding.size);\n      }\n    }\n  }\n  if (a.storageBufferBindings) {\n    for (var _i2 = 0; _i2 < a.storageBufferBindings.length; _i2++) {\n      var _binding2 = a.storageBufferBindings[_i2];\n      if (_binding2 !== null && _binding2.buffer !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding2.buffer.id);\n        hash = hashCodeNumberUpdate(hash, _binding2.binding);\n        hash = hashCodeNumberUpdate(hash, _binding2.offset);\n        hash = hashCodeNumberUpdate(hash, _binding2.size);\n      }\n    }\n  }\n  if (a.storageTextureBindings) {\n    for (var _i3 = 0; _i3 < a.storageTextureBindings.length; _i3++) {\n      var _binding3 = a.storageTextureBindings[_i3];\n      if (_binding3 !== null && _binding3.texture !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding3.texture.id);\n        hash = hashCodeNumberUpdate(hash, _binding3.binding);\n      }\n    }\n  }\n  return hashCodeNumberFinish(hash);\n}\nfunction programDescriptorEquals(a, b) {\n  var _a$vertex, _b$vertex, _a$fragment, _b$fragment;\n  return ((_a$vertex = a.vertex) === null || _a$vertex === void 0 ? void 0 : _a$vertex.glsl) === ((_b$vertex = b.vertex) === null || _b$vertex === void 0 ? void 0 : _b$vertex.glsl) && ((_a$fragment = a.fragment) === null || _a$fragment === void 0 ? void 0 : _a$fragment.glsl) === ((_b$fragment = b.fragment) === null || _b$fragment === void 0 ? void 0 : _b$fragment.glsl);\n}\nfunction programDescriptorCopy(a) {\n  var _a$vertex2, _a$fragment2;\n  return {\n    vertex: {\n      glsl: (_a$vertex2 = a.vertex) === null || _a$vertex2 === void 0 ? void 0 : _a$vertex2.glsl\n    },\n    fragment: {\n      glsl: (_a$fragment2 = a.fragment) === null || _a$fragment2 === void 0 ? void 0 : _a$fragment2.glsl\n    }\n  };\n}\nexport var RenderCache = /*#__PURE__*/function () {\n  function RenderCache(device) {\n    _classCallCheck(this, RenderCache);\n    _defineProperty(this, \"bindingsCache\", new HashMap(bindingsDescriptorEquals, bindingsDescriptorHash));\n    _defineProperty(this, \"renderPipelinesCache\", new HashMap(renderPipelineDescriptorEquals, renderPipelineDescriptorHash));\n    _defineProperty(this, \"inputLayoutsCache\", new HashMap(inputLayoutDescriptorEquals, nullHashFunc));\n    _defineProperty(this, \"programCache\", new HashMap(programDescriptorEquals, nullHashFunc));\n    this.device = device;\n  }\n  _createClass(RenderCache, [{\n    key: \"createBindings\",\n    value: function createBindings(descriptor) {\n      var bindings = this.bindingsCache.get(descriptor);\n      if (bindings === null) {\n        var _descriptorCopy$unifo;\n        var descriptorCopy = bindingsDescriptorCopy(descriptor);\n        descriptorCopy.uniformBufferBindings = (_descriptorCopy$unifo = descriptorCopy.uniformBufferBindings) === null || _descriptorCopy$unifo === void 0 ? void 0 : _descriptorCopy$unifo.filter(function (_ref) {\n          var size = _ref.size;\n          return size && size > 0;\n        });\n        bindings = this.device.createBindings(descriptorCopy);\n        this.bindingsCache.add(descriptorCopy, bindings);\n      }\n      return bindings;\n    }\n  }, {\n    key: \"createRenderPipeline\",\n    value: function createRenderPipeline(descriptor) {\n      var renderPipeline = this.renderPipelinesCache.get(descriptor);\n      if (renderPipeline === null) {\n        var descriptorCopy = renderPipelineDescriptorCopy(descriptor);\n        descriptorCopy.colorAttachmentFormats = descriptorCopy.colorAttachmentFormats.filter(function (f) {\n          return f;\n        });\n        renderPipeline = this.device.createRenderPipeline(descriptorCopy);\n        this.renderPipelinesCache.add(descriptorCopy, renderPipeline);\n      }\n      return renderPipeline;\n    }\n  }, {\n    key: \"createInputLayout\",\n    value: function createInputLayout(descriptor) {\n      // remove hollows\n      descriptor.vertexBufferDescriptors = descriptor.vertexBufferDescriptors.filter(function (d) {\n        return !!d;\n      });\n      var inputLayout = this.inputLayoutsCache.get(descriptor);\n      if (inputLayout === null) {\n        var descriptorCopy = inputLayoutDescriptorCopy(descriptor);\n        inputLayout = this.device.createInputLayout(descriptorCopy);\n        this.inputLayoutsCache.add(descriptorCopy, inputLayout);\n      }\n      return inputLayout;\n    }\n  }, {\n    key: \"createProgram\",\n    value: function createProgram(descriptor) {\n      var program = this.programCache.get(descriptor);\n      if (program === null) {\n        var descriptorCopy = programDescriptorCopy(descriptor);\n        program = this.device.createProgram(descriptor);\n        this.programCache.add(descriptorCopy, program);\n      }\n      return program;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _iterator = _createForOfIteratorHelper(this.bindingsCache.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var bindings = _step.value;\n          bindings.destroy();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(this.renderPipelinesCache.values()),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var renderPipeline = _step2.value;\n          renderPipeline.destroy();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(this.inputLayoutsCache.values()),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var inputLayout = _step3.value;\n          inputLayout.destroy();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      var _iterator4 = _createForOfIteratorHelper(this.programCache.values()),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var program = _step4.value;\n          program.destroy();\n        }\n        // for (const sampler of this.samplerCache.values()) sampler.destroy();\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.bindingsCache.clear();\n      this.renderPipelinesCache.clear();\n      this.inputLayoutsCache.clear();\n      this.programCache.clear();\n      // this.samplerCache.clear();\n    }\n  }]);\n\n  return RenderCache;\n}();","map":{"version":3,"names":["_classCallCheck","_createClass","_defineProperty","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","TransparentBlack","bindingsDescriptorCopy","bindingsDescriptorEquals","inputLayoutDescriptorCopy","inputLayoutDescriptorEquals","renderPipelineDescriptorCopy","renderPipelineDescriptorEquals","HashMap","hashCodeNumberFinish","hashCodeNumberUpdate","nullHashFunc","blendStateHash","hash","a","blendMode","blendSrcFactor","blendDstFactor","attachmentStateHash","rgbBlendState","alphaBlendState","channelWriteMask","colorHash","r","g","b","megaStateDescriptorHash","_a$stencilFront","_a$stencilFront2","_a$stencilFront3","_a$stencilFront4","_a$stencilBack","_a$stencilBack2","_a$stencilBack3","_a$stencilBack4","attachmentsState","blendConstant","depthCompare","depthWrite","stencilFront","compare","passOp","failOp","depthFailOp","stencilBack","stencilWrite","cullMode","frontFace","polygonOffset","renderPipelineDescriptorHash","program","id","inputLayout","megaStateDescriptor","colorAttachmentFormats","depthStencilAttachmentFormat","bindingsDescriptorHash","samplerBindings","binding","texture","uniformBufferBindings","_i","_binding","buffer","offset","size","storageBufferBindings","_i2","_binding2","storageTextureBindings","_i3","_binding3","programDescriptorEquals","_a$vertex","_b$vertex","_a$fragment","_b$fragment","vertex","glsl","fragment","programDescriptorCopy","_a$vertex2","_a$fragment2","RenderCache","device","key","createBindings","descriptor","bindings","bindingsCache","get","_descriptorCopy$unifo","descriptorCopy","filter","_ref","add","createRenderPipeline","renderPipeline","renderPipelinesCache","createInputLayout","vertexBufferDescriptors","d","inputLayoutsCache","createProgram","programCache","destroy","_iterator","values","_step","_iterator2","_step2","_iterator3","_step3","_iterator4","_step4","clear"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-renderer/es/device/DeviceCache.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nimport { TransparentBlack, bindingsDescriptorCopy, bindingsDescriptorEquals, inputLayoutDescriptorCopy, inputLayoutDescriptorEquals, renderPipelineDescriptorCopy, renderPipelineDescriptorEquals } from '@antv/g-device-api';\nimport { HashMap, hashCodeNumberFinish, hashCodeNumberUpdate, nullHashFunc } from \"./utils/HashMap\";\nfunction blendStateHash(hash, a) {\n  hash = hashCodeNumberUpdate(hash, a.blendMode);\n  hash = hashCodeNumberUpdate(hash, a.blendSrcFactor);\n  hash = hashCodeNumberUpdate(hash, a.blendDstFactor);\n  return hash;\n}\nfunction attachmentStateHash(hash, a) {\n  hash = blendStateHash(hash, a.rgbBlendState);\n  hash = blendStateHash(hash, a.alphaBlendState);\n  hash = hashCodeNumberUpdate(hash, a.channelWriteMask);\n  return hash;\n}\nfunction colorHash(hash, a) {\n  hash = hashCodeNumberUpdate(hash, a.r << 24 | a.g << 16 | a.b << 8 | a.a);\n  return hash;\n}\nfunction megaStateDescriptorHash(hash, a) {\n  var _a$stencilFront, _a$stencilFront2, _a$stencilFront3, _a$stencilFront4, _a$stencilBack, _a$stencilBack2, _a$stencilBack3, _a$stencilBack4;\n  for (var i = 0; i < a.attachmentsState.length; i++) hash = attachmentStateHash(hash, a.attachmentsState[i]);\n  hash = colorHash(hash, a.blendConstant || TransparentBlack);\n  hash = hashCodeNumberUpdate(hash, a.depthCompare);\n  hash = hashCodeNumberUpdate(hash, a.depthWrite ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront = a.stencilFront) === null || _a$stencilFront === void 0 ? void 0 : _a$stencilFront.compare);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront2 = a.stencilFront) === null || _a$stencilFront2 === void 0 ? void 0 : _a$stencilFront2.passOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront3 = a.stencilFront) === null || _a$stencilFront3 === void 0 ? void 0 : _a$stencilFront3.failOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilFront4 = a.stencilFront) === null || _a$stencilFront4 === void 0 ? void 0 : _a$stencilFront4.depthFailOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack = a.stencilBack) === null || _a$stencilBack === void 0 ? void 0 : _a$stencilBack.compare);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack2 = a.stencilBack) === null || _a$stencilBack2 === void 0 ? void 0 : _a$stencilBack2.passOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack3 = a.stencilBack) === null || _a$stencilBack3 === void 0 ? void 0 : _a$stencilBack3.failOp);\n  hash = hashCodeNumberUpdate(hash, (_a$stencilBack4 = a.stencilBack) === null || _a$stencilBack4 === void 0 ? void 0 : _a$stencilBack4.depthFailOp);\n  hash = hashCodeNumberUpdate(hash, a.stencilWrite ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, a.cullMode);\n  hash = hashCodeNumberUpdate(hash, a.frontFace ? 1 : 0);\n  hash = hashCodeNumberUpdate(hash, a.polygonOffset ? 1 : 0);\n  return hash;\n}\nfunction renderPipelineDescriptorHash(a) {\n  var hash = 0;\n  hash = hashCodeNumberUpdate(hash, a.program.id);\n  if (a.inputLayout !== null) hash = hashCodeNumberUpdate(hash, a.inputLayout.id);\n  hash = megaStateDescriptorHash(hash, a.megaStateDescriptor);\n  for (var i = 0; i < a.colorAttachmentFormats.length; i++) hash = hashCodeNumberUpdate(hash, a.colorAttachmentFormats[i] || 0);\n  hash = hashCodeNumberUpdate(hash, a.depthStencilAttachmentFormat || 0);\n  return hashCodeNumberFinish(hash);\n}\nfunction bindingsDescriptorHash(a) {\n  var hash = 0;\n  if (a.samplerBindings) {\n    for (var i = 0; i < a.samplerBindings.length; i++) {\n      var binding = a.samplerBindings[i];\n      if (binding !== null && binding.texture !== null) hash = hashCodeNumberUpdate(hash, binding.texture.id);\n    }\n  }\n  if (a.uniformBufferBindings) {\n    for (var _i = 0; _i < a.uniformBufferBindings.length; _i++) {\n      var _binding = a.uniformBufferBindings[_i];\n      if (_binding !== null && _binding.buffer !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding.buffer.id);\n        hash = hashCodeNumberUpdate(hash, _binding.binding);\n        hash = hashCodeNumberUpdate(hash, _binding.offset);\n        hash = hashCodeNumberUpdate(hash, _binding.size);\n      }\n    }\n  }\n  if (a.storageBufferBindings) {\n    for (var _i2 = 0; _i2 < a.storageBufferBindings.length; _i2++) {\n      var _binding2 = a.storageBufferBindings[_i2];\n      if (_binding2 !== null && _binding2.buffer !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding2.buffer.id);\n        hash = hashCodeNumberUpdate(hash, _binding2.binding);\n        hash = hashCodeNumberUpdate(hash, _binding2.offset);\n        hash = hashCodeNumberUpdate(hash, _binding2.size);\n      }\n    }\n  }\n  if (a.storageTextureBindings) {\n    for (var _i3 = 0; _i3 < a.storageTextureBindings.length; _i3++) {\n      var _binding3 = a.storageTextureBindings[_i3];\n      if (_binding3 !== null && _binding3.texture !== null) {\n        hash = hashCodeNumberUpdate(hash, _binding3.texture.id);\n        hash = hashCodeNumberUpdate(hash, _binding3.binding);\n      }\n    }\n  }\n  return hashCodeNumberFinish(hash);\n}\nfunction programDescriptorEquals(a, b) {\n  var _a$vertex, _b$vertex, _a$fragment, _b$fragment;\n  return ((_a$vertex = a.vertex) === null || _a$vertex === void 0 ? void 0 : _a$vertex.glsl) === ((_b$vertex = b.vertex) === null || _b$vertex === void 0 ? void 0 : _b$vertex.glsl) && ((_a$fragment = a.fragment) === null || _a$fragment === void 0 ? void 0 : _a$fragment.glsl) === ((_b$fragment = b.fragment) === null || _b$fragment === void 0 ? void 0 : _b$fragment.glsl);\n}\nfunction programDescriptorCopy(a) {\n  var _a$vertex2, _a$fragment2;\n  return {\n    vertex: {\n      glsl: (_a$vertex2 = a.vertex) === null || _a$vertex2 === void 0 ? void 0 : _a$vertex2.glsl\n    },\n    fragment: {\n      glsl: (_a$fragment2 = a.fragment) === null || _a$fragment2 === void 0 ? void 0 : _a$fragment2.glsl\n    }\n  };\n}\nexport var RenderCache = /*#__PURE__*/function () {\n  function RenderCache(device) {\n    _classCallCheck(this, RenderCache);\n    _defineProperty(this, \"bindingsCache\", new HashMap(bindingsDescriptorEquals, bindingsDescriptorHash));\n    _defineProperty(this, \"renderPipelinesCache\", new HashMap(renderPipelineDescriptorEquals, renderPipelineDescriptorHash));\n    _defineProperty(this, \"inputLayoutsCache\", new HashMap(inputLayoutDescriptorEquals, nullHashFunc));\n    _defineProperty(this, \"programCache\", new HashMap(programDescriptorEquals, nullHashFunc));\n    this.device = device;\n  }\n  _createClass(RenderCache, [{\n    key: \"createBindings\",\n    value: function createBindings(descriptor) {\n      var bindings = this.bindingsCache.get(descriptor);\n      if (bindings === null) {\n        var _descriptorCopy$unifo;\n        var descriptorCopy = bindingsDescriptorCopy(descriptor);\n        descriptorCopy.uniformBufferBindings = (_descriptorCopy$unifo = descriptorCopy.uniformBufferBindings) === null || _descriptorCopy$unifo === void 0 ? void 0 : _descriptorCopy$unifo.filter(function (_ref) {\n          var size = _ref.size;\n          return size && size > 0;\n        });\n        bindings = this.device.createBindings(descriptorCopy);\n        this.bindingsCache.add(descriptorCopy, bindings);\n      }\n      return bindings;\n    }\n  }, {\n    key: \"createRenderPipeline\",\n    value: function createRenderPipeline(descriptor) {\n      var renderPipeline = this.renderPipelinesCache.get(descriptor);\n      if (renderPipeline === null) {\n        var descriptorCopy = renderPipelineDescriptorCopy(descriptor);\n        descriptorCopy.colorAttachmentFormats = descriptorCopy.colorAttachmentFormats.filter(function (f) {\n          return f;\n        });\n        renderPipeline = this.device.createRenderPipeline(descriptorCopy);\n        this.renderPipelinesCache.add(descriptorCopy, renderPipeline);\n      }\n      return renderPipeline;\n    }\n  }, {\n    key: \"createInputLayout\",\n    value: function createInputLayout(descriptor) {\n      // remove hollows\n      descriptor.vertexBufferDescriptors = descriptor.vertexBufferDescriptors.filter(function (d) {\n        return !!d;\n      });\n      var inputLayout = this.inputLayoutsCache.get(descriptor);\n      if (inputLayout === null) {\n        var descriptorCopy = inputLayoutDescriptorCopy(descriptor);\n        inputLayout = this.device.createInputLayout(descriptorCopy);\n        this.inputLayoutsCache.add(descriptorCopy, inputLayout);\n      }\n      return inputLayout;\n    }\n  }, {\n    key: \"createProgram\",\n    value: function createProgram(descriptor) {\n      var program = this.programCache.get(descriptor);\n      if (program === null) {\n        var descriptorCopy = programDescriptorCopy(descriptor);\n        program = this.device.createProgram(descriptor);\n        this.programCache.add(descriptorCopy, program);\n      }\n      return program;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _iterator = _createForOfIteratorHelper(this.bindingsCache.values()),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var bindings = _step.value;\n          bindings.destroy();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n      var _iterator2 = _createForOfIteratorHelper(this.renderPipelinesCache.values()),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var renderPipeline = _step2.value;\n          renderPipeline.destroy();\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n      var _iterator3 = _createForOfIteratorHelper(this.inputLayoutsCache.values()),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var inputLayout = _step3.value;\n          inputLayout.destroy();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      var _iterator4 = _createForOfIteratorHelper(this.programCache.values()),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var program = _step4.value;\n          program.destroy();\n        }\n        // for (const sampler of this.samplerCache.values()) sampler.destroy();\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.bindingsCache.clear();\n      this.renderPipelinesCache.clear();\n      this.inputLayoutsCache.clear();\n      this.programCache.clear();\n      // this.samplerCache.clear();\n    }\n  }]);\n  return RenderCache;\n}();"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}