{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { gl } from '@antv/l7-core';\nimport { colorSpaceMap, dataTypeMap, filterMap, formatMap, mipmapMap, wrapModeMap } from \"./constants\";\n\n/**\n * adaptor for regl.Buffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#buffers\n */\nvar ReglTexture2D = /*#__PURE__*/function () {\n  function ReglTexture2D(reGl, options) {\n    _classCallCheck(this, ReglTexture2D);\n    _defineProperty(this, \"isDestroy\", false);\n    var data = options.data,\n      _options$type = options.type,\n      type = _options$type === void 0 ? gl.UNSIGNED_BYTE : _options$type,\n      width = options.width,\n      height = options.height,\n      _options$flipY = options.flipY,\n      flipY = _options$flipY === void 0 ? false : _options$flipY,\n      _options$format = options.format,\n      format = _options$format === void 0 ? gl.RGBA : _options$format,\n      _options$mipmap = options.mipmap,\n      mipmap = _options$mipmap === void 0 ? false : _options$mipmap,\n      _options$wrapS = options.wrapS,\n      wrapS = _options$wrapS === void 0 ? gl.CLAMP_TO_EDGE : _options$wrapS,\n      _options$wrapT = options.wrapT,\n      wrapT = _options$wrapT === void 0 ? gl.CLAMP_TO_EDGE : _options$wrapT,\n      _options$aniso = options.aniso,\n      aniso = _options$aniso === void 0 ? 0 : _options$aniso,\n      _options$alignment = options.alignment,\n      alignment = _options$alignment === void 0 ? 1 : _options$alignment,\n      _options$premultiplyA = options.premultiplyAlpha,\n      premultiplyAlpha = _options$premultiplyA === void 0 ? false : _options$premultiplyA,\n      _options$mag = options.mag,\n      mag = _options$mag === void 0 ? gl.NEAREST : _options$mag,\n      _options$min = options.min,\n      min = _options$min === void 0 ? gl.NEAREST : _options$min,\n      _options$colorSpace = options.colorSpace,\n      colorSpace = _options$colorSpace === void 0 ? gl.BROWSER_DEFAULT_WEBGL : _options$colorSpace,\n      _options$x = options.x,\n      x = _options$x === void 0 ? 0 : _options$x,\n      _options$y = options.y,\n      y = _options$y === void 0 ? 0 : _options$y,\n      _options$copy = options.copy,\n      copy = _options$copy === void 0 ? false : _options$copy;\n    this.width = width;\n    this.height = height;\n    var textureOptions = {\n      width: width,\n      height: height,\n      // @ts-ignore\n      type: dataTypeMap[type],\n      format: formatMap[format],\n      wrapS: wrapModeMap[wrapS],\n      wrapT: wrapModeMap[wrapT],\n      // @ts-ignore\n      mag: filterMap[mag],\n      min: filterMap[min],\n      alignment: alignment,\n      flipY: flipY,\n      colorSpace: colorSpaceMap[colorSpace],\n      premultiplyAlpha: premultiplyAlpha,\n      aniso: aniso,\n      // copy pixels from current bind framebuffer\n      x: x,\n      y: y,\n      copy: copy\n    };\n    if (data) {\n      // @ts-ignore\n      textureOptions.data = data;\n    }\n    if (typeof mipmap === 'number') {\n      textureOptions.mipmap = mipmapMap[mipmap];\n    } else if (typeof mipmap === 'boolean') {\n      textureOptions.mipmap = mipmap;\n    }\n    this.texture = reGl.texture(textureOptions);\n  }\n  _createClass(ReglTexture2D, [{\n    key: \"get\",\n    value: function get() {\n      return this.texture;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.texture(props);\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      // @ts-ignore\n      this.texture._texture.bind();\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var width = _ref.width,\n        height = _ref.height;\n      this.texture.resize(width, height);\n      this.width = width;\n      this.height = height;\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return [this.width, this.height];\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isDestroy) {\n        var _this$texture;\n        (_this$texture = this.texture) === null || _this$texture === void 0 || _this$texture.destroy();\n      }\n      this.isDestroy = true;\n    }\n  }]);\n  return ReglTexture2D;\n}();\nexport { ReglTexture2D as default };","map":{"version":3,"names":["_classCallCheck","_createClass","_defineProperty","gl","colorSpaceMap","dataTypeMap","filterMap","formatMap","mipmapMap","wrapModeMap","ReglTexture2D","reGl","options","data","_options$type","type","UNSIGNED_BYTE","width","height","_options$flipY","flipY","_options$format","format","RGBA","_options$mipmap","mipmap","_options$wrapS","wrapS","CLAMP_TO_EDGE","_options$wrapT","wrapT","_options$aniso","aniso","_options$alignment","alignment","_options$premultiplyA","premultiplyAlpha","_options$mag","mag","NEAREST","_options$min","min","_options$colorSpace","colorSpace","BROWSER_DEFAULT_WEBGL","_options$x","x","_options$y","y","_options$copy","copy","textureOptions","texture","key","value","get","update","props","arguments","length","undefined","bind","_texture","resize","_ref","getSize","destroy","isDestroy","_this$texture","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-renderer/es/regl/ReglTexture2D.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { gl } from '@antv/l7-core';\nimport { colorSpaceMap, dataTypeMap, filterMap, formatMap, mipmapMap, wrapModeMap } from \"./constants\";\n\n/**\n * adaptor for regl.Buffer\n * @see https://github.com/regl-project/regl/blob/gh-pages/API.md#buffers\n */\nvar ReglTexture2D = /*#__PURE__*/function () {\n  function ReglTexture2D(reGl, options) {\n    _classCallCheck(this, ReglTexture2D);\n    _defineProperty(this, \"isDestroy\", false);\n    var data = options.data,\n      _options$type = options.type,\n      type = _options$type === void 0 ? gl.UNSIGNED_BYTE : _options$type,\n      width = options.width,\n      height = options.height,\n      _options$flipY = options.flipY,\n      flipY = _options$flipY === void 0 ? false : _options$flipY,\n      _options$format = options.format,\n      format = _options$format === void 0 ? gl.RGBA : _options$format,\n      _options$mipmap = options.mipmap,\n      mipmap = _options$mipmap === void 0 ? false : _options$mipmap,\n      _options$wrapS = options.wrapS,\n      wrapS = _options$wrapS === void 0 ? gl.CLAMP_TO_EDGE : _options$wrapS,\n      _options$wrapT = options.wrapT,\n      wrapT = _options$wrapT === void 0 ? gl.CLAMP_TO_EDGE : _options$wrapT,\n      _options$aniso = options.aniso,\n      aniso = _options$aniso === void 0 ? 0 : _options$aniso,\n      _options$alignment = options.alignment,\n      alignment = _options$alignment === void 0 ? 1 : _options$alignment,\n      _options$premultiplyA = options.premultiplyAlpha,\n      premultiplyAlpha = _options$premultiplyA === void 0 ? false : _options$premultiplyA,\n      _options$mag = options.mag,\n      mag = _options$mag === void 0 ? gl.NEAREST : _options$mag,\n      _options$min = options.min,\n      min = _options$min === void 0 ? gl.NEAREST : _options$min,\n      _options$colorSpace = options.colorSpace,\n      colorSpace = _options$colorSpace === void 0 ? gl.BROWSER_DEFAULT_WEBGL : _options$colorSpace,\n      _options$x = options.x,\n      x = _options$x === void 0 ? 0 : _options$x,\n      _options$y = options.y,\n      y = _options$y === void 0 ? 0 : _options$y,\n      _options$copy = options.copy,\n      copy = _options$copy === void 0 ? false : _options$copy;\n    this.width = width;\n    this.height = height;\n    var textureOptions = {\n      width: width,\n      height: height,\n      // @ts-ignore\n      type: dataTypeMap[type],\n      format: formatMap[format],\n      wrapS: wrapModeMap[wrapS],\n      wrapT: wrapModeMap[wrapT],\n      // @ts-ignore\n      mag: filterMap[mag],\n      min: filterMap[min],\n      alignment: alignment,\n      flipY: flipY,\n      colorSpace: colorSpaceMap[colorSpace],\n      premultiplyAlpha: premultiplyAlpha,\n      aniso: aniso,\n      // copy pixels from current bind framebuffer\n      x: x,\n      y: y,\n      copy: copy\n    };\n    if (data) {\n      // @ts-ignore\n      textureOptions.data = data;\n    }\n    if (typeof mipmap === 'number') {\n      textureOptions.mipmap = mipmapMap[mipmap];\n    } else if (typeof mipmap === 'boolean') {\n      textureOptions.mipmap = mipmap;\n    }\n    this.texture = reGl.texture(textureOptions);\n  }\n  _createClass(ReglTexture2D, [{\n    key: \"get\",\n    value: function get() {\n      return this.texture;\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.texture(props);\n    }\n  }, {\n    key: \"bind\",\n    value: function bind() {\n      // @ts-ignore\n      this.texture._texture.bind();\n    }\n  }, {\n    key: \"resize\",\n    value: function resize(_ref) {\n      var width = _ref.width,\n        height = _ref.height;\n      this.texture.resize(width, height);\n      this.width = width;\n      this.height = height;\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      return [this.width, this.height];\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      if (!this.isDestroy) {\n        var _this$texture;\n        (_this$texture = this.texture) === null || _this$texture === void 0 || _this$texture.destroy();\n      }\n      this.isDestroy = true;\n    }\n  }]);\n  return ReglTexture2D;\n}();\nexport { ReglTexture2D as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}