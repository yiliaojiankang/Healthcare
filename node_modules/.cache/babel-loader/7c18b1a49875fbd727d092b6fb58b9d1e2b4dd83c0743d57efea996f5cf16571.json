{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport SingleTapRecognizer, { MAX_DIST, MAX_TAP_INTERVAL } from \"./single_tap_recognizer\";\nvar TapRecognizer = /*#__PURE__*/function () {\n  function TapRecognizer(options) {\n    _classCallCheck(this, TapRecognizer);\n    this.singleTap = new SingleTapRecognizer(options);\n    this.numTaps = options.numTaps;\n    this.reset();\n  }\n  _createClass(TapRecognizer, [{\n    key: \"reset\",\n    value: function reset() {\n      this.lastTime = Infinity;\n      // @ts-ignore\n      delete this.lastTap;\n      this.count = 0;\n      this.singleTap.reset();\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      this.singleTap.touchstart(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      this.singleTap.touchmove(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      var tap = this.singleTap.touchend(e, points, mapTouches);\n      if (tap) {\n        var soonEnough = e.timeStamp - this.lastTime < MAX_TAP_INTERVAL;\n        var closeEnough = !this.lastTap || this.lastTap.dist(tap) < MAX_DIST;\n        if (!soonEnough || !closeEnough) {\n          this.reset();\n        }\n        this.count++;\n        this.lastTime = e.timeStamp;\n        this.lastTap = tap;\n        if (this.count === this.numTaps) {\n          this.reset();\n          return tap;\n        }\n      }\n    }\n  }]);\n  return TapRecognizer;\n}();\nexport { TapRecognizer as default };","map":{"version":3,"names":["_classCallCheck","_createClass","SingleTapRecognizer","MAX_DIST","MAX_TAP_INTERVAL","TapRecognizer","options","singleTap","numTaps","reset","key","value","lastTime","Infinity","lastTap","count","touchstart","e","points","mapTouches","touchmove","touchend","tap","soonEnough","timeStamp","closeEnough","dist","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/handler/tap/tap_recognizer.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport SingleTapRecognizer, { MAX_DIST, MAX_TAP_INTERVAL } from \"./single_tap_recognizer\";\nvar TapRecognizer = /*#__PURE__*/function () {\n  function TapRecognizer(options) {\n    _classCallCheck(this, TapRecognizer);\n    this.singleTap = new SingleTapRecognizer(options);\n    this.numTaps = options.numTaps;\n    this.reset();\n  }\n  _createClass(TapRecognizer, [{\n    key: \"reset\",\n    value: function reset() {\n      this.lastTime = Infinity;\n      // @ts-ignore\n      delete this.lastTap;\n      this.count = 0;\n      this.singleTap.reset();\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      this.singleTap.touchstart(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      this.singleTap.touchmove(e, points, mapTouches);\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      var tap = this.singleTap.touchend(e, points, mapTouches);\n      if (tap) {\n        var soonEnough = e.timeStamp - this.lastTime < MAX_TAP_INTERVAL;\n        var closeEnough = !this.lastTap || this.lastTap.dist(tap) < MAX_DIST;\n        if (!soonEnough || !closeEnough) {\n          this.reset();\n        }\n        this.count++;\n        this.lastTime = e.timeStamp;\n        this.lastTap = tap;\n        if (this.count === this.numTaps) {\n          this.reset();\n          return tap;\n        }\n      }\n    }\n  }]);\n  return TapRecognizer;\n}();\nexport { TapRecognizer as default };"],"mappings":"AAAA,OAAOA,eAAe,MAAM,2CAA2C;AACvE,OAAOC,YAAY,MAAM,wCAAwC;AACjE;;AAEA,OAAOC,mBAAmB,IAAIC,QAAQ,EAAEC,gBAAgB,QAAQ,yBAAyB;AACzF,IAAIC,aAAa,GAAG,aAAa,YAAY;EAC3C,SAASA,aAAaA,CAACC,OAAO,EAAE;IAC9BN,eAAe,CAAC,IAAI,EAAEK,aAAa,CAAC;IACpC,IAAI,CAACE,SAAS,GAAG,IAAIL,mBAAmB,CAACI,OAAO,CAAC;IACjD,IAAI,CAACE,OAAO,GAAGF,OAAO,CAACE,OAAO;IAC9B,IAAI,CAACC,KAAK,CAAC,CAAC;EACd;EACAR,YAAY,CAACI,aAAa,EAAE,CAAC;IAC3BK,GAAG,EAAE,OAAO;IACZC,KAAK,EAAE,SAASF,KAAKA,CAAA,EAAG;MACtB,IAAI,CAACG,QAAQ,GAAGC,QAAQ;MACxB;MACA,OAAO,IAAI,CAACC,OAAO;MACnB,IAAI,CAACC,KAAK,GAAG,CAAC;MACd,IAAI,CAACR,SAAS,CAACE,KAAK,CAAC,CAAC;IACxB;EACF,CAAC,EAAE;IACDC,GAAG,EAAE,YAAY;IACjBC,KAAK,EAAE,SAASK,UAAUA,CAACC,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;MAChD,IAAI,CAACZ,SAAS,CAACS,UAAU,CAACC,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;IAClD;EACF,CAAC,EAAE;IACDT,GAAG,EAAE,WAAW;IAChBC,KAAK,EAAE,SAASS,SAASA,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;MAC/C,IAAI,CAACZ,SAAS,CAACa,SAAS,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;IACjD;EACF,CAAC,EAAE;IACDT,GAAG,EAAE,UAAU;IACfC,KAAK,EAAE,SAASU,QAAQA,CAACJ,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;MAC9C,IAAIG,GAAG,GAAG,IAAI,CAACf,SAAS,CAACc,QAAQ,CAACJ,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;MACxD,IAAIG,GAAG,EAAE;QACP,IAAIC,UAAU,GAAGN,CAAC,CAACO,SAAS,GAAG,IAAI,CAACZ,QAAQ,GAAGR,gBAAgB;QAC/D,IAAIqB,WAAW,GAAG,CAAC,IAAI,CAACX,OAAO,IAAI,IAAI,CAACA,OAAO,CAACY,IAAI,CAACJ,GAAG,CAAC,GAAGnB,QAAQ;QACpE,IAAI,CAACoB,UAAU,IAAI,CAACE,WAAW,EAAE;UAC/B,IAAI,CAAChB,KAAK,CAAC,CAAC;QACd;QACA,IAAI,CAACM,KAAK,EAAE;QACZ,IAAI,CAACH,QAAQ,GAAGK,CAAC,CAACO,SAAS;QAC3B,IAAI,CAACV,OAAO,GAAGQ,GAAG;QAClB,IAAI,IAAI,CAACP,KAAK,KAAK,IAAI,CAACP,OAAO,EAAE;UAC/B,IAAI,CAACC,KAAK,CAAC,CAAC;UACZ,OAAOa,GAAG;QACZ;MACF;IACF;EACF,CAAC,CAAC,CAAC;EACH,OAAOjB,aAAa;AACtB,CAAC,CAAC,CAAC;AACH,SAASA,aAAa,IAAIsB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}