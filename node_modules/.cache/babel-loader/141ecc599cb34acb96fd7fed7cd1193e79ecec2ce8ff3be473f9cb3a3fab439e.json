{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar d3Force = __importStar(require(\"d3-force\"));\nvar util_1 = require(\"../../util\");\n// https://github.com/john-guerra/forceInABox/blob/master/src/forceInABox.js\nfunction forceInABox() {\n  function constant(_) {\n    return function () {\n      return _;\n    };\n  }\n  var groupBy = function (d) {\n    return d.cluster;\n  };\n  var forceNodeSize = constant(1);\n  var forceCharge = constant(-1);\n  var forceLinkDistance = constant(100);\n  var forceLinkStrength = constant(0.1);\n  var offset = [0, 0];\n  var nodes = [];\n  var nodesMap = {};\n  var links = [];\n  var centerX = 100;\n  var centerY = 100;\n  var foci = {\n    none: {\n      x: 0,\n      y: 0\n    }\n  };\n  var templateNodes = [];\n  var templateForce;\n  var template = 'force';\n  var enableGrouping = true;\n  var strength = 0.1;\n  function force(alpha) {\n    if (!enableGrouping) {\n      return force;\n    }\n    templateForce.tick();\n    getFocisFromTemplate();\n    for (var i = 0, n = nodes.length, node = void 0, k = alpha * strength; i < n; ++i) {\n      node = nodes[i];\n      node.vx += (foci[groupBy(node)].x - node.x) * k;\n      node.vy += (foci[groupBy(node)].y - node.y) * k;\n    }\n  }\n  function initialize() {\n    if (!nodes) return;\n    initializeWithForce();\n  }\n  function initializeWithForce() {\n    if (!nodes || !nodes.length) {\n      return;\n    }\n    if (groupBy(nodes[0]) === undefined) {\n      throw Error(\"Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()\");\n    }\n    // checkLinksAsObjects();\n    var net = getGroupsGraph();\n    templateForce = d3Force.forceSimulation(net.nodes).force('x', d3Force.forceX(centerX).strength(0.1)).force('y', d3Force.forceY(centerY).strength(0.1)).force('collide', d3Force.forceCollide(function (d) {\n      return d.r;\n    }).iterations(4)).force('charge', d3Force.forceManyBody().strength(forceCharge)).force('links', d3Force.forceLink(net.nodes.length ? net.links : []).distance(forceLinkDistance).strength(forceLinkStrength));\n    templateNodes = templateForce.nodes();\n    getFocisFromTemplate();\n  }\n  function getGroupsGraph() {\n    var gnodes = [];\n    var glinks = [];\n    var dNodes = {};\n    var clustersList = [];\n    var clustersCounts = {};\n    var clustersLinks = [];\n    clustersCounts = computeClustersNodeCounts(nodes);\n    clustersLinks = computeClustersLinkCounts(links);\n    clustersList = Object.keys(clustersCounts);\n    clustersList.forEach(function (key, index) {\n      var val = clustersCounts[key];\n      // Uses approx meta-node size\n      gnodes.push({\n        id: key,\n        size: val.count,\n        r: Math.sqrt(val.sumforceNodeSize / Math.PI)\n      });\n      dNodes[key] = index;\n    });\n    clustersLinks.forEach(function (l) {\n      var sourceTerminal = (0, util_1.getEdgeTerminal)(l, 'source');\n      var targetTerminal = (0, util_1.getEdgeTerminal)(l, 'target');\n      var source = dNodes[sourceTerminal];\n      var target = dNodes[targetTerminal];\n      if (source !== undefined && target !== undefined) {\n        glinks.push({\n          source: source,\n          target: target,\n          count: l.count\n        });\n      }\n    });\n    return {\n      nodes: gnodes,\n      links: glinks\n    };\n  }\n  function computeClustersNodeCounts(nodes) {\n    var clustersCounts = {};\n    nodes.forEach(function (d) {\n      var key = groupBy(d);\n      if (!clustersCounts[key]) {\n        clustersCounts[key] = {\n          count: 0,\n          sumforceNodeSize: 0\n        };\n      }\n    });\n    nodes.forEach(function (d) {\n      var key = groupBy(d);\n      var nodeSize = forceNodeSize(d);\n      var tmpCount = clustersCounts[key];\n      tmpCount.count = tmpCount.count + 1;\n      tmpCount.sumforceNodeSize = tmpCount.sumforceNodeSize + Math.PI * (nodeSize * nodeSize) * 1.3;\n      clustersCounts[key] = tmpCount;\n    });\n    return clustersCounts;\n  }\n  function computeClustersLinkCounts(links) {\n    var dClusterLinks = {};\n    var clusterLinks = [];\n    links.forEach(function (l) {\n      var key = getLinkKey(l);\n      var count = 0;\n      if (dClusterLinks[key] !== undefined) {\n        count = dClusterLinks[key];\n      }\n      count += 1;\n      dClusterLinks[key] = count;\n    });\n    // @ts-ignore\n    var entries = Object.entries(dClusterLinks);\n    entries.forEach(function (_a) {\n      var key = _a[0],\n        count = _a[1];\n      var source = key.split('~')[0];\n      var target = key.split('~')[1];\n      if (source !== undefined && target !== undefined) {\n        clusterLinks.push({\n          source: source,\n          target: target,\n          count: count\n        });\n      }\n    });\n    return clusterLinks;\n  }\n  function getFocisFromTemplate() {\n    foci = {\n      none: {\n        x: 0,\n        y: 0\n      }\n    };\n    templateNodes.forEach(function (d) {\n      foci[d.id] = {\n        x: d.x - offset[0],\n        y: d.y - offset[1]\n      };\n    });\n    return foci;\n  }\n  function getLinkKey(l) {\n    var source = (0, util_1.getEdgeTerminal)(l, 'source');\n    var target = (0, util_1.getEdgeTerminal)(l, 'target');\n    var sourceID = groupBy(nodesMap[source]);\n    var targetID = groupBy(nodesMap[target]);\n    return sourceID <= targetID ? \"\".concat(sourceID, \"~\").concat(targetID) : \"\".concat(targetID, \"~\").concat(sourceID);\n  }\n  function genNodesMap(nodes) {\n    nodesMap = {};\n    nodes.forEach(function (node) {\n      nodesMap[node.id] = node;\n    });\n  }\n  function setTemplate(x) {\n    if (!arguments.length) return template;\n    template = x;\n    initialize();\n    return force;\n  }\n  function setGroupBy(x) {\n    if (!arguments.length) return groupBy;\n    if (typeof x === 'string') {\n      groupBy = function (d) {\n        return d[x];\n      };\n      return force;\n    }\n    groupBy = x;\n    return force;\n  }\n  function setEnableGrouping(x) {\n    if (!arguments.length) return enableGrouping;\n    enableGrouping = x;\n    return force;\n  }\n  function setStrength(x) {\n    if (!arguments.length) return strength;\n    strength = x;\n    return force;\n  }\n  function setCenterX(_) {\n    if (arguments.length) {\n      centerX = _;\n      return force;\n    }\n    return centerX;\n  }\n  function setCenterY(_) {\n    if (arguments.length) {\n      centerY = _;\n      return force;\n    }\n    return centerY;\n  }\n  function setNodes(_) {\n    if (arguments.length) {\n      genNodesMap(_ || []);\n      nodes = _ || [];\n      return force;\n    }\n    return nodes;\n  }\n  function setLinks(_) {\n    if (arguments.length) {\n      links = _ || [];\n      initialize();\n      return force;\n    }\n    return links;\n  }\n  function setForceNodeSize(_) {\n    if (arguments.length) {\n      if (typeof _ === 'function') {\n        forceNodeSize = _;\n      } else {\n        forceNodeSize = constant(+_);\n      }\n      initialize();\n      return force;\n    }\n    return forceNodeSize;\n  }\n  function setForceCharge(_) {\n    if (arguments.length) {\n      if (typeof _ === 'function') {\n        forceCharge = _;\n      } else {\n        forceCharge = constant(+_);\n      }\n      initialize();\n      return force;\n    }\n    return forceCharge;\n  }\n  function setForceLinkDistance(_) {\n    if (arguments.length) {\n      if (typeof _ === 'function') {\n        forceLinkDistance = _;\n      } else {\n        forceLinkDistance = constant(+_);\n      }\n      initialize();\n      return force;\n    }\n    return forceLinkDistance;\n  }\n  function setForceLinkStrength(_) {\n    if (arguments.length) {\n      if (typeof _ === 'function') {\n        forceLinkStrength = _;\n      } else {\n        forceLinkStrength = constant(+_);\n      }\n      initialize();\n      return force;\n    }\n    return forceLinkStrength;\n  }\n  function setOffset(_) {\n    if (arguments.length) {\n      offset = _;\n      return force;\n    }\n    return offset;\n  }\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n  force.template = setTemplate;\n  force.groupBy = setGroupBy;\n  force.enableGrouping = setEnableGrouping;\n  force.strength = setStrength;\n  force.centerX = setCenterX;\n  force.centerY = setCenterY;\n  force.nodes = setNodes;\n  force.links = setLinks;\n  force.forceNodeSize = setForceNodeSize;\n  // Legacy support\n  force.nodeSize = force.forceNodeSize;\n  force.forceCharge = setForceCharge;\n  force.forceLinkDistance = setForceLinkDistance;\n  force.forceLinkStrength = setForceLinkStrength;\n  force.offset = setOffset;\n  force.getFocis = getFocisFromTemplate;\n  return force;\n}\nexports.default = forceInABox;","map":{"version":3,"names":["d3Force","__importStar","require","util_1","forceInABox","constant","_","groupBy","d","cluster","forceNodeSize","forceCharge","forceLinkDistance","forceLinkStrength","offset","nodes","nodesMap","links","centerX","centerY","foci","none","x","y","templateNodes","templateForce","template","enableGrouping","strength","force","alpha","tick","getFocisFromTemplate","i","n","length","node","k","vx","vy","initialize","initializeWithForce","undefined","Error","net","getGroupsGraph","forceSimulation","forceX","forceY","forceCollide","r","iterations","forceManyBody","forceLink","distance","gnodes","glinks","dNodes","clustersList","clustersCounts","clustersLinks","computeClustersNodeCounts","computeClustersLinkCounts","Object","keys","forEach","key","index","val","push","id","size","count","Math","sqrt","sumforceNodeSize","PI","l","sourceTerminal","getEdgeTerminal","targetTerminal","source","target","nodeSize","tmpCount","dClusterLinks","clusterLinks","getLinkKey","entries","_a","split","sourceID","targetID","concat","genNodesMap","setTemplate","arguments","setGroupBy","setEnableGrouping","setStrength","setCenterX","setCenterY","setNodes","setLinks","setForceNodeSize","setForceCharge","setForceLinkDistance","setForceLinkStrength","setOffset","getFocis","exports","default"],"sources":["../../../src/layout/force/force-in-a-box.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}