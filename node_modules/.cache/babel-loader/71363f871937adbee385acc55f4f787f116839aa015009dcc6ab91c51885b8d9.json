{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __extends, __spreadArray } from \"tslib\";\nimport EE from '@antv/event-emitter';\nimport { Chart } from '@antv/g2';\nimport { each } from '@antv/util';\nimport { bind } from 'size-sensor';\nimport { deepAssign, getAllElementsRecursively, getContainerSize, pick } from '../utils';\nvar SOURCE_ATTRIBUTE_NAME = 'data-chart-source-type';\n/** plot 图表容器的配置 */\nexport var PLOT_CONTAINER_OPTIONS = ['padding', 'appendPadding', 'renderer', 'pixelRatio', 'syncViewPadding', 'supportCSSTransform', 'limitInPlot'];\n/**\n * 所有 plot 的基类\n */\nvar Plot = /** @class */function (_super) {\n  __extends(Plot, _super);\n  function Plot(container, options) {\n    var _this = _super.call(this) || this;\n    _this.container = typeof container === 'string' ? document.getElementById(container) : container;\n    _this.options = deepAssign({}, _this.getDefaultOptions(), options);\n    _this.createG2();\n    _this.bindEvents();\n    return _this;\n  }\n  /**\n   * 获取默认的 options 配置项\n   * 每个组件都可以复写\n   */\n  Plot.getDefaultOptions = function () {\n    return {\n      renderer: 'canvas',\n      xAxis: {\n        nice: true,\n        label: {\n          autoRotate: false,\n          autoHide: {\n            type: 'equidistance',\n            cfg: {\n              minGap: 6\n            }\n          }\n        }\n      },\n      yAxis: {\n        nice: true,\n        label: {\n          autoHide: true,\n          autoRotate: false\n        }\n      },\n      animation: true\n    };\n  };\n  /**\n   * 创建 G2 实例\n   */\n  Plot.prototype.createG2 = function () {\n    var _a = this.options,\n      width = _a.width,\n      height = _a.height,\n      defaultInteractions = _a.defaultInteractions;\n    this.chart = new Chart(__assign(__assign(__assign(__assign({\n      container: this.container,\n      autoFit: false\n    }, this.getChartSize(width, height)), {\n      localRefresh: false\n    }), pick(this.options, PLOT_CONTAINER_OPTIONS)), {\n      defaultInteractions: defaultInteractions\n    }));\n    // 给容器增加标识，知道图表的来源区别于 G2\n    this.container.setAttribute(SOURCE_ATTRIBUTE_NAME, 'G2Plot');\n  };\n  /**\n   * 计算默认的 chart 大小。逻辑简化：如果存在 width 或 height，则直接使用，否则使用容器大小\n   * @param width\n   * @param height\n   */\n  Plot.prototype.getChartSize = function (width, height) {\n    var chartSize = getContainerSize(this.container);\n    return {\n      width: width || chartSize.width || 400,\n      height: height || chartSize.height || 400\n    };\n  };\n  /**\n   * 绑定代理所有 G2 的事件\n   */\n  Plot.prototype.bindEvents = function () {\n    var _this = this;\n    if (this.chart) {\n      this.chart.on('*', function (e) {\n        if (e === null || e === void 0 ? void 0 : e.type) {\n          _this.emit(e.type, e);\n        }\n      });\n    }\n  };\n  /**\n   * 获取默认的 options 配置项\n   * 每个组件都可以复写\n   */\n  Plot.prototype.getDefaultOptions = function () {\n    return Plot.getDefaultOptions();\n  };\n  /**\n   * 绘制\n   */\n  Plot.prototype.render = function () {\n    // 暴力处理，先清空再渲染，需要 G2 层自行做好更新渲染\n    this.chart.clear();\n    // 因为子 view 会继承父 view 的 options 配置（包括 legend，所以会导致 legend 重复创建）\n    // 所以这里给 chart 实例的 options 配置清空\n    // 最好的解法是在 G2 view.clear 方法的时候，重置 options 配置。或者提供方法去 resetOptions\n    // #1684 理论上在多 view 图形上，只要存在 custom legend，都存在类似问题（子弹图、双轴图）\n    // @ts-ignore\n    this.chart.options = {\n      data: [],\n      animate: true\n    };\n    this.chart.views = []; // 删除已有的 views\n    // 执行 adaptor\n    this.execAdaptor();\n    // 渲染\n    this.chart.render();\n    // 绑定\n    this.bindSizeSensor();\n  };\n  /**\n   * 更新: 更新配置且重新渲染\n   * @param options\n   */\n  Plot.prototype.update = function (options) {\n    this.updateOption(options);\n    this.render();\n  };\n  /**\n   * 更新配置\n   * @param options\n   */\n  Plot.prototype.updateOption = function (options) {\n    this.options = deepAssign({}, this.options, options);\n  };\n  /**\n   * 设置状态\n   * @param type 状态类型，支持 'active' | 'inactive' | 'selected' 三种\n   * @param conditions 条件，支持数组\n   * @param status 是否激活，默认 true\n   */\n  Plot.prototype.setState = function (type, condition, status) {\n    if (status === void 0) {\n      status = true;\n    }\n    var elements = getAllElementsRecursively(this.chart);\n    each(elements, function (ele) {\n      if (condition(ele.getData())) {\n        ele.setState(type, status);\n      }\n    });\n  };\n  /**\n   * 获取状态\n   */\n  Plot.prototype.getStates = function () {\n    var elements = getAllElementsRecursively(this.chart);\n    var stateObjects = [];\n    each(elements, function (element) {\n      var data = element.getData();\n      var states = element.getStates();\n      each(states, function (state) {\n        stateObjects.push({\n          data: data,\n          state: state,\n          geometry: element.geometry,\n          element: element\n        });\n      });\n    });\n    return stateObjects;\n  };\n  /**\n   * 更新数据\n   * @override\n   * @param options\n   */\n  Plot.prototype.changeData = function (data) {\n    // @ts-ignore\n    this.update({\n      data: data\n    });\n    // TODO: 临时方案，最好使用下面的方式去更新数据\n    // this.chart.changeData(data);\n  };\n  /**\n   * 修改画布大小\n   * @param width\n   * @param height\n   */\n  Plot.prototype.changeSize = function (width, height) {\n    this.chart.changeSize(width, height);\n  };\n  /**\n   * 增加图表标注。通过 id 标识，如果匹配到，就做更新\n   */\n  Plot.prototype.addAnnotations = function (annotations, view) {\n    view = view ? view : this.chart;\n    var incoming = __spreadArray([], annotations, true);\n    var controller = view.getController('annotation');\n    var current = controller.getComponents().map(function (co) {\n      return co.extra;\n    });\n    controller.clear(true);\n    var _loop_1 = function (i) {\n      var annotation = current[i];\n      var findIndex = incoming.findIndex(function (item) {\n        return item.id && item.id === annotation.id;\n      });\n      if (findIndex !== -1) {\n        annotation = deepAssign({}, annotation, incoming[findIndex]);\n        incoming.splice(findIndex, 1);\n      }\n      controller.annotation(annotation);\n    };\n    for (var i = 0; i < current.length; i++) {\n      _loop_1(i);\n    }\n    incoming.forEach(function (annotation) {\n      return controller.annotation(annotation);\n    });\n    view.render(true);\n  };\n  /**\n   * 删除图表标注。通过 id 标识，如果匹配到，就做删除\n   */\n  Plot.prototype.removeAnnotations = function (annotations) {\n    var controller = this.chart.getController('annotation');\n    var current = controller.getComponents().map(function (co) {\n      return co.extra;\n    });\n    controller.clear(true);\n    var _loop_2 = function (i) {\n      var annotation = current[i];\n      if (!annotations.find(function (item) {\n        return item.id && item.id === annotation.id;\n      })) {\n        controller.annotation(annotation);\n      }\n    };\n    for (var i = 0; i < current.length; i++) {\n      _loop_2(i);\n    }\n    this.chart.render(true);\n  };\n  /**\n   * 销毁\n   */\n  Plot.prototype.destroy = function () {\n    // 取消 size-sensor 的绑定\n    this.unbindSizeSensor();\n    // G2 的销毁\n    this.chart.destroy();\n    // 清空已经绑定的事件\n    this.off();\n    this.container.removeAttribute(SOURCE_ATTRIBUTE_NAME);\n  };\n  /**\n   * 执行 adaptor 操作\n   */\n  Plot.prototype.execAdaptor = function () {\n    var adaptor = this.getSchemaAdaptor();\n    var _a = this.options,\n      padding = _a.padding,\n      appendPadding = _a.appendPadding;\n    // 更新 padding\n    this.chart.padding = padding;\n    // 更新 appendPadding\n    this.chart.appendPadding = appendPadding;\n    // 转化成 G2 API\n    adaptor({\n      chart: this.chart,\n      options: this.options\n    });\n  };\n  /**\n   * 当图表容器大小变化的时候，执行的函数\n   */\n  Plot.prototype.triggerResize = function () {\n    this.chart.forceFit();\n  };\n  /**\n   * 绑定 dom 容器大小变化的事件\n   */\n  Plot.prototype.bindSizeSensor = function () {\n    var _this = this;\n    if (this.unbind) {\n      return;\n    }\n    var _a = this.options.autoFit,\n      autoFit = _a === void 0 ? true : _a;\n    if (autoFit) {\n      this.unbind = bind(this.container, function () {\n        // 获取最新的宽高信息\n        var _a = getContainerSize(_this.container),\n          width = _a.width,\n          height = _a.height;\n        // 主要是防止绑定的时候触发 resize 回调\n        if (width !== _this.chart.width || height !== _this.chart.height) {\n          _this.triggerResize();\n        }\n      });\n    }\n  };\n  /**\n   * 取消绑定\n   */\n  Plot.prototype.unbindSizeSensor = function () {\n    if (this.unbind) {\n      this.unbind();\n      this.unbind = undefined;\n    }\n  };\n  return Plot;\n}(EE);\nexport { Plot };","map":{"version":3,"names":["EE","Chart","each","bind","deepAssign","getAllElementsRecursively","getContainerSize","pick","SOURCE_ATTRIBUTE_NAME","PLOT_CONTAINER_OPTIONS","Plot","_super","__extends","container","options","_this","call","document","getElementById","getDefaultOptions","createG2","bindEvents","renderer","xAxis","nice","label","autoRotate","autoHide","type","cfg","minGap","yAxis","animation","prototype","_a","width","height","defaultInteractions","chart","__assign","autoFit","getChartSize","localRefresh","setAttribute","chartSize","on","e","emit","render","clear","data","animate","views","execAdaptor","bindSizeSensor","update","updateOption","setState","condition","status","elements","ele","getData","getStates","stateObjects","element","states","state","push","geometry","changeData","changeSize","addAnnotations","annotations","view","incoming","__spreadArray","controller","getController","current","getComponents","map","co","extra","i","annotation","findIndex","item","id","splice","length","forEach","removeAnnotations","find","destroy","unbindSizeSensor","off","removeAttribute","adaptor","getSchemaAdaptor","padding","appendPadding","triggerResize","forceFit","unbind","undefined"],"sources":["../../src/core/plot.ts"],"sourcesContent":["import EE from '@antv/event-emitter';\nimport { Chart, Element, Event, View } from '@antv/g2';\nimport { each } from '@antv/util';\nimport { bind } from 'size-sensor';\nimport { Annotation, Options, Size, StateCondition, StateName, StateObject } from '../types';\nimport { deepAssign, getAllElementsRecursively, getContainerSize, pick } from '../utils';\nimport { Adaptor } from './adaptor';\n\n/** 单独 pick 出来的用于基类的类型定义 */\nexport type PickOptions = Pick<\n  Options,\n  | 'width'\n  | 'height'\n  | 'padding'\n  | 'appendPadding'\n  | 'renderer'\n  | 'pixelRatio'\n  | 'autoFit'\n  | 'syncViewPadding'\n  | 'supportCSSTransform'\n  | 'limitInPlot'\n  | 'locale'\n  | 'defaultInteractions'\n>;\n\nconst SOURCE_ATTRIBUTE_NAME = 'data-chart-source-type';\n\n/** plot 图表容器的配置 */\nexport const PLOT_CONTAINER_OPTIONS = [\n  'padding',\n  'appendPadding',\n  'renderer',\n  'pixelRatio',\n  'syncViewPadding',\n  'supportCSSTransform',\n  'limitInPlot',\n];\n\n/**\n * 所有 plot 的基类\n */\nexport abstract class Plot<O extends PickOptions> extends EE {\n  /**\n   * 获取默认的 options 配置项\n   * 每个组件都可以复写\n   */\n  static getDefaultOptions(): any {\n    return {\n      renderer: 'canvas',\n      xAxis: {\n        nice: true,\n        label: {\n          autoRotate: false,\n          autoHide: { type: 'equidistance', cfg: { minGap: 6 } },\n        },\n      },\n      yAxis: {\n        nice: true,\n        label: {\n          autoHide: true,\n          autoRotate: false,\n        },\n      },\n      animation: true,\n    };\n  }\n\n  /** plot 类型名称 */\n  public abstract readonly type: string;\n  /** plot 的 schema 配置 */\n  public options: O;\n  /** plot 绘制的 dom */\n  public readonly container: HTMLElement;\n  /** G2 chart 实例 */\n  public chart: Chart;\n  /** resizer unbind  */\n  private unbind: () => void;\n\n  constructor(container: string | HTMLElement, options: O) {\n    super();\n    this.container = typeof container === 'string' ? document.getElementById(container) : container;\n\n    this.options = deepAssign({}, this.getDefaultOptions(), options);\n\n    this.createG2();\n\n    this.bindEvents();\n  }\n\n  /**\n   * 创建 G2 实例\n   */\n  private createG2() {\n    const { width, height, defaultInteractions } = this.options;\n\n    this.chart = new Chart({\n      container: this.container,\n      autoFit: false, // G2Plot 使用 size-sensor 进行 autoFit\n      ...this.getChartSize(width, height),\n      localRefresh: false, // 默认关闭，目前 G 还有一些位置问题，难以排查！\n      ...pick(this.options, PLOT_CONTAINER_OPTIONS),\n      defaultInteractions,\n    });\n\n    // 给容器增加标识，知道图表的来源区别于 G2\n    this.container.setAttribute(SOURCE_ATTRIBUTE_NAME, 'G2Plot');\n  }\n\n  /**\n   * 计算默认的 chart 大小。逻辑简化：如果存在 width 或 height，则直接使用，否则使用容器大小\n   * @param width\n   * @param height\n   */\n  private getChartSize(width: number, height: number): Size {\n    const chartSize = getContainerSize(this.container);\n    return { width: width || chartSize.width || 400, height: height || chartSize.height || 400 };\n  }\n\n  /**\n   * 绑定代理所有 G2 的事件\n   */\n  private bindEvents() {\n    if (this.chart) {\n      this.chart.on('*', (e: Event) => {\n        if (e?.type) {\n          this.emit(e.type, e);\n        }\n      });\n    }\n  }\n\n  /**\n   * 获取默认的 options 配置项\n   * 每个组件都可以复写\n   */\n  protected getDefaultOptions(): any {\n    return Plot.getDefaultOptions();\n  }\n\n  /**\n   * 每个组件有自己的 schema adaptor\n   */\n  protected abstract getSchemaAdaptor(): Adaptor<O>;\n\n  /**\n   * 绘制\n   */\n  public render() {\n    // 暴力处理，先清空再渲染，需要 G2 层自行做好更新渲染\n    this.chart.clear();\n    // 因为子 view 会继承父 view 的 options 配置（包括 legend，所以会导致 legend 重复创建）\n    // 所以这里给 chart 实例的 options 配置清空\n    // 最好的解法是在 G2 view.clear 方法的时候，重置 options 配置。或者提供方法去 resetOptions\n    // #1684 理论上在多 view 图形上，只要存在 custom legend，都存在类似问题（子弹图、双轴图）\n    // @ts-ignore\n    this.chart.options = {\n      data: [],\n      animate: true,\n    };\n    this.chart.views = []; // 删除已有的 views\n    // 执行 adaptor\n    this.execAdaptor();\n    // 渲染\n    this.chart.render();\n    // 绑定\n    this.bindSizeSensor();\n  }\n\n  /**\n   * 更新: 更新配置且重新渲染\n   * @param options\n   */\n  public update(options: Partial<O>) {\n    this.updateOption(options);\n    this.render();\n  }\n\n  /**\n   * 更新配置\n   * @param options\n   */\n  protected updateOption(options: Partial<O>) {\n    this.options = deepAssign({}, this.options, options);\n  }\n\n  /**\n   * 设置状态\n   * @param type 状态类型，支持 'active' | 'inactive' | 'selected' 三种\n   * @param conditions 条件，支持数组\n   * @param status 是否激活，默认 true\n   */\n  public setState(type: StateName, condition: StateCondition, status: boolean = true) {\n    const elements = getAllElementsRecursively(this.chart);\n\n    each(elements, (ele: Element) => {\n      if (condition(ele.getData())) {\n        ele.setState(type, status);\n      }\n    });\n  }\n\n  /**\n   * 获取状态\n   */\n  public getStates(): StateObject[] {\n    const elements = getAllElementsRecursively(this.chart);\n\n    const stateObjects: StateObject[] = [];\n    each(elements, (element: Element) => {\n      const data = element.getData();\n      const states = element.getStates();\n      each(states, (state) => {\n        stateObjects.push({ data, state, geometry: element.geometry, element });\n      });\n    });\n\n    return stateObjects;\n  }\n\n  /**\n   * 更新数据\n   * @override\n   * @param options\n   */\n  public changeData(data: any) {\n    // @ts-ignore\n    this.update({ data });\n    // TODO: 临时方案，最好使用下面的方式去更新数据\n    // this.chart.changeData(data);\n  }\n\n  /**\n   * 修改画布大小\n   * @param width\n   * @param height\n   */\n  public changeSize(width: number, height: number) {\n    this.chart.changeSize(width, height);\n  }\n\n  /**\n   * 增加图表标注。通过 id 标识，如果匹配到，就做更新\n   */\n  public addAnnotations(annotations: Annotation[], view?: View): void {\n    view = view ? view : this.chart;\n    const incoming = [...annotations];\n    const controller = view.getController('annotation');\n    const current = controller.getComponents().map((co) => co.extra);\n\n    controller.clear(true);\n    for (let i = 0; i < current.length; i++) {\n      let annotation = current[i];\n\n      const findIndex = incoming.findIndex((item) => item.id && item.id === annotation.id);\n      if (findIndex !== -1) {\n        annotation = deepAssign({}, annotation, incoming[findIndex]);\n        incoming.splice(findIndex, 1);\n      }\n      controller.annotation(annotation);\n    }\n\n    incoming.forEach((annotation) => controller.annotation(annotation));\n    view.render(true);\n  }\n\n  /**\n   * 删除图表标注。通过 id 标识，如果匹配到，就做删除\n   */\n  public removeAnnotations(annotations: Array<{ id: string } & Partial<Annotation>>): void {\n    const controller = this.chart.getController('annotation');\n    const current = controller.getComponents().map((co) => co.extra);\n\n    controller.clear(true);\n    for (let i = 0; i < current.length; i++) {\n      const annotation = current[i];\n\n      if (!annotations.find((item) => item.id && item.id === annotation.id)) {\n        controller.annotation(annotation);\n      }\n    }\n\n    this.chart.render(true);\n  }\n  /**\n   * 销毁\n   */\n  public destroy() {\n    // 取消 size-sensor 的绑定\n    this.unbindSizeSensor();\n    // G2 的销毁\n    this.chart.destroy();\n    // 清空已经绑定的事件\n    this.off();\n\n    this.container.removeAttribute(SOURCE_ATTRIBUTE_NAME);\n  }\n\n  /**\n   * 执行 adaptor 操作\n   */\n  protected execAdaptor() {\n    const adaptor = this.getSchemaAdaptor();\n\n    const { padding, appendPadding } = this.options;\n    // 更新 padding\n    this.chart.padding = padding;\n    // 更新 appendPadding\n    this.chart.appendPadding = appendPadding;\n\n    // 转化成 G2 API\n    adaptor({\n      chart: this.chart,\n      options: this.options,\n    });\n  }\n\n  /**\n   * 当图表容器大小变化的时候，执行的函数\n   */\n  protected triggerResize() {\n    this.chart.forceFit();\n  }\n\n  /**\n   * 绑定 dom 容器大小变化的事件\n   */\n  private bindSizeSensor() {\n    if (this.unbind) {\n      return;\n    }\n\n    const { autoFit = true } = this.options;\n    if (autoFit) {\n      this.unbind = bind(this.container, () => {\n        // 获取最新的宽高信息\n        const { width, height } = getContainerSize(this.container);\n\n        // 主要是防止绑定的时候触发 resize 回调\n        if (width !== this.chart.width || height !== this.chart.height) {\n          this.triggerResize();\n        }\n      });\n    }\n  }\n\n  /**\n   * 取消绑定\n   */\n  private unbindSizeSensor() {\n    if (this.unbind) {\n      this.unbind();\n      this.unbind = undefined;\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}