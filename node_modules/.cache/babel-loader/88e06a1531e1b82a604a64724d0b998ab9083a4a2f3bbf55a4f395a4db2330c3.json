{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar _dec, _class;\nimport { AttributeType, gl } from '@antv/l7-core';\nimport { decodePickingColor, encodePickingColor, lodashUtil, rgb2arr } from '@antv/l7-utils';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { ShaderLocation } from \"../core/CommonStyleAttribute\";\nvar isNumber = lodashUtil.isNumber;\nvar PickingStage = {\n  NONE: 0.0,\n  ENCODE: 1.0,\n  HIGHLIGHT: 2.0\n};\nvar PixelPickingPlugin = (_dec = injectable(), _dec(_class = /*#__PURE__*/function () {\n  function PixelPickingPlugin() {\n    _classCallCheck(this, PixelPickingPlugin);\n  }\n  _createClass(PixelPickingPlugin, [{\n    key: \"pickOption2Array\",\n    value:\n    /**\n     * Use map to keep order of insertion.\n     * @see https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order\n     */\n\n    function pickOption2Array() {\n      var array = [];\n      this.pickingUniformMap.forEach(function (value, key) {\n        if (isNumber(value)) {\n          array.push(value);\n        } else {\n          array.push.apply(array, _toConsumableArray(value));\n        }\n      });\n      return array;\n    }\n  }, {\n    key: \"updatePickOption\",\n    value: function updatePickOption(options, layer) {\n      var _this = this;\n      Object.keys(options).forEach(function (key) {\n        _this.pickingUniformMap.set(key, options[key]);\n      });\n      var u_PickingBuffer = layer.getLayerConfig().pickingBuffer || 0;\n      // Tip: 当前地图是否在拖动\n      var u_shaderPick = Number(layer.getShaderPickStat());\n      this.pickingUniformMap.set('u_PickingBuffer', u_PickingBuffer);\n      this.pickingUniformMap.set('u_shaderPick', u_shaderPick);\n      var uniformBuffer = layer.getPickingUniformBuffer();\n      uniformBuffer.subData({\n        offset: 0,\n        data: this.pickOption2Array()\n      });\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(layer, _ref) {\n      var _this2 = this;\n      var rendererService = _ref.rendererService,\n        styleAttributeService = _ref.styleAttributeService;\n      var uniformBuffer;\n      this.pickingUniformMap = new Map([['u_HighlightColor', [1, 0, 0, 1]], ['u_SelectColor', [1, 0, 0, 1]], ['u_PickingColor', [0, 0, 0]], ['u_PickingStage', 0], ['u_CurrentSelectedId', [0, 0, 0]], ['u_PickingThreshold', 10], ['u_PickingBuffer', 0], ['u_shaderPick', 0], ['u_EnableSelect', 0], ['u_activeMix', 0]]);\n\n      // TODO: 由于 Shader 目前无法根据是否开启拾取进行内容修改，因此即使不开启也需要生成 a_PickingColor\n      layer.hooks.init.tapPromise('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig.enablePicking;\n        styleAttributeService.registerStyleAttribute({\n          name: 'pickingColor',\n          type: AttributeType.Attribute,\n          descriptor: {\n            name: 'a_PickingColor',\n            shaderLocation: ShaderLocation.PICKING_COLOR,\n            buffer: {\n              data: [],\n              type: gl.FLOAT\n            },\n            size: 3,\n            // TODO: 固定 feature range 范围内的 pickingColor 都是固定的，可以生成 cache\n            update: function update(feature) {\n              // 只有开启拾取才需要 encode\n              var id = feature.id;\n              return enablePicking ? encodePickingColor(id) : [0, 0, 0];\n            }\n          }\n        });\n      });\n      // 必须要与 PixelPickingPass 结合使用，因此必须开启 multiPassRenderer\n      layer.hooks.beforePickingEncode.tap('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig2 = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig2.enablePicking;\n        if (enablePicking && layer.isVisible()) {\n          _this2.updatePickOption({\n            u_PickingStage: PickingStage.ENCODE\n          }, layer);\n          layer.models.forEach(function (model) {\n            return model.addUniforms({\n              u_PickingStage: PickingStage.ENCODE\n            });\n          });\n        }\n      });\n      layer.hooks.afterPickingEncode.tap('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig3 = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig3.enablePicking;\n        // 区分选中高亮 和滑过高亮\n        if (enablePicking && layer.isVisible()) {\n          _this2.updatePickOption({\n            u_PickingStage: PickingStage.HIGHLIGHT\n          }, layer);\n          layer.models.forEach(function (model) {\n            return model.addUniforms({\n              u_PickingStage: PickingStage.HIGHLIGHT\n            });\n          });\n        }\n      });\n      layer.hooks.beforeHighlight.tap('PixelPickingPlugin', function (pickedColor) {\n        var _layer$getLayerConfig4 = layer.getLayerConfig(),\n          highlightColor = _layer$getLayerConfig4.highlightColor,\n          _layer$getLayerConfig5 = _layer$getLayerConfig4.activeMix,\n          activeMix = _layer$getLayerConfig5 === void 0 ? 0 : _layer$getLayerConfig5;\n        var highlightColorInArray = typeof highlightColor === 'string' ? rgb2arr(highlightColor) : highlightColor || [1, 0, 0, 1];\n        layer.updateLayerConfig({\n          pickedFeatureID: decodePickingColor(new Uint8Array(pickedColor))\n        });\n        var option = {\n          u_PickingStage: PickingStage.HIGHLIGHT,\n          u_PickingColor: pickedColor,\n          u_HighlightColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_activeMix: activeMix\n        };\n        _this2.updatePickOption(option, layer);\n        layer.models.forEach(function (model) {\n          return model.addUniforms(option);\n        });\n      });\n      layer.hooks.beforeSelect.tap('PixelPickingPlugin', function (pickedColor) {\n        var _layer$getLayerConfig6 = layer.getLayerConfig(),\n          selectColor = _layer$getLayerConfig6.selectColor,\n          _layer$getLayerConfig7 = _layer$getLayerConfig6.selectMix,\n          selectMix = _layer$getLayerConfig7 === void 0 ? 0 : _layer$getLayerConfig7;\n        var highlightColorInArray = typeof selectColor === 'string' ? rgb2arr(selectColor) : selectColor || [1, 0, 0, 1];\n        layer.updateLayerConfig({\n          pickedFeatureID: decodePickingColor(new Uint8Array(pickedColor))\n        });\n        var option = {\n          u_PickingStage: PickingStage.HIGHLIGHT,\n          u_PickingColor: pickedColor,\n          u_HighlightColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_activeMix: selectMix,\n          u_CurrentSelectedId: pickedColor,\n          u_SelectColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_EnableSelect: 1\n        };\n        _this2.updatePickOption(option, layer);\n        layer.models.forEach(function (model) {\n          return model.addUniforms(option);\n        });\n      });\n    }\n  }]);\n  return PixelPickingPlugin;\n}()) || _class);\nexport { PixelPickingPlugin as default };","map":{"version":3,"names":["_toConsumableArray","_classCallCheck","_createClass","_dec","_class","AttributeType","gl","decodePickingColor","encodePickingColor","lodashUtil","rgb2arr","injectable","ShaderLocation","isNumber","PickingStage","NONE","ENCODE","HIGHLIGHT","PixelPickingPlugin","key","value","pickOption2Array","array","pickingUniformMap","forEach","push","apply","updatePickOption","options","layer","_this","Object","keys","set","u_PickingBuffer","getLayerConfig","pickingBuffer","u_shaderPick","Number","getShaderPickStat","uniformBuffer","getPickingUniformBuffer","subData","offset","data","_ref","_this2","rendererService","styleAttributeService","Map","hooks","init","tapPromise","_layer$getLayerConfig","enablePicking","registerStyleAttribute","name","type","Attribute","descriptor","shaderLocation","PICKING_COLOR","buffer","FLOAT","size","update","feature","id","beforePickingEncode","tap","_layer$getLayerConfig2","isVisible","u_PickingStage","models","model","addUniforms","afterPickingEncode","_layer$getLayerConfig3","beforeHighlight","pickedColor","_layer$getLayerConfig4","highlightColor","_layer$getLayerConfig5","activeMix","highlightColorInArray","updateLayerConfig","pickedFeatureID","Uint8Array","option","u_PickingColor","u_HighlightColor","map","c","u_activeMix","beforeSelect","_layer$getLayerConfig6","selectColor","_layer$getLayerConfig7","selectMix","u_CurrentSelectedId","u_SelectColor","u_EnableSelect","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-layers/es/plugins/PixelPickingPlugin.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nvar _dec, _class;\nimport { AttributeType, gl } from '@antv/l7-core';\nimport { decodePickingColor, encodePickingColor, lodashUtil, rgb2arr } from '@antv/l7-utils';\nimport { injectable } from 'inversify';\nimport 'reflect-metadata';\nimport { ShaderLocation } from \"../core/CommonStyleAttribute\";\nvar isNumber = lodashUtil.isNumber;\nvar PickingStage = {\n  NONE: 0.0,\n  ENCODE: 1.0,\n  HIGHLIGHT: 2.0\n};\nvar PixelPickingPlugin = (_dec = injectable(), _dec(_class = /*#__PURE__*/function () {\n  function PixelPickingPlugin() {\n    _classCallCheck(this, PixelPickingPlugin);\n  }\n  _createClass(PixelPickingPlugin, [{\n    key: \"pickOption2Array\",\n    value:\n    /**\n     * Use map to keep order of insertion.\n     * @see https://stackoverflow.com/questions/5525795/does-javascript-guarantee-object-property-order\n     */\n\n    function pickOption2Array() {\n      var array = [];\n      this.pickingUniformMap.forEach(function (value, key) {\n        if (isNumber(value)) {\n          array.push(value);\n        } else {\n          array.push.apply(array, _toConsumableArray(value));\n        }\n      });\n      return array;\n    }\n  }, {\n    key: \"updatePickOption\",\n    value: function updatePickOption(options, layer) {\n      var _this = this;\n      Object.keys(options).forEach(function (key) {\n        _this.pickingUniformMap.set(key, options[key]);\n      });\n      var u_PickingBuffer = layer.getLayerConfig().pickingBuffer || 0;\n      // Tip: 当前地图是否在拖动\n      var u_shaderPick = Number(layer.getShaderPickStat());\n      this.pickingUniformMap.set('u_PickingBuffer', u_PickingBuffer);\n      this.pickingUniformMap.set('u_shaderPick', u_shaderPick);\n      var uniformBuffer = layer.getPickingUniformBuffer();\n      uniformBuffer.subData({\n        offset: 0,\n        data: this.pickOption2Array()\n      });\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(layer, _ref) {\n      var _this2 = this;\n      var rendererService = _ref.rendererService,\n        styleAttributeService = _ref.styleAttributeService;\n      var uniformBuffer;\n      this.pickingUniformMap = new Map([['u_HighlightColor', [1, 0, 0, 1]], ['u_SelectColor', [1, 0, 0, 1]], ['u_PickingColor', [0, 0, 0]], ['u_PickingStage', 0], ['u_CurrentSelectedId', [0, 0, 0]], ['u_PickingThreshold', 10], ['u_PickingBuffer', 0], ['u_shaderPick', 0], ['u_EnableSelect', 0], ['u_activeMix', 0]]);\n\n      // TODO: 由于 Shader 目前无法根据是否开启拾取进行内容修改，因此即使不开启也需要生成 a_PickingColor\n      layer.hooks.init.tapPromise('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig.enablePicking;\n        styleAttributeService.registerStyleAttribute({\n          name: 'pickingColor',\n          type: AttributeType.Attribute,\n          descriptor: {\n            name: 'a_PickingColor',\n            shaderLocation: ShaderLocation.PICKING_COLOR,\n            buffer: {\n              data: [],\n              type: gl.FLOAT\n            },\n            size: 3,\n            // TODO: 固定 feature range 范围内的 pickingColor 都是固定的，可以生成 cache\n            update: function update(feature) {\n              // 只有开启拾取才需要 encode\n              var id = feature.id;\n              return enablePicking ? encodePickingColor(id) : [0, 0, 0];\n            }\n          }\n        });\n      });\n      // 必须要与 PixelPickingPass 结合使用，因此必须开启 multiPassRenderer\n      layer.hooks.beforePickingEncode.tap('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig2 = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig2.enablePicking;\n        if (enablePicking && layer.isVisible()) {\n          _this2.updatePickOption({\n            u_PickingStage: PickingStage.ENCODE\n          }, layer);\n          layer.models.forEach(function (model) {\n            return model.addUniforms({\n              u_PickingStage: PickingStage.ENCODE\n            });\n          });\n        }\n      });\n      layer.hooks.afterPickingEncode.tap('PixelPickingPlugin', function () {\n        var _layer$getLayerConfig3 = layer.getLayerConfig(),\n          enablePicking = _layer$getLayerConfig3.enablePicking;\n        // 区分选中高亮 和滑过高亮\n        if (enablePicking && layer.isVisible()) {\n          _this2.updatePickOption({\n            u_PickingStage: PickingStage.HIGHLIGHT\n          }, layer);\n          layer.models.forEach(function (model) {\n            return model.addUniforms({\n              u_PickingStage: PickingStage.HIGHLIGHT\n            });\n          });\n        }\n      });\n      layer.hooks.beforeHighlight.tap('PixelPickingPlugin', function (pickedColor) {\n        var _layer$getLayerConfig4 = layer.getLayerConfig(),\n          highlightColor = _layer$getLayerConfig4.highlightColor,\n          _layer$getLayerConfig5 = _layer$getLayerConfig4.activeMix,\n          activeMix = _layer$getLayerConfig5 === void 0 ? 0 : _layer$getLayerConfig5;\n        var highlightColorInArray = typeof highlightColor === 'string' ? rgb2arr(highlightColor) : highlightColor || [1, 0, 0, 1];\n        layer.updateLayerConfig({\n          pickedFeatureID: decodePickingColor(new Uint8Array(pickedColor))\n        });\n        var option = {\n          u_PickingStage: PickingStage.HIGHLIGHT,\n          u_PickingColor: pickedColor,\n          u_HighlightColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_activeMix: activeMix\n        };\n        _this2.updatePickOption(option, layer);\n        layer.models.forEach(function (model) {\n          return model.addUniforms(option);\n        });\n      });\n      layer.hooks.beforeSelect.tap('PixelPickingPlugin', function (pickedColor) {\n        var _layer$getLayerConfig6 = layer.getLayerConfig(),\n          selectColor = _layer$getLayerConfig6.selectColor,\n          _layer$getLayerConfig7 = _layer$getLayerConfig6.selectMix,\n          selectMix = _layer$getLayerConfig7 === void 0 ? 0 : _layer$getLayerConfig7;\n        var highlightColorInArray = typeof selectColor === 'string' ? rgb2arr(selectColor) : selectColor || [1, 0, 0, 1];\n        layer.updateLayerConfig({\n          pickedFeatureID: decodePickingColor(new Uint8Array(pickedColor))\n        });\n        var option = {\n          u_PickingStage: PickingStage.HIGHLIGHT,\n          u_PickingColor: pickedColor,\n          u_HighlightColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_activeMix: selectMix,\n          u_CurrentSelectedId: pickedColor,\n          u_SelectColor: highlightColorInArray.map(function (c) {\n            return c * 255;\n          }),\n          u_EnableSelect: 1\n        };\n        _this2.updatePickOption(option, layer);\n        layer.models.forEach(function (model) {\n          return model.addUniforms(option);\n        });\n      });\n    }\n  }]);\n  return PixelPickingPlugin;\n}()) || _class);\nexport { PixelPickingPlugin as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}