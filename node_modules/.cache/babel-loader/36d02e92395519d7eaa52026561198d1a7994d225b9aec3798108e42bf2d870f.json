{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport path2Absolute from './path-2-absolute';\nimport { segmentToCubic } from './process/segment-2-cubic';\nexport default function pathToCurve(path, needZCommandIndexes) {\n  if (needZCommandIndexes === void 0) {\n    needZCommandIndexes = false;\n  }\n  var pathArray = path2Absolute(path);\n  var params = {\n    x1: 0,\n    y1: 0,\n    x2: 0,\n    y2: 0,\n    x: 0,\n    y: 0,\n    qx: null,\n    qy: null\n  };\n  var allPathCommands = [];\n  var pathCommand = '';\n  var ii = pathArray.length;\n  var segment;\n  var seglen;\n  var zCommandIndexes = [];\n  for (var i = 0; i < ii; i += 1) {\n    if (pathArray[i]) pathCommand = pathArray[i][0];\n    allPathCommands[i] = pathCommand;\n    pathArray[i] = segmentToCubic(pathArray[i], params);\n    fixArc(pathArray, allPathCommands, i);\n    ii = pathArray.length; // solves curveArrays ending in Z\n    // keep Z command account for lineJoin\n    // @see https://github.com/antvis/util/issues/68\n    if (pathCommand === 'Z') {\n      zCommandIndexes.push(i);\n    }\n    segment = pathArray[i];\n    seglen = segment.length;\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n  if (needZCommandIndexes) {\n    return [pathArray, zCommandIndexes];\n  } else {\n    return pathArray;\n  }\n}\nfunction fixArc(pathArray, allPathCommands, i) {\n  if (pathArray[i].length > 7) {\n    pathArray[i].shift();\n    var pi = pathArray[i];\n    // const ni = i + 1;\n    var ni = i;\n    while (pi.length) {\n      // if created multiple C:s, their original seg is saved\n      allPathCommands[i] = 'A';\n      // @ts-ignore\n      pathArray.splice(ni += 1, 0, ['C'].concat(pi.splice(0, 6)));\n    }\n    pathArray.splice(i, 1);\n  }\n}","map":{"version":3,"names":["path2Absolute","segmentToCubic","pathToCurve","path","needZCommandIndexes","pathArray","params","x1","y1","x2","y2","x","y","qx","qy","allPathCommands","pathCommand","ii","length","segment","seglen","zCommandIndexes","i","fixArc","push","shift","pi","ni","splice","concat"],"sources":["../src/path-2-curve.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}