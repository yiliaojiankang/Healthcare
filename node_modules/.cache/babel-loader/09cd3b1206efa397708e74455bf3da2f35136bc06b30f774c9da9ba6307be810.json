{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport { MAX_TAP_INTERVAL } from \"./single_tap_recognizer\";\nimport TapRecognizer from \"./tap_recognizer\";\nvar TapDragZoomHandler = /*#__PURE__*/function () {\n  function TapDragZoomHandler() {\n    _classCallCheck(this, TapDragZoomHandler);\n    this.tap = new TapRecognizer({\n      numTouches: 1,\n      numTaps: 1\n    });\n    this.reset();\n  }\n  _createClass(TapDragZoomHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      // @ts-ignore\n      delete this.swipePoint;\n      // @ts-ignore\n      delete this.swipeTouch;\n      // @ts-ignore\n      delete this.tapTime;\n      this.tap.reset();\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      if (this.swipePoint) {\n        return;\n      }\n      if (this.tapTime && e.timeStamp - this.tapTime > MAX_TAP_INTERVAL) {\n        this.reset();\n      }\n      if (!this.tapTime) {\n        this.tap.touchstart(e, points, mapTouches);\n      } else if (mapTouches.length > 0) {\n        this.swipePoint = points[0];\n        this.swipeTouch = mapTouches[0].identifier;\n      }\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      if (!this.tapTime) {\n        this.tap.touchmove(e, points, mapTouches);\n      } else if (this.swipePoint) {\n        if (mapTouches[0].identifier !== this.swipeTouch) {\n          return;\n        }\n        var newSwipePoint = points[0];\n        var dist = newSwipePoint.y - this.swipePoint.y;\n        this.swipePoint = newSwipePoint;\n        e.preventDefault();\n        this.active = true;\n        return {\n          zoomDelta: dist / 128\n        };\n      }\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      if (!this.tapTime) {\n        var point = this.tap.touchend(e, points, mapTouches);\n        if (point) {\n          this.tapTime = e.timeStamp;\n        }\n      } else if (this.swipePoint) {\n        if (mapTouches.length === 0) {\n          this.reset();\n        }\n      }\n    }\n  }, {\n    key: \"touchcancel\",\n    value: function touchcancel() {\n      this.reset();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.enabled = true;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.enabled = false;\n      this.reset();\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.enabled;\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.active;\n    }\n  }]);\n  return TapDragZoomHandler;\n}();\nexport { TapDragZoomHandler as default };","map":{"version":3,"names":["_classCallCheck","_createClass","MAX_TAP_INTERVAL","TapRecognizer","TapDragZoomHandler","tap","numTouches","numTaps","reset","key","value","active","swipePoint","swipeTouch","tapTime","touchstart","e","points","mapTouches","timeStamp","length","identifier","touchmove","newSwipePoint","dist","y","preventDefault","zoomDelta","touchend","point","touchcancel","enable","enabled","disable","isEnabled","isActive","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/handler/tap/tap_drag_zoom.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n// @ts-ignore\n\nimport { MAX_TAP_INTERVAL } from \"./single_tap_recognizer\";\nimport TapRecognizer from \"./tap_recognizer\";\nvar TapDragZoomHandler = /*#__PURE__*/function () {\n  function TapDragZoomHandler() {\n    _classCallCheck(this, TapDragZoomHandler);\n    this.tap = new TapRecognizer({\n      numTouches: 1,\n      numTaps: 1\n    });\n    this.reset();\n  }\n  _createClass(TapDragZoomHandler, [{\n    key: \"reset\",\n    value: function reset() {\n      this.active = false;\n      // @ts-ignore\n      delete this.swipePoint;\n      // @ts-ignore\n      delete this.swipeTouch;\n      // @ts-ignore\n      delete this.tapTime;\n      this.tap.reset();\n    }\n  }, {\n    key: \"touchstart\",\n    value: function touchstart(e, points, mapTouches) {\n      if (this.swipePoint) {\n        return;\n      }\n      if (this.tapTime && e.timeStamp - this.tapTime > MAX_TAP_INTERVAL) {\n        this.reset();\n      }\n      if (!this.tapTime) {\n        this.tap.touchstart(e, points, mapTouches);\n      } else if (mapTouches.length > 0) {\n        this.swipePoint = points[0];\n        this.swipeTouch = mapTouches[0].identifier;\n      }\n    }\n  }, {\n    key: \"touchmove\",\n    value: function touchmove(e, points, mapTouches) {\n      if (!this.tapTime) {\n        this.tap.touchmove(e, points, mapTouches);\n      } else if (this.swipePoint) {\n        if (mapTouches[0].identifier !== this.swipeTouch) {\n          return;\n        }\n        var newSwipePoint = points[0];\n        var dist = newSwipePoint.y - this.swipePoint.y;\n        this.swipePoint = newSwipePoint;\n        e.preventDefault();\n        this.active = true;\n        return {\n          zoomDelta: dist / 128\n        };\n      }\n    }\n  }, {\n    key: \"touchend\",\n    value: function touchend(e, points, mapTouches) {\n      if (!this.tapTime) {\n        var point = this.tap.touchend(e, points, mapTouches);\n        if (point) {\n          this.tapTime = e.timeStamp;\n        }\n      } else if (this.swipePoint) {\n        if (mapTouches.length === 0) {\n          this.reset();\n        }\n      }\n    }\n  }, {\n    key: \"touchcancel\",\n    value: function touchcancel() {\n      this.reset();\n    }\n  }, {\n    key: \"enable\",\n    value: function enable() {\n      this.enabled = true;\n    }\n  }, {\n    key: \"disable\",\n    value: function disable() {\n      this.enabled = false;\n      this.reset();\n    }\n  }, {\n    key: \"isEnabled\",\n    value: function isEnabled() {\n      return this.enabled;\n    }\n  }, {\n    key: \"isActive\",\n    value: function isActive() {\n      return this.active;\n    }\n  }]);\n  return TapDragZoomHandler;\n}();\nexport { TapDragZoomHandler as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}