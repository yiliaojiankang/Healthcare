{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { lodashUtil } from '@antv/l7-utils';\nvar isNil = lodashUtil.isNil;\nvar StyleAttribute = /*#__PURE__*/function () {\n  function StyleAttribute(options) {\n    var _this = this;\n    _classCallCheck(this, StyleAttribute);\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"scale\", void 0);\n    _defineProperty(this, \"descriptor\", void 0);\n    _defineProperty(this, \"featureBufferLayout\", []);\n    _defineProperty(this, \"needRescale\", false);\n    _defineProperty(this, \"needRemapping\", false);\n    _defineProperty(this, \"needRegenerateVertices\", false);\n    _defineProperty(this, \"featureRange\", {\n      startIndex: 0,\n      endIndex: Infinity\n    });\n    _defineProperty(this, \"vertexAttribute\", void 0);\n    _defineProperty(this, \"defaultCallback\", function (params) {\n      // 没有 params 的情况，是指没有指定 fields，直接返回配置的 values 常量\n      if (params.length === 0) {\n        var _this$scale;\n        return ((_this$scale = _this.scale) === null || _this$scale === void 0 ? void 0 : _this$scale.defaultValues) || [];\n      }\n      return params.map(function (param, idx) {\n        var _this$scale2;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        var scaleFunc = (_this$scale2 = _this.scale) === null || _this$scale2 === void 0 ? void 0 : _this$scale2.scalers[idx].func;\n        // @ts-ignore // TODO 支持双变量映射\n        var value = scaleFunc(param);\n        return value;\n      });\n    });\n    this.setProps(options);\n  }\n  _createClass(StyleAttribute, [{\n    key: \"setProps\",\n    value: function setProps(options) {\n      Object.assign(this, options);\n    }\n  }, {\n    key: \"mapping\",\n    value: function mapping(params) {\n      var _this$scale3;\n      /**\n       * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n       */\n      if ((_this$scale3 = this.scale) !== null && _this$scale3 !== void 0 && _this$scale3.callback) {\n        var _this$scale4;\n        // 使用用户返回的值处理\n        var ret = (_this$scale4 = this.scale) === null || _this$scale4 === void 0 ? void 0 : _this$scale4.callback.apply(_this$scale4, _toConsumableArray(params));\n        if (!isNil(ret)) {\n          return [ret];\n        }\n      }\n\n      // 没有 callback 或者用户 callback 返回值为空，则使用默认的逻辑处理\n      return this.defaultCallback(params);\n    }\n  }, {\n    key: \"resetDescriptor\",\n    value: function resetDescriptor() {\n      if (this.descriptor) {\n        this.descriptor.buffer.data = [];\n      }\n    }\n  }]);\n  return StyleAttribute;\n}();\nexport { StyleAttribute as default };","map":{"version":3,"names":["_toConsumableArray","_classCallCheck","_createClass","_defineProperty","lodashUtil","isNil","StyleAttribute","options","_this","startIndex","endIndex","Infinity","params","length","_this$scale","scale","defaultValues","map","param","idx","_this$scale2","scaleFunc","scalers","func","value","setProps","key","Object","assign","mapping","_this$scale3","callback","_this$scale4","ret","apply","defaultCallback","resetDescriptor","descriptor","buffer","data","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-core/es/services/layer/StyleAttribute.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { lodashUtil } from '@antv/l7-utils';\nvar isNil = lodashUtil.isNil;\nvar StyleAttribute = /*#__PURE__*/function () {\n  function StyleAttribute(options) {\n    var _this = this;\n    _classCallCheck(this, StyleAttribute);\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"scale\", void 0);\n    _defineProperty(this, \"descriptor\", void 0);\n    _defineProperty(this, \"featureBufferLayout\", []);\n    _defineProperty(this, \"needRescale\", false);\n    _defineProperty(this, \"needRemapping\", false);\n    _defineProperty(this, \"needRegenerateVertices\", false);\n    _defineProperty(this, \"featureRange\", {\n      startIndex: 0,\n      endIndex: Infinity\n    });\n    _defineProperty(this, \"vertexAttribute\", void 0);\n    _defineProperty(this, \"defaultCallback\", function (params) {\n      // 没有 params 的情况，是指没有指定 fields，直接返回配置的 values 常量\n      if (params.length === 0) {\n        var _this$scale;\n        return ((_this$scale = _this.scale) === null || _this$scale === void 0 ? void 0 : _this$scale.defaultValues) || [];\n      }\n      return params.map(function (param, idx) {\n        var _this$scale2;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        var scaleFunc = (_this$scale2 = _this.scale) === null || _this$scale2 === void 0 ? void 0 : _this$scale2.scalers[idx].func;\n        // @ts-ignore // TODO 支持双变量映射\n        var value = scaleFunc(param);\n        return value;\n      });\n    });\n    this.setProps(options);\n  }\n  _createClass(StyleAttribute, [{\n    key: \"setProps\",\n    value: function setProps(options) {\n      Object.assign(this, options);\n    }\n  }, {\n    key: \"mapping\",\n    value: function mapping(params) {\n      var _this$scale3;\n      /**\n       * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n       */\n      if ((_this$scale3 = this.scale) !== null && _this$scale3 !== void 0 && _this$scale3.callback) {\n        var _this$scale4;\n        // 使用用户返回的值处理\n        var ret = (_this$scale4 = this.scale) === null || _this$scale4 === void 0 ? void 0 : _this$scale4.callback.apply(_this$scale4, _toConsumableArray(params));\n        if (!isNil(ret)) {\n          return [ret];\n        }\n      }\n\n      // 没有 callback 或者用户 callback 返回值为空，则使用默认的逻辑处理\n      return this.defaultCallback(params);\n    }\n  }, {\n    key: \"resetDescriptor\",\n    value: function resetDescriptor() {\n      if (this.descriptor) {\n        this.descriptor.buffer.data = [];\n      }\n    }\n  }]);\n  return StyleAttribute;\n}();\nexport { StyleAttribute as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}