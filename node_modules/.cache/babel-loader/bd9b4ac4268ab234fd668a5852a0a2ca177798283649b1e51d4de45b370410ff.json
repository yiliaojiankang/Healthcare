{"ast":null,"code":"var DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'dblclick'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      /**\n       * 发生收缩/扩展变化时的回调\n       */\n      trigger: DEFAULT_TRIGGER,\n      onChange: function onChange() {}\n    };\n  },\n  getEvents: function getEvents() {\n    var _a;\n    var trigger;\n    // 检测输入是否合法\n    if (ALLOW_EVENTS.includes(this.trigger)) {\n      trigger = this.trigger;\n    } else {\n      trigger = DEFAULT_TRIGGER;\n      // eslint-disable-next-line no-console\n      console.warn(\"Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'\");\n    }\n    return _a = {}, _a[\"node:\".concat(trigger)] = 'onNodeClick',\n    // 支持移动端事件\n    _a.touchstart = 'onNodeClick', _a;\n  },\n  onNodeClick: function onNodeClick(e) {\n    var _this = this;\n    // avoid click being triggered on dblclick\n    if (this.trigger === 'click') {\n      if (this.timer) {\n        clearTimeout(this.timer);\n        this.timer = 0;\n        return;\n      }\n      this.timer = setTimeout(function () {\n        _this.toggle(e);\n        clearTimeout(_this.timer);\n        _this.timer = 0;\n      }, 200);\n    } else {\n      this.toggle(e);\n    }\n  },\n  toggle: function toggle(e) {\n    var item = e.item;\n    if (!item) return;\n    // 如果节点进行过更新，model 会进行 merge，直接改 model 就不能改布局，所以需要去改源数据\n    var sourceData = this.graph.findDataById(item.get('id'));\n    if (!sourceData) {\n      return;\n    }\n    var children = sourceData.children;\n    // 叶子节点的收缩和展开没有意义\n    if (!children || children.length === 0) {\n      return;\n    }\n    var collapsed = !sourceData.collapsed;\n    if (!this.shouldBegin(e, collapsed, this)) {\n      return;\n    }\n    sourceData.collapsed = collapsed;\n    item.getModel().collapsed = collapsed;\n    this.graph.emit('itemcollapsed', {\n      item: e.item,\n      collapsed: collapsed\n    });\n    if (!this.shouldUpdate(e, collapsed, this)) {\n      return;\n    }\n    this.onChange(item, collapsed, this);\n    this.graph.layout();\n  }\n};","map":{"version":3,"names":["DEFAULT_TRIGGER","ALLOW_EVENTS","getDefaultCfg","trigger","onChange","getEvents","_a","includes","console","warn","concat","touchstart","onNodeClick","e","_this","timer","clearTimeout","setTimeout","toggle","item","sourceData","graph","findDataById","get","children","length","collapsed","shouldBegin","getModel","emit","shouldUpdate","layout"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-pc/es/behavior/collapse-expand.js"],"sourcesContent":["var DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'dblclick'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      /**\n       * 发生收缩/扩展变化时的回调\n       */\n      trigger: DEFAULT_TRIGGER,\n      onChange: function onChange() {}\n    };\n  },\n  getEvents: function getEvents() {\n    var _a;\n    var trigger;\n    // 检测输入是否合法\n    if (ALLOW_EVENTS.includes(this.trigger)) {\n      trigger = this.trigger;\n    } else {\n      trigger = DEFAULT_TRIGGER;\n      // eslint-disable-next-line no-console\n      console.warn(\"Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'\");\n    }\n    return _a = {}, _a[\"node:\".concat(trigger)] = 'onNodeClick',\n    // 支持移动端事件\n    _a.touchstart = 'onNodeClick', _a;\n  },\n  onNodeClick: function onNodeClick(e) {\n    var _this = this;\n    // avoid click being triggered on dblclick\n    if (this.trigger === 'click') {\n      if (this.timer) {\n        clearTimeout(this.timer);\n        this.timer = 0;\n        return;\n      }\n      this.timer = setTimeout(function () {\n        _this.toggle(e);\n        clearTimeout(_this.timer);\n        _this.timer = 0;\n      }, 200);\n    } else {\n      this.toggle(e);\n    }\n  },\n  toggle: function toggle(e) {\n    var item = e.item;\n    if (!item) return;\n    // 如果节点进行过更新，model 会进行 merge，直接改 model 就不能改布局，所以需要去改源数据\n    var sourceData = this.graph.findDataById(item.get('id'));\n    if (!sourceData) {\n      return;\n    }\n    var children = sourceData.children;\n    // 叶子节点的收缩和展开没有意义\n    if (!children || children.length === 0) {\n      return;\n    }\n    var collapsed = !sourceData.collapsed;\n    if (!this.shouldBegin(e, collapsed, this)) {\n      return;\n    }\n    sourceData.collapsed = collapsed;\n    item.getModel().collapsed = collapsed;\n    this.graph.emit('itemcollapsed', {\n      item: e.item,\n      collapsed: collapsed\n    });\n    if (!this.shouldUpdate(e, collapsed, this)) {\n      return;\n    }\n    this.onChange(item, collapsed, this);\n    this.graph.layout();\n  }\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}