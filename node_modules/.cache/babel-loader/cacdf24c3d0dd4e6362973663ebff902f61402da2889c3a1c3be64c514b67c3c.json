{"ast":null,"code":"export default function d3Linear(cfg) {\n  var min = cfg.min,\n    max = cfg.max,\n    nice = cfg.nice,\n    tickCount = cfg.tickCount;\n  var linear = new D3Linear();\n  linear.domain([min, max]);\n  if (nice) {\n    linear.nice(tickCount);\n  }\n  return linear.ticks(tickCount);\n}\nvar DEFAULT_COUNT = 5;\nvar e10 = Math.sqrt(50);\nvar e5 = Math.sqrt(10);\nvar e2 = Math.sqrt(2);\n// https://github.com/d3/d3-scale\nvar D3Linear = /** @class */function () {\n  function D3Linear() {\n    this._domain = [0, 1];\n  }\n  D3Linear.prototype.domain = function (domain) {\n    if (domain) {\n      this._domain = Array.from(domain, Number);\n      return this;\n    }\n    return this._domain.slice();\n  };\n  D3Linear.prototype.nice = function (count) {\n    var _a, _b;\n    if (count === void 0) {\n      count = DEFAULT_COUNT;\n    }\n    var d = this._domain.slice();\n    var i0 = 0;\n    var i1 = this._domain.length - 1;\n    var start = this._domain[i0];\n    var stop = this._domain[i1];\n    var step;\n    if (stop < start) {\n      _a = [stop, start], start = _a[0], stop = _a[1];\n      _b = [i1, i0], i0 = _b[0], i1 = _b[1];\n    }\n    step = tickIncrement(start, stop, count);\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      this.domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      this.domain(d);\n    }\n    return this;\n  };\n  D3Linear.prototype.ticks = function (count) {\n    if (count === void 0) {\n      count = DEFAULT_COUNT;\n    }\n    return d3ArrayTicks(this._domain[0], this._domain[this._domain.length - 1], count || DEFAULT_COUNT);\n  };\n  return D3Linear;\n}();\nexport { D3Linear };\nfunction d3ArrayTicks(start, stop, count) {\n  var reverse;\n  var i = -1;\n  var n;\n  var ticks;\n  var step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) {\n    return [start];\n  }\n  // tslint:disable-next-line\n  if (reverse = stop < start) {\n    n = start, start = stop, stop = n;\n  }\n  // tslint:disable-next-line\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) {\n    return [];\n  }\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n  if (reverse) {\n    ticks.reverse();\n  }\n  return ticks;\n}\nfunction tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count);\n  var power = Math.floor(Math.log(step) / Math.LN10);\n  var error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}","map":{"version":3,"names":["d3Linear","cfg","min","max","nice","tickCount","linear","D3Linear","domain","ticks","DEFAULT_COUNT","e10","Math","sqrt","e5","e2","_domain","prototype","Array","from","Number","slice","count","d","i0","i1","length","start","stop","step","_a","_b","tickIncrement","floor","ceil","d3ArrayTicks","reverse","i","n","isFinite","power","log","LN10","error","pow"],"sources":["../../src/util/d3-linear.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}