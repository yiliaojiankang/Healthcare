{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\nvar _excluded = [\"passes\"],\n  _excluded2 = [\"moduleName\", \"vertexShader\", \"fragmentShader\", \"inject\", \"triangulation\", \"styleOption\", \"pickingEnabled\"];\nvar _dec, _class, _descriptor;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n// @ts-ignore\nimport { AsyncSeriesBailHook, AsyncWaterfallHook, SyncBailHook, SyncHook } from '@antv/async-hook';\nimport { BlendType, IDebugLog, ILayerStage, TYPES, lazyInject } from '@antv/l7-core';\nimport Source from '@antv/l7-source';\nimport { encodePickingColor, lodashUtil } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport { BlendTypes } from \"../utils/blend\";\nimport { createMultiPassRenderer, normalizePasses } from \"../utils/multiPassRender\";\nimport LayerPickService from \"./LayerPickService\";\nimport TextureService from \"./TextureService\";\nvar isEqual = lodashUtil.isEqual,\n  isFunction = lodashUtil.isFunction,\n  isNumber = lodashUtil.isNumber,\n  isObject = lodashUtil.isObject,\n  isPlainObject = lodashUtil.isPlainObject,\n  isUndefined = lodashUtil.isUndefined;\n/**\n * 分配 layer id\n */\nvar layerIdCounter = 0;\nvar BaseLayer = (_dec = lazyInject(TYPES.IGlobalConfigService), (_class = /*#__PURE__*/function (_ref) {\n  _inherits(BaseLayer, _ref);\n  var _super = _createSuper(BaseLayer);\n  function BaseLayer() {\n    var _this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, BaseLayer);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"id\", \"\".concat(layerIdCounter++));\n    _defineProperty(_assertThisInitialized(_this), \"name\", \"\".concat(layerIdCounter));\n    _defineProperty(_assertThisInitialized(_this), \"visible\", true);\n    _defineProperty(_assertThisInitialized(_this), \"zIndex\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"inited\", false);\n    _defineProperty(_assertThisInitialized(_this), \"layerModelNeedUpdate\", false);\n    _defineProperty(_assertThisInitialized(_this), \"pickedFeatureID\", null);\n    _defineProperty(_assertThisInitialized(_this), \"selectedFeatureID\", null);\n    _defineProperty(_assertThisInitialized(_this), \"styleNeedUpdate\", false);\n    _defineProperty(_assertThisInitialized(_this), \"forceRender\", false);\n    _defineProperty(_assertThisInitialized(_this), \"clusterZoom\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultSourceConfig\", {\n      data: [],\n      options: {\n        parser: {\n          type: 'json'\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"dataState\", {\n      dataSourceNeedUpdate: false,\n      dataMappingNeedUpdate: false,\n      filterNeedUpdate: false,\n      featureScaleNeedUpdate: false,\n      StyleAttrNeedUpdate: false\n    });\n    // 生命周期钩子\n    _defineProperty(_assertThisInitialized(_this), \"hooks\", {\n      init: new AsyncSeriesBailHook(),\n      afterInit: new SyncBailHook(),\n      beforeRender: new SyncBailHook(),\n      beforeRenderData: new AsyncWaterfallHook(),\n      afterRender: new SyncHook(),\n      beforePickingEncode: new SyncHook(),\n      afterPickingEncode: new SyncHook(),\n      beforeHighlight: new SyncHook(['pickedColor']),\n      afterHighlight: new SyncHook(),\n      beforeSelect: new SyncHook(['pickedColor']),\n      afterSelect: new SyncHook(),\n      beforeDestroy: new SyncHook(),\n      afterDestroy: new SyncHook()\n    });\n    // 待渲染 model 列表\n    _defineProperty(_assertThisInitialized(_this), \"models\", []);\n    _defineProperty(_assertThisInitialized(_this), \"startInit\", false);\n    // 用于保存子图层对象\n    _defineProperty(_assertThisInitialized(_this), \"layerChildren\", []);\n    _defineProperty(_assertThisInitialized(_this), \"masks\", []);\n    _initializerDefineProperty(_assertThisInitialized(_this), \"configService\", _descriptor, _assertThisInitialized(_this));\n    _defineProperty(_assertThisInitialized(_this), \"animateOptions\", {\n      enable: false\n    });\n    _defineProperty(_assertThisInitialized(_this), \"currentPickId\", null);\n    _defineProperty(_assertThisInitialized(_this), \"encodeStyleAttribute\", {});\n    // Shader 的数据映射\n    _defineProperty(_assertThisInitialized(_this), \"enableShaderEncodeStyles\", []);\n    // 数据层数据映射\n    _defineProperty(_assertThisInitialized(_this), \"enableDataEncodeStyles\", []);\n    /**\n     * 待更新样式属性，在初始化阶段完成注册\n     */\n    _defineProperty(_assertThisInitialized(_this), \"pendingStyleAttributes\", []);\n    _defineProperty(_assertThisInitialized(_this), \"scaleOptions\", {});\n    _defineProperty(_assertThisInitialized(_this), \"animateStatus\", false);\n    _defineProperty(_assertThisInitialized(_this), \"isDestroyed\", false);\n    // private pickingPassRender: IPass<'pixelPicking'>;\n    _defineProperty(_assertThisInitialized(_this), \"uniformBuffers\", []);\n    _defineProperty(_assertThisInitialized(_this), \"encodeDataLength\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"sourceEvent\", function () {\n      _this.dataState.dataSourceNeedUpdate = true;\n      var layerConfig = _this.getLayerConfig();\n      if (layerConfig && layerConfig.autoFit) {\n        _this.fitBounds(layerConfig.fitBoundsOptions);\n      }\n      var autoRender = _this.layerSource.getSourceCfg().autoRender;\n      if (autoRender) {\n        setTimeout(function () {\n          _this.reRender();\n        }, 10);\n      }\n    });\n    _this.name = config.name || _this.id;\n    _this.zIndex = config.zIndex || 0;\n    _this.rawConfig = config;\n    return _this;\n  }\n  _createClass(BaseLayer, [{\n    key: \"addMask\",\n    value: function addMask(layer) {\n      this.masks.push(layer);\n      this.updateLayerConfig({\n        maskLayers: this.masks\n      });\n      this.enableMask();\n    }\n  }, {\n    key: \"removeMask\",\n    value: function removeMask(layer) {\n      var layerIndex = this.masks.indexOf(layer);\n      if (layerIndex > -1) {\n        this.masks.splice(layerIndex, 1);\n      }\n      this.updateLayerConfig({\n        maskLayers: this.masks\n      });\n    }\n  }, {\n    key: \"disableMask\",\n    value: function disableMask() {\n      this.updateLayerConfig({\n        enableMask: false\n      });\n    }\n  }, {\n    key: \"enableMask\",\n    value: function enableMask() {\n      this.updateLayerConfig({\n        enableMask: true\n      });\n    }\n\n    /**\n     * 将废弃\n     * @deprecated\n     */\n  }, {\n    key: \"addMaskLayer\",\n    value: function addMaskLayer(maskLayer) {\n      this.masks.push(maskLayer);\n    }\n\n    /**\n     * 将废弃\n     * @deprecated\n     */\n  }, {\n    key: \"removeMaskLayer\",\n    value: function removeMaskLayer(maskLayer) {\n      var layerIndex = this.masks.indexOf(maskLayer);\n      if (layerIndex > -1) {\n        this.masks.splice(layerIndex, 1);\n      }\n      maskLayer.destroy();\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      return this.styleAttributeService.getLayerStyleAttribute(name);\n    }\n  }, {\n    key: \"getLayerConfig\",\n    value: function getLayerConfig() {\n      return this.configService.getLayerConfig(this.id);\n    }\n  }, {\n    key: \"updateLayerConfig\",\n    value: function updateLayerConfig(configToUpdate) {\n      var _this2 = this;\n      // 同步 rawConfig\n      Object.keys(configToUpdate).map(function (key) {\n        if (key in _this2.rawConfig) {\n          // @ts-ignore\n          _this2.rawConfig[key] = configToUpdate[key];\n        }\n      });\n      if (!this.startInit) {\n        this.needUpdateConfig = _objectSpread(_objectSpread({}, this.needUpdateConfig), configToUpdate);\n      } else {\n        var sceneId = this.container.get(TYPES.SceneID);\n        // @ts-ignore\n        // styleDataMapping(configToUpdate, this); // 处理 style 中进行数据映射的属性字段\n        this.configService.setLayerConfig(sceneId, this.id, _objectSpread(_objectSpread(_objectSpread({}, this.configService.getLayerConfig(this.id)), this.needUpdateConfig), configToUpdate));\n        this.needUpdateConfig = {};\n      }\n    }\n\n    /**\n     * 注入图层容器，父容器为场景容器\n     * RootContainer 1\n     *  -> SceneContainer 1.*\n     *   -> LayerContainer 1.*\n     */\n  }, {\n    key: \"setContainer\",\n    value: function setContainer(container, sceneContainer) {\n      this.container = container;\n      this.sceneContainer = sceneContainer;\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.container;\n    }\n  }, {\n    key: \"addPlugin\",\n    value: function addPlugin(plugin) {\n      this.plugins.push(plugin);\n      return this;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n        var sceneId, _this$getLayerConfig, enableMultiPassRenderer, passes, _iterator, _step, plugin;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              // 设置配置项\n              sceneId = this.container.get(TYPES.SceneID);\n              this.startInit = true;\n              // 初始化图层配置项\n              // const { enableMultiPassRenderer = false } = this.rawConfig;\n              // this.configService.setLayerConfig(sceneId, this.id, {\n              //   enableMultiPassRenderer,\n              // });\n              this.configService.setLayerConfig(sceneId, this.id, this.rawConfig);\n              this.layerType = this.rawConfig.layerType;\n\n              // 全局容器服务\n\n              // 场景容器服务\n              this.iconService = this.container.get(TYPES.IIconService);\n              this.fontService = this.container.get(TYPES.IFontService);\n              this.rendererService = this.container.get(TYPES.IRendererService);\n              this.layerService = this.container.get(TYPES.ILayerService);\n              this.debugService = this.container.get(TYPES.IDebugService);\n              this.interactionService = this.container.get(TYPES.IInteractionService);\n              this.pickingService = this.container.get(TYPES.IPickingService);\n              this.mapService = this.container.get(TYPES.IMapService);\n              _this$getLayerConfig = this.getLayerConfig(), enableMultiPassRenderer = _this$getLayerConfig.enableMultiPassRenderer, passes = _this$getLayerConfig.passes;\n              if (enableMultiPassRenderer && passes !== null && passes !== void 0 && passes.length && passes.length > 0) {\n                // Tip: 兼容 multiPassRender 在 amap1 时存在的图层不同步问题 zoom\n                this.mapService.on('mapAfterFrameChange', function () {\n                  _this3.renderLayers();\n                });\n              }\n              this.cameraService = this.container.get(TYPES.ICameraService);\n              this.coordinateService = this.container.get(TYPES.ICoordinateSystemService);\n              this.shaderModuleService = this.container.get(TYPES.IShaderModuleService);\n              this.postProcessingPassFactory = this.container.get(TYPES.IFactoryPostProcessingPass);\n              this.normalPassFactory = this.container.get(TYPES.IFactoryNormalPass);\n\n              // 图层容器服务\n              this.styleAttributeService = this.container.get(TYPES.IStyleAttributeService);\n              if (enableMultiPassRenderer) {\n                // 按需初始化 瓦片频繁报错\n                this.multiPassRenderer = this.container.get(TYPES.IMultiPassRenderer);\n                this.multiPassRenderer.setLayer(this);\n              }\n              // 完成样式服务注册完成前添加的属性\n              this.pendingStyleAttributes.forEach(function (_ref2) {\n                var attributeName = _ref2.attributeName,\n                  attributeField = _ref2.attributeField,\n                  attributeValues = _ref2.attributeValues,\n                  updateOptions = _ref2.updateOptions;\n                _this3.styleAttributeService.updateStyleAttribute(attributeName, {\n                  // @ts-ignore\n                  scale: _objectSpread({\n                    field: attributeField\n                  }, _this3.splitValuesAndCallbackInAttribute(\n                  // @ts-ignore\n                  attributeValues,\n                  // @ts-ignore\n                  attributeField ? undefined : _this3.getLayerConfig()[attributeName] // 设置了字段不需要设置默认值\n                  ))\n                },\n                // @ts-ignore\n                updateOptions);\n              });\n              this.pendingStyleAttributes = [];\n\n              // 获取插件集\n              this.plugins = this.container.getAll(TYPES.ILayerPlugin);\n              // 完成插件注册，传入场景和图层容器内的服务\n              _iterator = _createForOfIteratorHelper(this.plugins);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  plugin = _step.value;\n                  plugin.apply(this, {\n                    rendererService: this.rendererService,\n                    mapService: this.mapService,\n                    styleAttributeService: this.styleAttributeService,\n                    normalPassFactory: this.normalPassFactory,\n                    postProcessingPassFactory: this.postProcessingPassFactory\n                  });\n                }\n\n                // 初始化其他服务\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              this.layerPickService = new LayerPickService(this);\n\n              // 颜色纹理服务\n              this.textureService = new TextureService(this);\n              this.log(IDebugLog.LayerInitStart);\n              // 触发 init 生命周期插件\n              _context.next = 31;\n              return this.hooks.init.promise();\n            case 31:\n              this.log(IDebugLog.LayerInitEnd);\n              this.inited = true;\n              // add mask layer\n              // 触发初始化完成事件;\n              this.emit('inited', {\n                target: this,\n                type: 'inited'\n              });\n              this.emit('add', {\n                target: this,\n                type: 'add'\n              });\n              this.hooks.afterInit.call();\n            case 36:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"log\",\n    value: function log(logType) {\n      var _this$debugService;\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'init';\n      // @ts-ignore 瓦片、瓦片图层目前不参与日志\n      if (this.tileLayer || this.isTileLayer) {\n        return;\n      }\n      var key = \"\".concat(this.id, \".\").concat(step, \".\").concat(logType);\n      var values = {\n        id: this.id,\n        type: this.type\n      };\n      (_this$debugService = this.debugService) === null || _this$debugService === void 0 || _this$debugService.log(key, values);\n    }\n  }, {\n    key: \"updateModelData\",\n    value: function updateModelData(data) {\n      if (data.attributes && data.elements) {\n        this.models.map(function (m) {\n          m.updateAttributesAndElements(data.attributes, data.elements);\n        });\n      } else {\n        console.warn('data error');\n      }\n    }\n  }, {\n    key: \"setLayerPickService\",\n    value: function setLayerPickService(layerPickService) {\n      this.layerPickService = layerPickService;\n    }\n    /**\n     * Model初始化前需要更新Model样式\n     */\n  }, {\n    key: \"prepareBuildModel\",\n    value: function prepareBuildModel() {\n      if (Object.keys(this.needUpdateConfig || {}).length !== 0) {\n        this.updateLayerConfig({});\n      }\n\n      // 启动动画\n      var _this$getLayerConfig2 = this.getLayerConfig(),\n        animateOption = _this$getLayerConfig2.animateOption;\n      if (animateOption !== null && animateOption !== void 0 && animateOption.enable) {\n        this.layerService.startAnimate();\n        this.animateStatus = true;\n      }\n    }\n  }, {\n    key: \"color\",\n    value: function color(field, values, updateOptions) {\n      this.updateStyleAttribute('color', field, values, updateOptions);\n      return this;\n    }\n\n    // 为对应的图层传入纹理的编号名称（point/image 在 shape 方法中传入纹理名称的方法并不通用）\n  }, {\n    key: \"texture\",\n    value: function texture(field, values, updateOptions) {\n      this.updateStyleAttribute('texture', field, values, updateOptions);\n      return this;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(field, values, updateOptions) {\n      this.updateStyleAttribute('rotate', field, values, updateOptions);\n      return this;\n    }\n  }, {\n    key: \"size\",\n    value: function size(field, values, updateOptions) {\n      this.updateStyleAttribute('size', field, values, updateOptions);\n      return this;\n    }\n    // 对mapping后的数据过滤，scale保持不变\n  }, {\n    key: \"filter\",\n    value: function filter(field, values, updateOptions) {\n      var flag = this.updateStyleAttribute('filter', field, values, updateOptions);\n      this.dataState.dataSourceNeedUpdate = flag && this.inited;\n      return this;\n    }\n  }, {\n    key: \"shape\",\n    value: function shape(field, values, updateOptions) {\n      this.shapeOption = {\n        field: field,\n        values: values\n      };\n      var flag = this.updateStyleAttribute('shape', field, values, updateOptions);\n      this.dataState.dataSourceNeedUpdate = flag && this.inited;\n      return this;\n    }\n  }, {\n    key: \"label\",\n    value: function label(field, values, updateOptions) {\n      this.pendingStyleAttributes.push({\n        attributeName: 'label',\n        attributeField: field,\n        attributeValues: values,\n        updateOptions: updateOptions\n      });\n      return this;\n    }\n  }, {\n    key: \"animate\",\n    value: function animate(options) {\n      var rawAnimate = {};\n      if (isObject(options)) {\n        rawAnimate.enable = true;\n        rawAnimate = _objectSpread(_objectSpread({}, rawAnimate), options);\n      } else {\n        rawAnimate.enable = options;\n      }\n      this.updateLayerConfig({\n        animateOption: rawAnimate\n      });\n      return this;\n    }\n  }, {\n    key: \"source\",\n    value: function source(data, options) {\n      if ((data === null || data === void 0 ? void 0 : data.type) === 'source') {\n        // 判断是否为source\n        this.setSource(data);\n        return this;\n      }\n      // 设置source 配置\n      this.sourceOption = {\n        data: data,\n        options: options\n      };\n      this.clusterZoom = 0;\n      return this;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, options) {\n      var _this4 = this;\n      if (this.inited) {\n        this.log(IDebugLog.SourceInitStart, ILayerStage.UPDATE);\n        this.layerSource.setData(data, options);\n        this.log(IDebugLog.SourceInitEnd, ILayerStage.UPDATE);\n      } else {\n        this.on('inited', function () {\n          _this4.log(IDebugLog.SourceInitStart, ILayerStage.UPDATE);\n          var currentSource = _this4.getSource();\n          if (!currentSource) {\n            // 执行 setData 的时候 source 还不存在（还未执行 addLayer）\n            _this4.source(new Source(data, options));\n          } else {\n            _this4.layerSource.setData(data, options);\n          }\n          _this4.layerSource.once('update', function () {\n            _this4.log(IDebugLog.SourceInitEnd, ILayerStage.UPDATE);\n          });\n        });\n      }\n      return this;\n    }\n  }, {\n    key: \"style\",\n    value: function style(options) {\n      var _this5 = this;\n      var passes = options.passes,\n        rest = _objectWithoutProperties(options, _excluded);\n      // passes 特殊处理\n      if (passes) {\n        normalizePasses(passes).forEach(function (pass) {\n          var postProcessingPass = _this5.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(pass[0]);\n          if (postProcessingPass) {\n            postProcessingPass.updateOptions(pass[1]);\n          }\n        });\n      }\n      // 兼容 borderColor borderWidth\n      // @ts-ignore\n      if (rest.borderColor) {\n        // @ts-ignore\n        rest.stroke = rest.borderColor;\n      }\n      // @ts-ignore\n      if (rest.borderWidth) {\n        // @ts-ignore\n        rest.strokeWidth = rest.borderWidth;\n      }\n\n      // 兼容老版本的写法 ['field, 'value']\n      var newOption = rest;\n      Object.keys(rest).forEach(function (key) {\n        // @ts-ignore\n        var values = rest[key];\n        if (Array.isArray(values) && values.length === 2 && !isNumber(values[0]) && !isNumber(values[1])) {\n          newOption[key] = {\n            field: values[0],\n            value: values[1]\n          };\n        }\n      });\n      this.encodeStyle(newOption);\n      this.updateLayerConfig(newOption);\n      return this;\n    }\n\n    // 参与数据映射的字段 encodeing\n  }, {\n    key: \"encodeStyle\",\n    value: function encodeStyle(options) {\n      var _this6 = this;\n      Object.keys(options).forEach(function (key) {\n        if (\n        // 需要数据映射\n        [].concat(_toConsumableArray(_this6.enableShaderEncodeStyles), _toConsumableArray(_this6.enableDataEncodeStyles)).includes(key) && isPlainObject(options[key]) && (options[key].field || options[key].value) && !isEqual(_this6.encodeStyleAttribute[key], options[key]) // 防止计算属性重复计算\n        ) {\n          _this6.encodeStyleAttribute[key] = options[key];\n          _this6.updateStyleAttribute(key, options[key].field, options[key].value);\n          if (_this6.inited) {\n            _this6.dataState.dataMappingNeedUpdate = true;\n          }\n        } else {\n          // 不需要数据映射\n          if (_this6.encodeStyleAttribute[key]) {\n            delete _this6.encodeStyleAttribute[key]; // 删除已经存在的属性\n            _this6.dataState.dataSourceNeedUpdate = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(field, cfg) {\n      var preOption = _objectSpread({}, this.scaleOptions);\n      if (isObject(field)) {\n        this.scaleOptions = _objectSpread(_objectSpread({}, this.scaleOptions), field);\n      } else {\n        this.scaleOptions[field] = cfg;\n      }\n      if (this.styleAttributeService && !isEqual(preOption, this.scaleOptions)) {\n        var scaleOptions = isObject(field) ? field : _defineProperty({}, field, cfg);\n        this.styleAttributeService.updateScaleAttribute(scaleOptions);\n      }\n      return this;\n    }\n\n    /**\n     * 渲染所有的图层\n     */\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      this.rendering = true;\n      this.layerService.reRender();\n      this.rendering = false;\n    }\n  }, {\n    key: \"prerender\",\n    value: function prerender() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (this.tileLayer) {\n        // 瓦片图层执行单独的 render 渲染队列\n        this.tileLayer.render();\n        return this;\n      }\n      this.layerService.beforeRenderData(this);\n      if (this.encodeDataLength <= 0 && !this.forceRender) {\n        return this;\n      }\n      // Tip: this.getEncodedData().length !== 0 这个判断是为了解决在 2.5.x 引入数据纹理后产生的 空数据渲染导致 texture 超出上限问题\n      this.renderModels(options);\n      return this;\n    }\n\n    /**\n     * renderMultiPass 专门用于渲染支持 multipass 的 layer\n     */\n  }, {\n    key: \"renderMultiPass\",\n    value: function () {\n      var _renderMultiPass = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(this.encodeDataLength <= 0 && !this.forceRender)) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              if (!(this.multiPassRenderer && this.multiPassRenderer.getRenderFlag())) {\n                _context2.next = 7;\n                break;\n              }\n              _context2.next = 5;\n              return this.multiPassRenderer.render();\n            case 5:\n              _context2.next = 8;\n              break;\n            case 7:\n              if (this.multiPassRenderer) {\n                // renderPass 触发的渲染\n                this.renderModels();\n              } else {\n                this.renderModels();\n              }\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function renderMultiPass() {\n        return _renderMultiPass.apply(this, arguments);\n      }\n      return renderMultiPass;\n    }()\n  }, {\n    key: \"active\",\n    value: function active(options) {\n      var activeOption = {};\n      activeOption.enableHighlight = isObject(options) ? true : options;\n      if (isObject(options)) {\n        activeOption.enableHighlight = true;\n        if (options.color) {\n          activeOption.highlightColor = options.color;\n        }\n        if (options.mix) {\n          activeOption.activeMix = options.mix;\n        }\n      } else {\n        activeOption.enableHighlight = !!options;\n      }\n      this.updateLayerConfig(activeOption);\n      return this;\n    }\n  }, {\n    key: \"setActive\",\n    value: function setActive(id, options) {\n      var _this7 = this;\n      if (isObject(id)) {\n        var _id$x = id.x,\n          x = _id$x === void 0 ? 0 : _id$x,\n          _id$y = id.y,\n          y = _id$y === void 0 ? 0 : _id$y;\n        this.updateLayerConfig({\n          highlightColor: isObject(options) ? options.color : this.getLayerConfig().highlightColor,\n          activeMix: isObject(options) ? options.mix : this.getLayerConfig().activeMix\n        });\n        this.pick({\n          x: x,\n          y: y\n        });\n      } else {\n        this.updateLayerConfig({\n          pickedFeatureID: id,\n          highlightColor: isObject(options) ? options.color : this.getLayerConfig().highlightColor,\n          activeMix: isObject(options) ? options.mix : this.getLayerConfig().activeMix\n        });\n        this.hooks.beforeHighlight.call(encodePickingColor(id))\n        // @ts-ignore\n        .then(function () {\n          setTimeout(function () {\n            _this7.reRender();\n          }, 1);\n        });\n      }\n    }\n  }, {\n    key: \"select\",\n    value: function select(option) {\n      var activeOption = {};\n      activeOption.enableSelect = isObject(option) ? true : option;\n      if (isObject(option)) {\n        activeOption.enableSelect = true;\n        if (option.color) {\n          activeOption.selectColor = option.color;\n        }\n        if (option.mix) {\n          activeOption.selectMix = option.mix;\n        }\n      } else {\n        activeOption.enableSelect = !!option;\n      }\n      this.updateLayerConfig(activeOption);\n      return this;\n    }\n  }, {\n    key: \"setSelect\",\n    value: function setSelect(id, options) {\n      var _this8 = this;\n      if (isObject(id)) {\n        var _id$x2 = id.x,\n          x = _id$x2 === void 0 ? 0 : _id$x2,\n          _id$y2 = id.y,\n          y = _id$y2 === void 0 ? 0 : _id$y2;\n        this.updateLayerConfig({\n          selectColor: isObject(options) ? options.color : this.getLayerConfig().selectColor,\n          selectMix: isObject(options) ? options.mix : this.getLayerConfig().selectMix\n        });\n        this.pick({\n          x: x,\n          y: y\n        });\n      } else {\n        this.updateLayerConfig({\n          pickedFeatureID: id,\n          selectColor: isObject(options) ? options.color : this.getLayerConfig().selectColor,\n          selectMix: isObject(options) ? options.mix : this.getLayerConfig().selectMix\n        });\n        this.hooks.beforeSelect.call(encodePickingColor(id))\n        // @ts-ignore\n        .then(function () {\n          setTimeout(function () {\n            _this8.reRender();\n          }, 1);\n        });\n      }\n    }\n  }, {\n    key: \"setBlend\",\n    value: function setBlend(type) {\n      this.updateLayerConfig({\n        blend: type\n      });\n      // this.layerModelNeedUpdate = true;\n      this.reRender();\n      return this;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.updateLayerConfig({\n        visible: true\n      });\n      this.reRender();\n      this.emit('show');\n      return this;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.updateLayerConfig({\n        visible: false\n      });\n      this.reRender();\n      this.emit('hide');\n      return this;\n    }\n  }, {\n    key: \"setIndex\",\n    value: function setIndex(index) {\n      this.zIndex = index;\n      this.layerService.updateLayerRenderList();\n      this.layerService.renderLayers();\n      return this;\n    }\n  }, {\n    key: \"setCurrentPickId\",\n    value: function setCurrentPickId(id) {\n      this.currentPickId = id;\n    }\n  }, {\n    key: \"getCurrentPickId\",\n    value: function getCurrentPickId() {\n      return this.currentPickId;\n    }\n  }, {\n    key: \"setCurrentSelectedId\",\n    value: function setCurrentSelectedId(id) {\n      this.selectedFeatureID = id;\n    }\n  }, {\n    key: \"getCurrentSelectedId\",\n    value: function getCurrentSelectedId() {\n      return this.selectedFeatureID;\n    }\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      var zoom = this.mapService.getZoom();\n      var _this$getLayerConfig3 = this.getLayerConfig(),\n        visible = _this$getLayerConfig3.visible,\n        _this$getLayerConfig4 = _this$getLayerConfig3.minZoom,\n        minZoom = _this$getLayerConfig4 === void 0 ? -Infinity : _this$getLayerConfig4,\n        _this$getLayerConfig5 = _this$getLayerConfig3.maxZoom,\n        maxZoom = _this$getLayerConfig5 === void 0 ? Infinity : _this$getLayerConfig5;\n      return !!visible && zoom >= minZoom && zoom < maxZoom;\n    }\n  }, {\n    key: \"setMultiPass\",\n    value: function setMultiPass(enableMultiPass, currentPasses) {\n      this.updateLayerConfig({\n        enableMultiPassRenderer: enableMultiPass\n      });\n      if (currentPasses) {\n        this.updateLayerConfig({\n          passes: currentPasses\n        });\n      }\n      if (enableMultiPass) {\n        var _this$getLayerConfig6 = this.getLayerConfig(),\n          _this$getLayerConfig7 = _this$getLayerConfig6.passes,\n          passes = _this$getLayerConfig7 === void 0 ? [] : _this$getLayerConfig7;\n        this.multiPassRenderer = createMultiPassRenderer(this, passes, this.postProcessingPassFactory, this.normalPassFactory);\n        this.multiPassRenderer.setRenderFlag(true);\n        var _this$rendererService = this.rendererService.getViewportSize(),\n          width = _this$rendererService.width,\n          height = _this$rendererService.height;\n        this.multiPassRenderer.resize(width, height);\n      }\n      return this;\n    }\n  }, {\n    key: \"setMinZoom\",\n    value: function setMinZoom(minZoom) {\n      this.updateLayerConfig({\n        minZoom: minZoom\n      });\n      return this;\n    }\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      var _this$getLayerConfig8 = this.getLayerConfig(),\n        minZoom = _this$getLayerConfig8.minZoom;\n      return minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      var _this$getLayerConfig9 = this.getLayerConfig(),\n        maxZoom = _this$getLayerConfig9.maxZoom;\n      return maxZoom;\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var cfg = this.getLayerConfig();\n      // @ts-ignore\n      return cfg[name];\n    }\n  }, {\n    key: \"setMaxZoom\",\n    value: function setMaxZoom(maxZoom) {\n      this.updateLayerConfig({\n        maxZoom: maxZoom\n      });\n      return this;\n    }\n  }, {\n    key: \"setAutoFit\",\n    value: function setAutoFit(autoFit) {\n      this.updateLayerConfig({\n        autoFit: autoFit\n      });\n      return this;\n    }\n\n    /**\n     * zoom to layer Bounds\n     */\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(fitBoundsOptions) {\n      if (!this.inited) {\n        this.updateLayerConfig({\n          autoFit: true\n        });\n        return this;\n      }\n      var source = this.getSource();\n      var extent = source.extent;\n      var isValid = extent.some(function (v) {\n        return Math.abs(v) === Infinity;\n      });\n      if (isValid) {\n        return this;\n      }\n      this.mapService.fitBounds([[extent[0], extent[1]], [extent[2], extent[3]]], fitBoundsOptions);\n      return this;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$layerModel, _this$multiPassRender, _this$layerModel2, _this$tileLayer, _this$debugService2;\n      var refresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (this.isDestroyed) {\n        return;\n      }\n\n      // destroy all UBOs\n      (_this$layerModel = this.layerModel) === null || _this$layerModel === void 0 || _this$layerModel.uniformBuffers.forEach(function (buffer) {\n        buffer.destroy();\n      });\n\n      // remove child layer\n      this.layerChildren.map(function (child) {\n        return child.destroy(false);\n      });\n      this.layerChildren = [];\n\n      // remove mask list maskfence 掩膜需要销毁\n      var _this$getLayerConfig10 = this.getLayerConfig(),\n        maskfence = _this$getLayerConfig10.maskfence;\n      if (maskfence) {\n        this.masks.map(function (mask) {\n          return mask.destroy(false);\n        });\n        this.masks = [];\n      }\n      this.hooks.beforeDestroy.call();\n      // 清除sources事件\n      this.layerSource.off('update', this.sourceEvent);\n      (_this$multiPassRender = this.multiPassRenderer) === null || _this$multiPassRender === void 0 || _this$multiPassRender.destroy();\n      this.textureService.destroy();\n\n      // 清除所有属性以及关联的 vao == 销毁所有 => model this.models.forEach((model) => model.destroy());\n      this.styleAttributeService.clearAllAttributes();\n\n      // 执行每个图层单独的 clearModels 方法 （清除一些额外的 texture、program、buffer 等）\n\n      this.hooks.afterDestroy.call();\n      // Tip: 清除各个图层自定义的 models 资源\n      (_this$layerModel2 = this.layerModel) === null || _this$layerModel2 === void 0 || _this$layerModel2.clearModels(refresh);\n      (_this$tileLayer = this.tileLayer) === null || _this$tileLayer === void 0 || _this$tileLayer.destroy();\n      this.models = [];\n      // 清除图层日志（如果有的话：非瓦片相关）\n      (_this$debugService2 = this.debugService) === null || _this$debugService2 === void 0 || _this$debugService2.removeLog(this.id);\n      this.emit('remove', {\n        target: this,\n        type: 'remove'\n      });\n      this.emit('destroy', {\n        target: this,\n        type: 'destroy'\n      });\n      this.removeAllListeners();\n      this.isDestroyed = true;\n      // 解绑图层容器中的服务\n      // this.container.unbind(TYPES.IStyleAttributeService);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.styleAttributeService.clearAllAttributes();\n      // 销毁所有 model\n    }\n  }, {\n    key: \"clearModels\",\n    value: function clearModels() {\n      var _this$layerModel3;\n      this.models.forEach(function (model) {\n        return model.destroy();\n      });\n      (_this$layerModel3 = this.layerModel) === null || _this$layerModel3 === void 0 || _this$layerModel3.clearModels();\n      this.models = [];\n    }\n  }, {\n    key: \"isDirty\",\n    value: function isDirty() {\n      return !!(this.styleAttributeService.getLayerStyleAttributes() || []).filter(function (attribute) {\n        return attribute.needRescale || attribute.needRemapping || attribute.needRegenerateVertices;\n      }).length;\n    }\n    // 外部初始化Source\n  }, {\n    key: \"setSource\",\n    value: function setSource(source) {\n      var _this9 = this;\n      // 解除原 sources 事件\n      if (this.layerSource) {\n        this.layerSource.off('update', this.sourceEvent);\n      }\n      this.layerSource = source;\n      this.clusterZoom = 0;\n\n      // 已 inited 且启用聚合进行更新聚合数据\n      if (this.inited && this.layerSource.cluster) {\n        var zoom = this.mapService.getZoom();\n        this.layerSource.updateClusterData(zoom);\n      }\n      if (this.layerSource.inited) {\n        this.sourceEvent();\n      }\n      // this.layerSource.inited 为 true update 事件不会再触发\n      this.layerSource.on('update', function (_ref4) {\n        var type = _ref4.type;\n        if (_this9.coordCenter === undefined) {\n          var _this9$mapService;\n          var layerCenter = _this9.layerSource.center;\n          _this9.coordCenter = layerCenter;\n          if ((_this9$mapService = _this9.mapService) !== null && _this9$mapService !== void 0 && _this9$mapService.setCoordCenter) {\n            _this9.mapService.setCoordCenter(layerCenter);\n          }\n        }\n        if (type === 'update') {\n          if (_this9.tileLayer) {\n            // 瓦片图层独立更新\n            _this9.tileLayer.reload();\n            return;\n          }\n          // source 初始化不需要处理\n          _this9.sourceEvent();\n        }\n      });\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.layerSource;\n    }\n  }, {\n    key: \"getScaleOptions\",\n    value: function getScaleOptions() {\n      return this.scaleOptions;\n    }\n  }, {\n    key: \"setEncodedData\",\n    value: function setEncodedData(encodedData) {\n      this.encodedData = encodedData;\n      this.encodeDataLength = encodedData.length;\n    }\n  }, {\n    key: \"getEncodedData\",\n    value: function getEncodedData() {\n      return this.encodedData;\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale(name) {\n      return this.styleAttributeService.getLayerAttributeScale(name);\n    }\n  }, {\n    key: \"getLegend\",\n    value: function getLegend(name) {\n      var _attribute$scale, _scales$0$option, _attribute$scale2;\n      var attribute = this.styleAttributeService.getLayerStyleAttribute(name);\n      var scales = (attribute === null || attribute === void 0 || (_attribute$scale = attribute.scale) === null || _attribute$scale === void 0 ? void 0 : _attribute$scale.scalers) || [];\n      return {\n        type: (_scales$0$option = scales[0].option) === null || _scales$0$option === void 0 ? void 0 : _scales$0$option.type,\n        field: attribute === null || attribute === void 0 || (_attribute$scale2 = attribute.scale) === null || _attribute$scale2 === void 0 ? void 0 : _attribute$scale2.field,\n        items: this.getLegendItems(name)\n      };\n    }\n  }, {\n    key: \"getLegendItems\",\n    value: function getLegendItems(name) {\n      var scale = this.styleAttributeService.getLayerAttributeScale(name);\n      // 函数自定义映射，没有 scale 返回为空数组\n      if (!scale) {\n        return [];\n      }\n      if (scale.invertExtent) {\n        // 分段类型  Quantize、Quantile、Threshold\n        var items = scale.range().map(function (item) {\n          return _defineProperty({\n            value: scale.invertExtent(item)\n          }, name, item);\n        });\n        return items;\n      } else if (scale.ticks) {\n        // 连续类型 Continuous (Linear, Power, Log, Identity, Time)\n        var _items = scale.ticks().map(function (item) {\n          return _defineProperty({\n            value: item\n          }, name, scale(item));\n        });\n        return _items;\n      } else if (scale !== null && scale !== void 0 && scale.domain) {\n        // 枚举类型 Cat\n        var _items2 = scale.domain().filter(function (item) {\n          return !isUndefined(item);\n        }).map(function (item) {\n          return _defineProperty({\n            value: item\n          }, name, scale(item));\n        });\n        return _items2;\n      }\n      return [];\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(_ref8) {\n      var x = _ref8.x,\n        y = _ref8.y;\n      this.interactionService.triggerHover({\n        x: x,\n        y: y\n      });\n    }\n  }, {\n    key: \"boxSelect\",\n    value: function boxSelect(box, cb) {\n      this.pickingService.boxPickLayer(this, box, cb);\n    }\n  }, {\n    key: \"buildLayerModel\",\n    value: function () {\n      var _buildLayerModel = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options) {\n        var _this10 = this;\n        var moduleName, vertexShader, fragmentShader, inject, triangulation, styleOption, _options$pickingEnabl, pickingEnabled, rest, _this$shaderModuleSer, vs, fs, uniforms, createModel;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              moduleName = options.moduleName, vertexShader = options.vertexShader, fragmentShader = options.fragmentShader, inject = options.inject, triangulation = options.triangulation, styleOption = options.styleOption, _options$pickingEnabl = options.pickingEnabled, pickingEnabled = _options$pickingEnabl === void 0 ? true : _options$pickingEnabl, rest = _objectWithoutProperties(options, _excluded2);\n              this.shaderModuleService.registerModule(moduleName, {\n                vs: vertexShader,\n                fs: fragmentShader,\n                inject: inject\n              });\n              _this$shaderModuleSer = this.shaderModuleService.getModule(moduleName), vs = _this$shaderModuleSer.vs, fs = _this$shaderModuleSer.fs, uniforms = _this$shaderModuleSer.uniforms;\n              createModel = this.rendererService.createModel;\n              return _context3.abrupt(\"return\", new Promise(function (resolve) {\n                var _this10$styleAttribut = _this10.styleAttributeService.createAttributesAndIndices(_this10.encodedData, triangulation, styleOption),\n                  attributes = _this10$styleAttribut.attributes,\n                  elements = _this10$styleAttribut.elements,\n                  count = _this10$styleAttribut.count;\n                var uniformBuffers = [].concat(_toConsumableArray(_this10.layerModel.uniformBuffers), _toConsumableArray(_this10.rendererService.uniformBuffers), [_this10.getLayerUniformBuffer()]);\n                if (pickingEnabled) {\n                  uniformBuffers.push(_this10.getPickingUniformBuffer());\n                }\n                var modelOptions = _objectSpread({\n                  attributes: attributes,\n                  uniforms: uniforms,\n                  fs: fs,\n                  vs: vs,\n                  elements: elements,\n                  blend: BlendTypes[BlendType.normal],\n                  uniformBuffers: uniformBuffers,\n                  textures: _this10.layerModel.textures\n                }, rest);\n                if (count) {\n                  modelOptions.count = count;\n                }\n                var m = createModel(modelOptions);\n                resolve(m);\n              }));\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function buildLayerModel(_x) {\n        return _buildLayerModel.apply(this, arguments);\n      }\n      return buildLayerModel;\n    }()\n  }, {\n    key: \"createAttributes\",\n    value: function createAttributes(options) {\n      var triangulation = options.triangulation;\n      // @ts-ignore\n      var _this$styleAttributeS = this.styleAttributeService.createAttributes(this.encodedData, triangulation),\n        attributes = _this$styleAttributeS.attributes;\n      return attributes;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime() {\n      return this.layerService.clock.getDelta();\n    }\n  }, {\n    key: \"setAnimateStartTime\",\n    value: function setAnimateStartTime() {\n      this.animateStartTime = this.layerService.clock.getElapsedTime();\n    }\n  }, {\n    key: \"stopAnimate\",\n    value: function stopAnimate() {\n      if (this.animateStatus) {\n        this.layerService.stopAnimate();\n        this.animateStatus = false;\n        this.updateLayerConfig({\n          animateOption: {\n            enable: false\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getLayerAnimateTime\",\n    value: function getLayerAnimateTime() {\n      return this.layerService.clock.getElapsedTime() - this.animateStartTime;\n    }\n  }, {\n    key: \"needPick\",\n    value: function needPick(type) {\n      var _this$getLayerConfig11 = this.getLayerConfig(),\n        _this$getLayerConfig12 = _this$getLayerConfig11.enableHighlight,\n        enableHighlight = _this$getLayerConfig12 === void 0 ? true : _this$getLayerConfig12,\n        _this$getLayerConfig13 = _this$getLayerConfig11.enableSelect,\n        enableSelect = _this$getLayerConfig13 === void 0 ? true : _this$getLayerConfig13;\n      // 判断layer是否监听事件;\n      var isPick = this.eventNames().indexOf(type) !== -1 || this.eventNames().indexOf('un' + type) !== -1;\n      if ((type === 'click' || type === 'dblclick') && enableSelect) {\n        isPick = true;\n      }\n      if (type === 'mousemove' && (enableHighlight || this.eventNames().indexOf('mouseenter') !== -1 || this.eventNames().indexOf('unmousemove') !== -1 || this.eventNames().indexOf('mouseout') !== -1)) {\n        isPick = true;\n      }\n      return this.isVisible() && isPick;\n    }\n  }, {\n    key: \"buildModels\",\n    value: function () {\n      var _buildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              throw new Error('Method not implemented.');\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      function buildModels() {\n        return _buildModels.apply(this, arguments);\n      }\n      return buildModels;\n    }()\n  }, {\n    key: \"rebuildModels\",\n    value: function () {\n      var _rebuildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.buildModels();\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function rebuildModels() {\n        return _rebuildModels.apply(this, arguments);\n      }\n      return rebuildModels;\n    }()\n  }, {\n    key: \"renderMulPass\",\n    value: function () {\n      var _renderMulPass = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(multiPassRenderer) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return multiPassRenderer.render();\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }));\n      function renderMulPass(_x2) {\n        return _renderMulPass.apply(this, arguments);\n      }\n      return renderMulPass;\n    }()\n  }, {\n    key: \"renderModels\",\n    value: function renderModels() {\n      var _this11 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // TODO: this.getEncodedData().length > 0 这个判断是为了解决在 2.5.x 引入数据纹理后产生的 空数据渲染导致 texture 超出上限问题\n      if (this.encodeDataLength <= 0 && !this.forceRender) {\n        // 数据为空销毁model\n        this.clearModels();\n        return this;\n      }\n      this.hooks.beforeRender.call();\n      this.models.forEach(function (model) {\n        model.draw({\n          uniforms: _this11.layerModel.getUninforms(),\n          blend: _this11.layerModel.getBlend(),\n          stencil: _this11.layerModel.getStencil(options),\n          textures: _this11.layerModel.textures\n        }, (options === null || options === void 0 ? void 0 : options.ispick) || false);\n      });\n      this.hooks.afterRender.call();\n      return this;\n    }\n  }, {\n    key: \"updateStyleAttribute\",\n    value: function updateStyleAttribute(type, field, values, updateOptions) {\n      // encode diff\n      var preAttribute = this.configService.getAttributeConfig(this.id) || {};\n      // @ts-ignore\n      if (isEqual(preAttribute[type], {\n        field: field,\n        values: values\n      })) {\n        // 检测是否发生更新\n        return false;\n      }\n\n      // 存储 Attribute 瓦片图层使用\n      if (['color', 'size', 'texture', 'rotate', 'filter', 'label', 'shape'].indexOf(type) !== -1) {\n        this.configService.setAttributeConfig(this.id, _defineProperty({}, type, {\n          field: field,\n          values: values\n        }));\n      }\n      if (!this.startInit) {\n        // 开始初始化执行\n        this.pendingStyleAttributes.push({\n          attributeName: type,\n          attributeField: field,\n          attributeValues: values,\n          updateOptions: updateOptions\n        });\n      } else {\n        this.styleAttributeService.updateStyleAttribute(type, {\n          // @ts-ignore\n          scale: _objectSpread({\n            field: field\n          }, this.splitValuesAndCallbackInAttribute(\n          // @ts-ignore\n          values,\n          // @ts-ignore\n          this.getLayerConfig()[field]))\n        },\n        // @ts-ignore\n        updateOptions);\n      }\n      return true;\n    }\n  }, {\n    key: \"getLayerAttributeConfig\",\n    value: function getLayerAttributeConfig() {\n      return this.configService.getAttributeConfig(this.id);\n    }\n  }, {\n    key: \"getShaderPickStat\",\n    value: function getShaderPickStat() {\n      return this.layerService.getShaderPickStat();\n    }\n\n    /**\n     * 继承空方法\n     * @param time\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"setEarthTime\",\n    value: function setEarthTime(time) {\n      console.warn('empty fn');\n    }\n\n    // 数据处理 在数据进行 mapping 生成 encodeData 之前对数据进行处理\n    // 在各个 layer 中继承\n  }, {\n    key: \"processData\",\n    value: function processData(filterData) {\n      return filterData;\n    }\n  }, {\n    key: \"getModelType\",\n    value: function getModelType() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"getDefaultConfig\",\n    value: function getDefaultConfig() {\n      return {};\n    }\n  }, {\n    key: \"initLayerModels\",\n    value: function () {\n      var _initLayerModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var layerUniforms, pickingUniforms;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              this.models.forEach(function (model) {\n                return model.destroy();\n              });\n              this.models = [];\n              this.uniformBuffers.forEach(function (buffer) {\n                buffer.destroy();\n              });\n              this.uniformBuffers = [];\n              // Layer Uniform\n              layerUniforms = this.rendererService.createBuffer({\n                data: new Float32Array(16 + 4).fill(0),\n                // u_Mvp\n                isUBO: true\n              });\n              this.uniformBuffers.push(layerUniforms);\n\n              // Picking Uniform\n              pickingUniforms = this.rendererService.createBuffer({\n                data: new Float32Array(20).fill(0),\n                isUBO: true\n              });\n              this.uniformBuffers.push(pickingUniforms);\n              _context7.next = 10;\n              return this.layerModel.initModels();\n            case 10:\n              this.models = _context7.sent;\n            case 11:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function initLayerModels() {\n        return _initLayerModels.apply(this, arguments);\n      }\n      return initLayerModels;\n    }()\n  }, {\n    key: \"getLayerUniformBuffer\",\n    value: function getLayerUniformBuffer() {\n      return this.uniformBuffers[0];\n    }\n  }, {\n    key: \"getPickingUniformBuffer\",\n    value: function getPickingUniformBuffer() {\n      return this.uniformBuffers[1];\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.inited) {\n        this.layerService.reRender();\n      }\n    }\n  }, {\n    key: \"splitValuesAndCallbackInAttribute\",\n    value: function splitValuesAndCallbackInAttribute(valuesOrCallback\n    // defaultValues?: unknown[],\n    ) {\n      return {\n        values: isFunction(valuesOrCallback) ? undefined : valuesOrCallback,\n        callback: isFunction(valuesOrCallback) ? valuesOrCallback : undefined\n      };\n    }\n  }]);\n  return BaseLayer;\n}(EventEmitter), _descriptor = _applyDecoratedDescriptor(_class.prototype, \"configService\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _class));\nexport { BaseLayer as default };","map":{"version":3,"names":["_toConsumableArray","_objectWithoutProperties","_asyncToGenerator","_objectSpread","_initializerDefineProperty","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_applyDecoratedDescriptor","_initializerWarningHelper","_excluded","_excluded2","_dec","_class","_descriptor","_regeneratorRuntime","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","return","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","Reflect","construct","arguments","apply","sham","Proxy","Boolean","valueOf","AsyncSeriesBailHook","AsyncWaterfallHook","SyncBailHook","SyncHook","BlendType","IDebugLog","ILayerStage","TYPES","lazyInject","Source","encodePickingColor","lodashUtil","EventEmitter","BlendTypes","createMultiPassRenderer","normalizePasses","LayerPickService","TextureService","isEqual","isFunction","isNumber","isObject","isPlainObject","isUndefined","layerIdCounter","BaseLayer","IGlobalConfigService","_ref","_super","_this","config","undefined","concat","data","options","parser","type","dataSourceNeedUpdate","dataMappingNeedUpdate","filterNeedUpdate","featureScaleNeedUpdate","StyleAttrNeedUpdate","init","afterInit","beforeRender","beforeRenderData","afterRender","beforePickingEncode","afterPickingEncode","beforeHighlight","afterHighlight","beforeSelect","afterSelect","beforeDestroy","afterDestroy","enable","dataState","layerConfig","getLayerConfig","autoFit","fitBounds","fitBoundsOptions","autoRender","layerSource","getSourceCfg","setTimeout","reRender","id","zIndex","rawConfig","key","addMask","layer","masks","push","updateLayerConfig","maskLayers","enableMask","removeMask","layerIndex","indexOf","splice","disableMask","addMaskLayer","maskLayer","removeMaskLayer","destroy","getAttribute","styleAttributeService","getLayerStyleAttribute","configService","configToUpdate","_this2","keys","map","startInit","needUpdateConfig","sceneId","container","get","SceneID","setLayerConfig","setContainer","sceneContainer","getContainer","addPlugin","plugin","plugins","_init","mark","_callee","_this3","_this$getLayerConfig","enableMultiPassRenderer","passes","_iterator","_step","wrap","_callee$","_context","prev","layerType","iconService","IIconService","fontService","IFontService","rendererService","IRendererService","layerService","ILayerService","debugService","IDebugService","interactionService","IInteractionService","pickingService","IPickingService","mapService","IMapService","on","renderLayers","cameraService","ICameraService","coordinateService","ICoordinateSystemService","shaderModuleService","IShaderModuleService","postProcessingPassFactory","IFactoryPostProcessingPass","normalPassFactory","IFactoryNormalPass","IStyleAttributeService","multiPassRenderer","IMultiPassRenderer","setLayer","pendingStyleAttributes","forEach","_ref2","attributeName","attributeField","attributeValues","updateOptions","updateStyleAttribute","scale","field","splitValuesAndCallbackInAttribute","getAll","ILayerPlugin","layerPickService","textureService","log","LayerInitStart","hooks","promise","LayerInitEnd","inited","emit","target","stop","logType","_this$debugService","tileLayer","isTileLayer","values","updateModelData","attributes","elements","models","m","updateAttributesAndElements","console","warn","setLayerPickService","prepareBuildModel","_this$getLayerConfig2","animateOption","startAnimate","animateStatus","color","texture","rotate","size","filter","flag","shape","shapeOption","label","animate","rawAnimate","source","setSource","sourceOption","clusterZoom","setData","_this4","SourceInitStart","UPDATE","SourceInitEnd","currentSource","getSource","once","style","_this5","rest","pass","postProcessingPass","getPostProcessor","getPostProcessingPassByName","borderColor","stroke","borderWidth","strokeWidth","newOption","encodeStyle","_this6","enableShaderEncodeStyles","enableDataEncodeStyles","includes","encodeStyleAttribute","cfg","preOption","scaleOptions","updateScaleAttribute","rendering","prerender","render","encodeDataLength","forceRender","renderModels","_renderMultiPass","_callee2","_callee2$","_context2","abrupt","getRenderFlag","renderMultiPass","active","activeOption","enableHighlight","highlightColor","mix","activeMix","setActive","_this7","_id$x","x","_id$y","y","pick","pickedFeatureID","then","select","option","enableSelect","selectColor","selectMix","setSelect","_this8","_id$x2","_id$y2","setBlend","blend","show","visible","hide","setIndex","index","updateLayerRenderList","setCurrentPickId","currentPickId","getCurrentPickId","setCurrentSelectedId","selectedFeatureID","getCurrentSelectedId","isVisible","zoom","getZoom","_this$getLayerConfig3","_this$getLayerConfig4","minZoom","Infinity","_this$getLayerConfig5","maxZoom","setMultiPass","enableMultiPass","currentPasses","_this$getLayerConfig6","_this$getLayerConfig7","setRenderFlag","_this$rendererService","getViewportSize","width","height","resize","setMinZoom","getMinZoom","_this$getLayerConfig8","getMaxZoom","_this$getLayerConfig9","setMaxZoom","setAutoFit","extent","isValid","some","v","Math","abs","_this$layerModel","_this$multiPassRender","_this$layerModel2","_this$tileLayer","_this$debugService2","refresh","isDestroyed","layerModel","uniformBuffers","buffer","layerChildren","child","_this$getLayerConfig10","maskfence","mask","off","sourceEvent","clearAllAttributes","clearModels","removeLog","removeAllListeners","clear","_this$layerModel3","model","isDirty","getLayerStyleAttributes","attribute","needRescale","needRemapping","needRegenerateVertices","_this9","cluster","updateClusterData","_ref4","coordCenter","_this9$mapService","layerCenter","center","setCoordCenter","reload","getScaleOptions","setEncodedData","encodedData","getEncodedData","getScale","getLayerAttributeScale","getLegend","_attribute$scale","_scales$0$option","_attribute$scale2","scales","scalers","items","getLegendItems","invertExtent","range","item","ticks","_items","domain","_items2","_ref8","triggerHover","boxSelect","box","cb","boxPickLayer","_buildLayerModel","_callee3","_this10","moduleName","vertexShader","fragmentShader","inject","triangulation","styleOption","_options$pickingEnabl","pickingEnabled","_this$shaderModuleSer","vs","fs","uniforms","createModel","_callee3$","_context3","registerModule","getModule","Promise","resolve","_this10$styleAttribut","createAttributesAndIndices","count","getLayerUniformBuffer","getPickingUniformBuffer","modelOptions","normal","textures","buildLayerModel","_x","createAttributes","_this$styleAttributeS","getTime","clock","getDelta","setAnimateStartTime","animateStartTime","getElapsedTime","stopAnimate","getLayerAnimateTime","needPick","_this$getLayerConfig11","_this$getLayerConfig12","_this$getLayerConfig13","isPick","eventNames","_buildModels","_callee4","_callee4$","_context4","Error","buildModels","_rebuildModels","_callee5","_callee5$","_context5","rebuildModels","_renderMulPass","_callee6","_callee6$","_context6","renderMulPass","_x2","_this11","draw","getUninforms","getBlend","stencil","getStencil","ispick","preAttribute","getAttributeConfig","setAttributeConfig","getLayerAttributeConfig","getShaderPickStat","setEarthTime","time","processData","filterData","getModelType","getDefaultConfig","_initLayerModels","_callee7","layerUniforms","pickingUniforms","_callee7$","_context7","createBuffer","Float32Array","fill","isUBO","initModels","sent","initLayerModels","valuesOrCallback","callback","configurable","enumerable","writable","initializer","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-layers/es/core/BaseLayer.js"],"sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\nvar _excluded = [\"passes\"],\n  _excluded2 = [\"moduleName\", \"vertexShader\", \"fragmentShader\", \"inject\", \"triangulation\", \"styleOption\", \"pickingEnabled\"];\nvar _dec, _class, _descriptor;\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n// @ts-ignore\nimport { AsyncSeriesBailHook, AsyncWaterfallHook, SyncBailHook, SyncHook } from '@antv/async-hook';\nimport { BlendType, IDebugLog, ILayerStage, TYPES, lazyInject } from '@antv/l7-core';\nimport Source from '@antv/l7-source';\nimport { encodePickingColor, lodashUtil } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport { BlendTypes } from \"../utils/blend\";\nimport { createMultiPassRenderer, normalizePasses } from \"../utils/multiPassRender\";\nimport LayerPickService from \"./LayerPickService\";\nimport TextureService from \"./TextureService\";\nvar isEqual = lodashUtil.isEqual,\n  isFunction = lodashUtil.isFunction,\n  isNumber = lodashUtil.isNumber,\n  isObject = lodashUtil.isObject,\n  isPlainObject = lodashUtil.isPlainObject,\n  isUndefined = lodashUtil.isUndefined;\n/**\n * 分配 layer id\n */\nvar layerIdCounter = 0;\nvar BaseLayer = (_dec = lazyInject(TYPES.IGlobalConfigService), (_class = /*#__PURE__*/function (_ref) {\n  _inherits(BaseLayer, _ref);\n  var _super = _createSuper(BaseLayer);\n  function BaseLayer() {\n    var _this;\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, BaseLayer);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"id\", \"\".concat(layerIdCounter++));\n    _defineProperty(_assertThisInitialized(_this), \"name\", \"\".concat(layerIdCounter));\n    _defineProperty(_assertThisInitialized(_this), \"visible\", true);\n    _defineProperty(_assertThisInitialized(_this), \"zIndex\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"inited\", false);\n    _defineProperty(_assertThisInitialized(_this), \"layerModelNeedUpdate\", false);\n    _defineProperty(_assertThisInitialized(_this), \"pickedFeatureID\", null);\n    _defineProperty(_assertThisInitialized(_this), \"selectedFeatureID\", null);\n    _defineProperty(_assertThisInitialized(_this), \"styleNeedUpdate\", false);\n    _defineProperty(_assertThisInitialized(_this), \"forceRender\", false);\n    _defineProperty(_assertThisInitialized(_this), \"clusterZoom\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"defaultSourceConfig\", {\n      data: [],\n      options: {\n        parser: {\n          type: 'json'\n        }\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"dataState\", {\n      dataSourceNeedUpdate: false,\n      dataMappingNeedUpdate: false,\n      filterNeedUpdate: false,\n      featureScaleNeedUpdate: false,\n      StyleAttrNeedUpdate: false\n    });\n    // 生命周期钩子\n    _defineProperty(_assertThisInitialized(_this), \"hooks\", {\n      init: new AsyncSeriesBailHook(),\n      afterInit: new SyncBailHook(),\n      beforeRender: new SyncBailHook(),\n      beforeRenderData: new AsyncWaterfallHook(),\n      afterRender: new SyncHook(),\n      beforePickingEncode: new SyncHook(),\n      afterPickingEncode: new SyncHook(),\n      beforeHighlight: new SyncHook(['pickedColor']),\n      afterHighlight: new SyncHook(),\n      beforeSelect: new SyncHook(['pickedColor']),\n      afterSelect: new SyncHook(),\n      beforeDestroy: new SyncHook(),\n      afterDestroy: new SyncHook()\n    });\n    // 待渲染 model 列表\n    _defineProperty(_assertThisInitialized(_this), \"models\", []);\n    _defineProperty(_assertThisInitialized(_this), \"startInit\", false);\n    // 用于保存子图层对象\n    _defineProperty(_assertThisInitialized(_this), \"layerChildren\", []);\n    _defineProperty(_assertThisInitialized(_this), \"masks\", []);\n    _initializerDefineProperty(_assertThisInitialized(_this), \"configService\", _descriptor, _assertThisInitialized(_this));\n    _defineProperty(_assertThisInitialized(_this), \"animateOptions\", {\n      enable: false\n    });\n    _defineProperty(_assertThisInitialized(_this), \"currentPickId\", null);\n    _defineProperty(_assertThisInitialized(_this), \"encodeStyleAttribute\", {});\n    // Shader 的数据映射\n    _defineProperty(_assertThisInitialized(_this), \"enableShaderEncodeStyles\", []);\n    // 数据层数据映射\n    _defineProperty(_assertThisInitialized(_this), \"enableDataEncodeStyles\", []);\n    /**\n     * 待更新样式属性，在初始化阶段完成注册\n     */\n    _defineProperty(_assertThisInitialized(_this), \"pendingStyleAttributes\", []);\n    _defineProperty(_assertThisInitialized(_this), \"scaleOptions\", {});\n    _defineProperty(_assertThisInitialized(_this), \"animateStatus\", false);\n    _defineProperty(_assertThisInitialized(_this), \"isDestroyed\", false);\n    // private pickingPassRender: IPass<'pixelPicking'>;\n    _defineProperty(_assertThisInitialized(_this), \"uniformBuffers\", []);\n    _defineProperty(_assertThisInitialized(_this), \"encodeDataLength\", 0);\n    _defineProperty(_assertThisInitialized(_this), \"sourceEvent\", function () {\n      _this.dataState.dataSourceNeedUpdate = true;\n      var layerConfig = _this.getLayerConfig();\n      if (layerConfig && layerConfig.autoFit) {\n        _this.fitBounds(layerConfig.fitBoundsOptions);\n      }\n      var autoRender = _this.layerSource.getSourceCfg().autoRender;\n      if (autoRender) {\n        setTimeout(function () {\n          _this.reRender();\n        }, 10);\n      }\n    });\n    _this.name = config.name || _this.id;\n    _this.zIndex = config.zIndex || 0;\n    _this.rawConfig = config;\n    return _this;\n  }\n  _createClass(BaseLayer, [{\n    key: \"addMask\",\n    value: function addMask(layer) {\n      this.masks.push(layer);\n      this.updateLayerConfig({\n        maskLayers: this.masks\n      });\n      this.enableMask();\n    }\n  }, {\n    key: \"removeMask\",\n    value: function removeMask(layer) {\n      var layerIndex = this.masks.indexOf(layer);\n      if (layerIndex > -1) {\n        this.masks.splice(layerIndex, 1);\n      }\n      this.updateLayerConfig({\n        maskLayers: this.masks\n      });\n    }\n  }, {\n    key: \"disableMask\",\n    value: function disableMask() {\n      this.updateLayerConfig({\n        enableMask: false\n      });\n    }\n  }, {\n    key: \"enableMask\",\n    value: function enableMask() {\n      this.updateLayerConfig({\n        enableMask: true\n      });\n    }\n\n    /**\n     * 将废弃\n     * @deprecated\n     */\n  }, {\n    key: \"addMaskLayer\",\n    value: function addMaskLayer(maskLayer) {\n      this.masks.push(maskLayer);\n    }\n\n    /**\n     * 将废弃\n     * @deprecated\n     */\n  }, {\n    key: \"removeMaskLayer\",\n    value: function removeMaskLayer(maskLayer) {\n      var layerIndex = this.masks.indexOf(maskLayer);\n      if (layerIndex > -1) {\n        this.masks.splice(layerIndex, 1);\n      }\n      maskLayer.destroy();\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute(name) {\n      return this.styleAttributeService.getLayerStyleAttribute(name);\n    }\n  }, {\n    key: \"getLayerConfig\",\n    value: function getLayerConfig() {\n      return this.configService.getLayerConfig(this.id);\n    }\n  }, {\n    key: \"updateLayerConfig\",\n    value: function updateLayerConfig(configToUpdate) {\n      var _this2 = this;\n      // 同步 rawConfig\n      Object.keys(configToUpdate).map(function (key) {\n        if (key in _this2.rawConfig) {\n          // @ts-ignore\n          _this2.rawConfig[key] = configToUpdate[key];\n        }\n      });\n      if (!this.startInit) {\n        this.needUpdateConfig = _objectSpread(_objectSpread({}, this.needUpdateConfig), configToUpdate);\n      } else {\n        var sceneId = this.container.get(TYPES.SceneID);\n        // @ts-ignore\n        // styleDataMapping(configToUpdate, this); // 处理 style 中进行数据映射的属性字段\n        this.configService.setLayerConfig(sceneId, this.id, _objectSpread(_objectSpread(_objectSpread({}, this.configService.getLayerConfig(this.id)), this.needUpdateConfig), configToUpdate));\n        this.needUpdateConfig = {};\n      }\n    }\n\n    /**\n     * 注入图层容器，父容器为场景容器\n     * RootContainer 1\n     *  -> SceneContainer 1.*\n     *   -> LayerContainer 1.*\n     */\n  }, {\n    key: \"setContainer\",\n    value: function setContainer(container, sceneContainer) {\n      this.container = container;\n      this.sceneContainer = sceneContainer;\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.container;\n    }\n  }, {\n    key: \"addPlugin\",\n    value: function addPlugin(plugin) {\n      this.plugins.push(plugin);\n      return this;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this3 = this;\n        var sceneId, _this$getLayerConfig, enableMultiPassRenderer, passes, _iterator, _step, plugin;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              // 设置配置项\n              sceneId = this.container.get(TYPES.SceneID);\n              this.startInit = true;\n              // 初始化图层配置项\n              // const { enableMultiPassRenderer = false } = this.rawConfig;\n              // this.configService.setLayerConfig(sceneId, this.id, {\n              //   enableMultiPassRenderer,\n              // });\n              this.configService.setLayerConfig(sceneId, this.id, this.rawConfig);\n              this.layerType = this.rawConfig.layerType;\n\n              // 全局容器服务\n\n              // 场景容器服务\n              this.iconService = this.container.get(TYPES.IIconService);\n              this.fontService = this.container.get(TYPES.IFontService);\n              this.rendererService = this.container.get(TYPES.IRendererService);\n              this.layerService = this.container.get(TYPES.ILayerService);\n              this.debugService = this.container.get(TYPES.IDebugService);\n              this.interactionService = this.container.get(TYPES.IInteractionService);\n              this.pickingService = this.container.get(TYPES.IPickingService);\n              this.mapService = this.container.get(TYPES.IMapService);\n              _this$getLayerConfig = this.getLayerConfig(), enableMultiPassRenderer = _this$getLayerConfig.enableMultiPassRenderer, passes = _this$getLayerConfig.passes;\n              if (enableMultiPassRenderer && passes !== null && passes !== void 0 && passes.length && passes.length > 0) {\n                // Tip: 兼容 multiPassRender 在 amap1 时存在的图层不同步问题 zoom\n                this.mapService.on('mapAfterFrameChange', function () {\n                  _this3.renderLayers();\n                });\n              }\n              this.cameraService = this.container.get(TYPES.ICameraService);\n              this.coordinateService = this.container.get(TYPES.ICoordinateSystemService);\n              this.shaderModuleService = this.container.get(TYPES.IShaderModuleService);\n              this.postProcessingPassFactory = this.container.get(TYPES.IFactoryPostProcessingPass);\n              this.normalPassFactory = this.container.get(TYPES.IFactoryNormalPass);\n\n              // 图层容器服务\n              this.styleAttributeService = this.container.get(TYPES.IStyleAttributeService);\n              if (enableMultiPassRenderer) {\n                // 按需初始化 瓦片频繁报错\n                this.multiPassRenderer = this.container.get(TYPES.IMultiPassRenderer);\n                this.multiPassRenderer.setLayer(this);\n              }\n              // 完成样式服务注册完成前添加的属性\n              this.pendingStyleAttributes.forEach(function (_ref2) {\n                var attributeName = _ref2.attributeName,\n                  attributeField = _ref2.attributeField,\n                  attributeValues = _ref2.attributeValues,\n                  updateOptions = _ref2.updateOptions;\n                _this3.styleAttributeService.updateStyleAttribute(attributeName, {\n                  // @ts-ignore\n                  scale: _objectSpread({\n                    field: attributeField\n                  }, _this3.splitValuesAndCallbackInAttribute(\n                  // @ts-ignore\n                  attributeValues,\n                  // @ts-ignore\n                  attributeField ? undefined : _this3.getLayerConfig()[attributeName] // 设置了字段不需要设置默认值\n                  ))\n                },\n                // @ts-ignore\n                updateOptions);\n              });\n              this.pendingStyleAttributes = [];\n\n              // 获取插件集\n              this.plugins = this.container.getAll(TYPES.ILayerPlugin);\n              // 完成插件注册，传入场景和图层容器内的服务\n              _iterator = _createForOfIteratorHelper(this.plugins);\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  plugin = _step.value;\n                  plugin.apply(this, {\n                    rendererService: this.rendererService,\n                    mapService: this.mapService,\n                    styleAttributeService: this.styleAttributeService,\n                    normalPassFactory: this.normalPassFactory,\n                    postProcessingPassFactory: this.postProcessingPassFactory\n                  });\n                }\n\n                // 初始化其他服务\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n              this.layerPickService = new LayerPickService(this);\n\n              // 颜色纹理服务\n              this.textureService = new TextureService(this);\n              this.log(IDebugLog.LayerInitStart);\n              // 触发 init 生命周期插件\n              _context.next = 31;\n              return this.hooks.init.promise();\n            case 31:\n              this.log(IDebugLog.LayerInitEnd);\n              this.inited = true;\n              // add mask layer\n              // 触发初始化完成事件;\n              this.emit('inited', {\n                target: this,\n                type: 'inited'\n              });\n              this.emit('add', {\n                target: this,\n                type: 'add'\n              });\n              this.hooks.afterInit.call();\n            case 36:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"log\",\n    value: function log(logType) {\n      var _this$debugService;\n      var step = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'init';\n      // @ts-ignore 瓦片、瓦片图层目前不参与日志\n      if (this.tileLayer || this.isTileLayer) {\n        return;\n      }\n      var key = \"\".concat(this.id, \".\").concat(step, \".\").concat(logType);\n      var values = {\n        id: this.id,\n        type: this.type\n      };\n      (_this$debugService = this.debugService) === null || _this$debugService === void 0 || _this$debugService.log(key, values);\n    }\n  }, {\n    key: \"updateModelData\",\n    value: function updateModelData(data) {\n      if (data.attributes && data.elements) {\n        this.models.map(function (m) {\n          m.updateAttributesAndElements(data.attributes, data.elements);\n        });\n      } else {\n        console.warn('data error');\n      }\n    }\n  }, {\n    key: \"setLayerPickService\",\n    value: function setLayerPickService(layerPickService) {\n      this.layerPickService = layerPickService;\n    }\n    /**\n     * Model初始化前需要更新Model样式\n     */\n  }, {\n    key: \"prepareBuildModel\",\n    value: function prepareBuildModel() {\n      if (Object.keys(this.needUpdateConfig || {}).length !== 0) {\n        this.updateLayerConfig({});\n      }\n\n      // 启动动画\n      var _this$getLayerConfig2 = this.getLayerConfig(),\n        animateOption = _this$getLayerConfig2.animateOption;\n      if (animateOption !== null && animateOption !== void 0 && animateOption.enable) {\n        this.layerService.startAnimate();\n        this.animateStatus = true;\n      }\n    }\n  }, {\n    key: \"color\",\n    value: function color(field, values, updateOptions) {\n      this.updateStyleAttribute('color', field, values, updateOptions);\n      return this;\n    }\n\n    // 为对应的图层传入纹理的编号名称（point/image 在 shape 方法中传入纹理名称的方法并不通用）\n  }, {\n    key: \"texture\",\n    value: function texture(field, values, updateOptions) {\n      this.updateStyleAttribute('texture', field, values, updateOptions);\n      return this;\n    }\n  }, {\n    key: \"rotate\",\n    value: function rotate(field, values, updateOptions) {\n      this.updateStyleAttribute('rotate', field, values, updateOptions);\n      return this;\n    }\n  }, {\n    key: \"size\",\n    value: function size(field, values, updateOptions) {\n      this.updateStyleAttribute('size', field, values, updateOptions);\n      return this;\n    }\n    // 对mapping后的数据过滤，scale保持不变\n  }, {\n    key: \"filter\",\n    value: function filter(field, values, updateOptions) {\n      var flag = this.updateStyleAttribute('filter', field, values, updateOptions);\n      this.dataState.dataSourceNeedUpdate = flag && this.inited;\n      return this;\n    }\n  }, {\n    key: \"shape\",\n    value: function shape(field, values, updateOptions) {\n      this.shapeOption = {\n        field: field,\n        values: values\n      };\n      var flag = this.updateStyleAttribute('shape', field, values, updateOptions);\n      this.dataState.dataSourceNeedUpdate = flag && this.inited;\n      return this;\n    }\n  }, {\n    key: \"label\",\n    value: function label(field, values, updateOptions) {\n      this.pendingStyleAttributes.push({\n        attributeName: 'label',\n        attributeField: field,\n        attributeValues: values,\n        updateOptions: updateOptions\n      });\n      return this;\n    }\n  }, {\n    key: \"animate\",\n    value: function animate(options) {\n      var rawAnimate = {};\n      if (isObject(options)) {\n        rawAnimate.enable = true;\n        rawAnimate = _objectSpread(_objectSpread({}, rawAnimate), options);\n      } else {\n        rawAnimate.enable = options;\n      }\n      this.updateLayerConfig({\n        animateOption: rawAnimate\n      });\n      return this;\n    }\n  }, {\n    key: \"source\",\n    value: function source(data, options) {\n      if ((data === null || data === void 0 ? void 0 : data.type) === 'source') {\n        // 判断是否为source\n        this.setSource(data);\n        return this;\n      }\n      // 设置source 配置\n      this.sourceOption = {\n        data: data,\n        options: options\n      };\n      this.clusterZoom = 0;\n      return this;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, options) {\n      var _this4 = this;\n      if (this.inited) {\n        this.log(IDebugLog.SourceInitStart, ILayerStage.UPDATE);\n        this.layerSource.setData(data, options);\n        this.log(IDebugLog.SourceInitEnd, ILayerStage.UPDATE);\n      } else {\n        this.on('inited', function () {\n          _this4.log(IDebugLog.SourceInitStart, ILayerStage.UPDATE);\n          var currentSource = _this4.getSource();\n          if (!currentSource) {\n            // 执行 setData 的时候 source 还不存在（还未执行 addLayer）\n            _this4.source(new Source(data, options));\n          } else {\n            _this4.layerSource.setData(data, options);\n          }\n          _this4.layerSource.once('update', function () {\n            _this4.log(IDebugLog.SourceInitEnd, ILayerStage.UPDATE);\n          });\n        });\n      }\n      return this;\n    }\n  }, {\n    key: \"style\",\n    value: function style(options) {\n      var _this5 = this;\n      var passes = options.passes,\n        rest = _objectWithoutProperties(options, _excluded);\n      // passes 特殊处理\n      if (passes) {\n        normalizePasses(passes).forEach(function (pass) {\n          var postProcessingPass = _this5.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(pass[0]);\n          if (postProcessingPass) {\n            postProcessingPass.updateOptions(pass[1]);\n          }\n        });\n      }\n      // 兼容 borderColor borderWidth\n      // @ts-ignore\n      if (rest.borderColor) {\n        // @ts-ignore\n        rest.stroke = rest.borderColor;\n      }\n      // @ts-ignore\n      if (rest.borderWidth) {\n        // @ts-ignore\n        rest.strokeWidth = rest.borderWidth;\n      }\n\n      // 兼容老版本的写法 ['field, 'value']\n      var newOption = rest;\n      Object.keys(rest).forEach(function (key) {\n        // @ts-ignore\n        var values = rest[key];\n        if (Array.isArray(values) && values.length === 2 && !isNumber(values[0]) && !isNumber(values[1])) {\n          newOption[key] = {\n            field: values[0],\n            value: values[1]\n          };\n        }\n      });\n      this.encodeStyle(newOption);\n      this.updateLayerConfig(newOption);\n      return this;\n    }\n\n    // 参与数据映射的字段 encodeing\n  }, {\n    key: \"encodeStyle\",\n    value: function encodeStyle(options) {\n      var _this6 = this;\n      Object.keys(options).forEach(function (key) {\n        if (\n        // 需要数据映射\n        [].concat(_toConsumableArray(_this6.enableShaderEncodeStyles), _toConsumableArray(_this6.enableDataEncodeStyles)).includes(key) && isPlainObject(options[key]) && (options[key].field || options[key].value) && !isEqual(_this6.encodeStyleAttribute[key], options[key]) // 防止计算属性重复计算\n        ) {\n          _this6.encodeStyleAttribute[key] = options[key];\n          _this6.updateStyleAttribute(key, options[key].field, options[key].value);\n          if (_this6.inited) {\n            _this6.dataState.dataMappingNeedUpdate = true;\n          }\n        } else {\n          // 不需要数据映射\n          if (_this6.encodeStyleAttribute[key]) {\n            delete _this6.encodeStyleAttribute[key]; // 删除已经存在的属性\n            _this6.dataState.dataSourceNeedUpdate = true;\n          }\n        }\n      });\n    }\n  }, {\n    key: \"scale\",\n    value: function scale(field, cfg) {\n      var preOption = _objectSpread({}, this.scaleOptions);\n      if (isObject(field)) {\n        this.scaleOptions = _objectSpread(_objectSpread({}, this.scaleOptions), field);\n      } else {\n        this.scaleOptions[field] = cfg;\n      }\n      if (this.styleAttributeService && !isEqual(preOption, this.scaleOptions)) {\n        var scaleOptions = isObject(field) ? field : _defineProperty({}, field, cfg);\n        this.styleAttributeService.updateScaleAttribute(scaleOptions);\n      }\n      return this;\n    }\n\n    /**\n     * 渲染所有的图层\n     */\n  }, {\n    key: \"renderLayers\",\n    value: function renderLayers() {\n      this.rendering = true;\n      this.layerService.reRender();\n      this.rendering = false;\n    }\n  }, {\n    key: \"prerender\",\n    value: function prerender() {}\n  }, {\n    key: \"render\",\n    value: function render() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (this.tileLayer) {\n        // 瓦片图层执行单独的 render 渲染队列\n        this.tileLayer.render();\n        return this;\n      }\n      this.layerService.beforeRenderData(this);\n      if (this.encodeDataLength <= 0 && !this.forceRender) {\n        return this;\n      }\n      // Tip: this.getEncodedData().length !== 0 这个判断是为了解决在 2.5.x 引入数据纹理后产生的 空数据渲染导致 texture 超出上限问题\n      this.renderModels(options);\n      return this;\n    }\n\n    /**\n     * renderMultiPass 专门用于渲染支持 multipass 的 layer\n     */\n  }, {\n    key: \"renderMultiPass\",\n    value: function () {\n      var _renderMultiPass = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(this.encodeDataLength <= 0 && !this.forceRender)) {\n                _context2.next = 2;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 2:\n              if (!(this.multiPassRenderer && this.multiPassRenderer.getRenderFlag())) {\n                _context2.next = 7;\n                break;\n              }\n              _context2.next = 5;\n              return this.multiPassRenderer.render();\n            case 5:\n              _context2.next = 8;\n              break;\n            case 7:\n              if (this.multiPassRenderer) {\n                // renderPass 触发的渲染\n                this.renderModels();\n              } else {\n                this.renderModels();\n              }\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function renderMultiPass() {\n        return _renderMultiPass.apply(this, arguments);\n      }\n      return renderMultiPass;\n    }()\n  }, {\n    key: \"active\",\n    value: function active(options) {\n      var activeOption = {};\n      activeOption.enableHighlight = isObject(options) ? true : options;\n      if (isObject(options)) {\n        activeOption.enableHighlight = true;\n        if (options.color) {\n          activeOption.highlightColor = options.color;\n        }\n        if (options.mix) {\n          activeOption.activeMix = options.mix;\n        }\n      } else {\n        activeOption.enableHighlight = !!options;\n      }\n      this.updateLayerConfig(activeOption);\n      return this;\n    }\n  }, {\n    key: \"setActive\",\n    value: function setActive(id, options) {\n      var _this7 = this;\n      if (isObject(id)) {\n        var _id$x = id.x,\n          x = _id$x === void 0 ? 0 : _id$x,\n          _id$y = id.y,\n          y = _id$y === void 0 ? 0 : _id$y;\n        this.updateLayerConfig({\n          highlightColor: isObject(options) ? options.color : this.getLayerConfig().highlightColor,\n          activeMix: isObject(options) ? options.mix : this.getLayerConfig().activeMix\n        });\n        this.pick({\n          x: x,\n          y: y\n        });\n      } else {\n        this.updateLayerConfig({\n          pickedFeatureID: id,\n          highlightColor: isObject(options) ? options.color : this.getLayerConfig().highlightColor,\n          activeMix: isObject(options) ? options.mix : this.getLayerConfig().activeMix\n        });\n        this.hooks.beforeHighlight.call(encodePickingColor(id))\n        // @ts-ignore\n        .then(function () {\n          setTimeout(function () {\n            _this7.reRender();\n          }, 1);\n        });\n      }\n    }\n  }, {\n    key: \"select\",\n    value: function select(option) {\n      var activeOption = {};\n      activeOption.enableSelect = isObject(option) ? true : option;\n      if (isObject(option)) {\n        activeOption.enableSelect = true;\n        if (option.color) {\n          activeOption.selectColor = option.color;\n        }\n        if (option.mix) {\n          activeOption.selectMix = option.mix;\n        }\n      } else {\n        activeOption.enableSelect = !!option;\n      }\n      this.updateLayerConfig(activeOption);\n      return this;\n    }\n  }, {\n    key: \"setSelect\",\n    value: function setSelect(id, options) {\n      var _this8 = this;\n      if (isObject(id)) {\n        var _id$x2 = id.x,\n          x = _id$x2 === void 0 ? 0 : _id$x2,\n          _id$y2 = id.y,\n          y = _id$y2 === void 0 ? 0 : _id$y2;\n        this.updateLayerConfig({\n          selectColor: isObject(options) ? options.color : this.getLayerConfig().selectColor,\n          selectMix: isObject(options) ? options.mix : this.getLayerConfig().selectMix\n        });\n        this.pick({\n          x: x,\n          y: y\n        });\n      } else {\n        this.updateLayerConfig({\n          pickedFeatureID: id,\n          selectColor: isObject(options) ? options.color : this.getLayerConfig().selectColor,\n          selectMix: isObject(options) ? options.mix : this.getLayerConfig().selectMix\n        });\n        this.hooks.beforeSelect.call(encodePickingColor(id))\n        // @ts-ignore\n        .then(function () {\n          setTimeout(function () {\n            _this8.reRender();\n          }, 1);\n        });\n      }\n    }\n  }, {\n    key: \"setBlend\",\n    value: function setBlend(type) {\n      this.updateLayerConfig({\n        blend: type\n      });\n      // this.layerModelNeedUpdate = true;\n      this.reRender();\n      return this;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      this.updateLayerConfig({\n        visible: true\n      });\n      this.reRender();\n      this.emit('show');\n      return this;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.updateLayerConfig({\n        visible: false\n      });\n      this.reRender();\n      this.emit('hide');\n      return this;\n    }\n  }, {\n    key: \"setIndex\",\n    value: function setIndex(index) {\n      this.zIndex = index;\n      this.layerService.updateLayerRenderList();\n      this.layerService.renderLayers();\n      return this;\n    }\n  }, {\n    key: \"setCurrentPickId\",\n    value: function setCurrentPickId(id) {\n      this.currentPickId = id;\n    }\n  }, {\n    key: \"getCurrentPickId\",\n    value: function getCurrentPickId() {\n      return this.currentPickId;\n    }\n  }, {\n    key: \"setCurrentSelectedId\",\n    value: function setCurrentSelectedId(id) {\n      this.selectedFeatureID = id;\n    }\n  }, {\n    key: \"getCurrentSelectedId\",\n    value: function getCurrentSelectedId() {\n      return this.selectedFeatureID;\n    }\n  }, {\n    key: \"isVisible\",\n    value: function isVisible() {\n      var zoom = this.mapService.getZoom();\n      var _this$getLayerConfig3 = this.getLayerConfig(),\n        visible = _this$getLayerConfig3.visible,\n        _this$getLayerConfig4 = _this$getLayerConfig3.minZoom,\n        minZoom = _this$getLayerConfig4 === void 0 ? -Infinity : _this$getLayerConfig4,\n        _this$getLayerConfig5 = _this$getLayerConfig3.maxZoom,\n        maxZoom = _this$getLayerConfig5 === void 0 ? Infinity : _this$getLayerConfig5;\n      return !!visible && zoom >= minZoom && zoom < maxZoom;\n    }\n  }, {\n    key: \"setMultiPass\",\n    value: function setMultiPass(enableMultiPass, currentPasses) {\n      this.updateLayerConfig({\n        enableMultiPassRenderer: enableMultiPass\n      });\n      if (currentPasses) {\n        this.updateLayerConfig({\n          passes: currentPasses\n        });\n      }\n      if (enableMultiPass) {\n        var _this$getLayerConfig6 = this.getLayerConfig(),\n          _this$getLayerConfig7 = _this$getLayerConfig6.passes,\n          passes = _this$getLayerConfig7 === void 0 ? [] : _this$getLayerConfig7;\n        this.multiPassRenderer = createMultiPassRenderer(this, passes, this.postProcessingPassFactory, this.normalPassFactory);\n        this.multiPassRenderer.setRenderFlag(true);\n        var _this$rendererService = this.rendererService.getViewportSize(),\n          width = _this$rendererService.width,\n          height = _this$rendererService.height;\n        this.multiPassRenderer.resize(width, height);\n      }\n      return this;\n    }\n  }, {\n    key: \"setMinZoom\",\n    value: function setMinZoom(minZoom) {\n      this.updateLayerConfig({\n        minZoom: minZoom\n      });\n      return this;\n    }\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      var _this$getLayerConfig8 = this.getLayerConfig(),\n        minZoom = _this$getLayerConfig8.minZoom;\n      return minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      var _this$getLayerConfig9 = this.getLayerConfig(),\n        maxZoom = _this$getLayerConfig9.maxZoom;\n      return maxZoom;\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      var cfg = this.getLayerConfig();\n      // @ts-ignore\n      return cfg[name];\n    }\n  }, {\n    key: \"setMaxZoom\",\n    value: function setMaxZoom(maxZoom) {\n      this.updateLayerConfig({\n        maxZoom: maxZoom\n      });\n      return this;\n    }\n  }, {\n    key: \"setAutoFit\",\n    value: function setAutoFit(autoFit) {\n      this.updateLayerConfig({\n        autoFit: autoFit\n      });\n      return this;\n    }\n\n    /**\n     * zoom to layer Bounds\n     */\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(fitBoundsOptions) {\n      if (!this.inited) {\n        this.updateLayerConfig({\n          autoFit: true\n        });\n        return this;\n      }\n      var source = this.getSource();\n      var extent = source.extent;\n      var isValid = extent.some(function (v) {\n        return Math.abs(v) === Infinity;\n      });\n      if (isValid) {\n        return this;\n      }\n      this.mapService.fitBounds([[extent[0], extent[1]], [extent[2], extent[3]]], fitBoundsOptions);\n      return this;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$layerModel, _this$multiPassRender, _this$layerModel2, _this$tileLayer, _this$debugService2;\n      var refresh = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      if (this.isDestroyed) {\n        return;\n      }\n\n      // destroy all UBOs\n      (_this$layerModel = this.layerModel) === null || _this$layerModel === void 0 || _this$layerModel.uniformBuffers.forEach(function (buffer) {\n        buffer.destroy();\n      });\n\n      // remove child layer\n      this.layerChildren.map(function (child) {\n        return child.destroy(false);\n      });\n      this.layerChildren = [];\n\n      // remove mask list maskfence 掩膜需要销毁\n      var _this$getLayerConfig10 = this.getLayerConfig(),\n        maskfence = _this$getLayerConfig10.maskfence;\n      if (maskfence) {\n        this.masks.map(function (mask) {\n          return mask.destroy(false);\n        });\n        this.masks = [];\n      }\n      this.hooks.beforeDestroy.call();\n      // 清除sources事件\n      this.layerSource.off('update', this.sourceEvent);\n      (_this$multiPassRender = this.multiPassRenderer) === null || _this$multiPassRender === void 0 || _this$multiPassRender.destroy();\n      this.textureService.destroy();\n\n      // 清除所有属性以及关联的 vao == 销毁所有 => model this.models.forEach((model) => model.destroy());\n      this.styleAttributeService.clearAllAttributes();\n\n      // 执行每个图层单独的 clearModels 方法 （清除一些额外的 texture、program、buffer 等）\n\n      this.hooks.afterDestroy.call();\n      // Tip: 清除各个图层自定义的 models 资源\n      (_this$layerModel2 = this.layerModel) === null || _this$layerModel2 === void 0 || _this$layerModel2.clearModels(refresh);\n      (_this$tileLayer = this.tileLayer) === null || _this$tileLayer === void 0 || _this$tileLayer.destroy();\n      this.models = [];\n      // 清除图层日志（如果有的话：非瓦片相关）\n      (_this$debugService2 = this.debugService) === null || _this$debugService2 === void 0 || _this$debugService2.removeLog(this.id);\n      this.emit('remove', {\n        target: this,\n        type: 'remove'\n      });\n      this.emit('destroy', {\n        target: this,\n        type: 'destroy'\n      });\n      this.removeAllListeners();\n      this.isDestroyed = true;\n      // 解绑图层容器中的服务\n      // this.container.unbind(TYPES.IStyleAttributeService);\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.styleAttributeService.clearAllAttributes();\n      // 销毁所有 model\n    }\n  }, {\n    key: \"clearModels\",\n    value: function clearModels() {\n      var _this$layerModel3;\n      this.models.forEach(function (model) {\n        return model.destroy();\n      });\n      (_this$layerModel3 = this.layerModel) === null || _this$layerModel3 === void 0 || _this$layerModel3.clearModels();\n      this.models = [];\n    }\n  }, {\n    key: \"isDirty\",\n    value: function isDirty() {\n      return !!(this.styleAttributeService.getLayerStyleAttributes() || []).filter(function (attribute) {\n        return attribute.needRescale || attribute.needRemapping || attribute.needRegenerateVertices;\n      }).length;\n    }\n    // 外部初始化Source\n  }, {\n    key: \"setSource\",\n    value: function setSource(source) {\n      var _this9 = this;\n      // 解除原 sources 事件\n      if (this.layerSource) {\n        this.layerSource.off('update', this.sourceEvent);\n      }\n      this.layerSource = source;\n      this.clusterZoom = 0;\n\n      // 已 inited 且启用聚合进行更新聚合数据\n      if (this.inited && this.layerSource.cluster) {\n        var zoom = this.mapService.getZoom();\n        this.layerSource.updateClusterData(zoom);\n      }\n      if (this.layerSource.inited) {\n        this.sourceEvent();\n      }\n      // this.layerSource.inited 为 true update 事件不会再触发\n      this.layerSource.on('update', function (_ref4) {\n        var type = _ref4.type;\n        if (_this9.coordCenter === undefined) {\n          var _this9$mapService;\n          var layerCenter = _this9.layerSource.center;\n          _this9.coordCenter = layerCenter;\n          if ((_this9$mapService = _this9.mapService) !== null && _this9$mapService !== void 0 && _this9$mapService.setCoordCenter) {\n            _this9.mapService.setCoordCenter(layerCenter);\n          }\n        }\n        if (type === 'update') {\n          if (_this9.tileLayer) {\n            // 瓦片图层独立更新\n            _this9.tileLayer.reload();\n            return;\n          }\n          // source 初始化不需要处理\n          _this9.sourceEvent();\n        }\n      });\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource() {\n      return this.layerSource;\n    }\n  }, {\n    key: \"getScaleOptions\",\n    value: function getScaleOptions() {\n      return this.scaleOptions;\n    }\n  }, {\n    key: \"setEncodedData\",\n    value: function setEncodedData(encodedData) {\n      this.encodedData = encodedData;\n      this.encodeDataLength = encodedData.length;\n    }\n  }, {\n    key: \"getEncodedData\",\n    value: function getEncodedData() {\n      return this.encodedData;\n    }\n  }, {\n    key: \"getScale\",\n    value: function getScale(name) {\n      return this.styleAttributeService.getLayerAttributeScale(name);\n    }\n  }, {\n    key: \"getLegend\",\n    value: function getLegend(name) {\n      var _attribute$scale, _scales$0$option, _attribute$scale2;\n      var attribute = this.styleAttributeService.getLayerStyleAttribute(name);\n      var scales = (attribute === null || attribute === void 0 || (_attribute$scale = attribute.scale) === null || _attribute$scale === void 0 ? void 0 : _attribute$scale.scalers) || [];\n      return {\n        type: (_scales$0$option = scales[0].option) === null || _scales$0$option === void 0 ? void 0 : _scales$0$option.type,\n        field: attribute === null || attribute === void 0 || (_attribute$scale2 = attribute.scale) === null || _attribute$scale2 === void 0 ? void 0 : _attribute$scale2.field,\n        items: this.getLegendItems(name)\n      };\n    }\n  }, {\n    key: \"getLegendItems\",\n    value: function getLegendItems(name) {\n      var scale = this.styleAttributeService.getLayerAttributeScale(name);\n      // 函数自定义映射，没有 scale 返回为空数组\n      if (!scale) {\n        return [];\n      }\n      if (scale.invertExtent) {\n        // 分段类型  Quantize、Quantile、Threshold\n        var items = scale.range().map(function (item) {\n          return _defineProperty({\n            value: scale.invertExtent(item)\n          }, name, item);\n        });\n        return items;\n      } else if (scale.ticks) {\n        // 连续类型 Continuous (Linear, Power, Log, Identity, Time)\n        var _items = scale.ticks().map(function (item) {\n          return _defineProperty({\n            value: item\n          }, name, scale(item));\n        });\n        return _items;\n      } else if (scale !== null && scale !== void 0 && scale.domain) {\n        // 枚举类型 Cat\n        var _items2 = scale.domain().filter(function (item) {\n          return !isUndefined(item);\n        }).map(function (item) {\n          return _defineProperty({\n            value: item\n          }, name, scale(item));\n        });\n        return _items2;\n      }\n      return [];\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(_ref8) {\n      var x = _ref8.x,\n        y = _ref8.y;\n      this.interactionService.triggerHover({\n        x: x,\n        y: y\n      });\n    }\n  }, {\n    key: \"boxSelect\",\n    value: function boxSelect(box, cb) {\n      this.pickingService.boxPickLayer(this, box, cb);\n    }\n  }, {\n    key: \"buildLayerModel\",\n    value: function () {\n      var _buildLayerModel = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(options) {\n        var _this10 = this;\n        var moduleName, vertexShader, fragmentShader, inject, triangulation, styleOption, _options$pickingEnabl, pickingEnabled, rest, _this$shaderModuleSer, vs, fs, uniforms, createModel;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              moduleName = options.moduleName, vertexShader = options.vertexShader, fragmentShader = options.fragmentShader, inject = options.inject, triangulation = options.triangulation, styleOption = options.styleOption, _options$pickingEnabl = options.pickingEnabled, pickingEnabled = _options$pickingEnabl === void 0 ? true : _options$pickingEnabl, rest = _objectWithoutProperties(options, _excluded2);\n              this.shaderModuleService.registerModule(moduleName, {\n                vs: vertexShader,\n                fs: fragmentShader,\n                inject: inject\n              });\n              _this$shaderModuleSer = this.shaderModuleService.getModule(moduleName), vs = _this$shaderModuleSer.vs, fs = _this$shaderModuleSer.fs, uniforms = _this$shaderModuleSer.uniforms;\n              createModel = this.rendererService.createModel;\n              return _context3.abrupt(\"return\", new Promise(function (resolve) {\n                var _this10$styleAttribut = _this10.styleAttributeService.createAttributesAndIndices(_this10.encodedData, triangulation, styleOption),\n                  attributes = _this10$styleAttribut.attributes,\n                  elements = _this10$styleAttribut.elements,\n                  count = _this10$styleAttribut.count;\n                var uniformBuffers = [].concat(_toConsumableArray(_this10.layerModel.uniformBuffers), _toConsumableArray(_this10.rendererService.uniformBuffers), [_this10.getLayerUniformBuffer()]);\n                if (pickingEnabled) {\n                  uniformBuffers.push(_this10.getPickingUniformBuffer());\n                }\n                var modelOptions = _objectSpread({\n                  attributes: attributes,\n                  uniforms: uniforms,\n                  fs: fs,\n                  vs: vs,\n                  elements: elements,\n                  blend: BlendTypes[BlendType.normal],\n                  uniformBuffers: uniformBuffers,\n                  textures: _this10.layerModel.textures\n                }, rest);\n                if (count) {\n                  modelOptions.count = count;\n                }\n                var m = createModel(modelOptions);\n                resolve(m);\n              }));\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function buildLayerModel(_x) {\n        return _buildLayerModel.apply(this, arguments);\n      }\n      return buildLayerModel;\n    }()\n  }, {\n    key: \"createAttributes\",\n    value: function createAttributes(options) {\n      var triangulation = options.triangulation;\n      // @ts-ignore\n      var _this$styleAttributeS = this.styleAttributeService.createAttributes(this.encodedData, triangulation),\n        attributes = _this$styleAttributeS.attributes;\n      return attributes;\n    }\n  }, {\n    key: \"getTime\",\n    value: function getTime() {\n      return this.layerService.clock.getDelta();\n    }\n  }, {\n    key: \"setAnimateStartTime\",\n    value: function setAnimateStartTime() {\n      this.animateStartTime = this.layerService.clock.getElapsedTime();\n    }\n  }, {\n    key: \"stopAnimate\",\n    value: function stopAnimate() {\n      if (this.animateStatus) {\n        this.layerService.stopAnimate();\n        this.animateStatus = false;\n        this.updateLayerConfig({\n          animateOption: {\n            enable: false\n          }\n        });\n      }\n    }\n  }, {\n    key: \"getLayerAnimateTime\",\n    value: function getLayerAnimateTime() {\n      return this.layerService.clock.getElapsedTime() - this.animateStartTime;\n    }\n  }, {\n    key: \"needPick\",\n    value: function needPick(type) {\n      var _this$getLayerConfig11 = this.getLayerConfig(),\n        _this$getLayerConfig12 = _this$getLayerConfig11.enableHighlight,\n        enableHighlight = _this$getLayerConfig12 === void 0 ? true : _this$getLayerConfig12,\n        _this$getLayerConfig13 = _this$getLayerConfig11.enableSelect,\n        enableSelect = _this$getLayerConfig13 === void 0 ? true : _this$getLayerConfig13;\n      // 判断layer是否监听事件;\n      var isPick = this.eventNames().indexOf(type) !== -1 || this.eventNames().indexOf('un' + type) !== -1;\n      if ((type === 'click' || type === 'dblclick') && enableSelect) {\n        isPick = true;\n      }\n      if (type === 'mousemove' && (enableHighlight || this.eventNames().indexOf('mouseenter') !== -1 || this.eventNames().indexOf('unmousemove') !== -1 || this.eventNames().indexOf('mouseout') !== -1)) {\n        isPick = true;\n      }\n      return this.isVisible() && isPick;\n    }\n  }, {\n    key: \"buildModels\",\n    value: function () {\n      var _buildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              throw new Error('Method not implemented.');\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      function buildModels() {\n        return _buildModels.apply(this, arguments);\n      }\n      return buildModels;\n    }()\n  }, {\n    key: \"rebuildModels\",\n    value: function () {\n      var _rebuildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return this.buildModels();\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function rebuildModels() {\n        return _rebuildModels.apply(this, arguments);\n      }\n      return rebuildModels;\n    }()\n  }, {\n    key: \"renderMulPass\",\n    value: function () {\n      var _renderMulPass = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(multiPassRenderer) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.next = 2;\n              return multiPassRenderer.render();\n            case 2:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6);\n      }));\n      function renderMulPass(_x2) {\n        return _renderMulPass.apply(this, arguments);\n      }\n      return renderMulPass;\n    }()\n  }, {\n    key: \"renderModels\",\n    value: function renderModels() {\n      var _this11 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // TODO: this.getEncodedData().length > 0 这个判断是为了解决在 2.5.x 引入数据纹理后产生的 空数据渲染导致 texture 超出上限问题\n      if (this.encodeDataLength <= 0 && !this.forceRender) {\n        // 数据为空销毁model\n        this.clearModels();\n        return this;\n      }\n      this.hooks.beforeRender.call();\n      this.models.forEach(function (model) {\n        model.draw({\n          uniforms: _this11.layerModel.getUninforms(),\n          blend: _this11.layerModel.getBlend(),\n          stencil: _this11.layerModel.getStencil(options),\n          textures: _this11.layerModel.textures\n        }, (options === null || options === void 0 ? void 0 : options.ispick) || false);\n      });\n      this.hooks.afterRender.call();\n      return this;\n    }\n  }, {\n    key: \"updateStyleAttribute\",\n    value: function updateStyleAttribute(type, field, values, updateOptions) {\n      // encode diff\n      var preAttribute = this.configService.getAttributeConfig(this.id) || {};\n      // @ts-ignore\n      if (isEqual(preAttribute[type], {\n        field: field,\n        values: values\n      })) {\n        // 检测是否发生更新\n        return false;\n      }\n\n      // 存储 Attribute 瓦片图层使用\n      if (['color', 'size', 'texture', 'rotate', 'filter', 'label', 'shape'].indexOf(type) !== -1) {\n        this.configService.setAttributeConfig(this.id, _defineProperty({}, type, {\n          field: field,\n          values: values\n        }));\n      }\n      if (!this.startInit) {\n        // 开始初始化执行\n        this.pendingStyleAttributes.push({\n          attributeName: type,\n          attributeField: field,\n          attributeValues: values,\n          updateOptions: updateOptions\n        });\n      } else {\n        this.styleAttributeService.updateStyleAttribute(type, {\n          // @ts-ignore\n          scale: _objectSpread({\n            field: field\n          }, this.splitValuesAndCallbackInAttribute(\n          // @ts-ignore\n          values,\n          // @ts-ignore\n          this.getLayerConfig()[field]))\n        },\n        // @ts-ignore\n        updateOptions);\n      }\n      return true;\n    }\n  }, {\n    key: \"getLayerAttributeConfig\",\n    value: function getLayerAttributeConfig() {\n      return this.configService.getAttributeConfig(this.id);\n    }\n  }, {\n    key: \"getShaderPickStat\",\n    value: function getShaderPickStat() {\n      return this.layerService.getShaderPickStat();\n    }\n\n    /**\n     * 继承空方法\n     * @param time\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"setEarthTime\",\n    value: function setEarthTime(time) {\n      console.warn('empty fn');\n    }\n\n    // 数据处理 在数据进行 mapping 生成 encodeData 之前对数据进行处理\n    // 在各个 layer 中继承\n  }, {\n    key: \"processData\",\n    value: function processData(filterData) {\n      return filterData;\n    }\n  }, {\n    key: \"getModelType\",\n    value: function getModelType() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"getDefaultConfig\",\n    value: function getDefaultConfig() {\n      return {};\n    }\n  }, {\n    key: \"initLayerModels\",\n    value: function () {\n      var _initLayerModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n        var layerUniforms, pickingUniforms;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              this.models.forEach(function (model) {\n                return model.destroy();\n              });\n              this.models = [];\n              this.uniformBuffers.forEach(function (buffer) {\n                buffer.destroy();\n              });\n              this.uniformBuffers = [];\n              // Layer Uniform\n              layerUniforms = this.rendererService.createBuffer({\n                data: new Float32Array(16 + 4).fill(0),\n                // u_Mvp\n                isUBO: true\n              });\n              this.uniformBuffers.push(layerUniforms);\n\n              // Picking Uniform\n              pickingUniforms = this.rendererService.createBuffer({\n                data: new Float32Array(20).fill(0),\n                isUBO: true\n              });\n              this.uniformBuffers.push(pickingUniforms);\n              _context7.next = 10;\n              return this.layerModel.initModels();\n            case 10:\n              this.models = _context7.sent;\n            case 11:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function initLayerModels() {\n        return _initLayerModels.apply(this, arguments);\n      }\n      return initLayerModels;\n    }()\n  }, {\n    key: \"getLayerUniformBuffer\",\n    value: function getLayerUniformBuffer() {\n      return this.uniformBuffers[0];\n    }\n  }, {\n    key: \"getPickingUniformBuffer\",\n    value: function getPickingUniformBuffer() {\n      return this.uniformBuffers[1];\n    }\n  }, {\n    key: \"reRender\",\n    value: function reRender() {\n      if (this.inited) {\n        this.layerService.reRender();\n      }\n    }\n  }, {\n    key: \"splitValuesAndCallbackInAttribute\",\n    value: function splitValuesAndCallbackInAttribute(valuesOrCallback\n    // defaultValues?: unknown[],\n    ) {\n      return {\n        values: isFunction(valuesOrCallback) ? undefined : valuesOrCallback,\n        callback: isFunction(valuesOrCallback) ? valuesOrCallback : undefined\n      };\n    }\n  }]);\n  return BaseLayer;\n}(EventEmitter), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"configService\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class));\nexport { BaseLayer as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}