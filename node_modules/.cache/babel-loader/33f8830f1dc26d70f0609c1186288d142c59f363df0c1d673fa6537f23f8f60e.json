{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { clone } from '@antv/util';\nimport Base from '../base';\nvar DELTA = 0.05;\nvar lensDelegateStyle = {\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  lineWidth: 2,\n  fillOpacity: 0.1,\n  fill: '#ccc'\n};\nvar Fisheye = /** @class */function (_super) {\n  __extends(Fisheye, _super);\n  function Fisheye(config) {\n    return _super.call(this, config) || this;\n  }\n  Fisheye.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'mousemove',\n      d: 1.5,\n      r: 300,\n      delegateStyle: clone(lensDelegateStyle),\n      showLabel: false,\n      maxD: 5,\n      minD: 0,\n      scaleRBy: 'unset',\n      scaleDBy: 'unset',\n      showDPercent: true\n    };\n  };\n  // class-methods-use-this\n  Fisheye.prototype.getEvents = function () {\n    var events;\n    switch (this.get('trigger')) {\n      case 'click':\n        events = {\n          click: 'magnify'\n        };\n        break;\n      case 'drag':\n        events = {\n          click: 'createDelegate'\n        };\n        break;\n      default:\n        events = {\n          mousemove: 'magnify'\n        };\n        break;\n    }\n    return events;\n  };\n  Fisheye.prototype.init = function () {\n    var self = this;\n    var r = self.get('r');\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n  };\n  // Create the delegate when the trigger is drag\n  Fisheye.prototype.createDelegate = function (e) {\n    var _this = this;\n    var self = this;\n    var lensDelegate = self.get('delegate');\n    if (!lensDelegate || lensDelegate.destroyed) {\n      self.magnify(e);\n      lensDelegate = self.get('delegate');\n      // drag to move the lens\n      lensDelegate.on('dragstart', function (evt) {\n        self.set('delegateCenterDiff', {\n          x: lensDelegate.attr('x') - evt.x,\n          y: lensDelegate.attr('y') - evt.y\n        });\n      });\n      lensDelegate.on('drag', function (evt) {\n        self.magnify(evt);\n      });\n      // 绑定调整范围（r）和缩放系数(d)的监听\n      // 由于 drag 用于改变 lens 位置, 因此在此模式下, drag 不能用于调整 r 和 d\n      // scaling d\n      if (this.get('scaleDBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          _this.scaleDByWheel(evt);\n        });\n      }\n      // scaling r\n      if (this.get('scaleRBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          self.scaleRByWheel(evt);\n        });\n      }\n    }\n  };\n  /**\n   * Scale the range by wheel\n   * @param e mouse wheel event\n   */\n  Fisheye.prototype.scaleRByWheel = function (e) {\n    var self = this;\n    if (!e || !e.originalEvent) return;\n    if (e.preventDefault) e.preventDefault();\n    var graph = self.get('graph');\n    var ratio;\n    var lensDelegate = self.get('delegate');\n    var lensCenter = lensDelegate ? {\n      x: lensDelegate.attr('x'),\n      y: lensDelegate.attr('y')\n    } : undefined;\n    var mousePos = lensCenter || graph.getPointByClient(e.clientX, e.clientY);\n    if (e.originalEvent.wheelDelta < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.set('delegateCenterDiff', undefined);\n    self.magnify(e, mousePos);\n  };\n  /**\n   * Scale the range by dragging\n   * @param e mouse event\n   */\n  Fisheye.prototype.scaleRByDrag = function (e) {\n    var self = this;\n    if (!e) return;\n    var dragPrePos = self.get('dragPrePos');\n    var graph = self.get('graph');\n    var ratio;\n    var mousePos = graph.getPointByClient(e.clientX, e.clientY);\n    if (e.x - dragPrePos.x < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.magnify(e, mousePos);\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Scale the magnifying factor by wheel\n   * @param e mouse wheel event\n   */\n  Fisheye.prototype.scaleDByWheel = function (evt) {\n    var self = this;\n    if (!evt && !evt.originalEvent) return;\n    if (evt.preventDefault) evt.preventDefault();\n    var delta = 0;\n    if (evt.originalEvent.wheelDelta < 0) {\n      delta = -0.1;\n    } else {\n      delta = 0.1;\n    }\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      var lensDelegate = self.get('delegate');\n      var lensCenter = lensDelegate ? {\n        x: lensDelegate.attr('x'),\n        y: lensDelegate.attr('y')\n      } : undefined;\n      self.set('delegateCenterDiff', undefined);\n      self.magnify(evt, lensCenter);\n    }\n  };\n  /**\n   * Scale the magnifying factor by dragging\n   * @param e mouse event\n   */\n  Fisheye.prototype.scaleDByDrag = function (e) {\n    var self = this;\n    var dragPrePos = self.get('dragPrePos');\n    var delta = e.x - dragPrePos.x > 0 ? 0.1 : -0.1;\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      self.magnify(e);\n    }\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Response function for mousemove, click, or drag to magnify\n   * @param e mouse event\n   */\n  Fisheye.prototype.magnify = function (e, mousePos) {\n    var self = this;\n    self.restoreCache();\n    var graph = self.get('graph');\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var showLabel = self.get('showLabel');\n    var r = self.get('r');\n    var r2 = self.get('r2');\n    var d = self.get('d');\n    var molecularParam = self.get('molecularParam');\n    var nodes = graph.getNodes();\n    var nodeLength = nodes.length;\n    var mCenter = mousePos ? {\n      x: mousePos.x,\n      y: mousePos.y\n    } : {\n      x: e.x,\n      y: e.y\n    };\n    if (self.get('dragging') && (self.get('trigger') === 'mousemove' || self.get('trigger') === 'click')) {\n      mCenter = self.get('cacheCenter');\n    }\n    var delegateCenterDiff = self.get('delegateCenterDiff');\n    if (delegateCenterDiff) {\n      mCenter.x += delegateCenterDiff.x;\n      mCenter.y += delegateCenterDiff.y;\n    }\n    self.updateDelegate(mCenter, r);\n    for (var i = 0; i < nodeLength; i++) {\n      var model = nodes[i].getModel();\n      var x = model.x,\n        y = model.y;\n      if (isNaN(x) || isNaN(y)) continue;\n      // the square of the distance between the node and the magnified center\n      var dist2 = (x - mCenter.x) * (x - mCenter.x) + (y - mCenter.y) * (y - mCenter.y);\n      if (!isNaN(dist2) && dist2 < r2 && dist2 !== 0) {\n        var dist = Math.sqrt(dist2);\n        // (r * (d + 1) * (dist / r)) / (d * (dist / r) + 1);\n        var magnifiedDist = molecularParam * dist / (d * dist + r);\n        var cos = (x - mCenter.x) / dist;\n        var sin = (y - mCenter.y) / dist;\n        model.x = cos * magnifiedDist + mCenter.x;\n        model.y = sin * magnifiedDist + mCenter.y;\n        if (!cachedOriginPositions[model.id]) {\n          cachedOriginPositions[model.id] = {\n            x: x,\n            y: y,\n            texts: []\n          };\n        }\n        cachedMagnifiedModels.push(model);\n        if (showLabel && 2 * dist < r) {\n          var node = nodes[i];\n          var nodeGroup = node.getContainer();\n          var shapes = nodeGroup.getChildren();\n          var shapeLength = shapes.length;\n          for (var j = 0; j < shapeLength; j++) {\n            var shape = shapes[j];\n            if (shape.get('type') === 'text') {\n              cachedOriginPositions[model.id].texts.push({\n                visible: shape.get('visible'),\n                shape: shape\n              });\n              shape.set('visible', true);\n            }\n          }\n        }\n      }\n    }\n    graph.refreshPositions();\n  };\n  /**\n   * Restore the cache nodes while magnifying\n   */\n  Fisheye.prototype.restoreCache = function () {\n    var self = this;\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var cacheLength = cachedMagnifiedModels.length;\n    for (var i = 0; i < cacheLength; i++) {\n      var node = cachedMagnifiedModels[i];\n      var id = node.id;\n      var ori = cachedOriginPositions[id];\n      node.x = ori.x;\n      node.y = ori.y;\n      var textLength = ori.texts.length;\n      for (var j = 0; j < textLength; j++) {\n        var text = ori.texts[j];\n        text.shape.set('visible', text.visible);\n      }\n    }\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n  };\n  /**\n   * Adjust part of the parameters, including trigger, d, r, maxR, minR, maxD, minD, scaleRBy, and scaleDBy\n   * @param {FisheyeConfig} cfg\n   */\n  Fisheye.prototype.updateParams = function (cfg) {\n    var self = this;\n    var r = cfg.r,\n      d = cfg.d,\n      trigger = cfg.trigger,\n      minD = cfg.minD,\n      maxD = cfg.maxD,\n      minR = cfg.minR,\n      maxR = cfg.maxR,\n      scaleDBy = cfg.scaleDBy,\n      scaleRBy = cfg.scaleRBy;\n    if (!isNaN(cfg.r)) {\n      self.set('r', r);\n      self.set('r2', r * r);\n    }\n    if (!isNaN(d)) {\n      self.set('d', d);\n    }\n    if (!isNaN(maxD)) {\n      self.set('maxD', maxD);\n    }\n    if (!isNaN(minD)) {\n      self.set('minD', minD);\n    }\n    if (!isNaN(maxR)) {\n      self.set('maxR', maxR);\n    }\n    if (!isNaN(minR)) {\n      self.set('minR', minR);\n    }\n    var nd = self.get('d');\n    var nr = self.get('r');\n    self.set('molecularParam', (nd + 1) * nr);\n    if (trigger === 'mousemove' || trigger === 'click' || trigger === 'drag') {\n      self.set('trigger', trigger);\n    }\n    if (scaleDBy === 'drag' || scaleDBy === 'wheel' || scaleDBy === 'unset') {\n      self.set('scaleDBy', scaleDBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n    if (scaleRBy === 'drag' || scaleRBy === 'wheel' || scaleRBy === 'unset') {\n      self.set('scaleRBy', scaleRBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n  };\n  /**\n   * Update the delegate shape of the lens\n   * @param {Point} mCenter the center of the shape\n   * @param {number} r the radius of the shape\n   */\n  Fisheye.prototype.updateDelegate = function (mCenter, r) {\n    var _this = this;\n    var self = this;\n    var graph = self.get('graph');\n    var lensDelegate = self.get('delegate');\n    if (!lensDelegate || lensDelegate.destroyed) {\n      // 拖动多个\n      var parent_1 = graph.get('group');\n      var attrs = self.get('delegateStyle') || lensDelegateStyle;\n      // model上的x, y是相对于图形中心的, delegateShape是g实例, x,y是绝对坐标\n      lensDelegate = parent_1.addShape('circle', {\n        attrs: __assign({\n          r: r / 1.5,\n          x: mCenter.x,\n          y: mCenter.y\n        }, attrs),\n        name: 'lens-shape',\n        draggable: true\n      });\n      if (this.get('trigger') !== 'drag') {\n        // 调整范围 r 的监听\n        if (this.get('scaleRBy') === 'wheel') {\n          // 使用滚轮调整 r\n          lensDelegate.on('mousewheel', function (evt) {\n            self.scaleRByWheel(evt);\n          });\n        } else if (this.get('scaleRBy') === 'drag') {\n          // 使用拖拽调整 r\n          lensDelegate.on('dragstart', function (e) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: e.x,\n              y: e.y\n            });\n            self.set('dragPrePos', {\n              x: e.x,\n              y: e.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            self.scaleRByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (e) {\n            self.set('dragging', false);\n          });\n        }\n        // 调整缩放系数 d 的监听\n        if (this.get('scaleDBy') === 'wheel') {\n          // 使用滚轮调整 d\n          lensDelegate.on('mousewheel', function (evt) {\n            _this.scaleDByWheel(evt);\n          });\n        } else if (this.get('scaleDBy') === 'drag') {\n          // 使用拖拽调整 d\n          lensDelegate.on('dragstart', function (evt) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: evt.x,\n              y: evt.y\n            });\n            self.set('dragPrePos', {\n              x: evt.x,\n              y: evt.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            _this.scaleDByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (evt) {\n            self.set('dragging', false);\n          });\n        }\n      }\n    } else {\n      lensDelegate.attr({\n        x: mCenter.x,\n        y: mCenter.y,\n        r: r / 1.5\n      });\n    }\n    // 绘制缩放系数百分比文本\n    if (self.get('showDPercent')) {\n      var percent = Math.round((self.get('d') - self.get('minD')) / (self.get('maxD') - self.get('minD')) * 100);\n      var dPercentText = self.get('dPercentText');\n      var textY = mCenter.y + r / 1.5 + 16;\n      if (!dPercentText || dPercentText.destroyed) {\n        var parent_2 = graph.get('group');\n        dPercentText = parent_2.addShape('text', {\n          attrs: {\n            text: \"\".concat(percent, \"%\"),\n            x: mCenter.x,\n            y: textY,\n            fill: '#aaa',\n            stroke: '#fff',\n            lineWidth: 1,\n            fontSize: 12\n          }\n        });\n        self.set('dPercentText', dPercentText);\n      } else {\n        dPercentText.attr({\n          text: \"\".concat(percent, \"%\"),\n          x: mCenter.x,\n          y: textY\n        });\n      }\n    }\n    self.set('delegate', lensDelegate);\n  };\n  /**\n   * Clear the fisheye lens\n   */\n  Fisheye.prototype.clear = function () {\n    var graph = this.get('graph');\n    this.restoreCache();\n    graph.refreshPositions();\n    var lensDelegate = this.get('delegate');\n    if (lensDelegate && !lensDelegate.destroyed) {\n      lensDelegate.remove();\n      lensDelegate.destroy();\n    }\n    var dPercentText = this.get('dPercentText');\n    if (dPercentText && !dPercentText.destroyed) {\n      dPercentText.remove();\n      dPercentText.destroy();\n    }\n  };\n  /**\n   * Destroy the component\n   */\n  Fisheye.prototype.destroy = function () {\n    this.clear();\n  };\n  return Fisheye;\n}(Base);\nexport default Fisheye;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","clone","Base","DELTA","lensDelegateStyle","stroke","strokeOpacity","lineWidth","fillOpacity","fill","Fisheye","_super","config","getDefaultCfgs","trigger","r","delegateStyle","showLabel","maxD","minD","scaleRBy","scaleDBy","showDPercent","getEvents","events","get","click","mousemove","init","self","set","createDelegate","e","_this","lensDelegate","destroyed","magnify","on","evt","x","attr","y","scaleDByWheel","scaleRByWheel","originalEvent","preventDefault","graph","ratio","lensCenter","undefined","mousePos","getPointByClient","clientX","clientY","wheelDelta","maxR","minR","scaleRByDrag","dragPrePos","delta","newD","scaleDByDrag","restoreCache","cachedMagnifiedModels","cachedOriginPositions","r2","molecularParam","nodes","getNodes","nodeLength","mCenter","delegateCenterDiff","updateDelegate","model","getModel","isNaN","dist2","dist","Math","sqrt","magnifiedDist","cos","sin","id","texts","push","node","nodeGroup","getContainer","shapes","getChildren","shapeLength","j","shape","visible","refreshPositions","cacheLength","ori","textLength","text","updateParams","cfg","nd","nr","remove","destroy","dPercentText","parent_1","attrs","addShape","name","draggable","percent","round","textY","parent_2","concat","fontSize","clear"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-plugin/es/fisheye/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { clone } from '@antv/util';\nimport Base from '../base';\nvar DELTA = 0.05;\nvar lensDelegateStyle = {\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  lineWidth: 2,\n  fillOpacity: 0.1,\n  fill: '#ccc'\n};\nvar Fisheye = /** @class */function (_super) {\n  __extends(Fisheye, _super);\n  function Fisheye(config) {\n    return _super.call(this, config) || this;\n  }\n  Fisheye.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'mousemove',\n      d: 1.5,\n      r: 300,\n      delegateStyle: clone(lensDelegateStyle),\n      showLabel: false,\n      maxD: 5,\n      minD: 0,\n      scaleRBy: 'unset',\n      scaleDBy: 'unset',\n      showDPercent: true\n    };\n  };\n  // class-methods-use-this\n  Fisheye.prototype.getEvents = function () {\n    var events;\n    switch (this.get('trigger')) {\n      case 'click':\n        events = {\n          click: 'magnify'\n        };\n        break;\n      case 'drag':\n        events = {\n          click: 'createDelegate'\n        };\n        break;\n      default:\n        events = {\n          mousemove: 'magnify'\n        };\n        break;\n    }\n    return events;\n  };\n  Fisheye.prototype.init = function () {\n    var self = this;\n    var r = self.get('r');\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n  };\n  // Create the delegate when the trigger is drag\n  Fisheye.prototype.createDelegate = function (e) {\n    var _this = this;\n    var self = this;\n    var lensDelegate = self.get('delegate');\n    if (!lensDelegate || lensDelegate.destroyed) {\n      self.magnify(e);\n      lensDelegate = self.get('delegate');\n      // drag to move the lens\n      lensDelegate.on('dragstart', function (evt) {\n        self.set('delegateCenterDiff', {\n          x: lensDelegate.attr('x') - evt.x,\n          y: lensDelegate.attr('y') - evt.y\n        });\n      });\n      lensDelegate.on('drag', function (evt) {\n        self.magnify(evt);\n      });\n      // 绑定调整范围（r）和缩放系数(d)的监听\n      // 由于 drag 用于改变 lens 位置, 因此在此模式下, drag 不能用于调整 r 和 d\n      // scaling d\n      if (this.get('scaleDBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          _this.scaleDByWheel(evt);\n        });\n      }\n      // scaling r\n      if (this.get('scaleRBy') === 'wheel') {\n        lensDelegate.on('mousewheel', function (evt) {\n          self.scaleRByWheel(evt);\n        });\n      }\n    }\n  };\n  /**\n   * Scale the range by wheel\n   * @param e mouse wheel event\n   */\n  Fisheye.prototype.scaleRByWheel = function (e) {\n    var self = this;\n    if (!e || !e.originalEvent) return;\n    if (e.preventDefault) e.preventDefault();\n    var graph = self.get('graph');\n    var ratio;\n    var lensDelegate = self.get('delegate');\n    var lensCenter = lensDelegate ? {\n      x: lensDelegate.attr('x'),\n      y: lensDelegate.attr('y')\n    } : undefined;\n    var mousePos = lensCenter || graph.getPointByClient(e.clientX, e.clientY);\n    if (e.originalEvent.wheelDelta < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.set('delegateCenterDiff', undefined);\n    self.magnify(e, mousePos);\n  };\n  /**\n   * Scale the range by dragging\n   * @param e mouse event\n   */\n  Fisheye.prototype.scaleRByDrag = function (e) {\n    var self = this;\n    if (!e) return;\n    var dragPrePos = self.get('dragPrePos');\n    var graph = self.get('graph');\n    var ratio;\n    var mousePos = graph.getPointByClient(e.clientX, e.clientY);\n    if (e.x - dragPrePos.x < 0) {\n      ratio = 1 - DELTA;\n    } else {\n      ratio = 1 / (1 - DELTA);\n    }\n    var maxR = self.get('maxR');\n    var minR = self.get('minR');\n    var r = self.get('r');\n    if (r > (maxR || graph.get('height')) && ratio > 1 || r < (minR || graph.get('height') * 0.05) && ratio < 1) {\n      ratio = 1;\n    }\n    r *= ratio;\n    self.set('r', r);\n    self.set('r2', r * r);\n    var d = self.get('d');\n    self.set('molecularParam', (d + 1) * r);\n    self.magnify(e, mousePos);\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Scale the magnifying factor by wheel\n   * @param e mouse wheel event\n   */\n  Fisheye.prototype.scaleDByWheel = function (evt) {\n    var self = this;\n    if (!evt && !evt.originalEvent) return;\n    if (evt.preventDefault) evt.preventDefault();\n    var delta = 0;\n    if (evt.originalEvent.wheelDelta < 0) {\n      delta = -0.1;\n    } else {\n      delta = 0.1;\n    }\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      var lensDelegate = self.get('delegate');\n      var lensCenter = lensDelegate ? {\n        x: lensDelegate.attr('x'),\n        y: lensDelegate.attr('y')\n      } : undefined;\n      self.set('delegateCenterDiff', undefined);\n      self.magnify(evt, lensCenter);\n    }\n  };\n  /**\n   * Scale the magnifying factor by dragging\n   * @param e mouse event\n   */\n  Fisheye.prototype.scaleDByDrag = function (e) {\n    var self = this;\n    var dragPrePos = self.get('dragPrePos');\n    var delta = e.x - dragPrePos.x > 0 ? 0.1 : -0.1;\n    var d = self.get('d');\n    var newD = d + delta;\n    var maxD = self.get('maxD');\n    var minD = self.get('minD');\n    if (newD < maxD && newD > minD) {\n      self.set('d', newD);\n      var r = self.get('r');\n      self.set('molecularParam', (newD + 1) * r);\n      self.magnify(e);\n    }\n    self.set('dragPrePos', {\n      x: e.x,\n      y: e.y\n    });\n  };\n  /**\n   * Response function for mousemove, click, or drag to magnify\n   * @param e mouse event\n   */\n  Fisheye.prototype.magnify = function (e, mousePos) {\n    var self = this;\n    self.restoreCache();\n    var graph = self.get('graph');\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var showLabel = self.get('showLabel');\n    var r = self.get('r');\n    var r2 = self.get('r2');\n    var d = self.get('d');\n    var molecularParam = self.get('molecularParam');\n    var nodes = graph.getNodes();\n    var nodeLength = nodes.length;\n    var mCenter = mousePos ? {\n      x: mousePos.x,\n      y: mousePos.y\n    } : {\n      x: e.x,\n      y: e.y\n    };\n    if (self.get('dragging') && (self.get('trigger') === 'mousemove' || self.get('trigger') === 'click')) {\n      mCenter = self.get('cacheCenter');\n    }\n    var delegateCenterDiff = self.get('delegateCenterDiff');\n    if (delegateCenterDiff) {\n      mCenter.x += delegateCenterDiff.x;\n      mCenter.y += delegateCenterDiff.y;\n    }\n    self.updateDelegate(mCenter, r);\n    for (var i = 0; i < nodeLength; i++) {\n      var model = nodes[i].getModel();\n      var x = model.x,\n        y = model.y;\n      if (isNaN(x) || isNaN(y)) continue;\n      // the square of the distance between the node and the magnified center\n      var dist2 = (x - mCenter.x) * (x - mCenter.x) + (y - mCenter.y) * (y - mCenter.y);\n      if (!isNaN(dist2) && dist2 < r2 && dist2 !== 0) {\n        var dist = Math.sqrt(dist2);\n        // (r * (d + 1) * (dist / r)) / (d * (dist / r) + 1);\n        var magnifiedDist = molecularParam * dist / (d * dist + r);\n        var cos = (x - mCenter.x) / dist;\n        var sin = (y - mCenter.y) / dist;\n        model.x = cos * magnifiedDist + mCenter.x;\n        model.y = sin * magnifiedDist + mCenter.y;\n        if (!cachedOriginPositions[model.id]) {\n          cachedOriginPositions[model.id] = {\n            x: x,\n            y: y,\n            texts: []\n          };\n        }\n        cachedMagnifiedModels.push(model);\n        if (showLabel && 2 * dist < r) {\n          var node = nodes[i];\n          var nodeGroup = node.getContainer();\n          var shapes = nodeGroup.getChildren();\n          var shapeLength = shapes.length;\n          for (var j = 0; j < shapeLength; j++) {\n            var shape = shapes[j];\n            if (shape.get('type') === 'text') {\n              cachedOriginPositions[model.id].texts.push({\n                visible: shape.get('visible'),\n                shape: shape\n              });\n              shape.set('visible', true);\n            }\n          }\n        }\n      }\n    }\n    graph.refreshPositions();\n  };\n  /**\n   * Restore the cache nodes while magnifying\n   */\n  Fisheye.prototype.restoreCache = function () {\n    var self = this;\n    var cachedMagnifiedModels = self.get('cachedMagnifiedModels');\n    var cachedOriginPositions = self.get('cachedOriginPositions');\n    var cacheLength = cachedMagnifiedModels.length;\n    for (var i = 0; i < cacheLength; i++) {\n      var node = cachedMagnifiedModels[i];\n      var id = node.id;\n      var ori = cachedOriginPositions[id];\n      node.x = ori.x;\n      node.y = ori.y;\n      var textLength = ori.texts.length;\n      for (var j = 0; j < textLength; j++) {\n        var text = ori.texts[j];\n        text.shape.set('visible', text.visible);\n      }\n    }\n    self.set('cachedMagnifiedModels', []);\n    self.set('cachedOriginPositions', {});\n  };\n  /**\n   * Adjust part of the parameters, including trigger, d, r, maxR, minR, maxD, minD, scaleRBy, and scaleDBy\n   * @param {FisheyeConfig} cfg\n   */\n  Fisheye.prototype.updateParams = function (cfg) {\n    var self = this;\n    var r = cfg.r,\n      d = cfg.d,\n      trigger = cfg.trigger,\n      minD = cfg.minD,\n      maxD = cfg.maxD,\n      minR = cfg.minR,\n      maxR = cfg.maxR,\n      scaleDBy = cfg.scaleDBy,\n      scaleRBy = cfg.scaleRBy;\n    if (!isNaN(cfg.r)) {\n      self.set('r', r);\n      self.set('r2', r * r);\n    }\n    if (!isNaN(d)) {\n      self.set('d', d);\n    }\n    if (!isNaN(maxD)) {\n      self.set('maxD', maxD);\n    }\n    if (!isNaN(minD)) {\n      self.set('minD', minD);\n    }\n    if (!isNaN(maxR)) {\n      self.set('maxR', maxR);\n    }\n    if (!isNaN(minR)) {\n      self.set('minR', minR);\n    }\n    var nd = self.get('d');\n    var nr = self.get('r');\n    self.set('molecularParam', (nd + 1) * nr);\n    if (trigger === 'mousemove' || trigger === 'click' || trigger === 'drag') {\n      self.set('trigger', trigger);\n    }\n    if (scaleDBy === 'drag' || scaleDBy === 'wheel' || scaleDBy === 'unset') {\n      self.set('scaleDBy', scaleDBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n    if (scaleRBy === 'drag' || scaleRBy === 'wheel' || scaleRBy === 'unset') {\n      self.set('scaleRBy', scaleRBy);\n      self.get('delegate').remove();\n      self.get('delegate').destroy();\n      var dPercentText = self.get('dPercentText');\n      if (dPercentText) {\n        dPercentText.remove();\n        dPercentText.destroy();\n      }\n    }\n  };\n  /**\n   * Update the delegate shape of the lens\n   * @param {Point} mCenter the center of the shape\n   * @param {number} r the radius of the shape\n   */\n  Fisheye.prototype.updateDelegate = function (mCenter, r) {\n    var _this = this;\n    var self = this;\n    var graph = self.get('graph');\n    var lensDelegate = self.get('delegate');\n    if (!lensDelegate || lensDelegate.destroyed) {\n      // 拖动多个\n      var parent_1 = graph.get('group');\n      var attrs = self.get('delegateStyle') || lensDelegateStyle;\n      // model上的x, y是相对于图形中心的, delegateShape是g实例, x,y是绝对坐标\n      lensDelegate = parent_1.addShape('circle', {\n        attrs: __assign({\n          r: r / 1.5,\n          x: mCenter.x,\n          y: mCenter.y\n        }, attrs),\n        name: 'lens-shape',\n        draggable: true\n      });\n      if (this.get('trigger') !== 'drag') {\n        // 调整范围 r 的监听\n        if (this.get('scaleRBy') === 'wheel') {\n          // 使用滚轮调整 r\n          lensDelegate.on('mousewheel', function (evt) {\n            self.scaleRByWheel(evt);\n          });\n        } else if (this.get('scaleRBy') === 'drag') {\n          // 使用拖拽调整 r\n          lensDelegate.on('dragstart', function (e) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: e.x,\n              y: e.y\n            });\n            self.set('dragPrePos', {\n              x: e.x,\n              y: e.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            self.scaleRByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (e) {\n            self.set('dragging', false);\n          });\n        }\n        // 调整缩放系数 d 的监听\n        if (this.get('scaleDBy') === 'wheel') {\n          // 使用滚轮调整 d\n          lensDelegate.on('mousewheel', function (evt) {\n            _this.scaleDByWheel(evt);\n          });\n        } else if (this.get('scaleDBy') === 'drag') {\n          // 使用拖拽调整 d\n          lensDelegate.on('dragstart', function (evt) {\n            self.set('dragging', true);\n            self.set('cacheCenter', {\n              x: evt.x,\n              y: evt.y\n            });\n            self.set('dragPrePos', {\n              x: evt.x,\n              y: evt.y\n            });\n          });\n          lensDelegate.on('drag', function (evt) {\n            _this.scaleDByDrag(evt);\n          });\n          lensDelegate.on('dragend', function (evt) {\n            self.set('dragging', false);\n          });\n        }\n      }\n    } else {\n      lensDelegate.attr({\n        x: mCenter.x,\n        y: mCenter.y,\n        r: r / 1.5\n      });\n    }\n    // 绘制缩放系数百分比文本\n    if (self.get('showDPercent')) {\n      var percent = Math.round((self.get('d') - self.get('minD')) / (self.get('maxD') - self.get('minD')) * 100);\n      var dPercentText = self.get('dPercentText');\n      var textY = mCenter.y + r / 1.5 + 16;\n      if (!dPercentText || dPercentText.destroyed) {\n        var parent_2 = graph.get('group');\n        dPercentText = parent_2.addShape('text', {\n          attrs: {\n            text: \"\".concat(percent, \"%\"),\n            x: mCenter.x,\n            y: textY,\n            fill: '#aaa',\n            stroke: '#fff',\n            lineWidth: 1,\n            fontSize: 12\n          }\n        });\n        self.set('dPercentText', dPercentText);\n      } else {\n        dPercentText.attr({\n          text: \"\".concat(percent, \"%\"),\n          x: mCenter.x,\n          y: textY\n        });\n      }\n    }\n    self.set('delegate', lensDelegate);\n  };\n  /**\n   * Clear the fisheye lens\n   */\n  Fisheye.prototype.clear = function () {\n    var graph = this.get('graph');\n    this.restoreCache();\n    graph.refreshPositions();\n    var lensDelegate = this.get('delegate');\n    if (lensDelegate && !lensDelegate.destroyed) {\n      lensDelegate.remove();\n      lensDelegate.destroy();\n    }\n    var dPercentText = this.get('dPercentText');\n    if (dPercentText && !dPercentText.destroyed) {\n      dPercentText.remove();\n      dPercentText.destroy();\n    }\n  };\n  /**\n   * Destroy the component\n   */\n  Fisheye.prototype.destroy = function () {\n    this.clear();\n  };\n  return Fisheye;\n}(Base);\nexport default Fisheye;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}