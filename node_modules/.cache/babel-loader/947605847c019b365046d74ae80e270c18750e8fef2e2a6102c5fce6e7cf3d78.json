{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getData, getURLFromTemplate } from '@antv/l7-utils';\nimport VtSource from \"../source/geojsonvt\";\nvar getVectorTile = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url, tile, requestParameters, getCustomData) {\n    var params, tileUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          params = {\n            x: tile.x,\n            y: tile.y,\n            z: tile.z\n          };\n          tileUrl = getURLFromTemplate(url, params);\n          return _context.abrupt(\"return\", new Promise(function (resolve) {\n            if (getCustomData) {\n              getCustomData(params, function (err, data) {\n                if (err || !data) {\n                  var vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: []\n                      }\n                    }\n                  };\n                  var vectorSource = new VtSource(vectorTile, tile.x, tile.y, tile.z);\n                  resolve(vectorSource);\n                } else {\n                  var _vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: data.features\n                      }\n                    }\n                  };\n                  var _vectorSource = new VtSource(_vectorTile, tile.x, tile.y, tile.z);\n                  resolve(_vectorSource);\n                }\n              });\n            } else {\n              getData(_objectSpread(_objectSpread({}, requestParameters), {}, {\n                url: tileUrl\n              }), function (err, data) {\n                if (err || !data) {\n                  var vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: []\n                      }\n                    }\n                  };\n                  var vectorSource = new VtSource(vectorTile, tile.x, tile.y, tile.z);\n                  resolve(vectorSource);\n                } else {\n                  var json = JSON.parse(data);\n                  var _vectorTile2 = {\n                    layers: {\n                      defaultLayer: {\n                        features: json\n                      }\n                    }\n                  };\n                  var _vectorSource2 = new VtSource(_vectorTile2, tile.x, tile.y, tile.z);\n                  resolve(_vectorSource2);\n                }\n              });\n            }\n          }));\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getVectorTile(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default function jsonTile(url, cfg) {\n  var getTileData = function getTileData(_, tile) {\n    return getVectorTile(url, tile, cfg === null || cfg === void 0 ? void 0 : cfg.requestParameters, cfg.getCustomData);\n  };\n  var tilesetOptions = _objectSpread(_objectSpread({}, cfg), {}, {\n    getTileData: getTileData\n  });\n  return {\n    dataArray: [],\n    tilesetOptions: tilesetOptions,\n    isTile: true\n  };\n}","map":{"version":3,"names":["_objectSpread","_asyncToGenerator","_regeneratorRuntime","getData","getURLFromTemplate","VtSource","getVectorTile","_ref","mark","_callee","url","tile","requestParameters","getCustomData","params","tileUrl","wrap","_callee$","_context","prev","next","x","y","z","abrupt","Promise","resolve","err","data","vectorTile","layers","defaultLayer","features","vectorSource","_vectorTile","_vectorSource","json","JSON","parse","_vectorTile2","_vectorSource2","stop","_x","_x2","_x3","_x4","apply","arguments","jsonTile","cfg","getTileData","_","tilesetOptions","dataArray","isTile"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-source/es/parser/jsonTile.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { getData, getURLFromTemplate } from '@antv/l7-utils';\nimport VtSource from \"../source/geojsonvt\";\nvar getVectorTile = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url, tile, requestParameters, getCustomData) {\n    var params, tileUrl;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          params = {\n            x: tile.x,\n            y: tile.y,\n            z: tile.z\n          };\n          tileUrl = getURLFromTemplate(url, params);\n          return _context.abrupt(\"return\", new Promise(function (resolve) {\n            if (getCustomData) {\n              getCustomData(params, function (err, data) {\n                if (err || !data) {\n                  var vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: []\n                      }\n                    }\n                  };\n                  var vectorSource = new VtSource(vectorTile, tile.x, tile.y, tile.z);\n                  resolve(vectorSource);\n                } else {\n                  var _vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: data.features\n                      }\n                    }\n                  };\n                  var _vectorSource = new VtSource(_vectorTile, tile.x, tile.y, tile.z);\n                  resolve(_vectorSource);\n                }\n              });\n            } else {\n              getData(_objectSpread(_objectSpread({}, requestParameters), {}, {\n                url: tileUrl\n              }), function (err, data) {\n                if (err || !data) {\n                  var vectorTile = {\n                    layers: {\n                      defaultLayer: {\n                        features: []\n                      }\n                    }\n                  };\n                  var vectorSource = new VtSource(vectorTile, tile.x, tile.y, tile.z);\n                  resolve(vectorSource);\n                } else {\n                  var json = JSON.parse(data);\n                  var _vectorTile2 = {\n                    layers: {\n                      defaultLayer: {\n                        features: json\n                      }\n                    }\n                  };\n                  var _vectorSource2 = new VtSource(_vectorTile2, tile.x, tile.y, tile.z);\n                  resolve(_vectorSource2);\n                }\n              });\n            }\n          }));\n        case 3:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function getVectorTile(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default function jsonTile(url, cfg) {\n  var getTileData = function getTileData(_, tile) {\n    return getVectorTile(url, tile, cfg === null || cfg === void 0 ? void 0 : cfg.requestParameters, cfg.getCustomData);\n  };\n  var tilesetOptions = _objectSpread(_objectSpread({}, cfg), {}, {\n    getTileData: getTileData\n  });\n  return {\n    dataArray: [],\n    tilesetOptions: tilesetOptions,\n    isTile: true\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}