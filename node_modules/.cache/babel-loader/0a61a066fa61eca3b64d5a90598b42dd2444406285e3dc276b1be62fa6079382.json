{"ast":null,"code":"import { __assign } from \"tslib\";\nimport { isEmpty, clamp } from '@antv/util';\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\nfunction getRectAttrs(points, size) {\n  var width = Math.abs(points[0].x - points[2].x);\n  var height = Math.abs(points[0].y - points[2].y);\n  var len = Math.min(width, height);\n  if (size) {\n    len = clamp(size, 0, Math.min(width, height));\n  }\n  len = len / 2;\n  var centerX = (points[0].x + points[2].x) / 2;\n  var centerY = (points[0].y + points[2].y) / 2;\n  return {\n    x: centerX - len,\n    y: centerY - len,\n    width: len * 2,\n    height: len * 2\n  };\n}\nregisterShape('polygon', 'square', {\n  draw: function (cfg, container) {\n    if (!isEmpty(cfg.points)) {\n      var shapeAttrs = getStyle(cfg, true, true);\n      var points = this.parsePoints(cfg.points); // 转换为画布坐标\n      return container.addShape('rect', {\n        attrs: __assign(__assign({}, shapeAttrs), getRectAttrs(points, cfg.size)),\n        name: 'polygon'\n      });\n    }\n  },\n  getMarker: function (markerCfg) {\n    var color = markerCfg.color;\n    return {\n      symbol: 'square',\n      style: {\n        r: 4,\n        fill: color\n      }\n    };\n  }\n});","map":{"version":3,"names":["isEmpty","clamp","registerShape","getStyle","getRectAttrs","points","size","width","Math","abs","x","height","y","len","min","centerX","centerY","draw","cfg","container","shapeAttrs","parsePoints","addShape","attrs","__assign","name","getMarker","markerCfg","color","symbol","style","r","fill"],"sources":["../../../../src/geometry/shape/polygon/square.ts"],"sourcesContent":["import { isEmpty, clamp } from '@antv/util';\nimport { IGroup } from '../../../dependents';\nimport { ShapeInfo, ShapeMarkerCfg } from '../../../interface';\n\nimport { registerShape } from '../base';\nimport { getStyle } from '../util/get-style';\n\nfunction getRectAttrs(points: any[], size: number) {\n  const width = Math.abs(points[0].x - points[2].x);\n  const height = Math.abs(points[0].y - points[2].y);\n\n  let len = Math.min(width, height);\n  if (size) {\n    len = clamp(size, 0, Math.min(width, height));\n  }\n  len = len / 2;\n  const centerX = (points[0].x + points[2].x) / 2;\n  const centerY = (points[0].y + points[2].y) / 2;\n\n  return {\n    x: centerX - len,\n    y: centerY - len,\n    width: len * 2,\n    height: len * 2,\n  };\n}\n\nregisterShape('polygon', 'square', {\n  draw(cfg: ShapeInfo, container: IGroup) {\n    if (!isEmpty(cfg.points)) {\n      const shapeAttrs = getStyle(cfg, true, true);\n      const points = this.parsePoints(cfg.points); // 转换为画布坐标\n      return container.addShape('rect', {\n        attrs: {\n          ...shapeAttrs,\n          ...getRectAttrs(points, cfg.size), // 获取 rect 绘图信息\n        },\n        name: 'polygon',\n      });\n    }\n  },\n  getMarker(markerCfg: ShapeMarkerCfg) {\n    const { color } = markerCfg;\n    return {\n      symbol: 'square',\n      style: {\n        r: 4,\n        fill: color,\n      },\n    };\n  },\n});\n"],"mappings":";AAAA,SAASA,OAAO,EAAEC,KAAK,QAAQ,YAAY;AAI3C,SAASC,aAAa,QAAQ,SAAS;AACvC,SAASC,QAAQ,QAAQ,mBAAmB;AAE5C,SAASC,YAAYA,CAACC,MAAa,EAAEC,IAAY;EAC/C,IAAMC,KAAK,GAAGC,IAAI,CAACC,GAAG,CAACJ,MAAM,CAAC,CAAC,CAAC,CAACK,CAAC,GAAGL,MAAM,CAAC,CAAC,CAAC,CAACK,CAAC,CAAC;EACjD,IAAMC,MAAM,GAAGH,IAAI,CAACC,GAAG,CAACJ,MAAM,CAAC,CAAC,CAAC,CAACO,CAAC,GAAGP,MAAM,CAAC,CAAC,CAAC,CAACO,CAAC,CAAC;EAElD,IAAIC,GAAG,GAAGL,IAAI,CAACM,GAAG,CAACP,KAAK,EAAEI,MAAM,CAAC;EACjC,IAAIL,IAAI,EAAE;IACRO,GAAG,GAAGZ,KAAK,CAACK,IAAI,EAAE,CAAC,EAAEE,IAAI,CAACM,GAAG,CAACP,KAAK,EAAEI,MAAM,CAAC,CAAC;;EAE/CE,GAAG,GAAGA,GAAG,GAAG,CAAC;EACb,IAAME,OAAO,GAAG,CAACV,MAAM,CAAC,CAAC,CAAC,CAACK,CAAC,GAAGL,MAAM,CAAC,CAAC,CAAC,CAACK,CAAC,IAAI,CAAC;EAC/C,IAAMM,OAAO,GAAG,CAACX,MAAM,CAAC,CAAC,CAAC,CAACO,CAAC,GAAGP,MAAM,CAAC,CAAC,CAAC,CAACO,CAAC,IAAI,CAAC;EAE/C,OAAO;IACLF,CAAC,EAAEK,OAAO,GAAGF,GAAG;IAChBD,CAAC,EAAEI,OAAO,GAAGH,GAAG;IAChBN,KAAK,EAAEM,GAAG,GAAG,CAAC;IACdF,MAAM,EAAEE,GAAG,GAAG;GACf;AACH;AAEAX,aAAa,CAAC,SAAS,EAAE,QAAQ,EAAE;EACjCe,IAAI,EAAJ,SAAAA,CAAKC,GAAc,EAAEC,SAAiB;IACpC,IAAI,CAACnB,OAAO,CAACkB,GAAG,CAACb,MAAM,CAAC,EAAE;MACxB,IAAMe,UAAU,GAAGjB,QAAQ,CAACe,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;MAC5C,IAAMb,MAAM,GAAG,IAAI,CAACgB,WAAW,CAACH,GAAG,CAACb,MAAM,CAAC,CAAC,CAAC;MAC7C,OAAOc,SAAS,CAACG,QAAQ,CAAC,MAAM,EAAE;QAChCC,KAAK,EAAAC,QAAA,CAAAA,QAAA,KACAJ,UAAU,GACVhB,YAAY,CAACC,MAAM,EAAEa,GAAG,CAACZ,IAAI,CAAC,CAClC;QACDmB,IAAI,EAAE;OACP,CAAC;;EAEN,CAAC;EACDC,SAAS,EAAT,SAAAA,CAAUC,SAAyB;IACzB,IAAAC,KAAK,GAAKD,SAAS,CAAAC,KAAd;IACb,OAAO;MACLC,MAAM,EAAE,QAAQ;MAChBC,KAAK,EAAE;QACLC,CAAC,EAAE,CAAC;QACJC,IAAI,EAAEJ;;KAET;EACH;CACD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}