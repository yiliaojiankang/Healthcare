{"ast":null,"code":"import { each } from '@antv/util';\nvar DEFAULT_TRIGGER = 'shift';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      multiple: true,\n      trigger: DEFAULT_TRIGGER,\n      selectedState: 'selected',\n      selectNode: true,\n      selectEdge: false,\n      selectCombo: true\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this;\n    // 检测输入是否合法\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER;\n      // eslint-disable-next-line no-console\n      console.warn(\"Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\");\n    }\n    if (!self.multiple) {\n      return {\n        'node:click': 'onClick',\n        'combo:click': 'onClick',\n        'edge:click': 'onClick',\n        'canvas:click': 'onCanvasClick'\n      };\n    }\n    return {\n      'node:click': 'onClick',\n      'combo:click': 'onClick',\n      'edge:click': 'onClick',\n      'canvas:click': 'onCanvasClick',\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onClick: function onClick(evt) {\n    var self = this;\n    var item = evt.item;\n    if (!item || item.destroyed) {\n      return;\n    }\n    var type = item.getType();\n    var graph = self.graph,\n      keydown = self.keydown,\n      multiple = self.multiple,\n      shouldUpdate = self.shouldUpdate,\n      shouldBegin = self.shouldBegin;\n    if (!shouldBegin(evt, self)) {\n      return;\n    }\n    // allow to select multiple nodes but did not press a key || do not allow the select multiple nodes\n    if (!keydown || !multiple) {\n      var selected = graph.findAllByState('node', self.selectedState).concat(graph.findAllByState('edge', self.selectedState)).concat(graph.findAllByState('combo', self.selectedState));\n      each(selected, function (selectedItem) {\n        if (selectedItem !== item) {\n          graph.setItemState(selectedItem, self.selectedState, false);\n        }\n      });\n    }\n    // check if the item could be selected, given the current cfg\n    var itemSelectable = function () {\n      switch (type) {\n        case 'node':\n          return self.selectNode;\n        case 'edge':\n          return self.selectEdge;\n        case 'combo':\n          return self.selectCombo;\n        default:\n          return false;\n      }\n    }();\n    if (!itemSelectable) {\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: false\n      });\n      return;\n    }\n    if (item.hasState(self.selectedState)) {\n      if (shouldUpdate(evt, self)) {\n        graph.setItemState(item, self.selectedState, false);\n      }\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: false\n      });\n    } else {\n      if (shouldUpdate(evt, self)) {\n        graph.setItemState(item, self.selectedState, true);\n      }\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: true\n      });\n    }\n  },\n  onCanvasClick: function onCanvasClick(evt) {\n    var _this = this;\n    var _a = this,\n      graph = _a.graph,\n      shouldBegin = _a.shouldBegin;\n    if (!shouldBegin(evt, this)) {\n      return;\n    }\n    var selected = graph.findAllByState('node', this.selectedState);\n    each(selected, function (node) {\n      graph.setItemState(node, _this.selectedState, false);\n    });\n    var selectedEdges = graph.findAllByState('edge', this.selectedState);\n    each(selectedEdges, function (edge) {\n      graph.setItemState(edge, _this.selectedState, false);\n    });\n    var selectedCombos = graph.findAllByState('combo', this.selectedState);\n    each(selectedCombos, function (combo) {\n      graph.setItemState(combo, _this.selectedState, false);\n    });\n    graph.emit('nodeselectchange', {\n      selectedItems: {\n        nodes: [],\n        edges: [],\n        combos: []\n      },\n      select: false\n    });\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n    if (!code) {\n      return;\n    }\n    if (code.toLowerCase() === this.trigger.toLowerCase() || code.toLowerCase() === 'control') {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n    self.keydown = false;\n  }\n};","map":{"version":3,"names":["each","DEFAULT_TRIGGER","ALLOW_EVENTS","getDefaultCfg","multiple","trigger","selectedState","selectNode","selectEdge","selectCombo","getEvents","self","indexOf","toLowerCase","console","warn","keyup","keydown","onClick","evt","item","destroyed","type","getType","graph","shouldUpdate","shouldBegin","selected","findAllByState","concat","selectedItem","setItemState","itemSelectable","selectedNodes","selectedEdges","selectedCombos","emit","selectedItems","nodes","edges","combos","select","hasState","target","onCanvasClick","_this","_a","node","edge","combo","onKeyDown","e","code","key","onKeyUp"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-pc/es/behavior/click-select.js"],"sourcesContent":["import { each } from '@antv/util';\nvar DEFAULT_TRIGGER = 'shift';\nvar ALLOW_EVENTS = ['shift', 'ctrl', 'alt', 'control'];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      multiple: true,\n      trigger: DEFAULT_TRIGGER,\n      selectedState: 'selected',\n      selectNode: true,\n      selectEdge: false,\n      selectCombo: true\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this;\n    // 检测输入是否合法\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER;\n      // eslint-disable-next-line no-console\n      console.warn(\"Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\");\n    }\n    if (!self.multiple) {\n      return {\n        'node:click': 'onClick',\n        'combo:click': 'onClick',\n        'edge:click': 'onClick',\n        'canvas:click': 'onCanvasClick'\n      };\n    }\n    return {\n      'node:click': 'onClick',\n      'combo:click': 'onClick',\n      'edge:click': 'onClick',\n      'canvas:click': 'onCanvasClick',\n      keyup: 'onKeyUp',\n      keydown: 'onKeyDown'\n    };\n  },\n  onClick: function onClick(evt) {\n    var self = this;\n    var item = evt.item;\n    if (!item || item.destroyed) {\n      return;\n    }\n    var type = item.getType();\n    var graph = self.graph,\n      keydown = self.keydown,\n      multiple = self.multiple,\n      shouldUpdate = self.shouldUpdate,\n      shouldBegin = self.shouldBegin;\n    if (!shouldBegin(evt, self)) {\n      return;\n    }\n    // allow to select multiple nodes but did not press a key || do not allow the select multiple nodes\n    if (!keydown || !multiple) {\n      var selected = graph.findAllByState('node', self.selectedState).concat(graph.findAllByState('edge', self.selectedState)).concat(graph.findAllByState('combo', self.selectedState));\n      each(selected, function (selectedItem) {\n        if (selectedItem !== item) {\n          graph.setItemState(selectedItem, self.selectedState, false);\n        }\n      });\n    }\n    // check if the item could be selected, given the current cfg\n    var itemSelectable = function () {\n      switch (type) {\n        case 'node':\n          return self.selectNode;\n        case 'edge':\n          return self.selectEdge;\n        case 'combo':\n          return self.selectCombo;\n        default:\n          return false;\n      }\n    }();\n    if (!itemSelectable) {\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: false\n      });\n      return;\n    }\n    if (item.hasState(self.selectedState)) {\n      if (shouldUpdate(evt, self)) {\n        graph.setItemState(item, self.selectedState, false);\n      }\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: false\n      });\n    } else {\n      if (shouldUpdate(evt, self)) {\n        graph.setItemState(item, self.selectedState, true);\n      }\n      var selectedNodes = graph.findAllByState('node', self.selectedState);\n      var selectedEdges = graph.findAllByState('edge', self.selectedState);\n      var selectedCombos = graph.findAllByState('combo', self.selectedState);\n      graph.emit('nodeselectchange', {\n        target: item,\n        selectedItems: {\n          nodes: selectedNodes,\n          edges: selectedEdges,\n          combos: selectedCombos\n        },\n        select: true\n      });\n    }\n  },\n  onCanvasClick: function onCanvasClick(evt) {\n    var _this = this;\n    var _a = this,\n      graph = _a.graph,\n      shouldBegin = _a.shouldBegin;\n    if (!shouldBegin(evt, this)) {\n      return;\n    }\n    var selected = graph.findAllByState('node', this.selectedState);\n    each(selected, function (node) {\n      graph.setItemState(node, _this.selectedState, false);\n    });\n    var selectedEdges = graph.findAllByState('edge', this.selectedState);\n    each(selectedEdges, function (edge) {\n      graph.setItemState(edge, _this.selectedState, false);\n    });\n    var selectedCombos = graph.findAllByState('combo', this.selectedState);\n    each(selectedCombos, function (combo) {\n      graph.setItemState(combo, _this.selectedState, false);\n    });\n    graph.emit('nodeselectchange', {\n      selectedItems: {\n        nodes: [],\n        edges: [],\n        combos: []\n      },\n      select: false\n    });\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n    if (!code) {\n      return;\n    }\n    if (code.toLowerCase() === this.trigger.toLowerCase() || code.toLowerCase() === 'control') {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n    self.keydown = false;\n  }\n};"],"mappings":"AAAA,SAASA,IAAI,QAAQ,YAAY;AACjC,IAAIC,eAAe,GAAG,OAAO;AAC7B,IAAIC,YAAY,GAAG,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,CAAC;AACtD,eAAe;EACbC,aAAa,EAAE,SAASA,aAAaA,CAAA,EAAG;IACtC,OAAO;MACLC,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAEJ,eAAe;MACxBK,aAAa,EAAE,UAAU;MACzBC,UAAU,EAAE,IAAI;MAChBC,UAAU,EAAE,KAAK;MACjBC,WAAW,EAAE;IACf,CAAC;EACH,CAAC;EACDC,SAAS,EAAE,SAASA,SAASA,CAAA,EAAG;IAC9B,IAAIC,IAAI,GAAG,IAAI;IACf;IACA,IAAI,EAAET,YAAY,CAACU,OAAO,CAACD,IAAI,CAACN,OAAO,CAACQ,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;MAC5DF,IAAI,CAACN,OAAO,GAAGJ,eAAe;MAC9B;MACAa,OAAO,CAACC,IAAI,CAAC,yEAAyE,CAAC;IACzF;IACA,IAAI,CAACJ,IAAI,CAACP,QAAQ,EAAE;MAClB,OAAO;QACL,YAAY,EAAE,SAAS;QACvB,aAAa,EAAE,SAAS;QACxB,YAAY,EAAE,SAAS;QACvB,cAAc,EAAE;MAClB,CAAC;IACH;IACA,OAAO;MACL,YAAY,EAAE,SAAS;MACvB,aAAa,EAAE,SAAS;MACxB,YAAY,EAAE,SAAS;MACvB,cAAc,EAAE,eAAe;MAC/BY,KAAK,EAAE,SAAS;MAChBC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,OAAO,EAAE,SAASA,OAAOA,CAACC,GAAG,EAAE;IAC7B,IAAIR,IAAI,GAAG,IAAI;IACf,IAAIS,IAAI,GAAGD,GAAG,CAACC,IAAI;IACnB,IAAI,CAACA,IAAI,IAAIA,IAAI,CAACC,SAAS,EAAE;MAC3B;IACF;IACA,IAAIC,IAAI,GAAGF,IAAI,CAACG,OAAO,CAAC,CAAC;IACzB,IAAIC,KAAK,GAAGb,IAAI,CAACa,KAAK;MACpBP,OAAO,GAAGN,IAAI,CAACM,OAAO;MACtBb,QAAQ,GAAGO,IAAI,CAACP,QAAQ;MACxBqB,YAAY,GAAGd,IAAI,CAACc,YAAY;MAChCC,WAAW,GAAGf,IAAI,CAACe,WAAW;IAChC,IAAI,CAACA,WAAW,CAACP,GAAG,EAAER,IAAI,CAAC,EAAE;MAC3B;IACF;IACA;IACA,IAAI,CAACM,OAAO,IAAI,CAACb,QAAQ,EAAE;MACzB,IAAIuB,QAAQ,GAAGH,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC,CAACuB,MAAM,CAACL,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC,CAAC,CAACuB,MAAM,CAACL,KAAK,CAACI,cAAc,CAAC,OAAO,EAAEjB,IAAI,CAACL,aAAa,CAAC,CAAC;MAClLN,IAAI,CAAC2B,QAAQ,EAAE,UAAUG,YAAY,EAAE;QACrC,IAAIA,YAAY,KAAKV,IAAI,EAAE;UACzBI,KAAK,CAACO,YAAY,CAACD,YAAY,EAAEnB,IAAI,CAACL,aAAa,EAAE,KAAK,CAAC;QAC7D;MACF,CAAC,CAAC;IACJ;IACA;IACA,IAAI0B,cAAc,GAAG,YAAY;MAC/B,QAAQV,IAAI;QACV,KAAK,MAAM;UACT,OAAOX,IAAI,CAACJ,UAAU;QACxB,KAAK,MAAM;UACT,OAAOI,IAAI,CAACH,UAAU;QACxB,KAAK,OAAO;UACV,OAAOG,IAAI,CAACF,WAAW;QACzB;UACE,OAAO,KAAK;MAChB;IACF,CAAC,CAAC,CAAC;IACH,IAAI,CAACuB,cAAc,EAAE;MACnB,IAAIC,aAAa,GAAGT,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI4B,aAAa,GAAGV,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI6B,cAAc,GAAGX,KAAK,CAACI,cAAc,CAAC,OAAO,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACtEkB,KAAK,CAACY,IAAI,CAAC,kBAAkB,EAAE;QAC7BC,aAAa,EAAE;UACbC,KAAK,EAAEL,aAAa;UACpBM,KAAK,EAAEL,aAAa;UACpBM,MAAM,EAAEL;QACV,CAAC;QACDM,MAAM,EAAE;MACV,CAAC,CAAC;MACF;IACF;IACA,IAAIrB,IAAI,CAACsB,QAAQ,CAAC/B,IAAI,CAACL,aAAa,CAAC,EAAE;MACrC,IAAImB,YAAY,CAACN,GAAG,EAAER,IAAI,CAAC,EAAE;QAC3Ba,KAAK,CAACO,YAAY,CAACX,IAAI,EAAET,IAAI,CAACL,aAAa,EAAE,KAAK,CAAC;MACrD;MACA,IAAI2B,aAAa,GAAGT,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI4B,aAAa,GAAGV,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI6B,cAAc,GAAGX,KAAK,CAACI,cAAc,CAAC,OAAO,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACtEkB,KAAK,CAACY,IAAI,CAAC,kBAAkB,EAAE;QAC7BO,MAAM,EAAEvB,IAAI;QACZiB,aAAa,EAAE;UACbC,KAAK,EAAEL,aAAa;UACpBM,KAAK,EAAEL,aAAa;UACpBM,MAAM,EAAEL;QACV,CAAC;QACDM,MAAM,EAAE;MACV,CAAC,CAAC;IACJ,CAAC,MAAM;MACL,IAAIhB,YAAY,CAACN,GAAG,EAAER,IAAI,CAAC,EAAE;QAC3Ba,KAAK,CAACO,YAAY,CAACX,IAAI,EAAET,IAAI,CAACL,aAAa,EAAE,IAAI,CAAC;MACpD;MACA,IAAI2B,aAAa,GAAGT,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI4B,aAAa,GAAGV,KAAK,CAACI,cAAc,CAAC,MAAM,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACpE,IAAI6B,cAAc,GAAGX,KAAK,CAACI,cAAc,CAAC,OAAO,EAAEjB,IAAI,CAACL,aAAa,CAAC;MACtEkB,KAAK,CAACY,IAAI,CAAC,kBAAkB,EAAE;QAC7BO,MAAM,EAAEvB,IAAI;QACZiB,aAAa,EAAE;UACbC,KAAK,EAAEL,aAAa;UACpBM,KAAK,EAAEL,aAAa;UACpBM,MAAM,EAAEL;QACV,CAAC;QACDM,MAAM,EAAE;MACV,CAAC,CAAC;IACJ;EACF,CAAC;EACDG,aAAa,EAAE,SAASA,aAAaA,CAACzB,GAAG,EAAE;IACzC,IAAI0B,KAAK,GAAG,IAAI;IAChB,IAAIC,EAAE,GAAG,IAAI;MACXtB,KAAK,GAAGsB,EAAE,CAACtB,KAAK;MAChBE,WAAW,GAAGoB,EAAE,CAACpB,WAAW;IAC9B,IAAI,CAACA,WAAW,CAACP,GAAG,EAAE,IAAI,CAAC,EAAE;MAC3B;IACF;IACA,IAAIQ,QAAQ,GAAGH,KAAK,CAACI,cAAc,CAAC,MAAM,EAAE,IAAI,CAACtB,aAAa,CAAC;IAC/DN,IAAI,CAAC2B,QAAQ,EAAE,UAAUoB,IAAI,EAAE;MAC7BvB,KAAK,CAACO,YAAY,CAACgB,IAAI,EAAEF,KAAK,CAACvC,aAAa,EAAE,KAAK,CAAC;IACtD,CAAC,CAAC;IACF,IAAI4B,aAAa,GAAGV,KAAK,CAACI,cAAc,CAAC,MAAM,EAAE,IAAI,CAACtB,aAAa,CAAC;IACpEN,IAAI,CAACkC,aAAa,EAAE,UAAUc,IAAI,EAAE;MAClCxB,KAAK,CAACO,YAAY,CAACiB,IAAI,EAAEH,KAAK,CAACvC,aAAa,EAAE,KAAK,CAAC;IACtD,CAAC,CAAC;IACF,IAAI6B,cAAc,GAAGX,KAAK,CAACI,cAAc,CAAC,OAAO,EAAE,IAAI,CAACtB,aAAa,CAAC;IACtEN,IAAI,CAACmC,cAAc,EAAE,UAAUc,KAAK,EAAE;MACpCzB,KAAK,CAACO,YAAY,CAACkB,KAAK,EAAEJ,KAAK,CAACvC,aAAa,EAAE,KAAK,CAAC;IACvD,CAAC,CAAC;IACFkB,KAAK,CAACY,IAAI,CAAC,kBAAkB,EAAE;MAC7BC,aAAa,EAAE;QACbC,KAAK,EAAE,EAAE;QACTC,KAAK,EAAE,EAAE;QACTC,MAAM,EAAE;MACV,CAAC;MACDC,MAAM,EAAE;IACV,CAAC,CAAC;EACJ,CAAC;EACDS,SAAS,EAAE,SAASA,SAASA,CAACC,CAAC,EAAE;IAC/B,IAAIxC,IAAI,GAAG,IAAI;IACf,IAAIyC,IAAI,GAAGD,CAAC,CAACE,GAAG;IAChB,IAAI,CAACD,IAAI,EAAE;MACT;IACF;IACA,IAAIA,IAAI,CAACvC,WAAW,CAAC,CAAC,KAAK,IAAI,CAACR,OAAO,CAACQ,WAAW,CAAC,CAAC,IAAIuC,IAAI,CAACvC,WAAW,CAAC,CAAC,KAAK,SAAS,EAAE;MACzFF,IAAI,CAACM,OAAO,GAAG,IAAI;IACrB,CAAC,MAAM;MACLN,IAAI,CAACM,OAAO,GAAG,KAAK;IACtB;EACF,CAAC;EACDqC,OAAO,EAAE,SAASA,OAAOA,CAAA,EAAG;IAC1B,IAAI3C,IAAI,GAAG,IAAI;IACfA,IAAI,CAACM,OAAO,GAAG,KAAK;EACtB;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}