{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { VectorTile } from '@mapbox/vector-tile';\nimport Protobuf from 'pbf';\nvar VectorSource = /*#__PURE__*/function () {\n  function VectorSource(data, x, y, z) {\n    _classCallCheck(this, VectorSource);\n    _defineProperty(this, \"vectorLayerCache\", {});\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.vectorTile = new VectorTile(new Protobuf(data));\n  }\n  _createClass(VectorSource, [{\n    key: \"getTileData\",\n    value: function getTileData(sourceLayer) {\n      if (!sourceLayer || !this.vectorTile.layers[sourceLayer]) {\n        return [];\n      }\n      // 优先走缓存\n      if (this.vectorLayerCache[sourceLayer]) {\n        return this.vectorLayerCache[sourceLayer];\n      }\n      var vectorTile = this.vectorTile.layers[sourceLayer];\n\n      // @ts-ignore\n      if (Array.isArray(vectorTile.features)) {\n        // 数据不需要被解析 geojson-vt 类型\n        // @ts-ignore\n        this.vectorLayerCache[sourceLayer] = vectorTile.features;\n        // @ts-ignore\n        return vectorTile.features;\n      }\n      var features = [];\n      for (var i = 0; i < vectorTile.length; i++) {\n        var vectorTileFeature = vectorTile.feature(i);\n        var feature = vectorTileFeature.toGeoJSON(this.x, this.y, this.z);\n        features.push(_objectSpread(_objectSpread({}, feature), {}, {\n          properties: _objectSpread({\n            id: feature.id\n          }, feature.properties)\n        }));\n      }\n      this.vectorLayerCache[sourceLayer] = features;\n      return features;\n    }\n  }, {\n    key: \"getFeatureById\",\n    value: function getFeatureById() {\n      throw new Error('Method not implemented.');\n    }\n  }]);\n  return VectorSource;\n}();\nexport { VectorSource as default };","map":{"version":3,"names":["_objectSpread","_classCallCheck","_createClass","_defineProperty","VectorTile","Protobuf","VectorSource","data","x","y","z","vectorTile","key","value","getTileData","sourceLayer","layers","vectorLayerCache","Array","isArray","features","i","length","vectorTileFeature","feature","toGeoJSON","push","properties","id","getFeatureById","Error","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-source/es/source/vector.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { VectorTile } from '@mapbox/vector-tile';\nimport Protobuf from 'pbf';\nvar VectorSource = /*#__PURE__*/function () {\n  function VectorSource(data, x, y, z) {\n    _classCallCheck(this, VectorSource);\n    _defineProperty(this, \"vectorLayerCache\", {});\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.vectorTile = new VectorTile(new Protobuf(data));\n  }\n  _createClass(VectorSource, [{\n    key: \"getTileData\",\n    value: function getTileData(sourceLayer) {\n      if (!sourceLayer || !this.vectorTile.layers[sourceLayer]) {\n        return [];\n      }\n      // 优先走缓存\n      if (this.vectorLayerCache[sourceLayer]) {\n        return this.vectorLayerCache[sourceLayer];\n      }\n      var vectorTile = this.vectorTile.layers[sourceLayer];\n\n      // @ts-ignore\n      if (Array.isArray(vectorTile.features)) {\n        // 数据不需要被解析 geojson-vt 类型\n        // @ts-ignore\n        this.vectorLayerCache[sourceLayer] = vectorTile.features;\n        // @ts-ignore\n        return vectorTile.features;\n      }\n      var features = [];\n      for (var i = 0; i < vectorTile.length; i++) {\n        var vectorTileFeature = vectorTile.feature(i);\n        var feature = vectorTileFeature.toGeoJSON(this.x, this.y, this.z);\n        features.push(_objectSpread(_objectSpread({}, feature), {}, {\n          properties: _objectSpread({\n            id: feature.id\n          }, feature.properties)\n        }));\n      }\n      this.vectorLayerCache[sourceLayer] = features;\n      return features;\n    }\n  }, {\n    key: \"getFeatureById\",\n    value: function getFeatureById() {\n      throw new Error('Method not implemented.');\n    }\n  }]);\n  return VectorSource;\n}();\nexport { VectorSource as default };"],"mappings":";AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE,OAAOC,eAAe,MAAM,2CAA2C;AACvE,OAAOC,YAAY,MAAM,wCAAwC;AACjE,OAAOC,eAAe,MAAM,2CAA2C;AACvE,SAASC,UAAU,QAAQ,qBAAqB;AAChD,OAAOC,QAAQ,MAAM,KAAK;AAC1B,IAAIC,YAAY,GAAG,aAAa,YAAY;EAC1C,SAASA,YAAYA,CAACC,IAAI,EAAEC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAE;IACnCT,eAAe,CAAC,IAAI,EAAEK,YAAY,CAAC;IACnCH,eAAe,CAAC,IAAI,EAAE,kBAAkB,EAAE,CAAC,CAAC,CAAC;IAC7C,IAAI,CAACK,CAAC,GAAGA,CAAC;IACV,IAAI,CAACC,CAAC,GAAGA,CAAC;IACV,IAAI,CAACC,CAAC,GAAGA,CAAC;IACV,IAAI,CAACC,UAAU,GAAG,IAAIP,UAAU,CAAC,IAAIC,QAAQ,CAACE,IAAI,CAAC,CAAC;EACtD;EACAL,YAAY,CAACI,YAAY,EAAE,CAAC;IAC1BM,GAAG,EAAE,aAAa;IAClBC,KAAK,EAAE,SAASC,WAAWA,CAACC,WAAW,EAAE;MACvC,IAAI,CAACA,WAAW,IAAI,CAAC,IAAI,CAACJ,UAAU,CAACK,MAAM,CAACD,WAAW,CAAC,EAAE;QACxD,OAAO,EAAE;MACX;MACA;MACA,IAAI,IAAI,CAACE,gBAAgB,CAACF,WAAW,CAAC,EAAE;QACtC,OAAO,IAAI,CAACE,gBAAgB,CAACF,WAAW,CAAC;MAC3C;MACA,IAAIJ,UAAU,GAAG,IAAI,CAACA,UAAU,CAACK,MAAM,CAACD,WAAW,CAAC;;MAEpD;MACA,IAAIG,KAAK,CAACC,OAAO,CAACR,UAAU,CAACS,QAAQ,CAAC,EAAE;QACtC;QACA;QACA,IAAI,CAACH,gBAAgB,CAACF,WAAW,CAAC,GAAGJ,UAAU,CAACS,QAAQ;QACxD;QACA,OAAOT,UAAU,CAACS,QAAQ;MAC5B;MACA,IAAIA,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,UAAU,CAACW,MAAM,EAAED,CAAC,EAAE,EAAE;QAC1C,IAAIE,iBAAiB,GAAGZ,UAAU,CAACa,OAAO,CAACH,CAAC,CAAC;QAC7C,IAAIG,OAAO,GAAGD,iBAAiB,CAACE,SAAS,CAAC,IAAI,CAACjB,CAAC,EAAE,IAAI,CAACC,CAAC,EAAE,IAAI,CAACC,CAAC,CAAC;QACjEU,QAAQ,CAACM,IAAI,CAAC1B,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEwB,OAAO,CAAC,EAAE,CAAC,CAAC,EAAE;UAC1DG,UAAU,EAAE3B,aAAa,CAAC;YACxB4B,EAAE,EAAEJ,OAAO,CAACI;UACd,CAAC,EAAEJ,OAAO,CAACG,UAAU;QACvB,CAAC,CAAC,CAAC;MACL;MACA,IAAI,CAACV,gBAAgB,CAACF,WAAW,CAAC,GAAGK,QAAQ;MAC7C,OAAOA,QAAQ;IACjB;EACF,CAAC,EAAE;IACDR,GAAG,EAAE,gBAAgB;IACrBC,KAAK,EAAE,SAASgB,cAAcA,CAAA,EAAG;MAC/B,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;IAC5C;EACF,CAAC,CAAC,CAAC;EACH,OAAOxB,YAAY;AACrB,CAAC,CAAC,CAAC;AACH,SAASA,YAAY,IAAIyB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}