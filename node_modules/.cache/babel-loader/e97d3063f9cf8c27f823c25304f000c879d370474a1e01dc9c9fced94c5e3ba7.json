{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n/**\n * LRU Cache class with limit\n *\n * Update order for each get/set operation\n * Delete oldest when reach given limit\n */\n\nexport var LRUCache = /*#__PURE__*/function () {\n  function LRUCache() {\n    var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 50;\n    var destroy = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, LRUCache);\n    this.limit = limit;\n    this.destroy = destroy || this.defaultDestroy;\n    this.order = [];\n    this.clear();\n  }\n  _createClass(LRUCache, [{\n    key: \"clear\",\n    value: function clear() {\n      var _this = this;\n      this.order.forEach(function (key) {\n        _this.delete(key);\n      });\n      this.cache = {};\n      // access/update order, first item is oldest, last item is newest\n      this.order = [];\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var value = this.cache[key];\n      if (value) {\n        // update order\n        this.deleteOrder(key);\n        this.appendOrder(key);\n      }\n      return value;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      if (!this.cache[key]) {\n        // if reach limit, delete the oldest\n        if (Object.keys(this.cache).length === this.limit) {\n          this.delete(this.order[0]);\n        }\n        this.cache[key] = value;\n        this.appendOrder(key);\n      } else {\n        // if found in cache, delete the old one, insert new one to the first of list\n        this.delete(key);\n        this.cache[key] = value;\n        this.appendOrder(key);\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var value = this.cache[key];\n      if (value) {\n        this.deleteCache(key);\n        this.deleteOrder(key);\n        this.destroy(value, key);\n      }\n    }\n  }, {\n    key: \"deleteCache\",\n    value: function deleteCache(key) {\n      delete this.cache[key];\n    }\n  }, {\n    key: \"deleteOrder\",\n    value: function deleteOrder(key) {\n      var index = this.order.findIndex(function (o) {\n        return o === key;\n      });\n      if (index >= 0) {\n        this.order.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"appendOrder\",\n    value: function appendOrder(key) {\n      this.order.push(key);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"defaultDestroy\",\n    value: function defaultDestroy(value, key) {\n      return null;\n    }\n  }]);\n  return LRUCache;\n}();","map":{"version":3,"names":["_classCallCheck","_createClass","LRUCache","limit","arguments","length","undefined","destroy","defaultDestroy","order","clear","key","value","_this","forEach","delete","cache","get","deleteOrder","appendOrder","set","Object","keys","_delete","deleteCache","index","findIndex","o","splice","push"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-utils/es/lru_cache.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n/**\n * LRU Cache class with limit\n *\n * Update order for each get/set operation\n * Delete oldest when reach given limit\n */\n\nexport var LRUCache = /*#__PURE__*/function () {\n  function LRUCache() {\n    var limit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 50;\n    var destroy = arguments.length > 1 ? arguments[1] : undefined;\n    _classCallCheck(this, LRUCache);\n    this.limit = limit;\n    this.destroy = destroy || this.defaultDestroy;\n    this.order = [];\n    this.clear();\n  }\n  _createClass(LRUCache, [{\n    key: \"clear\",\n    value: function clear() {\n      var _this = this;\n      this.order.forEach(function (key) {\n        _this.delete(key);\n      });\n      this.cache = {};\n      // access/update order, first item is oldest, last item is newest\n      this.order = [];\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      var value = this.cache[key];\n      if (value) {\n        // update order\n        this.deleteOrder(key);\n        this.appendOrder(key);\n      }\n      return value;\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      if (!this.cache[key]) {\n        // if reach limit, delete the oldest\n        if (Object.keys(this.cache).length === this.limit) {\n          this.delete(this.order[0]);\n        }\n        this.cache[key] = value;\n        this.appendOrder(key);\n      } else {\n        // if found in cache, delete the old one, insert new one to the first of list\n        this.delete(key);\n        this.cache[key] = value;\n        this.appendOrder(key);\n      }\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(key) {\n      var value = this.cache[key];\n      if (value) {\n        this.deleteCache(key);\n        this.deleteOrder(key);\n        this.destroy(value, key);\n      }\n    }\n  }, {\n    key: \"deleteCache\",\n    value: function deleteCache(key) {\n      delete this.cache[key];\n    }\n  }, {\n    key: \"deleteOrder\",\n    value: function deleteOrder(key) {\n      var index = this.order.findIndex(function (o) {\n        return o === key;\n      });\n      if (index >= 0) {\n        this.order.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"appendOrder\",\n    value: function appendOrder(key) {\n      this.order.push(key);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"defaultDestroy\",\n    value: function defaultDestroy(value, key) {\n      return null;\n    }\n  }]);\n  return LRUCache;\n}();"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}