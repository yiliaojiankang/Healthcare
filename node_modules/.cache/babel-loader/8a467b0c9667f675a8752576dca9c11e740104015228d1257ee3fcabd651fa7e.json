{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n/**\n * 基于 G 的刻度时间轴组件\n */\nimport { ext } from '@antv/matrix-util';\nimport { isNumber, isString } from '@antv/util';\nimport TimeBarTooltip from './timeBarTooltip';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMELINE_END, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMEBAR_CONFIG_CHANGE } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_SELECTEDTICK_STYLE = {\n  fill: '#5B8FF9'\n};\nvar DEFAULT_UNSELECTEDTICK_STYLE = {\n  fill: '#e6e8e9'\n};\nvar TimeBarSlice = /** @class */function () {\n  function TimeBarSlice(cfgs) {\n    this.frameCount = 0;\n    this.fontFamily = 'Arial, sans-serif';\n    var graph = cfgs.graph,\n      canvas = cfgs.canvas,\n      group = cfgs.group,\n      width = cfgs.width,\n      height = cfgs.height,\n      padding = cfgs.padding,\n      data = cfgs.data,\n      start = cfgs.start,\n      end = cfgs.end,\n      _a = cfgs.x,\n      x = _a === void 0 ? 0 : _a,\n      _b = cfgs.y,\n      y = _b === void 0 ? 0 : _b,\n      tickLabelFormatter = cfgs.tickLabelFormatter,\n      _c = cfgs.selectedTickStyle,\n      selectedTickStyle = _c === void 0 ? DEFAULT_SELECTEDTICK_STYLE : _c,\n      _d = cfgs.unselectedTickStyle,\n      unselectedTickStyle = _d === void 0 ? DEFAULT_UNSELECTEDTICK_STYLE : _d,\n      tooltipBackgroundColor = cfgs.tooltipBackgroundColor,\n      tooltipFomatter = cfgs.tooltipFomatter,\n      tickLabelStyle = cfgs.tickLabelStyle,\n      _e = cfgs.controllerCfg,\n      controllerCfg = _e === void 0 ? {\n        speed: 1\n      } : _e;\n    this.graph = graph;\n    this.group = group;\n    this.sliceGroup = group.addGroup({\n      name: 'slice-group'\n    });\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.data = data;\n    this.start = start;\n    this.end = end;\n    this.tickLabelFormatter = tickLabelFormatter;\n    this.tickLabelStyle = tickLabelStyle || {};\n    this.selectedTickStyle = selectedTickStyle;\n    this.unselectedTickStyle = unselectedTickStyle;\n    this.controllerCfg = controllerCfg;\n    this.currentSpeed = controllerCfg.speed || 1;\n    this.x = x;\n    this.y = y;\n    this.tooltipBackgroundColor = tooltipBackgroundColor;\n    this.tooltipFomatter = tooltipFomatter;\n    // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlices();\n    this.initEvent();\n  }\n  TimeBarSlice.prototype.renderSlices = function () {\n    var _this = this;\n    var _a = this,\n      width = _a.width,\n      height = _a.height,\n      padding = _a.padding,\n      data = _a.data,\n      start = _a.start,\n      end = _a.end,\n      tickLabelFormatter = _a.tickLabelFormatter,\n      selectedTickStyle = _a.selectedTickStyle,\n      unselectedTickStyle = _a.unselectedTickStyle,\n      tickLabelStyle = _a.tickLabelStyle;\n    var realWidth = width - 2 * padding;\n    var fontSize = 10;\n    var labelLineHeight = 4;\n    var labelAreaHeight = 3 * padding + labelLineHeight + fontSize;\n    var ticksAreaHeight = height - labelAreaHeight - 2 * padding;\n    var gap = 2;\n    var ticksLength = data.length;\n    var tickWidth = (realWidth - gap * (ticksLength - 1)) / ticksLength;\n    this.tickWidth = tickWidth;\n    var sliceGroup = this.sliceGroup;\n    var tickRects = [];\n    var labels = [];\n    var startTickId = Math.round(ticksLength * start);\n    var endTickId = Math.round(ticksLength * end);\n    this.startTickRectId = startTickId;\n    this.endTickRectId = endTickId;\n    var rotate = tickLabelStyle.rotate;\n    delete tickLabelStyle.rotate;\n    data.forEach(function (d, i) {\n      // draw the tick rects\n      var selected = i >= startTickId && i <= endTickId;\n      var tickStyle = selected ? selectedTickStyle : unselectedTickStyle;\n      var rect = sliceGroup.addShape('rect', {\n        attrs: __assign({\n          x: padding + i * (tickWidth + gap),\n          y: padding,\n          width: tickWidth,\n          height: ticksAreaHeight\n        }, tickStyle),\n        draggable: true,\n        name: \"tick-rect-\".concat(i)\n      });\n      // draw the pick tick rects\n      var pickRect = sliceGroup.addShape('rect', {\n        attrs: {\n          x: padding + i * tickWidth + gap * (2 * i - 1) / 2,\n          y: padding,\n          width: i === 0 || i === ticksLength - 1 ? tickWidth + gap / 2 : tickWidth + gap,\n          height: ticksAreaHeight,\n          fill: '#fff',\n          opacity: 0\n        },\n        draggable: true,\n        name: \"pick-rect-\".concat(i)\n      });\n      pickRect.toFront();\n      var rectBBox = rect.getBBox();\n      var centerX = (rectBBox.minX + rectBBox.maxX) / 2;\n      tickRects.push({\n        rect: rect,\n        pickRect: pickRect,\n        value: d.date,\n        x: centerX,\n        y: rectBBox.minY\n      });\n      var label;\n      if (tickLabelFormatter) {\n        label = tickLabelFormatter(d);\n        if (!isString(label) && label) {\n          // return true\n          label = d.date;\n        }\n      } else if (i % Math.round(ticksLength / 10) === 0) {\n        label = d.date;\n      }\n      if (label) {\n        labels.push(label);\n        // draw tick lines\n        var lineStartY = rectBBox.maxY + padding * 2;\n        sliceGroup.addShape('line', {\n          attrs: {\n            stroke: '#BFBFBF',\n            x1: centerX,\n            y1: lineStartY,\n            x2: centerX,\n            y2: lineStartY + labelLineHeight\n          },\n          name: 'tick-line'\n        });\n        var labelStartY = lineStartY + labelLineHeight + padding;\n        var text = sliceGroup.addShape('text', {\n          attrs: __assign({\n            fill: '#8c8c8c',\n            stroke: '#fff',\n            lineWidth: 1,\n            x: centerX,\n            y: labelStartY,\n            textAlign: 'center',\n            text: label,\n            textBaseline: 'top',\n            fontSize: 10,\n            fontFamily: _this.fontFamily || 'Arial, sans-serif'\n          }, tickLabelStyle),\n          capture: false,\n          name: 'tick-label'\n        });\n        var textBBox = text.getBBox();\n        if (textBBox.maxX > width) {\n          text.attr('textAlign', 'right');\n        } else if (textBBox.minX < 0) {\n          text.attr('textAlign', 'left');\n        }\n        if (isNumber(rotate) && labels.length !== 10) {\n          var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -labelStartY], ['r', rotate], ['t', centerX - 5, labelStartY + 2]]);\n          text.attr({\n            textAlign: 'left',\n            matrix: matrix\n          });\n        }\n        if (labels.length === 1) {\n          text.attr({\n            textAlign: 'left'\n          });\n        } else if (labels.length === 10) {\n          text.attr({\n            textAlign: 'right'\n          });\n        }\n        // draw tick labels\n      }\n    });\n\n    this.tickRects = tickRects;\n    // 渲染播放、快进和后退的控制按钮\n    var group = this.group;\n    this.currentSpeed = 1;\n    this.controllerBtnGroup = new ControllerBtn(__assign({\n      group: group,\n      x: this.x,\n      y: this.y + height + 5,\n      width: width,\n      height: 40,\n      hideTimeTypeController: true,\n      speed: this.currentSpeed,\n      fontFamily: this.fontFamily || 'Arial, sans-serif'\n    }, this.controllerCfg));\n  };\n  TimeBarSlice.prototype.initEvent = function () {\n    var _this = this;\n    var sliceGroup = this.sliceGroup;\n    sliceGroup.on('click', function (e) {\n      var targetRect = e.target;\n      if (targetRect.get('type') !== 'rect' || !targetRect.get('name')) return;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      if (!isNaN(id)) {\n        var tickRects_1 = _this.tickRects;\n        // cancel the selected ticks\n        var unselectedTickStyle_1 = _this.unselectedTickStyle;\n        tickRects_1.forEach(function (tickRect) {\n          tickRect.rect.attr(unselectedTickStyle_1);\n        });\n        var selectedTickStyle = _this.selectedTickStyle;\n        tickRects_1[id].rect.attr(selectedTickStyle);\n        _this.startTickRectId = id;\n        _this.endTickRectId = id;\n        var ticksLength = tickRects_1.length;\n        var start = id / ticksLength;\n        _this.graph.emit(VALUE_CHANGE, {\n          value: [start, start]\n        });\n      }\n    });\n    sliceGroup.on('dragstart', function (e) {\n      var tickRects = _this.tickRects;\n      // cancel the selected ticks\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      tickRects.forEach(function (tickRect) {\n        tickRect.rect.attr(unselectedTickStyle);\n      });\n      var targetRect = e.target;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      var selectedTickStyle = _this.selectedTickStyle;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.startTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, start]\n      });\n      _this.dragging = true;\n    });\n    sliceGroup.on('dragover', function (e) {\n      if (!_this.dragging) return;\n      if (e.target.get('type') !== 'rect') return;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      var startTickRectId = _this.startTickRectId;\n      var tickRects = _this.tickRects;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      for (var i = 0; i < tickRects.length; i++) {\n        var style = i >= startTickRectId && i <= id ? selectedTickStyle : unselectedTickStyle;\n        tickRects[i].rect.attr(style);\n      }\n      var ticksLength = tickRects.length;\n      _this.endTickRectId = id;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    sliceGroup.on('drop', function (e) {\n      if (!_this.dragging) return;\n      _this.dragging = false;\n      if (e.target.get('type') !== 'rect') return;\n      var startTickRectId = _this.startTickRectId;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      if (id < startTickRectId) return;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var tickRects = _this.tickRects;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.endTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    // tooltip\n    var _a = this,\n      tooltipBackgroundColor = _a.tooltipBackgroundColor,\n      tooltipFomatter = _a.tooltipFomatter,\n      canvas = _a.canvas;\n    var tooltip = new TimeBarTooltip({\n      container: canvas.get('container'),\n      backgroundColor: tooltipBackgroundColor\n    });\n    var tickRects = this.tickRects;\n    tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.on('mouseenter', function (e) {\n        var rect = e.target;\n        if (rect.get('type') !== 'rect') return;\n        var id = parseInt(rect.get('name').split('-')[2], 10);\n        var clientPoint = canvas.getClientByPoint(tickRects[id].x, tickRects[id].y);\n        tooltip.show({\n          x: tickRects[id].x,\n          y: tickRects[id].y,\n          clientX: clientPoint.x,\n          clientY: clientPoint.y,\n          text: tooltipFomatter ? tooltipFomatter(tickRects[id].value) : tickRects[id].value\n        });\n      });\n      pickRect.on('mouseleave', function (e) {\n        tooltip.hide();\n      });\n    });\n    // play controller events\n    var group = this.group;\n    // 播放区按钮控制\n    /** 播放/暂停事件 */\n    group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n      _this.changePlayStatus();\n    });\n    // 处理前进一步的事件\n    group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(1);\n    });\n    // 处理后退一步的事件\n    group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(-1);\n    });\n    group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n        speed = _a.speed;\n      _this.currentSpeed = speed;\n    });\n  };\n  TimeBarSlice.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n  TimeBarSlice.prototype.startPlay = function () {\n    var _this = this;\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var speed = _this.currentSpeed;\n      // 一分钟刷新一次\n      if (_this.frameCount % (60 / speed) === 0) {\n        _this.frameCount = 0;\n        _this.updateStartEnd(1);\n      }\n      _this.frameCount++;\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n  TimeBarSlice.prototype.updateStartEnd = function (sign) {\n    var self = this;\n    var tickRects = this.tickRects;\n    var ticksLength = tickRects.length;\n    var unselectedTickStyle = this.unselectedTickStyle;\n    var selectedTickStyle = this.selectedTickStyle;\n    var previousEndTickRectId = self.endTickRectId;\n    if (sign > 0) {\n      self.endTickRectId++;\n    } else {\n      tickRects[self.endTickRectId].rect.attr(unselectedTickStyle);\n      self.endTickRectId--;\n    }\n    // 若此时 start 与 end 不同，范围前进/后退/播放\n    if (previousEndTickRectId !== self.startTickRectId) {\n      if (self.endTickRectId < self.startTickRectId) {\n        self.startTickRectId = self.endTickRectId;\n      }\n    } else {\n      // 否则是单帧的前进/后退/播放\n      for (var i = self.startTickRectId; i <= self.endTickRectId - 1; i++) {\n        tickRects[i].rect.attr(unselectedTickStyle);\n      }\n      self.startTickRectId = self.endTickRectId;\n    }\n    if (tickRects[self.endTickRectId]) {\n      tickRects[self.endTickRectId].rect.attr(selectedTickStyle);\n      var start = self.startTickRectId / ticksLength;\n      var end = self.endTickRectId / ticksLength;\n      this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }\n  };\n  TimeBarSlice.prototype.destory = function () {\n    var group = this.sliceGroup;\n    group.off('click');\n    group.off('dragstart');\n    group.off('dragover');\n    group.off('drop');\n    this.tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.off('mouseenter');\n      pickRect.off('mouseleave');\n    });\n    this.tickRects.length = 0;\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    this.sliceGroup.destroy();\n  };\n  return TimeBarSlice;\n}();\nexport default TimeBarSlice;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","ext","isNumber","isString","TimeBarTooltip","ControllerBtn","VALUE_CHANGE","TIMELINE_START","TIMELINE_END","PLAY_PAUSE_BTN","NEXT_STEP_BTN","PRE_STEP_BTN","TIMEBAR_CONFIG_CHANGE","transform","DEFAULT_SELECTEDTICK_STYLE","fill","DEFAULT_UNSELECTEDTICK_STYLE","TimeBarSlice","cfgs","frameCount","fontFamily","graph","canvas","group","width","height","padding","data","start","end","_a","x","_b","y","tickLabelFormatter","_c","selectedTickStyle","_d","unselectedTickStyle","tooltipBackgroundColor","tooltipFomatter","tickLabelStyle","_e","controllerCfg","speed","sliceGroup","addGroup","name","currentSpeed","window","getComputedStyle","document","body","getPropertyValue","renderSlices","initEvent","_this","realWidth","fontSize","labelLineHeight","labelAreaHeight","ticksAreaHeight","gap","ticksLength","tickWidth","tickRects","labels","startTickId","Math","round","endTickId","startTickRectId","endTickRectId","rotate","forEach","d","selected","tickStyle","rect","addShape","attrs","draggable","concat","pickRect","opacity","toFront","rectBBox","getBBox","centerX","minX","maxX","push","value","date","minY","label","lineStartY","maxY","stroke","x1","y1","x2","y2","labelStartY","text","lineWidth","textAlign","textBaseline","capture","textBBox","attr","matrix","controllerBtnGroup","hideTimeTypeController","on","e","targetRect","target","get","id","parseInt","split","isNaN","tickRects_1","unselectedTickStyle_1","tickRect","emit","dragging","style","tooltip","container","backgroundColor","clientPoint","getClientByPoint","show","clientX","clientY","hide","isPlay","changePlayStatus","updateStartEnd","type","isSync","playButton","update","playHandler","startPlay","cancelAnimationFrame","requestAnimationFrame","undefined","sign","self","previousEndTickRectId","destory","off","destroy"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-plugin/es/timeBar/timeBarSlice.js"],"sourcesContent":["var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\n/**\n * 基于 G 的刻度时间轴组件\n */\nimport { ext } from '@antv/matrix-util';\nimport { isNumber, isString } from '@antv/util';\nimport TimeBarTooltip from './timeBarTooltip';\nimport ControllerBtn from './controllerBtn';\nimport { VALUE_CHANGE, TIMELINE_START, TIMELINE_END, PLAY_PAUSE_BTN, NEXT_STEP_BTN, PRE_STEP_BTN, TIMEBAR_CONFIG_CHANGE } from './constant';\nvar transform = ext.transform;\nvar DEFAULT_SELECTEDTICK_STYLE = {\n  fill: '#5B8FF9'\n};\nvar DEFAULT_UNSELECTEDTICK_STYLE = {\n  fill: '#e6e8e9'\n};\nvar TimeBarSlice = /** @class */function () {\n  function TimeBarSlice(cfgs) {\n    this.frameCount = 0;\n    this.fontFamily = 'Arial, sans-serif';\n    var graph = cfgs.graph,\n      canvas = cfgs.canvas,\n      group = cfgs.group,\n      width = cfgs.width,\n      height = cfgs.height,\n      padding = cfgs.padding,\n      data = cfgs.data,\n      start = cfgs.start,\n      end = cfgs.end,\n      _a = cfgs.x,\n      x = _a === void 0 ? 0 : _a,\n      _b = cfgs.y,\n      y = _b === void 0 ? 0 : _b,\n      tickLabelFormatter = cfgs.tickLabelFormatter,\n      _c = cfgs.selectedTickStyle,\n      selectedTickStyle = _c === void 0 ? DEFAULT_SELECTEDTICK_STYLE : _c,\n      _d = cfgs.unselectedTickStyle,\n      unselectedTickStyle = _d === void 0 ? DEFAULT_UNSELECTEDTICK_STYLE : _d,\n      tooltipBackgroundColor = cfgs.tooltipBackgroundColor,\n      tooltipFomatter = cfgs.tooltipFomatter,\n      tickLabelStyle = cfgs.tickLabelStyle,\n      _e = cfgs.controllerCfg,\n      controllerCfg = _e === void 0 ? {\n        speed: 1\n      } : _e;\n    this.graph = graph;\n    this.group = group;\n    this.sliceGroup = group.addGroup({\n      name: 'slice-group'\n    });\n    this.canvas = canvas;\n    this.width = width;\n    this.height = height;\n    this.padding = padding;\n    this.data = data;\n    this.start = start;\n    this.end = end;\n    this.tickLabelFormatter = tickLabelFormatter;\n    this.tickLabelStyle = tickLabelStyle || {};\n    this.selectedTickStyle = selectedTickStyle;\n    this.unselectedTickStyle = unselectedTickStyle;\n    this.controllerCfg = controllerCfg;\n    this.currentSpeed = controllerCfg.speed || 1;\n    this.x = x;\n    this.y = y;\n    this.tooltipBackgroundColor = tooltipBackgroundColor;\n    this.tooltipFomatter = tooltipFomatter;\n    // 初始化 fontFamily，如果有浏览器，取 body 上的字体，防止文字更新时局部渲染造成的重影\n    this.fontFamily = typeof window !== 'undefined' ? window.getComputedStyle(document.body, null).getPropertyValue('font-family') || 'Arial, sans-serif' : 'Arial, sans-serif';\n    this.renderSlices();\n    this.initEvent();\n  }\n  TimeBarSlice.prototype.renderSlices = function () {\n    var _this = this;\n    var _a = this,\n      width = _a.width,\n      height = _a.height,\n      padding = _a.padding,\n      data = _a.data,\n      start = _a.start,\n      end = _a.end,\n      tickLabelFormatter = _a.tickLabelFormatter,\n      selectedTickStyle = _a.selectedTickStyle,\n      unselectedTickStyle = _a.unselectedTickStyle,\n      tickLabelStyle = _a.tickLabelStyle;\n    var realWidth = width - 2 * padding;\n    var fontSize = 10;\n    var labelLineHeight = 4;\n    var labelAreaHeight = 3 * padding + labelLineHeight + fontSize;\n    var ticksAreaHeight = height - labelAreaHeight - 2 * padding;\n    var gap = 2;\n    var ticksLength = data.length;\n    var tickWidth = (realWidth - gap * (ticksLength - 1)) / ticksLength;\n    this.tickWidth = tickWidth;\n    var sliceGroup = this.sliceGroup;\n    var tickRects = [];\n    var labels = [];\n    var startTickId = Math.round(ticksLength * start);\n    var endTickId = Math.round(ticksLength * end);\n    this.startTickRectId = startTickId;\n    this.endTickRectId = endTickId;\n    var rotate = tickLabelStyle.rotate;\n    delete tickLabelStyle.rotate;\n    data.forEach(function (d, i) {\n      // draw the tick rects\n      var selected = i >= startTickId && i <= endTickId;\n      var tickStyle = selected ? selectedTickStyle : unselectedTickStyle;\n      var rect = sliceGroup.addShape('rect', {\n        attrs: __assign({\n          x: padding + i * (tickWidth + gap),\n          y: padding,\n          width: tickWidth,\n          height: ticksAreaHeight\n        }, tickStyle),\n        draggable: true,\n        name: \"tick-rect-\".concat(i)\n      });\n      // draw the pick tick rects\n      var pickRect = sliceGroup.addShape('rect', {\n        attrs: {\n          x: padding + i * tickWidth + gap * (2 * i - 1) / 2,\n          y: padding,\n          width: i === 0 || i === ticksLength - 1 ? tickWidth + gap / 2 : tickWidth + gap,\n          height: ticksAreaHeight,\n          fill: '#fff',\n          opacity: 0\n        },\n        draggable: true,\n        name: \"pick-rect-\".concat(i)\n      });\n      pickRect.toFront();\n      var rectBBox = rect.getBBox();\n      var centerX = (rectBBox.minX + rectBBox.maxX) / 2;\n      tickRects.push({\n        rect: rect,\n        pickRect: pickRect,\n        value: d.date,\n        x: centerX,\n        y: rectBBox.minY\n      });\n      var label;\n      if (tickLabelFormatter) {\n        label = tickLabelFormatter(d);\n        if (!isString(label) && label) {\n          // return true\n          label = d.date;\n        }\n      } else if (i % Math.round(ticksLength / 10) === 0) {\n        label = d.date;\n      }\n      if (label) {\n        labels.push(label);\n        // draw tick lines\n        var lineStartY = rectBBox.maxY + padding * 2;\n        sliceGroup.addShape('line', {\n          attrs: {\n            stroke: '#BFBFBF',\n            x1: centerX,\n            y1: lineStartY,\n            x2: centerX,\n            y2: lineStartY + labelLineHeight\n          },\n          name: 'tick-line'\n        });\n        var labelStartY = lineStartY + labelLineHeight + padding;\n        var text = sliceGroup.addShape('text', {\n          attrs: __assign({\n            fill: '#8c8c8c',\n            stroke: '#fff',\n            lineWidth: 1,\n            x: centerX,\n            y: labelStartY,\n            textAlign: 'center',\n            text: label,\n            textBaseline: 'top',\n            fontSize: 10,\n            fontFamily: _this.fontFamily || 'Arial, sans-serif'\n          }, tickLabelStyle),\n          capture: false,\n          name: 'tick-label'\n        });\n        var textBBox = text.getBBox();\n        if (textBBox.maxX > width) {\n          text.attr('textAlign', 'right');\n        } else if (textBBox.minX < 0) {\n          text.attr('textAlign', 'left');\n        }\n        if (isNumber(rotate) && labels.length !== 10) {\n          var matrix = transform([1, 0, 0, 0, 1, 0, 0, 0, 1], [['t', -centerX, -labelStartY], ['r', rotate], ['t', centerX - 5, labelStartY + 2]]);\n          text.attr({\n            textAlign: 'left',\n            matrix: matrix\n          });\n        }\n        if (labels.length === 1) {\n          text.attr({\n            textAlign: 'left'\n          });\n        } else if (labels.length === 10) {\n          text.attr({\n            textAlign: 'right'\n          });\n        }\n        // draw tick labels\n      }\n    });\n\n    this.tickRects = tickRects;\n    // 渲染播放、快进和后退的控制按钮\n    var group = this.group;\n    this.currentSpeed = 1;\n    this.controllerBtnGroup = new ControllerBtn(__assign({\n      group: group,\n      x: this.x,\n      y: this.y + height + 5,\n      width: width,\n      height: 40,\n      hideTimeTypeController: true,\n      speed: this.currentSpeed,\n      fontFamily: this.fontFamily || 'Arial, sans-serif'\n    }, this.controllerCfg));\n  };\n  TimeBarSlice.prototype.initEvent = function () {\n    var _this = this;\n    var sliceGroup = this.sliceGroup;\n    sliceGroup.on('click', function (e) {\n      var targetRect = e.target;\n      if (targetRect.get('type') !== 'rect' || !targetRect.get('name')) return;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      if (!isNaN(id)) {\n        var tickRects_1 = _this.tickRects;\n        // cancel the selected ticks\n        var unselectedTickStyle_1 = _this.unselectedTickStyle;\n        tickRects_1.forEach(function (tickRect) {\n          tickRect.rect.attr(unselectedTickStyle_1);\n        });\n        var selectedTickStyle = _this.selectedTickStyle;\n        tickRects_1[id].rect.attr(selectedTickStyle);\n        _this.startTickRectId = id;\n        _this.endTickRectId = id;\n        var ticksLength = tickRects_1.length;\n        var start = id / ticksLength;\n        _this.graph.emit(VALUE_CHANGE, {\n          value: [start, start]\n        });\n      }\n    });\n    sliceGroup.on('dragstart', function (e) {\n      var tickRects = _this.tickRects;\n      // cancel the selected ticks\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      tickRects.forEach(function (tickRect) {\n        tickRect.rect.attr(unselectedTickStyle);\n      });\n      var targetRect = e.target;\n      var id = parseInt(targetRect.get('name').split('-')[2], 10);\n      var selectedTickStyle = _this.selectedTickStyle;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.startTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, start]\n      });\n      _this.dragging = true;\n    });\n    sliceGroup.on('dragover', function (e) {\n      if (!_this.dragging) return;\n      if (e.target.get('type') !== 'rect') return;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      var startTickRectId = _this.startTickRectId;\n      var tickRects = _this.tickRects;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var unselectedTickStyle = _this.unselectedTickStyle;\n      for (var i = 0; i < tickRects.length; i++) {\n        var style = i >= startTickRectId && i <= id ? selectedTickStyle : unselectedTickStyle;\n        tickRects[i].rect.attr(style);\n      }\n      var ticksLength = tickRects.length;\n      _this.endTickRectId = id;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    sliceGroup.on('drop', function (e) {\n      if (!_this.dragging) return;\n      _this.dragging = false;\n      if (e.target.get('type') !== 'rect') return;\n      var startTickRectId = _this.startTickRectId;\n      var id = parseInt(e.target.get('name').split('-')[2], 10);\n      if (id < startTickRectId) return;\n      var selectedTickStyle = _this.selectedTickStyle;\n      var tickRects = _this.tickRects;\n      tickRects[id].rect.attr(selectedTickStyle);\n      _this.endTickRectId = id;\n      var ticksLength = tickRects.length;\n      var start = startTickRectId / ticksLength;\n      var end = id / ticksLength;\n      _this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    });\n    // tooltip\n    var _a = this,\n      tooltipBackgroundColor = _a.tooltipBackgroundColor,\n      tooltipFomatter = _a.tooltipFomatter,\n      canvas = _a.canvas;\n    var tooltip = new TimeBarTooltip({\n      container: canvas.get('container'),\n      backgroundColor: tooltipBackgroundColor\n    });\n    var tickRects = this.tickRects;\n    tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.on('mouseenter', function (e) {\n        var rect = e.target;\n        if (rect.get('type') !== 'rect') return;\n        var id = parseInt(rect.get('name').split('-')[2], 10);\n        var clientPoint = canvas.getClientByPoint(tickRects[id].x, tickRects[id].y);\n        tooltip.show({\n          x: tickRects[id].x,\n          y: tickRects[id].y,\n          clientX: clientPoint.x,\n          clientY: clientPoint.y,\n          text: tooltipFomatter ? tooltipFomatter(tickRects[id].value) : tickRects[id].value\n        });\n      });\n      pickRect.on('mouseleave', function (e) {\n        tooltip.hide();\n      });\n    });\n    // play controller events\n    var group = this.group;\n    // 播放区按钮控制\n    /** 播放/暂停事件 */\n    group.on(\"\".concat(PLAY_PAUSE_BTN, \":click\"), function () {\n      _this.isPlay = !_this.isPlay;\n      _this.changePlayStatus();\n    });\n    // 处理前进一步的事件\n    group.on(\"\".concat(NEXT_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(1);\n    });\n    // 处理后退一步的事件\n    group.on(\"\".concat(PRE_STEP_BTN, \":click\"), function () {\n      _this.updateStartEnd(-1);\n    });\n    group.on(TIMEBAR_CONFIG_CHANGE, function (_a) {\n      var type = _a.type,\n        speed = _a.speed;\n      _this.currentSpeed = speed;\n    });\n  };\n  TimeBarSlice.prototype.changePlayStatus = function (isSync) {\n    if (isSync === void 0) {\n      isSync = true;\n    }\n    this.controllerBtnGroup.playButton.update({\n      isPlay: this.isPlay\n    });\n    if (this.isPlay) {\n      // 开始播放\n      this.playHandler = this.startPlay();\n      this.graph.emit(TIMELINE_START, null);\n    } else {\n      // 结束播放\n      if (this.playHandler) {\n        if (typeof window !== 'undefined') window.cancelAnimationFrame(this.playHandler);\n        if (isSync) {\n          this.graph.emit(TIMELINE_END, null);\n        }\n      }\n    }\n  };\n  TimeBarSlice.prototype.startPlay = function () {\n    var _this = this;\n    return typeof window !== 'undefined' ? window.requestAnimationFrame(function () {\n      var speed = _this.currentSpeed;\n      // 一分钟刷新一次\n      if (_this.frameCount % (60 / speed) === 0) {\n        _this.frameCount = 0;\n        _this.updateStartEnd(1);\n      }\n      _this.frameCount++;\n      if (_this.isPlay) {\n        _this.playHandler = _this.startPlay();\n      }\n    }) : undefined;\n  };\n  TimeBarSlice.prototype.updateStartEnd = function (sign) {\n    var self = this;\n    var tickRects = this.tickRects;\n    var ticksLength = tickRects.length;\n    var unselectedTickStyle = this.unselectedTickStyle;\n    var selectedTickStyle = this.selectedTickStyle;\n    var previousEndTickRectId = self.endTickRectId;\n    if (sign > 0) {\n      self.endTickRectId++;\n    } else {\n      tickRects[self.endTickRectId].rect.attr(unselectedTickStyle);\n      self.endTickRectId--;\n    }\n    // 若此时 start 与 end 不同，范围前进/后退/播放\n    if (previousEndTickRectId !== self.startTickRectId) {\n      if (self.endTickRectId < self.startTickRectId) {\n        self.startTickRectId = self.endTickRectId;\n      }\n    } else {\n      // 否则是单帧的前进/后退/播放\n      for (var i = self.startTickRectId; i <= self.endTickRectId - 1; i++) {\n        tickRects[i].rect.attr(unselectedTickStyle);\n      }\n      self.startTickRectId = self.endTickRectId;\n    }\n    if (tickRects[self.endTickRectId]) {\n      tickRects[self.endTickRectId].rect.attr(selectedTickStyle);\n      var start = self.startTickRectId / ticksLength;\n      var end = self.endTickRectId / ticksLength;\n      this.graph.emit(VALUE_CHANGE, {\n        value: [start, end]\n      });\n    }\n  };\n  TimeBarSlice.prototype.destory = function () {\n    var group = this.sliceGroup;\n    group.off('click');\n    group.off('dragstart');\n    group.off('dragover');\n    group.off('drop');\n    this.tickRects.forEach(function (tickRect) {\n      var pickRect = tickRect.pickRect;\n      pickRect.off('mouseenter');\n      pickRect.off('mouseleave');\n    });\n    this.tickRects.length = 0;\n    group.off(\"\".concat(PLAY_PAUSE_BTN, \":click\"));\n    group.off(\"\".concat(NEXT_STEP_BTN, \":click\"));\n    group.off(\"\".concat(PRE_STEP_BTN, \":click\"));\n    group.off(TIMEBAR_CONFIG_CHANGE);\n    this.sliceGroup.destroy();\n  };\n  return TimeBarSlice;\n}();\nexport default TimeBarSlice;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}