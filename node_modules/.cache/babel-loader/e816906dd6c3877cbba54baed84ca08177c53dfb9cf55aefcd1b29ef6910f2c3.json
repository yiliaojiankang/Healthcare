{"ast":null,"code":"import { isDigit } from './is-digit-start';\n/**\n * Validates every character of the path string,\n * every path command, negative numbers or floating point numbers.\n */\nexport function scanParam(path) {\n  var max = path.max,\n    pathValue = path.pathValue,\n    start = path.index;\n  var index = start;\n  var zeroFirst = false;\n  var hasCeiling = false;\n  var hasDecimal = false;\n  var hasDot = false;\n  var ch;\n  if (index >= max) {\n    // path.err = 'SvgPath: missed param (at pos ' + index + ')';\n    path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"pathValue\\\" is missing param\";\n    return;\n  }\n  ch = pathValue.charCodeAt(index);\n  if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n    index += 1;\n    // ch = (index < max) ? pathValue.charCodeAt(index) : 0;\n    ch = pathValue.charCodeAt(index);\n  }\n  // This logic is shamelessly borrowed from Esprima\n  // https://github.com/ariya/esprimas\n  if (!isDigit(ch) && ch !== 0x2e /* . */) {\n    // path.err = 'SvgPath: param should start with 0..9 or `.` (at pos ' + index + ')';\n    path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" is not a number\";\n    return;\n  }\n  if (ch !== 0x2e /* . */) {\n    zeroFirst = ch === 0x30 /* 0 */;\n    index += 1;\n    ch = pathValue.charCodeAt(index);\n    if (zeroFirst && index < max) {\n      // decimal number starts with '0' such as '09' is illegal.\n      if (ch && isDigit(ch)) {\n        // path.err = 'SvgPath: numbers started with `0` such as `09`\n        // are illegal (at pos ' + start + ')';\n        path.err = \"[path-util]: Invalid path value at index \" + start + \", \\\"\" + pathValue[start] + \"\\\" illegal number\";\n        return;\n      }\n    }\n    while (index < max && isDigit(pathValue.charCodeAt(index))) {\n      index += 1;\n      hasCeiling = true;\n    }\n    ch = pathValue.charCodeAt(index);\n  }\n  if (ch === 0x2e /* . */) {\n    hasDot = true;\n    index += 1;\n    while (isDigit(pathValue.charCodeAt(index))) {\n      index += 1;\n      hasDecimal = true;\n    }\n    ch = pathValue.charCodeAt(index);\n  }\n  if (ch === 0x65 /* e */ || ch === 0x45 /* E */) {\n    if (hasDot && !hasCeiling && !hasDecimal) {\n      path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" invalid float exponent\";\n      return;\n    }\n    index += 1;\n    ch = pathValue.charCodeAt(index);\n    if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n      index += 1;\n    }\n    if (index < max && isDigit(pathValue.charCodeAt(index))) {\n      while (index < max && isDigit(pathValue.charCodeAt(index))) {\n        index += 1;\n      }\n    } else {\n      path.err = \"[path-util]: Invalid path value at index \" + index + \", \\\"\" + pathValue[index] + \"\\\" invalid integer exponent\";\n      return;\n    }\n  }\n  path.index = index;\n  path.param = +path.pathValue.slice(start, index);\n}","map":{"version":3,"names":["isDigit","scanParam","path","max","pathValue","start","index","zeroFirst","hasCeiling","hasDecimal","hasDot","ch","err","charCodeAt","param","slice"],"sources":["src/path/parser/scan-param.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,OAAO,QAAQ,kBAAkB;AAG1C;;;;AAIA,OAAM,SAAUC,SAASA,CAACC,IAAgB;EAChC,IAAAC,GAAG,GAA8BD,IAAI,CAAAC,GAAlC;IAAEC,SAAS,GAAmBF,IAAI,CAAAE,SAAvB;IAASC,KAAK,GAAKH,IAAI,CAAAI,KAAT;EACpC,IAAIA,KAAK,GAAGD,KAAK;EACjB,IAAIE,SAAS,GAAG,KAAK;EACrB,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,MAAM,GAAG,KAAK;EAClB,IAAIC,EAAE;EAEN,IAAIL,KAAK,IAAIH,GAAG,EAAE;IAChB;IACAD,IAAI,CAACU,GAAG,GAAG,8CAA4CN,KAAK,qCAAgC;IAC5F;;EAEFK,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;EAEhC,IAAIK,EAAE,KAAK,IAAI,CAAC,WAAWA,EAAE,KAAK,IAAI,CAAC,SAAS;IAC9CL,KAAK,IAAI,CAAC;IACV;IACAK,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;;EAGlC;EACA;EACA,IAAI,CAACN,OAAO,CAACW,EAAE,CAAC,IAAIA,EAAE,KAAK,IAAI,CAAC,SAAS;IACvC;IACAT,IAAI,CAACU,GAAG,GAAG,8CAA4CN,KAAK,YAAMF,SAAS,CAACE,KAAK,CAAC,uBAAmB;IACrG;;EAGF,IAAIK,EAAE,KAAK,IAAI,CAAC,SAAS;IACvBJ,SAAS,GAAGI,EAAE,KAAK,IAAI,CAAC;IACxBL,KAAK,IAAI,CAAC;IAEVK,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;IAEhC,IAAIC,SAAS,IAAID,KAAK,GAAGH,GAAG,EAAE;MAC5B;MACA,IAAIQ,EAAE,IAAIX,OAAO,CAACW,EAAE,CAAC,EAAE;QACrB;QACA;QACAT,IAAI,CAACU,GAAG,GAAG,8CAA4CP,KAAK,YAAMD,SAAS,CAACC,KAAK,CAAC,sBAAkB;QACpG;;;IAIJ,OAAOC,KAAK,GAAGH,GAAG,IAAIH,OAAO,CAACI,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC,CAAC,EAAE;MAC1DA,KAAK,IAAI,CAAC;MACVE,UAAU,GAAG,IAAI;;IAGnBG,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;;EAGlC,IAAIK,EAAE,KAAK,IAAI,CAAC,SAAS;IACvBD,MAAM,GAAG,IAAI;IACbJ,KAAK,IAAI,CAAC;IACV,OAAON,OAAO,CAACI,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC,CAAC,EAAE;MAC3CA,KAAK,IAAI,CAAC;MACVG,UAAU,GAAG,IAAI;;IAGnBE,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;;EAGlC,IAAIK,EAAE,KAAK,IAAI,CAAC,WAAWA,EAAE,KAAK,IAAI,CAAC,SAAS;IAC9C,IAAID,MAAM,IAAI,CAACF,UAAU,IAAI,CAACC,UAAU,EAAE;MACxCP,IAAI,CAACU,GAAG,GAAG,8CAA4CN,KAAK,YAAMF,SAAS,CAACE,KAAK,CAAC,8BAA0B;MAC5G;;IAGFA,KAAK,IAAI,CAAC;IAEVK,EAAE,GAAGP,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC;IAEhC,IAAIK,EAAE,KAAK,IAAI,CAAC,WAAWA,EAAE,KAAK,IAAI,CAAC,SAAS;MAC9CL,KAAK,IAAI,CAAC;;IAEZ,IAAIA,KAAK,GAAGH,GAAG,IAAIH,OAAO,CAACI,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC,CAAC,EAAE;MACvD,OAAOA,KAAK,GAAGH,GAAG,IAAIH,OAAO,CAACI,SAAS,CAACS,UAAU,CAACP,KAAK,CAAC,CAAC,EAAE;QAC1DA,KAAK,IAAI,CAAC;;KAEb,MAAM;MACLJ,IAAI,CAACU,GAAG,GAAG,8CAA4CN,KAAK,YAAMF,SAAS,CAACE,KAAK,CAAC,gCAA4B;MAC9G;;;EAIJJ,IAAI,CAACI,KAAK,GAAGA,KAAK;EAClBJ,IAAI,CAACY,KAAK,GAAG,CAACZ,IAAI,CAACE,SAAS,CAACW,KAAK,CAACV,KAAK,EAAEC,KAAK,CAAC;AAClD"},"metadata":{},"sourceType":"module","externalDependencies":[]}