{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { createL7Icon } from \"../utils/icon\";\nimport ButtonControl from \"./baseControl/buttonControl\";\nexport { GeoLocate };\nvar GeoLocate = /*#__PURE__*/function (_ButtonControl) {\n  _inherits(GeoLocate, _ButtonControl);\n  var _super = _createSuper(GeoLocate);\n  function GeoLocate(option) {\n    var _this;\n    _classCallCheck(this, GeoLocate);\n    _this = _super.call(this, option);\n    /**\n     * 通过浏览器 API 获取当前所在经纬度\n     */\n    _defineProperty(_assertThisInitialized(_this), \"getGeoLocation\", function () {\n      return new Promise(function (resolve, reject) {\n        window.navigator.geolocation.getCurrentPosition(function (_ref) {\n          var coords = _ref.coords;\n          var _ref2 = coords !== null && coords !== void 0 ? coords : {},\n            longitude = _ref2.longitude,\n            latitude = _ref2.latitude;\n          if (!isNaN(longitude) && !isNaN(latitude)) {\n            resolve([longitude, latitude]);\n          } else {\n            reject();\n          }\n        }, function (e) {\n          reject(e);\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var transform, position, currentZoom;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (window.navigator.geolocation) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            transform = _this.controlOption.transform;\n            _context.next = 5;\n            return _this.getGeoLocation();\n          case 5:\n            position = _context.sent;\n            currentZoom = _this.mapsService.getZoom();\n            _context.t0 = _this.mapsService;\n            _context.t1 = currentZoom > 15 ? currentZoom : 15;\n            if (!transform) {\n              _context.next = 15;\n              break;\n            }\n            _context.next = 12;\n            return transform(position);\n          case 12:\n            _context.t2 = _context.sent;\n            _context.next = 16;\n            break;\n          case 15:\n            _context.t2 = position;\n          case 16:\n            _context.t3 = _context.t2;\n            _context.t0.setZoomAndCenter.call(_context.t0, _context.t1, _context.t3);\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })));\n    if (!window.navigator.geolocation) {\n      console.warn('当前浏览器环境不支持获取地理定位');\n    }\n    return _this;\n  }\n  _createClass(GeoLocate, [{\n    key: \"getDefault\",\n    value: function getDefault(option) {\n      return _objectSpread(_objectSpread({}, _get(_getPrototypeOf(GeoLocate.prototype), \"getDefault\", this).call(this, option)), {}, {\n        title: '定位',\n        btnIcon: createL7Icon('l7-icon-reposition')\n      });\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd() {\n      var button = _get(_getPrototypeOf(GeoLocate.prototype), \"onAdd\", this).call(this);\n      button.addEventListener('click', this.onClick);\n      return button;\n    }\n  }]);\n  return GeoLocate;\n}(ButtonControl);\nexport { GeoLocate as default };","map":{"version":3,"names":["_objectSpread","_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_get","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","createL7Icon","ButtonControl","GeoLocate","_ButtonControl","_super","option","_this","Promise","resolve","reject","window","navigator","geolocation","getCurrentPosition","_ref","coords","_ref2","longitude","latitude","isNaN","mark","_callee","transform","position","currentZoom","wrap","_callee$","_context","prev","next","abrupt","controlOption","getGeoLocation","sent","mapsService","getZoom","t0","t1","t2","t3","setZoomAndCenter","stop","console","warn","key","value","getDefault","title","btnIcon","onAdd","button","addEventListener","onClick","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-component/es/control/geoLocate.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { createL7Icon } from \"../utils/icon\";\nimport ButtonControl from \"./baseControl/buttonControl\";\nexport { GeoLocate };\nvar GeoLocate = /*#__PURE__*/function (_ButtonControl) {\n  _inherits(GeoLocate, _ButtonControl);\n  var _super = _createSuper(GeoLocate);\n  function GeoLocate(option) {\n    var _this;\n    _classCallCheck(this, GeoLocate);\n    _this = _super.call(this, option);\n    /**\n     * 通过浏览器 API 获取当前所在经纬度\n     */\n    _defineProperty(_assertThisInitialized(_this), \"getGeoLocation\", function () {\n      return new Promise(function (resolve, reject) {\n        window.navigator.geolocation.getCurrentPosition(function (_ref) {\n          var coords = _ref.coords;\n          var _ref2 = coords !== null && coords !== void 0 ? coords : {},\n            longitude = _ref2.longitude,\n            latitude = _ref2.latitude;\n          if (!isNaN(longitude) && !isNaN(latitude)) {\n            resolve([longitude, latitude]);\n          } else {\n            reject();\n          }\n        }, function (e) {\n          reject(e);\n        });\n      });\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var transform, position, currentZoom;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (window.navigator.geolocation) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            transform = _this.controlOption.transform;\n            _context.next = 5;\n            return _this.getGeoLocation();\n          case 5:\n            position = _context.sent;\n            currentZoom = _this.mapsService.getZoom();\n            _context.t0 = _this.mapsService;\n            _context.t1 = currentZoom > 15 ? currentZoom : 15;\n            if (!transform) {\n              _context.next = 15;\n              break;\n            }\n            _context.next = 12;\n            return transform(position);\n          case 12:\n            _context.t2 = _context.sent;\n            _context.next = 16;\n            break;\n          case 15:\n            _context.t2 = position;\n          case 16:\n            _context.t3 = _context.t2;\n            _context.t0.setZoomAndCenter.call(_context.t0, _context.t1, _context.t3);\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })));\n    if (!window.navigator.geolocation) {\n      console.warn('当前浏览器环境不支持获取地理定位');\n    }\n    return _this;\n  }\n  _createClass(GeoLocate, [{\n    key: \"getDefault\",\n    value: function getDefault(option) {\n      return _objectSpread(_objectSpread({}, _get(_getPrototypeOf(GeoLocate.prototype), \"getDefault\", this).call(this, option)), {}, {\n        title: '定位',\n        btnIcon: createL7Icon('l7-icon-reposition')\n      });\n    }\n  }, {\n    key: \"onAdd\",\n    value: function onAdd() {\n      var button = _get(_getPrototypeOf(GeoLocate.prototype), \"onAdd\", this).call(this);\n      button.addEventListener('click', this.onClick);\n      return button;\n    }\n  }]);\n  return GeoLocate;\n}(ButtonControl);\nexport { GeoLocate as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}