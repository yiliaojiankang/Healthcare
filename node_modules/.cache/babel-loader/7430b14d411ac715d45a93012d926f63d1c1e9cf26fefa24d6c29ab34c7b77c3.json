{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { getCirclePoint } from '../util/util';\nimport CrosshairBase from './base';\nvar LineCrosshair = /** @class */function (_super) {\n  __extends(LineCrosshair, _super);\n  function LineCrosshair() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  LineCrosshair.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      type: 'circle',\n      locationType: 'circle',\n      center: null,\n      radius: 100,\n      startAngle: -Math.PI / 2,\n      endAngle: Math.PI * 3 / 2\n    });\n  };\n  LineCrosshair.prototype.getRotateAngle = function () {\n    var _a = this.getLocation(),\n      startAngle = _a.startAngle,\n      endAngle = _a.endAngle;\n    var position = this.get('text').position;\n    var tangentAngle = position === 'start' ? startAngle + Math.PI / 2 : endAngle - Math.PI / 2;\n    return tangentAngle;\n  };\n  LineCrosshair.prototype.getTextPoint = function () {\n    var text = this.get('text');\n    var position = text.position,\n      offset = text.offset;\n    var _a = this.getLocation(),\n      center = _a.center,\n      radius = _a.radius,\n      startAngle = _a.startAngle,\n      endAngle = _a.endAngle;\n    var angle = position === 'start' ? startAngle : endAngle;\n    var tangentAngle = this.getRotateAngle() - Math.PI;\n    var point = getCirclePoint(center, radius, angle);\n    // 这个地方其实应该求切线向量然后在乘以 offset，但是太啰嗦了，直接给出结果\n    // const tangent = [Math.cos(tangentAngle), Math.sin(tangentAngle)];\n    // const offsetVector = vec2.scale([], tangent, offset);\n    var offsetX = Math.cos(tangentAngle) * offset;\n    var offsetY = Math.sin(tangentAngle) * offset;\n    return {\n      x: point.x + offsetX,\n      y: point.y + offsetY\n    };\n  };\n  LineCrosshair.prototype.getLinePath = function () {\n    var _a = this.getLocation(),\n      center = _a.center,\n      radius = _a.radius,\n      startAngle = _a.startAngle,\n      endAngle = _a.endAngle;\n    var path = null;\n    if (endAngle - startAngle === Math.PI * 2) {\n      // 整圆\n      var x = center.x,\n        y = center.y;\n      path = [['M', x, y - radius], ['A', radius, radius, 0, 1, 1, x, y + radius], ['A', radius, radius, 0, 1, 1, x, y - radius], ['Z']];\n    } else {\n      var startPoint = getCirclePoint(center, radius, startAngle);\n      var endPoint = getCirclePoint(center, radius, endAngle);\n      var large = Math.abs(endAngle - startAngle) > Math.PI ? 1 : 0;\n      var sweep = startAngle > endAngle ? 0 : 1;\n      path = [['M', startPoint.x, startPoint.y], ['A', radius, radius, 0, large, sweep, endPoint.x, endPoint.y]];\n    }\n    return path;\n  };\n  return LineCrosshair;\n}(CrosshairBase);\nexport default LineCrosshair;","map":{"version":3,"names":["getCirclePoint","CrosshairBase","LineCrosshair","_super","__extends","prototype","getDefaultCfg","cfg","call","__assign","type","locationType","center","radius","startAngle","Math","PI","endAngle","getRotateAngle","_a","getLocation","position","get","tangentAngle","getTextPoint","text","offset","angle","point","offsetX","cos","offsetY","sin","x","y","getLinePath","path","startPoint","endPoint","large","abs","sweep"],"sources":["../../src/crosshair/circle.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}