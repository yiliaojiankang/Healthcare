{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { isNumber, debounce } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport insertCss from 'insert-css';\nimport { Canvas } from '@antv/g-canvas';\nimport Base from '../base';\ntypeof document !== 'undefined' && insertCss(\"\\n  .g6-annotation-container {\\n    background-color: rgba(255, 255, 255, 0.3);\\n    padding: 8px;\\n  }\\n  .g6-annotation-wrapper {\\n    background-color: #fff;\\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\\n  }\\n  .g6-annotation-header-wapper {\\n    height: fit-content;\\n    width: 100%;\\n    background-color: #5B8FF9;\\n    display: inline-flex;\\n    cursor: move;\\n  }\\n  .g6-annotation-title {\\n    margin: 4px 40px 4px 8px;\\n    cursor: text;\\n    min-width: 32px;\\n  }\\n  .g6-annotation-collapse {\\n    margin: 4px;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-expand {\\n    margin: 4px;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-close {\\n    margin: 4px 8px 4px 0;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-content {\\n    padding: 8px;\\n    width: fit-content;\\n    cursor: text;\\n    word-break: break-all;\\n    min-width: 32px;\\n  }\\n  .g6-annotation-title-input-wrapper {\\n    margin: 4px 40px 4px 8px;\\n  }\\n  .g6-annotation-content-input {\\n    height: 100%;\\n    word-break: break-all;\\n  }\\n  .g6-annotation-content-input-wrapper {\\n    margin: 8px;\\n    height: 100%;\\n  }\\n\");\nvar CANVAS_ANNOTATION_ID = 'canvas-annotation';\nvar Annotation = /** @class */function (_super) {\n  __extends(Annotation, _super);\n  function Annotation(config) {\n    return _super.call(this, config) || this;\n  }\n  Annotation.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'click',\n      editable: true,\n      itemHighlightState: 'highlight',\n      linkHighlightStyle: {\n        shadowColor: '#5B8FF9',\n        shadowBlur: 10\n      },\n      cardCfg: {\n        minHeight: 60,\n        width: 'fit-content',\n        height: 'fit-content',\n        collapseType: 'minimize',\n        closeType: 'hide',\n        borderRadius: 5,\n        maxTitleLength: 20\n      }\n    };\n  };\n  // class-methods-use-this\n  Annotation.prototype.getEvents = function () {\n    var events = {\n      'viewportchange': 'updateLinks',\n      'afterlayout': 'updateLinks',\n      'aftergraphrefreshposition': 'updateLinks',\n      'afterupdateitem': 'updateLink',\n      'afterchangedata': 'onGraphDataChange',\n      'afteritemvisibilitychange': 'onGraphItemVisibilityChange'\n    };\n    switch (this.get('trigger')) {\n      case 'click':\n        events = __assign(__assign({}, events), {\n          'node:click': 'showAnnotation',\n          'edge:click': 'showAnnotation'\n        });\n    }\n    return events;\n  };\n  Annotation.prototype.getDOMContent = function (cfg) {\n    if (this.destroyed) return;\n    var collapsed = cfg.collapsed,\n      maxWidth = cfg.maxWidth,\n      _a = cfg.title,\n      title = _a === void 0 ? '' : _a,\n      _b = cfg.content,\n      content = _b === void 0 ? '' : _b,\n      _c = cfg.borderRadius,\n      r = _c === void 0 ? 5 : _c;\n    var collapseExpandDOM = collapsed ? \"<p class='g6-annotation-expand'>+</p>\" : \"<p class='g6-annotation-collapse'>-</p>\";\n    var contentDOM = collapsed ? '' : \" <p class='g6-annotation-content'>\".concat(content, \"</p>\");\n    var closeDOM = \"<p class='g6-annotation-close'>x</p>\";\n    var borderRadius = collapsed ? \"\".concat(r, \"px\") : \"\".concat(r, \"px \").concat(r, \"px 0 0\");\n    return \"<div class=\\\"g6-annotation-wrapper\\\" style=\\\"border-radius: \".concat(r, \"px; max-width: \").concat(maxWidth, \"px\\\">\\n        <div\\n          class=\\\"g6-annotation-header-wapper\\\"\\n          style=\\\"border-radius: \").concat(borderRadius, \";\\\"\\n        >\\n          <h4 class='g6-annotation-title'>\").concat(title, \"</h4>\\n          \").concat(collapseExpandDOM, \"\\n          \").concat(closeDOM, \"\\n        </div>\\n        \").concat(contentDOM, \"\\n      </div>\");\n  };\n  Annotation.prototype.init = function () {\n    var self = this;\n    if (self.destroyed) return;\n    var graph = self.get('graph');\n    var graphCantainer = graph.getContainer();\n    var container = self.get('container');\n    var containerCfg = this.get('containerCfg');\n    if (containerCfg) {\n      container = this.createContainer();\n      graphCantainer.appendChild(container);\n    } else {\n      container = graphCantainer;\n    }\n    this.set('container', container);\n    // 绘制连接 annotation 和元素的连线的画布\n    var graphContainerBBox = graphCantainer.getBoundingClientRect();\n    var linkCanvas = new Canvas({\n      container: graphCantainer,\n      width: graphContainerBBox.right - graphContainerBBox.left,\n      height: graphContainerBBox.bottom - graphContainerBBox.top\n    });\n    modifyCSS(linkCanvas.get('el'), {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      pointerEvents: 'none'\n    });\n    // 需要传入 self，无法 removeEventListener，只能在内部判断 self 被销毁则不继续\n    window.addEventListener('resize', debounce(function () {\n      return self.resizeCanvas(self);\n    }, 100));\n    var linkGroup = linkCanvas.addGroup({\n      id: 'annotation-link-group'\n    });\n    self.set('linkGroup', linkGroup);\n    self.set('canvas', linkCanvas);\n    if (!self.get('getTitle')) {\n      self.set('getTitle', function (item) {\n        var _a;\n        var _b = ((_a = item === null || item === void 0 ? void 0 : item.getModel) === null || _a === void 0 ? void 0 : _a.call(item)) || {},\n          label = _b.label,\n          id = _b.id;\n        return label || id || '-';\n      });\n    }\n    if (!self.get('getContent')) {\n      self.set('getContent', function (item) {\n        var _a, _b;\n        if (!item) return '-';\n        var _c = ((_a = item.getModel) === null || _a === void 0 ? void 0 : _a.call(item)) || {},\n          label = _c.label,\n          id = _c.id;\n        var type = (_b = item.getType) === null || _b === void 0 ? void 0 : _b.call(item);\n        var suffix = type ? \"\".concat(type, \": \") : '';\n        return \"\".concat(suffix).concat(label || id || '');\n      });\n    }\n    // init with defaultData\n    var defaultData = self.get('defaultData');\n    if (defaultData) this.readData(defaultData);\n  };\n  Annotation.prototype.createContainer = function () {\n    var _this = this;\n    if (this.destroyed) return;\n    var containerCfg = this.get('containerCfg');\n    var graph = this.get('graph');\n    var graphContainer = graph.getContainer();\n    var _a = graphContainer.getBoundingClientRect(),\n      gLeft = _a.left,\n      gRight = _a.right,\n      gTop = _a.top,\n      gBottom = _a.bottom;\n    var graphContainerHeight = gBottom - gTop;\n    var graphContainerWidth = gRight - gLeft;\n    var _b = containerCfg.position,\n      position = _b === void 0 ? 'top' : _b,\n      _c = containerCfg.offsetX,\n      offsetX = _c === void 0 ? 0 : _c,\n      _d = containerCfg.offsetY,\n      offsetY = _d === void 0 ? 0 : _d,\n      otherStyle = __rest(containerCfg, [\"position\", \"offsetX\", \"offsetY\"]);\n    var _e = containerCfg.height,\n      height = _e === void 0 ? 'fit-content' : _e,\n      _f = containerCfg.width,\n      width = _f === void 0 ? graph.getWidth() : _f;\n    if (height === '100%') height = graphContainerHeight;\n    if (width === '100%') width = graphContainerWidth;\n    var maxHeight = 'unset',\n      maxWidth = 'unset';\n    var containerPosition = {};\n    switch (position) {\n      case 'right':\n        maxHeight = \"\".concat(graphContainerHeight, \"px\");\n        containerPosition = {\n          top: 0,\n          right: 0\n        };\n        containerPosition.right += gLeft + offsetX;\n        containerPosition.top += gTop + offsetY;\n        break;\n      case 'bottom':\n        maxWidth = \"\".concat(graphContainerWidth, \"px\");\n        containerPosition = {\n          bottom: 0,\n          left: 0\n        };\n        containerPosition.left += gLeft + offsetX;\n        containerPosition.bottom += gTop + offsetY;\n        break;\n      case 'top':\n        maxWidth = \"\".concat(graphContainerWidth, \"px\");\n      case 'left':\n        maxHeight = \"\".concat(graphContainerHeight, \"px\");\n      default:\n        containerPosition = {\n          top: 0,\n          left: 0\n        };\n        containerPosition.left += gLeft + offsetX;\n        containerPosition.top += gTop + offsetY;\n        break;\n    }\n    Object.keys(containerPosition).forEach(function (key) {\n      containerPosition[key] = \"\".concat(containerPosition[key], \"px\");\n    });\n    var container = createDom(\"<div class='\".concat(containerCfg.className, \" g6-annotation-container'></div>\"));\n    modifyCSS(container, __assign(__assign({\n      position: 'absolute',\n      display: position === 'top' || position === 'bottom' ? 'inline-flex' : 'unset',\n      width: isNumber(width) ? \"\".concat(width, \"px\") : width,\n      height: isNumber(height) ? \"\".concat(height, \"px\") : height,\n      maxHeight: maxHeight,\n      maxWidth: maxWidth,\n      overflow: 'scroll'\n    }, containerPosition), otherStyle));\n    graphContainer.appendChild(container);\n    container.addEventListener('scroll', function (e) {\n      _this.updateLinks();\n    });\n    return container;\n  };\n  Annotation.prototype.resizeCanvas = function (self) {\n    // 仅在 resize 完成后进行调整\n    clearTimeout(self.resizeTimer);\n    self.resizeTimer = setTimeout(function () {\n      if (!self || self.destroyed) return;\n      var cBBox = self.get('container').getBoundingClientRect();\n      var newWidth = cBBox.right - cBBox.left;\n      var newHeight = cBBox.bottom - cBBox.top;\n      self.get('canvas').changeSize(newWidth, newHeight);\n      self.updateOutsideCards(self);\n    }, 250);\n  };\n  /**\n   * 更新超出视口范围的卡片位置\n   * @param selfObj 当前 annotation 插件对象。外部调用不需要传入该参数\n   */\n  Annotation.prototype.updateOutsideCards = function (selfObj) {\n    var self = selfObj || this;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    var graph = self.get('graph');\n    var graphLeftTopCanvas = graph.getPointByCanvas(0, 0);\n    var graphRightBottomCanvas = graph.getPointByCanvas(graph.getWidth(), graph.getHeight());\n    var _a = graph.getClientByPoint(graphLeftTopCanvas.x, graphLeftTopCanvas.y),\n      graphLeft = _a.x,\n      graphTop = _a.y;\n    var _b = graph.getClientByPoint(graphRightBottomCanvas.x, graphRightBottomCanvas.y),\n      graphRight = _b.x,\n      graphBottom = _b.y;\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var card = cardInfo.card;\n      if (!card) return;\n      var style = card.style;\n      var left = px2Num(style.left);\n      var top = px2Num(style.top);\n      var _a = card.getBoundingClientRect(),\n        width = _a.width,\n        height = _a.height;\n      var newLeft = left;\n      var newTop = top;\n      if (left + width > graphRight - graphLeft) {\n        newLeft = graphRight - graphLeft - width;\n      }\n      if (left < 0) {\n        newLeft = 0;\n      }\n      if (top + height > graphBottom - graphTop) {\n        newTop = graphBottom - graphTop - height;\n      }\n      if (top < 0) {\n        newTop = 0;\n      }\n      modifyCSS(card, {\n        left: \"\".concat(newLeft, \"px\"),\n        top: \"\".concat(newTop, \"px\")\n      });\n    });\n    self.updateLinks();\n  };\n  Annotation.prototype.showAnnotation = function (evt) {\n    if (this.destroyed) return;\n    var item = evt.item;\n    this.toggleAnnotation(item);\n  };\n  Annotation.prototype.hideCards = function () {\n    var self = this;\n    if (self.destroyed) return;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    Object.keys(cardInfoMap).forEach(function (itemId) {\n      self.hideCard(itemId);\n    });\n  };\n  Annotation.prototype.toggleAnnotation = function (item, cfg) {\n    var _a, _b;\n    if (cfg === void 0) {\n      cfg = {};\n    }\n    var self = this;\n    if (self.destroyed) return;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    var graph = self.get('graph');\n    var container = self.get('container');\n    var containerCfg = self.get('containerCfg');\n    var _c = Object.assign({}, self.get('cardCfg') || {}, cfg),\n      minHeight = _c.minHeight,\n      minWidth = _c.minWidth,\n      width = _c.width,\n      height = _c.height,\n      _d = _c.collapsed,\n      collapsed = _d === void 0 ? false : _d,\n      propsX = _c.x,\n      propsY = _c.y,\n      propsTitle = _c.title,\n      propsContent = _c.content,\n      maxTitleLength = _c.maxTitleLength,\n      defaultBegin = _c.defaultBegin,\n      otherCardCfg = __rest(_c, [\"minHeight\", \"minWidth\", \"width\", \"height\", \"collapsed\", \"x\", \"y\", \"title\", \"content\", \"maxTitleLength\", \"defaultBegin\"]);\n    var linkGroup = self.get('linkGroup');\n    var rows = this.get('rows') || [[]];\n    var isCanvas = (_a = item.isCanvas) === null || _a === void 0 ? void 0 : _a.call(item);\n    var itemId = isCanvas ? CANVAS_ANNOTATION_ID : item.getID();\n    var _e = cardInfoMap[itemId] || {},\n      card = _e.card,\n      link = _e.link,\n      x = _e.x,\n      y = _e.y,\n      title = _e.title,\n      content = _e.content;\n    var getTitle = this.get('getTitle');\n    var getContent = this.get('getContent');\n    var getContentPlaceholder = this.get('getContentPlaceholder') || function () {\n      return '';\n    };\n    var getTitlePlaceHolder = this.get('getTitlePlaceHolder') || function () {\n      return '';\n    };\n    var contentPlaceholder = getContentPlaceholder(item);\n    var titlePlaceholder = getTitlePlaceHolder(item);\n    var newCard = createDom(this.getDOMContent(__assign({\n      itemId: itemId,\n      collapsed: collapsed,\n      title: ((_b = title || propsTitle || (getTitle === null || getTitle === void 0 ? void 0 : getTitle(item))) === null || _b === void 0 ? void 0 : _b.substr(0, maxTitleLength)) || titlePlaceholder,\n      content: content || propsContent || (getContent === null || getContent === void 0 ? void 0 : getContent(item)) || contentPlaceholder\n    }, otherCardCfg)));\n    var minHeightPx = isNumber(minHeight) ? \"\".concat(minHeight, \"px\") : minHeight;\n    modifyCSS(newCard, {\n      minHeight: collapsed ? 'unset' : minHeightPx,\n      minWidth: isNumber(minWidth) ? \"\".concat(minWidth, \"px\") : minWidth,\n      height: height,\n      width: width\n    });\n    var exist = !!card;\n    if (exist) {\n      // 移除相应连线\n      link === null || link === void 0 ? void 0 : link.remove(true);\n      // 替换原来的卡片\n      container.replaceChild(newCard, card);\n    } else {\n      container.appendChild(newCard);\n    }\n    var containerBBox;\n    if (!containerCfg) {\n      containerBBox = container.getBoundingClientRect() || {};\n      if (propsX !== undefined && propsY !== undefined) {\n        // 使用配置的位置\n        x = propsX;\n        y = propsY;\n      } else if (!exist && !isCanvas) {\n        // 第一次创建，且无 conatiner，初始化位置\n        var containerTop = containerBBox.top;\n        var _f = defaultBegin || {},\n          beginLeft = _f.left,\n          _g = _f.right,\n          propsBeginRight = _g === void 0 ? 16 : _g,\n          _h = _f.top,\n          propsBeginTop = _h === void 0 ? 8 : _h,\n          beginBottom = _f.bottom;\n        var beginRight = propsBeginRight;\n        var beginTop = propsBeginTop;\n        if (!isNaN(beginLeft)) {\n          beginRight = container.scrollWidth - beginLeft;\n        }\n        if (!isNaN(beginBottom)) {\n          beginTop = container.scrollHeight - beginBottom;\n        }\n        var cardWidth = isNumber(minWidth) ? minWidth : 100;\n        x = container.scrollWidth - newCard.scrollWidth - (rows.length - 1) * cardWidth - beginRight;\n        var currentRow = rows[rows.length - 1];\n        var lastCardBBox = (currentRow[currentRow.length - 1] || {}).bbox;\n        y = (lastCardBBox === null || lastCardBBox === void 0 ? void 0 : lastCardBBox.bottom) - containerTop || beginTop;\n      }\n      modifyCSS(newCard, {\n        position: 'absolute',\n        left: \"\".concat(x, \"px\"),\n        top: \"\".concat(y, \"px\"),\n        cusor: containerCfg ? 'unset' : 'move'\n      });\n    }\n    this.bindListener(newCard, itemId);\n    var cardBBox = newCard.getBoundingClientRect();\n    if (!isCanvas) {\n      // 创建相关连线\n      var path = getPathItem2Card(item, cardBBox, graph, this.get('canvas'));\n      var linkStyle = this.get('linkStyle');\n      link = linkGroup.addShape('path', {\n        attrs: __assign({\n          lineWidth: 1,\n          lineDash: [5, 5],\n          stroke: '#ccc',\n          path: path\n        }, linkStyle)\n      });\n    }\n    cardInfoMap[itemId] = __assign(__assign({}, cardInfoMap[itemId] || {}), {\n      id: itemId,\n      collapsed: collapsed,\n      card: newCard,\n      link: link,\n      x: x,\n      y: y,\n      cardBBox: cardBBox,\n      content: content || propsContent,\n      title: title || propsTitle,\n      contentPlaceholder: contentPlaceholder,\n      titlePlaceholder: titlePlaceholder,\n      isCanvas: isCanvas\n    });\n    self.set('cardInfoMap', cardInfoMap);\n    if (containerCfg) {\n      this.updateCardPositionsInConatainer();\n      this.updateLinks();\n    } else {\n      var hasPropsPosition = !isNaN(propsX) && !isNaN(propsY);\n      if (!exist && !isCanvas && !hasPropsPosition) {\n        // 没有 container、新增 card 时，记录当前列中最下方位置，方便换行\n        var _j = containerBBox.bottom,\n          containerBottom = _j === void 0 ? 0 : _j,\n          containerTop = containerBBox.top;\n        rows[rows.length - 1].push({\n          id: itemId,\n          bbox: cardBBox\n        });\n        if (cardBBox.top > containerBottom - containerTop - cardBBox.height - 16) rows.push([]);\n        this.set('rows', rows);\n      }\n    }\n    this.updateCardSize(itemId);\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfoMap[itemId], exist ? 'update' : 'create');\n  };\n  Annotation.prototype.updateCardPositionsInConatainer = function () {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var container = this.get('container');\n    var position = this.get('containerCfg').position;\n    var containerWidth = container.getBoundingClientRect().width;\n    var computeStyle = getComputedStyle(container);\n    var sidePadding = px2Num(computeStyle['paddingLeft']) + px2Num(computeStyle['paddingRight']);\n    containerWidth -= sidePadding;\n    Object.values(cardInfoMap).forEach(function (_a) {\n      var card = _a.card;\n      var cardWidth = card.getBoundingClientRect().width;\n      switch (position) {\n        case 'right':\n          modifyCSS(card, {\n            marginLeft: containerWidth ? \"\".concat(containerWidth - cardWidth, \"px\") : '0px'\n          });\n          break;\n        case 'top':\n        case 'bottom':\n          modifyCSS(card, {\n            marginLeft: '8px'\n          });\n        default:\n          break;\n      }\n    });\n  };\n  Annotation.prototype.handleExpandCollapseCard = function (id) {\n    if (this.destroyed) return;\n    var graph = this.get('graph');\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var collapsed = cardInfoMap[id].collapsed;\n    var item = graph.findById(id);\n    if (!item) return;\n    var collapseType = this.get('cardCfg').collapseType;\n    if (collapseType === 'hide' && !collapsed) {\n      // collapse 行为被配置为隐藏\n      this.hideCard(id);\n    } else {\n      this.toggleAnnotation(item, {\n        collapsed: !collapsed\n      });\n    }\n    cardInfoMap[id] = __assign(__assign({}, cardInfoMap[id]), {\n      collapsed: !collapsed\n    });\n  };\n  /**\n   * 隐藏标注卡片，下次打开还保留隐藏前的配置，包括文本内容、位置等\n   * @param id 卡片 id，即元素(节点/边)的 id\n   * @returns\n   */\n  Annotation.prototype.hideCard = function (id) {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap || !cardInfoMap[id]) return;\n    var _a = cardInfoMap[id],\n      card = _a.card,\n      link = _a.link;\n    modifyCSS(card, {\n      display: 'none'\n    });\n    link === null || link === void 0 ? void 0 : link.hide();\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange(cardInfoMap[id], 'hide');\n  };\n  /**\n   * 移除标注卡片，下一次生成时将被初始化\n   * @param id 卡片 id，即元素(节点/边)的 id\n   * @returns\n   */\n  Annotation.prototype.removeCard = function (id) {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var cardInfo = cardInfoMap[id];\n    var card = cardInfo.card,\n      link = cardInfo.link;\n    var container = this.get('container');\n    container.removeChild(card);\n    link === null || link === void 0 ? void 0 : link.remove(true);\n    delete cardInfoMap[id];\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange(cardInfo, 'remove');\n  };\n  Annotation.prototype.bindListener = function (card, itemId) {\n    var _this = this;\n    if (this.destroyed) return;\n    card.addEventListener('mousemove', function (e) {\n      // icon 的鼠标进入监听，方便外部加 tooltip\n      var iconType;\n      if (e.target.className === 'g6-annotation-collapse') {\n        iconType = 'collapse';\n      } else if (e.target.className === 'g6-annotation-expand') {\n        iconType = 'expand';\n      } else if (e.target.className === 'g6-annotation-close') {\n        iconType = 'close';\n      }\n      if (iconType) {\n        var _a = _this.get('cardCfg').onMouseEnterIcon,\n          onMouseEnterIcon = _a === void 0 ? function () {} : _a;\n        onMouseEnterIcon(e, itemId, iconType);\n      }\n    });\n    card.addEventListener('mouseout', function (e) {\n      // icon 的鼠标移出监听，方便外部加 tooltip\n      var iconType;\n      if (e.target.className === 'g6-annotation-collapse') {\n        iconType = 'collapse';\n      } else if (e.target.className === 'g6-annotation-expand') {\n        iconType = 'expand';\n      } else if (e.target.className === 'g6-annotation-close') {\n        iconType = 'close';\n      }\n      if (iconType) {\n        var _a = _this.get('cardCfg').onMouseLeaveIcon,\n          onMouseLeaveIcon = _a === void 0 ? function () {} : _a;\n        onMouseLeaveIcon(e, itemId, iconType);\n      }\n    });\n    // mouseenter and mouseleave to highlight the corresponding items\n    card.addEventListener('mouseenter', function (e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var graph = _this.get('graph');\n      var item = graph.findById(itemId);\n      if (item) {\n        var itemHighlightState = _this.get('itemHighlightState');\n        graph.setItemState(item, itemHighlightState, true);\n      }\n      var link = cardInfoMap[itemId].link;\n      if (link) {\n        var linkHighlightStyle = _this.get('linkHighlightStyle') || {};\n        link.attr(linkHighlightStyle);\n      }\n    });\n    card.addEventListener('mouseleave', function (e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var graph = _this.get('graph');\n      var item = graph.findById(itemId);\n      if (item) {\n        var itemHighlightState = _this.get('itemHighlightState');\n        graph.setItemState(item, itemHighlightState, false);\n      }\n      var link = cardInfoMap[itemId].link;\n      if (link) {\n        var linkHighlightStyle = _this.get('linkHighlightStyle') || {};\n        Object.keys(linkHighlightStyle).forEach(function (key) {\n          link.attr(key, undefined);\n          link.attr(key, undefined);\n        });\n        var linkStyle = _this.get('linkStyle');\n        link.attr(linkStyle);\n      }\n    });\n    card.addEventListener('click', function (e) {\n      var onClickIcon = (_this.get('cardCfg') || {}).onClickIcon;\n      if (e.target.className === 'g6-annotation-collapse' || e.target.className === 'g6-annotation-expand') {\n        // collapse & expand\n        var collapseType = _this.get('cardCfg').collapseType;\n        if (collapseType === 'hide') {\n          _this.hideCard(itemId);\n        } else {\n          _this.handleExpandCollapseCard(itemId);\n        }\n        onClickIcon === null || onClickIcon === void 0 ? void 0 : onClickIcon(e, itemId, e.target.className === 'g6-annotation-collapse' ? 'collapse' : 'expand');\n      } else if (e.target.className === 'g6-annotation-close') {\n        // close\n        var closeType = _this.get('cardCfg').closeType;\n        if (closeType === 'remove') {\n          _this.removeCard(itemId);\n        } else {\n          _this.hideCard(itemId);\n        }\n        onClickIcon === null || onClickIcon === void 0 ? void 0 : onClickIcon(e, itemId, 'close');\n      }\n    });\n    // dblclick to edit the title and content text\n    var editable = this.get('editable');\n    if (editable) {\n      card.addEventListener('dblclick', function (e) {\n        var cardInfoMap = _this.get('cardInfoMap');\n        var _a = (_this.get('cardCfg') || {}).maxTitleLength,\n          maxTitleLength = _a === void 0 ? 20 : _a;\n        if (!cardInfoMap) return;\n        var target = e.target;\n        var targetClass = target.className;\n        if (targetClass !== 'g6-annotation-title' && targetClass !== 'g6-annotation-content') return;\n        var _b = targetClass === 'g6-annotation-title' ? target.getBoundingClientRect() : target.parentNode.getBoundingClientRect(),\n          width = _b.width,\n          height = _b.height;\n        var computeStyle = getComputedStyle(target);\n        var inputTag = targetClass === 'g6-annotation-title' ? 'input' : 'textarea';\n        var input = createDom(\"<\".concat(inputTag, \" class=\\\"\").concat(targetClass, \"-input\\\" type=\\\"textarea\\\" style=\\\"width:\").concat(width, \"px; height: \").concat(height, \"px; min-width: 16px;\\\"/>\"));\n        var inputWrapper = createDom(\"<div class=\\\"\".concat(targetClass, \"-input-wrapper\\\" style=\\\"width: \").concat(width, \"px; height: \").concat(height, \"px; min-width: 16px; margin-right: \").concat(computeStyle['marginRight'], \"\\\" />\"));\n        inputWrapper.appendChild(input);\n        target.parentNode.replaceChild(inputWrapper, target);\n        var cardInfo = cardInfoMap[itemId];\n        var contentPlaceholder = cardInfo.contentPlaceholder,\n          titlePlaceholder = cardInfo.titlePlaceholder,\n          content = cardInfo.content,\n          title = cardInfo.title;\n        var value = content;\n        if (targetClass === 'g6-annotation-title') {\n          input.name = 'title';\n          input.maxLength = maxTitleLength;\n          value = title;\n        } else {\n          input.name = 'content';\n        }\n        if (value) {\n          input.innerHTML = target.innerHTML;\n          input.value = target.innerHTML;\n        } else {\n          input.placeholder = targetClass === 'g6-annotation-title' ? titlePlaceholder : contentPlaceholder;\n        }\n        input.focus();\n        input.addEventListener('blur', function (blurEvt) {\n          if (input.value) {\n            target.innerHTML = input.value;\n            cardInfo[input.name || 'title'] = input.value;\n          }\n          inputWrapper.parentNode.replaceChild(target, inputWrapper);\n          _this.updateCardSize(itemId);\n          var onAnnotationChange = _this.get('onAnnotationChange');\n          onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfo, 'update');\n        });\n      });\n    }\n    var unmovableClasses = ['g6-annotation-title', 'g6-annotation-content', 'g6-annotation-title-input', 'g6-annotation-content-input'];\n    card.draggable = true;\n    card.addEventListener('dragstart', function (e) {\n      var targetClass = e.target.className;\n      if (unmovableClasses.includes(targetClass)) return;\n      var style = card.style;\n      _this.set('dragging', {\n        card: card,\n        x: e.clientX,\n        y: e.clientY,\n        left: px2Num(style.left),\n        top: px2Num(style.top)\n      });\n    });\n    card.addEventListener('drag', function (e) {\n      e.preventDefault();\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      var dragging = _this.get('dragging');\n      if (isNaN(clientX) || isNaN(clientY) || !dragging) return;\n      var x = dragging.x,\n        y = dragging.y,\n        left = dragging.left,\n        top = dragging.top,\n        draggingCard = dragging.card;\n      var dx = clientX - x;\n      var dy = clientY - y;\n      left += dx;\n      top += dy;\n      var graph = _this.get('graph');\n      var graphLeftTopCanvas = graph.getPointByCanvas(0, 0);\n      var graphRightBottomCanvas = graph.getPointByCanvas(graph.getWidth(), graph.getHeight());\n      var _a = graph.getClientByPoint(graphLeftTopCanvas.x, graphLeftTopCanvas.y),\n        graphLeft = _a.x,\n        graphTop = _a.y;\n      var _b = graph.getClientByPoint(graphRightBottomCanvas.x, graphRightBottomCanvas.y),\n        graphRight = _b.x,\n        graphBottom = _b.y;\n      var cardBBox = draggingCard.getBoundingClientRect();\n      var cardWidth = cardBBox.right - cardBBox.left;\n      var cardHeight = cardBBox.bottom - cardBBox.top;\n      if (left > graphRight - graphLeft - cardWidth && dx > 0 || left < 0 && dx < 0) left -= dx;\n      if (top > graphBottom - graphTop - cardHeight && dy > 0 || top < 0 && dy < 0) top -= dy;\n      // 更新卡片位置\n      modifyCSS(draggingCard, {\n        left: \"\".concat(left, \"px\"),\n        top: \"\".concat(top, \"px\"),\n        visibility: 'hidden'\n      });\n      x = clientX;\n      y = clientY;\n      // 更新连线位置\n      var link = (cardInfoMap[itemId] || {}).link;\n      if (link) {\n        var item = graph.findById(itemId);\n        link.attr('path', getPathItem2Card(item, cardBBox, graph, _this.get('canvas')));\n      }\n      _this.set('dragging', {\n        x: x,\n        y: y,\n        left: left,\n        top: top,\n        card: draggingCard\n      });\n    });\n    var dragendListener = function dragendListener(e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var dragging = _this.get('dragging');\n      if (dragging) {\n        // = dragend\n        var left = dragging.left,\n          top_1 = dragging.top,\n          draggingCard = dragging.card;\n        cardInfoMap[itemId].x = left;\n        cardInfoMap[itemId].y = top_1;\n        modifyCSS(draggingCard, {\n          visibility: 'visible'\n        });\n        _this.set('dragging', false);\n        // 移动过的卡片从 rows 中移除，避免影响后续卡片出生位置\n        var rows = _this.get(\"rows\");\n        rows === null || rows === void 0 ? void 0 : rows.forEach(function (rowItems) {\n          for (var i = rowItems.length - 1; i >= 0; i--) {\n            if (rowItems[i].id === itemId) rowItems.splice(i, 1);\n          }\n        });\n        var onAnnotationChange = _this.get('onAnnotationChange');\n        onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfoMap[itemId], 'update');\n      }\n    };\n    card.addEventListener('dragend', dragendListener);\n  };\n  Annotation.prototype.updateCardSize = function (id) {\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var card = cardInfoMap[id].card;\n    var width = card.getBoundingClientRect().width;\n    var title = card.getElementsByClassName('g6-annotation-title')[0];\n    if (title) {\n      var computeStyle = getComputedStyle(title);\n      var sideMargin = px2Num(computeStyle['marginLeft']);\n      var titleWidth = title.getBoundingClientRect().width;\n      modifyCSS(title, {\n        marginRight: \"\".concat(width - sideMargin - 24 - 16 - titleWidth, \"px\")\n      });\n    }\n  };\n  Annotation.prototype.updateLink = function (_a) {\n    var item = _a.item;\n    if (!item) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var canvas = this.get('canvas');\n    var graph = this.get('graph');\n    var id = item.getID();\n    var _b = cardInfoMap[id] || {},\n      link = _b.link,\n      card = _b.card;\n    if (link) {\n      var path = getPathItem2Card(item, card.getBoundingClientRect(), graph, canvas);\n      link.attr('path', path);\n    }\n  };\n  Annotation.prototype.updateLinks = function () {\n    var _this = this;\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var id = cardInfo.id;\n      var item = graph.findById(id);\n      _this.updateLink({\n        item: item\n      });\n    });\n  };\n  Annotation.prototype.onGraphDataChange = function () {\n    var _this = this;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    Object.values(cardInfoMap).forEach(function (info) {\n      var id = info.id,\n        card = info.card,\n        isCanvas = info.isCanvas;\n      if (!card || isCanvas || card.style.display === 'none') return;\n      var item = graph.findById(id);\n      if (item && item.isVisible()) {\n        _this.toggleAnnotation(item);\n      } else {\n        _this.hideCard(id);\n      }\n    });\n  };\n  Annotation.prototype.onGraphItemVisibilityChange = function (_a) {\n    var item = _a.item,\n      visible = _a.visible;\n    if (!item || item.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var id = item.getID();\n    if (!cardInfoMap[id]) return;\n    if (!visible) this.hideCard(id);\n  };\n  Annotation.prototype.saveData = function (saveClosed) {\n    if (saveClosed === void 0) {\n      saveClosed = false;\n    }\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    var getTitle = this.get('getTitle');\n    var getContent = this.get('getContent');\n    var data = [];\n    Object.values(cardInfoMap).forEach(function (info) {\n      var title = info.title,\n        content = info.content,\n        x = info.x,\n        y = info.y,\n        id = info.id,\n        collapsed = info.collapsed,\n        card = info.card;\n      if (card && card.style.display === 'none' && !saveClosed) return;\n      var item = graph.findById(id) || graph.get('canvas');\n      data.push({\n        id: id,\n        x: x,\n        y: y,\n        collapsed: collapsed,\n        title: title || (getTitle === null || getTitle === void 0 ? void 0 : getTitle(item)),\n        content: content || (getContent === null || getContent === void 0 ? void 0 : getContent(item)),\n        visible: card && card.style.display !== 'none'\n      });\n    });\n    return data;\n  };\n  Annotation.prototype.readData = function (data) {\n    var _this = this;\n    var graph = this.get('graph');\n    data.forEach(function (info) {\n      var id = info.id,\n        x = info.x,\n        y = info.y,\n        title = info.title,\n        content = info.content,\n        collapsed = info.collapsed,\n        visible = info.visible;\n      var item = graph.findById(id);\n      if (!item && id === CANVAS_ANNOTATION_ID) {\n        item = graph.get('canvas');\n      }\n      if (!item) {\n        var cardInfoMap = _this.get('cardInfoMap') || {};\n        cardInfoMap[id] = info;\n        _this.set('cardInfoMap', cardInfoMap);\n        return;\n      }\n      _this.toggleAnnotation(item, {\n        x: x,\n        y: y,\n        title: title,\n        content: content,\n        collapsed: collapsed\n      });\n      if (!visible) _this.hideCard(id);\n    });\n  };\n  /**\n   * Clear the cards and links\n   */\n  Annotation.prototype.clear = function () {\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var container = this.get('container');\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var card = cardInfo.card,\n        link = cardInfo.link;\n      container.removeChild(card);\n      link === null || link === void 0 ? void 0 : link.remove(true);\n    });\n    this.set('cardInfoMap', {});\n  };\n  /**\n   * Destroy the component\n   */\n  Annotation.prototype.destroy = function () {\n    var _a;\n    this.clear();\n    (_a = this.get('canvas')) === null || _a === void 0 ? void 0 : _a.destroy();\n    var graph = this.get('graph');\n    if (!graph || graph.destroyed) return;\n    if (this.get('containerCfg')) {\n      graph.getContainer().removeChild(this.get('container'));\n    }\n    this.destroyed = true;\n  };\n  return Annotation;\n}(Base);\nexport default Annotation;\nvar getPath = function getPath(startPoints, endPoints) {\n  var startPoint,\n    endPoint,\n    posKeys,\n    distance = Infinity;\n  Object.keys(startPoints).forEach(function (skey) {\n    var spos = startPoints[skey];\n    Object.keys(endPoints).forEach(function (ekey) {\n      var epos = endPoints[ekey];\n      var xdist = spos.x - epos.x;\n      var ydist = spos.y - epos.y;\n      var dist = xdist * xdist + ydist * ydist;\n      if (distance > dist) {\n        distance = dist;\n        startPoint = spos;\n        endPoint = epos;\n        posKeys = [skey, ekey];\n      }\n    });\n  });\n  var curveOffset = 20;\n  var controlPoint = Util.getControlPoint(startPoint, endPoint, 0.5, curveOffset);\n  return [['M', startPoint.x, startPoint.y], ['Q', controlPoint.x, controlPoint.y, endPoint.x, endPoint.y]];\n};\nvar getPathItem2Card = function getPathItem2Card(item, cardBBox, graph, annotationCanvas) {\n  var _a;\n  var itemLinkPoints;\n  var itemType = item.getType();\n  if (itemType === 'edge') {\n    itemLinkPoints = [item.getKeyShape().getPoint(0.5)];\n  } else {\n    var _b = (_a = item.getKeyShape) === null || _a === void 0 ? void 0 : _a.call(item).getBBox(),\n      minX = _b.minX,\n      minY = _b.minY,\n      maxX = _b.maxX,\n      maxY = _b.maxY;\n    var _c = item.getModel(),\n      x = _c.x,\n      y = _c.y;\n    minX += x;\n    minY += y;\n    maxX += x;\n    maxY += y;\n    itemLinkPoints = {\n      left: {\n        x: minX,\n        y: (minY + maxY) / 2\n      },\n      right: {\n        x: maxX,\n        y: (minY + maxY) / 2\n      },\n      top: {\n        x: (minX + maxX) / 2,\n        y: minY\n      },\n      bottom: {\n        x: (minX + maxX) / 2,\n        y: maxY\n      }\n    };\n  }\n  // 由 graph 所在 canvas 转换为 Client 坐标系，然后再由 annotation 所在 canvas 转换为绘制坐标系\n  Object.keys(itemLinkPoints).forEach(function (key) {\n    var _a = itemLinkPoints[key],\n      x = _a.x,\n      y = _a.y;\n    var clientPos = graph.getClientByPoint(x, y);\n    itemLinkPoints[key] = annotationCanvas.getPointByClient(clientPos.x, clientPos.y);\n  });\n  var _d = cardBBox.top,\n    cardTop = _d === void 0 ? 0 : _d,\n    _e = cardBBox.left,\n    cardLeft = _e === void 0 ? 0 : _e,\n    _f = cardBBox.right,\n    cardRight = _f === void 0 ? 0 : _f,\n    _g = cardBBox.bottom,\n    cardBottom = _g === void 0 ? 0 : _g;\n  var cardLinkPoints = {\n    left: annotationCanvas.getPointByClient(cardLeft, (cardTop + cardBottom) / 2),\n    right: annotationCanvas.getPointByClient(cardRight, (cardTop + cardBottom) / 2),\n    top: annotationCanvas.getPointByClient((cardLeft + cardRight) / 2, cardTop),\n    bottom: annotationCanvas.getPointByClient((cardLeft + cardRight) / 2, cardBottom)\n  };\n  return getPath(itemLinkPoints, cardLinkPoints);\n};\nvar px2Num = function px2Num(px) {\n  return Number(px.replace(/\\s+|px/gi, \"\")) || 0;\n};","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","isNumber","debounce","Util","modifyCSS","createDom","insertCss","Canvas","Base","document","CANVAS_ANNOTATION_ID","Annotation","_super","config","getDefaultCfgs","trigger","editable","itemHighlightState","linkHighlightStyle","shadowColor","shadowBlur","cardCfg","minHeight","width","height","collapseType","closeType","borderRadius","maxTitleLength","getEvents","events","get","getDOMContent","cfg","destroyed","collapsed","maxWidth","_a","title","_b","content","_c","r","collapseExpandDOM","contentDOM","concat","closeDOM","init","self","graph","graphCantainer","getContainer","container","containerCfg","createContainer","appendChild","set","graphContainerBBox","getBoundingClientRect","linkCanvas","right","left","bottom","top","position","pointerEvents","window","addEventListener","resizeCanvas","linkGroup","addGroup","id","item","getModel","label","type","getType","suffix","defaultData","readData","_this","graphContainer","gLeft","gRight","gTop","gBottom","graphContainerHeight","graphContainerWidth","offsetX","_d","offsetY","otherStyle","_e","_f","getWidth","maxHeight","containerPosition","keys","forEach","key","className","display","overflow","updateLinks","clearTimeout","resizeTimer","setTimeout","cBBox","newWidth","newHeight","changeSize","updateOutsideCards","selfObj","cardInfoMap","graphLeftTopCanvas","getPointByCanvas","graphRightBottomCanvas","getHeight","getClientByPoint","x","y","graphLeft","graphTop","graphRight","graphBottom","values","cardInfo","card","style","px2Num","newLeft","newTop","showAnnotation","evt","toggleAnnotation","hideCards","itemId","hideCard","minWidth","propsX","propsY","propsTitle","propsContent","defaultBegin","otherCardCfg","rows","isCanvas","getID","link","getTitle","getContent","getContentPlaceholder","getTitlePlaceHolder","contentPlaceholder","titlePlaceholder","newCard","substr","minHeightPx","exist","remove","replaceChild","containerBBox","undefined","containerTop","beginLeft","_g","propsBeginRight","_h","propsBeginTop","beginBottom","beginRight","beginTop","isNaN","scrollWidth","scrollHeight","cardWidth","currentRow","lastCardBBox","bbox","cusor","bindListener","cardBBox","path","getPathItem2Card","linkStyle","addShape","attrs","lineWidth","lineDash","stroke","updateCardPositionsInConatainer","hasPropsPosition","_j","containerBottom","push","updateCardSize","onAnnotationChange","containerWidth","computeStyle","getComputedStyle","sidePadding","marginLeft","handleExpandCollapseCard","findById","hide","removeCard","removeChild","iconType","target","onMouseEnterIcon","onMouseLeaveIcon","setItemState","attr","onClickIcon","targetClass","parentNode","inputTag","input","inputWrapper","value","name","maxLength","innerHTML","placeholder","focus","blurEvt","unmovableClasses","draggable","includes","clientX","clientY","preventDefault","dragging","draggingCard","dx","dy","cardHeight","visibility","dragendListener","top_1","rowItems","splice","getElementsByClassName","sideMargin","titleWidth","marginRight","updateLink","canvas","onGraphDataChange","info","isVisible","onGraphItemVisibilityChange","visible","saveData","saveClosed","data","clear","destroy","getPath","startPoints","endPoints","startPoint","endPoint","posKeys","distance","Infinity","skey","spos","ekey","epos","xdist","ydist","dist","curveOffset","controlPoint","getControlPoint","annotationCanvas","itemLinkPoints","itemType","getKeyShape","getPoint","getBBox","minX","minY","maxX","maxY","clientPos","getPointByClient","cardTop","cardLeft","cardRight","cardBottom","cardLinkPoints","px","Number","replace"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-plugin/es/annotation/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { isNumber, debounce } from '@antv/util';\nimport { Util } from '@antv/g6-core';\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport insertCss from 'insert-css';\nimport { Canvas } from '@antv/g-canvas';\nimport Base from '../base';\ntypeof document !== 'undefined' && insertCss(\"\\n  .g6-annotation-container {\\n    background-color: rgba(255, 255, 255, 0.3);\\n    padding: 8px;\\n  }\\n  .g6-annotation-wrapper {\\n    background-color: #fff;\\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\\n  }\\n  .g6-annotation-header-wapper {\\n    height: fit-content;\\n    width: 100%;\\n    background-color: #5B8FF9;\\n    display: inline-flex;\\n    cursor: move;\\n  }\\n  .g6-annotation-title {\\n    margin: 4px 40px 4px 8px;\\n    cursor: text;\\n    min-width: 32px;\\n  }\\n  .g6-annotation-collapse {\\n    margin: 4px;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-expand {\\n    margin: 4px;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-close {\\n    margin: 4px 8px 4px 0;\\n    cursor: pointer;\\n  }\\n  .g6-annotation-content {\\n    padding: 8px;\\n    width: fit-content;\\n    cursor: text;\\n    word-break: break-all;\\n    min-width: 32px;\\n  }\\n  .g6-annotation-title-input-wrapper {\\n    margin: 4px 40px 4px 8px;\\n  }\\n  .g6-annotation-content-input {\\n    height: 100%;\\n    word-break: break-all;\\n  }\\n  .g6-annotation-content-input-wrapper {\\n    margin: 8px;\\n    height: 100%;\\n  }\\n\");\nvar CANVAS_ANNOTATION_ID = 'canvas-annotation';\nvar Annotation = /** @class */function (_super) {\n  __extends(Annotation, _super);\n  function Annotation(config) {\n    return _super.call(this, config) || this;\n  }\n  Annotation.prototype.getDefaultCfgs = function () {\n    return {\n      trigger: 'click',\n      editable: true,\n      itemHighlightState: 'highlight',\n      linkHighlightStyle: {\n        shadowColor: '#5B8FF9',\n        shadowBlur: 10\n      },\n      cardCfg: {\n        minHeight: 60,\n        width: 'fit-content',\n        height: 'fit-content',\n        collapseType: 'minimize',\n        closeType: 'hide',\n        borderRadius: 5,\n        maxTitleLength: 20\n      }\n    };\n  };\n  // class-methods-use-this\n  Annotation.prototype.getEvents = function () {\n    var events = {\n      'viewportchange': 'updateLinks',\n      'afterlayout': 'updateLinks',\n      'aftergraphrefreshposition': 'updateLinks',\n      'afterupdateitem': 'updateLink',\n      'afterchangedata': 'onGraphDataChange',\n      'afteritemvisibilitychange': 'onGraphItemVisibilityChange'\n    };\n    switch (this.get('trigger')) {\n      case 'click':\n        events = __assign(__assign({}, events), {\n          'node:click': 'showAnnotation',\n          'edge:click': 'showAnnotation'\n        });\n    }\n    return events;\n  };\n  Annotation.prototype.getDOMContent = function (cfg) {\n    if (this.destroyed) return;\n    var collapsed = cfg.collapsed,\n      maxWidth = cfg.maxWidth,\n      _a = cfg.title,\n      title = _a === void 0 ? '' : _a,\n      _b = cfg.content,\n      content = _b === void 0 ? '' : _b,\n      _c = cfg.borderRadius,\n      r = _c === void 0 ? 5 : _c;\n    var collapseExpandDOM = collapsed ? \"<p class='g6-annotation-expand'>+</p>\" : \"<p class='g6-annotation-collapse'>-</p>\";\n    var contentDOM = collapsed ? '' : \" <p class='g6-annotation-content'>\".concat(content, \"</p>\");\n    var closeDOM = \"<p class='g6-annotation-close'>x</p>\";\n    var borderRadius = collapsed ? \"\".concat(r, \"px\") : \"\".concat(r, \"px \").concat(r, \"px 0 0\");\n    return \"<div class=\\\"g6-annotation-wrapper\\\" style=\\\"border-radius: \".concat(r, \"px; max-width: \").concat(maxWidth, \"px\\\">\\n        <div\\n          class=\\\"g6-annotation-header-wapper\\\"\\n          style=\\\"border-radius: \").concat(borderRadius, \";\\\"\\n        >\\n          <h4 class='g6-annotation-title'>\").concat(title, \"</h4>\\n          \").concat(collapseExpandDOM, \"\\n          \").concat(closeDOM, \"\\n        </div>\\n        \").concat(contentDOM, \"\\n      </div>\");\n  };\n  Annotation.prototype.init = function () {\n    var self = this;\n    if (self.destroyed) return;\n    var graph = self.get('graph');\n    var graphCantainer = graph.getContainer();\n    var container = self.get('container');\n    var containerCfg = this.get('containerCfg');\n    if (containerCfg) {\n      container = this.createContainer();\n      graphCantainer.appendChild(container);\n    } else {\n      container = graphCantainer;\n    }\n    this.set('container', container);\n    // 绘制连接 annotation 和元素的连线的画布\n    var graphContainerBBox = graphCantainer.getBoundingClientRect();\n    var linkCanvas = new Canvas({\n      container: graphCantainer,\n      width: graphContainerBBox.right - graphContainerBBox.left,\n      height: graphContainerBBox.bottom - graphContainerBBox.top\n    });\n    modifyCSS(linkCanvas.get('el'), {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      pointerEvents: 'none'\n    });\n    // 需要传入 self，无法 removeEventListener，只能在内部判断 self 被销毁则不继续\n    window.addEventListener('resize', debounce(function () {\n      return self.resizeCanvas(self);\n    }, 100));\n    var linkGroup = linkCanvas.addGroup({\n      id: 'annotation-link-group'\n    });\n    self.set('linkGroup', linkGroup);\n    self.set('canvas', linkCanvas);\n    if (!self.get('getTitle')) {\n      self.set('getTitle', function (item) {\n        var _a;\n        var _b = ((_a = item === null || item === void 0 ? void 0 : item.getModel) === null || _a === void 0 ? void 0 : _a.call(item)) || {},\n          label = _b.label,\n          id = _b.id;\n        return label || id || '-';\n      });\n    }\n    if (!self.get('getContent')) {\n      self.set('getContent', function (item) {\n        var _a, _b;\n        if (!item) return '-';\n        var _c = ((_a = item.getModel) === null || _a === void 0 ? void 0 : _a.call(item)) || {},\n          label = _c.label,\n          id = _c.id;\n        var type = (_b = item.getType) === null || _b === void 0 ? void 0 : _b.call(item);\n        var suffix = type ? \"\".concat(type, \": \") : '';\n        return \"\".concat(suffix).concat(label || id || '');\n      });\n    }\n    // init with defaultData\n    var defaultData = self.get('defaultData');\n    if (defaultData) this.readData(defaultData);\n  };\n  Annotation.prototype.createContainer = function () {\n    var _this = this;\n    if (this.destroyed) return;\n    var containerCfg = this.get('containerCfg');\n    var graph = this.get('graph');\n    var graphContainer = graph.getContainer();\n    var _a = graphContainer.getBoundingClientRect(),\n      gLeft = _a.left,\n      gRight = _a.right,\n      gTop = _a.top,\n      gBottom = _a.bottom;\n    var graphContainerHeight = gBottom - gTop;\n    var graphContainerWidth = gRight - gLeft;\n    var _b = containerCfg.position,\n      position = _b === void 0 ? 'top' : _b,\n      _c = containerCfg.offsetX,\n      offsetX = _c === void 0 ? 0 : _c,\n      _d = containerCfg.offsetY,\n      offsetY = _d === void 0 ? 0 : _d,\n      otherStyle = __rest(containerCfg, [\"position\", \"offsetX\", \"offsetY\"]);\n    var _e = containerCfg.height,\n      height = _e === void 0 ? 'fit-content' : _e,\n      _f = containerCfg.width,\n      width = _f === void 0 ? graph.getWidth() : _f;\n    if (height === '100%') height = graphContainerHeight;\n    if (width === '100%') width = graphContainerWidth;\n    var maxHeight = 'unset',\n      maxWidth = 'unset';\n    var containerPosition = {};\n    switch (position) {\n      case 'right':\n        maxHeight = \"\".concat(graphContainerHeight, \"px\");\n        containerPosition = {\n          top: 0,\n          right: 0\n        };\n        containerPosition.right += gLeft + offsetX;\n        containerPosition.top += gTop + offsetY;\n        break;\n      case 'bottom':\n        maxWidth = \"\".concat(graphContainerWidth, \"px\");\n        containerPosition = {\n          bottom: 0,\n          left: 0\n        };\n        containerPosition.left += gLeft + offsetX;\n        containerPosition.bottom += gTop + offsetY;\n        break;\n      case 'top':\n        maxWidth = \"\".concat(graphContainerWidth, \"px\");\n      case 'left':\n        maxHeight = \"\".concat(graphContainerHeight, \"px\");\n      default:\n        containerPosition = {\n          top: 0,\n          left: 0\n        };\n        containerPosition.left += gLeft + offsetX;\n        containerPosition.top += gTop + offsetY;\n        break;\n    }\n    Object.keys(containerPosition).forEach(function (key) {\n      containerPosition[key] = \"\".concat(containerPosition[key], \"px\");\n    });\n    var container = createDom(\"<div class='\".concat(containerCfg.className, \" g6-annotation-container'></div>\"));\n    modifyCSS(container, __assign(__assign({\n      position: 'absolute',\n      display: position === 'top' || position === 'bottom' ? 'inline-flex' : 'unset',\n      width: isNumber(width) ? \"\".concat(width, \"px\") : width,\n      height: isNumber(height) ? \"\".concat(height, \"px\") : height,\n      maxHeight: maxHeight,\n      maxWidth: maxWidth,\n      overflow: 'scroll'\n    }, containerPosition), otherStyle));\n    graphContainer.appendChild(container);\n    container.addEventListener('scroll', function (e) {\n      _this.updateLinks();\n    });\n    return container;\n  };\n  Annotation.prototype.resizeCanvas = function (self) {\n    // 仅在 resize 完成后进行调整\n    clearTimeout(self.resizeTimer);\n    self.resizeTimer = setTimeout(function () {\n      if (!self || self.destroyed) return;\n      var cBBox = self.get('container').getBoundingClientRect();\n      var newWidth = cBBox.right - cBBox.left;\n      var newHeight = cBBox.bottom - cBBox.top;\n      self.get('canvas').changeSize(newWidth, newHeight);\n      self.updateOutsideCards(self);\n    }, 250);\n  };\n  /**\n   * 更新超出视口范围的卡片位置\n   * @param selfObj 当前 annotation 插件对象。外部调用不需要传入该参数\n   */\n  Annotation.prototype.updateOutsideCards = function (selfObj) {\n    var self = selfObj || this;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    var graph = self.get('graph');\n    var graphLeftTopCanvas = graph.getPointByCanvas(0, 0);\n    var graphRightBottomCanvas = graph.getPointByCanvas(graph.getWidth(), graph.getHeight());\n    var _a = graph.getClientByPoint(graphLeftTopCanvas.x, graphLeftTopCanvas.y),\n      graphLeft = _a.x,\n      graphTop = _a.y;\n    var _b = graph.getClientByPoint(graphRightBottomCanvas.x, graphRightBottomCanvas.y),\n      graphRight = _b.x,\n      graphBottom = _b.y;\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var card = cardInfo.card;\n      if (!card) return;\n      var style = card.style;\n      var left = px2Num(style.left);\n      var top = px2Num(style.top);\n      var _a = card.getBoundingClientRect(),\n        width = _a.width,\n        height = _a.height;\n      var newLeft = left;\n      var newTop = top;\n      if (left + width > graphRight - graphLeft) {\n        newLeft = graphRight - graphLeft - width;\n      }\n      if (left < 0) {\n        newLeft = 0;\n      }\n      if (top + height > graphBottom - graphTop) {\n        newTop = graphBottom - graphTop - height;\n      }\n      if (top < 0) {\n        newTop = 0;\n      }\n      modifyCSS(card, {\n        left: \"\".concat(newLeft, \"px\"),\n        top: \"\".concat(newTop, \"px\")\n      });\n    });\n    self.updateLinks();\n  };\n  Annotation.prototype.showAnnotation = function (evt) {\n    if (this.destroyed) return;\n    var item = evt.item;\n    this.toggleAnnotation(item);\n  };\n  Annotation.prototype.hideCards = function () {\n    var self = this;\n    if (self.destroyed) return;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    Object.keys(cardInfoMap).forEach(function (itemId) {\n      self.hideCard(itemId);\n    });\n  };\n  Annotation.prototype.toggleAnnotation = function (item, cfg) {\n    var _a, _b;\n    if (cfg === void 0) {\n      cfg = {};\n    }\n    var self = this;\n    if (self.destroyed) return;\n    var cardInfoMap = self.get('cardInfoMap') || {};\n    var graph = self.get('graph');\n    var container = self.get('container');\n    var containerCfg = self.get('containerCfg');\n    var _c = Object.assign({}, self.get('cardCfg') || {}, cfg),\n      minHeight = _c.minHeight,\n      minWidth = _c.minWidth,\n      width = _c.width,\n      height = _c.height,\n      _d = _c.collapsed,\n      collapsed = _d === void 0 ? false : _d,\n      propsX = _c.x,\n      propsY = _c.y,\n      propsTitle = _c.title,\n      propsContent = _c.content,\n      maxTitleLength = _c.maxTitleLength,\n      defaultBegin = _c.defaultBegin,\n      otherCardCfg = __rest(_c, [\"minHeight\", \"minWidth\", \"width\", \"height\", \"collapsed\", \"x\", \"y\", \"title\", \"content\", \"maxTitleLength\", \"defaultBegin\"]);\n    var linkGroup = self.get('linkGroup');\n    var rows = this.get('rows') || [[]];\n    var isCanvas = (_a = item.isCanvas) === null || _a === void 0 ? void 0 : _a.call(item);\n    var itemId = isCanvas ? CANVAS_ANNOTATION_ID : item.getID();\n    var _e = cardInfoMap[itemId] || {},\n      card = _e.card,\n      link = _e.link,\n      x = _e.x,\n      y = _e.y,\n      title = _e.title,\n      content = _e.content;\n    var getTitle = this.get('getTitle');\n    var getContent = this.get('getContent');\n    var getContentPlaceholder = this.get('getContentPlaceholder') || function () {\n      return '';\n    };\n    var getTitlePlaceHolder = this.get('getTitlePlaceHolder') || function () {\n      return '';\n    };\n    var contentPlaceholder = getContentPlaceholder(item);\n    var titlePlaceholder = getTitlePlaceHolder(item);\n    var newCard = createDom(this.getDOMContent(__assign({\n      itemId: itemId,\n      collapsed: collapsed,\n      title: ((_b = title || propsTitle || (getTitle === null || getTitle === void 0 ? void 0 : getTitle(item))) === null || _b === void 0 ? void 0 : _b.substr(0, maxTitleLength)) || titlePlaceholder,\n      content: content || propsContent || (getContent === null || getContent === void 0 ? void 0 : getContent(item)) || contentPlaceholder\n    }, otherCardCfg)));\n    var minHeightPx = isNumber(minHeight) ? \"\".concat(minHeight, \"px\") : minHeight;\n    modifyCSS(newCard, {\n      minHeight: collapsed ? 'unset' : minHeightPx,\n      minWidth: isNumber(minWidth) ? \"\".concat(minWidth, \"px\") : minWidth,\n      height: height,\n      width: width\n    });\n    var exist = !!card;\n    if (exist) {\n      // 移除相应连线\n      link === null || link === void 0 ? void 0 : link.remove(true);\n      // 替换原来的卡片\n      container.replaceChild(newCard, card);\n    } else {\n      container.appendChild(newCard);\n    }\n    var containerBBox;\n    if (!containerCfg) {\n      containerBBox = container.getBoundingClientRect() || {};\n      if (propsX !== undefined && propsY !== undefined) {\n        // 使用配置的位置\n        x = propsX;\n        y = propsY;\n      } else if (!exist && !isCanvas) {\n        // 第一次创建，且无 conatiner，初始化位置\n        var containerTop = containerBBox.top;\n        var _f = defaultBegin || {},\n          beginLeft = _f.left,\n          _g = _f.right,\n          propsBeginRight = _g === void 0 ? 16 : _g,\n          _h = _f.top,\n          propsBeginTop = _h === void 0 ? 8 : _h,\n          beginBottom = _f.bottom;\n        var beginRight = propsBeginRight;\n        var beginTop = propsBeginTop;\n        if (!isNaN(beginLeft)) {\n          beginRight = container.scrollWidth - beginLeft;\n        }\n        if (!isNaN(beginBottom)) {\n          beginTop = container.scrollHeight - beginBottom;\n        }\n        var cardWidth = isNumber(minWidth) ? minWidth : 100;\n        x = container.scrollWidth - newCard.scrollWidth - (rows.length - 1) * cardWidth - beginRight;\n        var currentRow = rows[rows.length - 1];\n        var lastCardBBox = (currentRow[currentRow.length - 1] || {}).bbox;\n        y = (lastCardBBox === null || lastCardBBox === void 0 ? void 0 : lastCardBBox.bottom) - containerTop || beginTop;\n      }\n      modifyCSS(newCard, {\n        position: 'absolute',\n        left: \"\".concat(x, \"px\"),\n        top: \"\".concat(y, \"px\"),\n        cusor: containerCfg ? 'unset' : 'move'\n      });\n    }\n    this.bindListener(newCard, itemId);\n    var cardBBox = newCard.getBoundingClientRect();\n    if (!isCanvas) {\n      // 创建相关连线\n      var path = getPathItem2Card(item, cardBBox, graph, this.get('canvas'));\n      var linkStyle = this.get('linkStyle');\n      link = linkGroup.addShape('path', {\n        attrs: __assign({\n          lineWidth: 1,\n          lineDash: [5, 5],\n          stroke: '#ccc',\n          path: path\n        }, linkStyle)\n      });\n    }\n    cardInfoMap[itemId] = __assign(__assign({}, cardInfoMap[itemId] || {}), {\n      id: itemId,\n      collapsed: collapsed,\n      card: newCard,\n      link: link,\n      x: x,\n      y: y,\n      cardBBox: cardBBox,\n      content: content || propsContent,\n      title: title || propsTitle,\n      contentPlaceholder: contentPlaceholder,\n      titlePlaceholder: titlePlaceholder,\n      isCanvas: isCanvas\n    });\n    self.set('cardInfoMap', cardInfoMap);\n    if (containerCfg) {\n      this.updateCardPositionsInConatainer();\n      this.updateLinks();\n    } else {\n      var hasPropsPosition = !isNaN(propsX) && !isNaN(propsY);\n      if (!exist && !isCanvas && !hasPropsPosition) {\n        // 没有 container、新增 card 时，记录当前列中最下方位置，方便换行\n        var _j = containerBBox.bottom,\n          containerBottom = _j === void 0 ? 0 : _j,\n          containerTop = containerBBox.top;\n        rows[rows.length - 1].push({\n          id: itemId,\n          bbox: cardBBox\n        });\n        if (cardBBox.top > containerBottom - containerTop - cardBBox.height - 16) rows.push([]);\n        this.set('rows', rows);\n      }\n    }\n    this.updateCardSize(itemId);\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfoMap[itemId], exist ? 'update' : 'create');\n  };\n  Annotation.prototype.updateCardPositionsInConatainer = function () {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var container = this.get('container');\n    var position = this.get('containerCfg').position;\n    var containerWidth = container.getBoundingClientRect().width;\n    var computeStyle = getComputedStyle(container);\n    var sidePadding = px2Num(computeStyle['paddingLeft']) + px2Num(computeStyle['paddingRight']);\n    containerWidth -= sidePadding;\n    Object.values(cardInfoMap).forEach(function (_a) {\n      var card = _a.card;\n      var cardWidth = card.getBoundingClientRect().width;\n      switch (position) {\n        case 'right':\n          modifyCSS(card, {\n            marginLeft: containerWidth ? \"\".concat(containerWidth - cardWidth, \"px\") : '0px'\n          });\n          break;\n        case 'top':\n        case 'bottom':\n          modifyCSS(card, {\n            marginLeft: '8px'\n          });\n        default:\n          break;\n      }\n    });\n  };\n  Annotation.prototype.handleExpandCollapseCard = function (id) {\n    if (this.destroyed) return;\n    var graph = this.get('graph');\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var collapsed = cardInfoMap[id].collapsed;\n    var item = graph.findById(id);\n    if (!item) return;\n    var collapseType = this.get('cardCfg').collapseType;\n    if (collapseType === 'hide' && !collapsed) {\n      // collapse 行为被配置为隐藏\n      this.hideCard(id);\n    } else {\n      this.toggleAnnotation(item, {\n        collapsed: !collapsed\n      });\n    }\n    cardInfoMap[id] = __assign(__assign({}, cardInfoMap[id]), {\n      collapsed: !collapsed\n    });\n  };\n  /**\n   * 隐藏标注卡片，下次打开还保留隐藏前的配置，包括文本内容、位置等\n   * @param id 卡片 id，即元素(节点/边)的 id\n   * @returns\n   */\n  Annotation.prototype.hideCard = function (id) {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap || !cardInfoMap[id]) return;\n    var _a = cardInfoMap[id],\n      card = _a.card,\n      link = _a.link;\n    modifyCSS(card, {\n      display: 'none'\n    });\n    link === null || link === void 0 ? void 0 : link.hide();\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange(cardInfoMap[id], 'hide');\n  };\n  /**\n   * 移除标注卡片，下一次生成时将被初始化\n   * @param id 卡片 id，即元素(节点/边)的 id\n   * @returns\n   */\n  Annotation.prototype.removeCard = function (id) {\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var cardInfo = cardInfoMap[id];\n    var card = cardInfo.card,\n      link = cardInfo.link;\n    var container = this.get('container');\n    container.removeChild(card);\n    link === null || link === void 0 ? void 0 : link.remove(true);\n    delete cardInfoMap[id];\n    var onAnnotationChange = this.get('onAnnotationChange');\n    onAnnotationChange(cardInfo, 'remove');\n  };\n  Annotation.prototype.bindListener = function (card, itemId) {\n    var _this = this;\n    if (this.destroyed) return;\n    card.addEventListener('mousemove', function (e) {\n      // icon 的鼠标进入监听，方便外部加 tooltip\n      var iconType;\n      if (e.target.className === 'g6-annotation-collapse') {\n        iconType = 'collapse';\n      } else if (e.target.className === 'g6-annotation-expand') {\n        iconType = 'expand';\n      } else if (e.target.className === 'g6-annotation-close') {\n        iconType = 'close';\n      }\n      if (iconType) {\n        var _a = _this.get('cardCfg').onMouseEnterIcon,\n          onMouseEnterIcon = _a === void 0 ? function () {} : _a;\n        onMouseEnterIcon(e, itemId, iconType);\n      }\n    });\n    card.addEventListener('mouseout', function (e) {\n      // icon 的鼠标移出监听，方便外部加 tooltip\n      var iconType;\n      if (e.target.className === 'g6-annotation-collapse') {\n        iconType = 'collapse';\n      } else if (e.target.className === 'g6-annotation-expand') {\n        iconType = 'expand';\n      } else if (e.target.className === 'g6-annotation-close') {\n        iconType = 'close';\n      }\n      if (iconType) {\n        var _a = _this.get('cardCfg').onMouseLeaveIcon,\n          onMouseLeaveIcon = _a === void 0 ? function () {} : _a;\n        onMouseLeaveIcon(e, itemId, iconType);\n      }\n    });\n    // mouseenter and mouseleave to highlight the corresponding items\n    card.addEventListener('mouseenter', function (e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var graph = _this.get('graph');\n      var item = graph.findById(itemId);\n      if (item) {\n        var itemHighlightState = _this.get('itemHighlightState');\n        graph.setItemState(item, itemHighlightState, true);\n      }\n      var link = cardInfoMap[itemId].link;\n      if (link) {\n        var linkHighlightStyle = _this.get('linkHighlightStyle') || {};\n        link.attr(linkHighlightStyle);\n      }\n    });\n    card.addEventListener('mouseleave', function (e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var graph = _this.get('graph');\n      var item = graph.findById(itemId);\n      if (item) {\n        var itemHighlightState = _this.get('itemHighlightState');\n        graph.setItemState(item, itemHighlightState, false);\n      }\n      var link = cardInfoMap[itemId].link;\n      if (link) {\n        var linkHighlightStyle = _this.get('linkHighlightStyle') || {};\n        Object.keys(linkHighlightStyle).forEach(function (key) {\n          link.attr(key, undefined);\n          link.attr(key, undefined);\n        });\n        var linkStyle = _this.get('linkStyle');\n        link.attr(linkStyle);\n      }\n    });\n    card.addEventListener('click', function (e) {\n      var onClickIcon = (_this.get('cardCfg') || {}).onClickIcon;\n      if (e.target.className === 'g6-annotation-collapse' || e.target.className === 'g6-annotation-expand') {\n        // collapse & expand\n        var collapseType = _this.get('cardCfg').collapseType;\n        if (collapseType === 'hide') {\n          _this.hideCard(itemId);\n        } else {\n          _this.handleExpandCollapseCard(itemId);\n        }\n        onClickIcon === null || onClickIcon === void 0 ? void 0 : onClickIcon(e, itemId, e.target.className === 'g6-annotation-collapse' ? 'collapse' : 'expand');\n      } else if (e.target.className === 'g6-annotation-close') {\n        // close\n        var closeType = _this.get('cardCfg').closeType;\n        if (closeType === 'remove') {\n          _this.removeCard(itemId);\n        } else {\n          _this.hideCard(itemId);\n        }\n        onClickIcon === null || onClickIcon === void 0 ? void 0 : onClickIcon(e, itemId, 'close');\n      }\n    });\n    // dblclick to edit the title and content text\n    var editable = this.get('editable');\n    if (editable) {\n      card.addEventListener('dblclick', function (e) {\n        var cardInfoMap = _this.get('cardInfoMap');\n        var _a = (_this.get('cardCfg') || {}).maxTitleLength,\n          maxTitleLength = _a === void 0 ? 20 : _a;\n        if (!cardInfoMap) return;\n        var target = e.target;\n        var targetClass = target.className;\n        if (targetClass !== 'g6-annotation-title' && targetClass !== 'g6-annotation-content') return;\n        var _b = targetClass === 'g6-annotation-title' ? target.getBoundingClientRect() : target.parentNode.getBoundingClientRect(),\n          width = _b.width,\n          height = _b.height;\n        var computeStyle = getComputedStyle(target);\n        var inputTag = targetClass === 'g6-annotation-title' ? 'input' : 'textarea';\n        var input = createDom(\"<\".concat(inputTag, \" class=\\\"\").concat(targetClass, \"-input\\\" type=\\\"textarea\\\" style=\\\"width:\").concat(width, \"px; height: \").concat(height, \"px; min-width: 16px;\\\"/>\"));\n        var inputWrapper = createDom(\"<div class=\\\"\".concat(targetClass, \"-input-wrapper\\\" style=\\\"width: \").concat(width, \"px; height: \").concat(height, \"px; min-width: 16px; margin-right: \").concat(computeStyle['marginRight'], \"\\\" />\"));\n        inputWrapper.appendChild(input);\n        target.parentNode.replaceChild(inputWrapper, target);\n        var cardInfo = cardInfoMap[itemId];\n        var contentPlaceholder = cardInfo.contentPlaceholder,\n          titlePlaceholder = cardInfo.titlePlaceholder,\n          content = cardInfo.content,\n          title = cardInfo.title;\n        var value = content;\n        if (targetClass === 'g6-annotation-title') {\n          input.name = 'title';\n          input.maxLength = maxTitleLength;\n          value = title;\n        } else {\n          input.name = 'content';\n        }\n        if (value) {\n          input.innerHTML = target.innerHTML;\n          input.value = target.innerHTML;\n        } else {\n          input.placeholder = targetClass === 'g6-annotation-title' ? titlePlaceholder : contentPlaceholder;\n        }\n        input.focus();\n        input.addEventListener('blur', function (blurEvt) {\n          if (input.value) {\n            target.innerHTML = input.value;\n            cardInfo[input.name || 'title'] = input.value;\n          }\n          inputWrapper.parentNode.replaceChild(target, inputWrapper);\n          _this.updateCardSize(itemId);\n          var onAnnotationChange = _this.get('onAnnotationChange');\n          onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfo, 'update');\n        });\n      });\n    }\n    var unmovableClasses = ['g6-annotation-title', 'g6-annotation-content', 'g6-annotation-title-input', 'g6-annotation-content-input'];\n    card.draggable = true;\n    card.addEventListener('dragstart', function (e) {\n      var targetClass = e.target.className;\n      if (unmovableClasses.includes(targetClass)) return;\n      var style = card.style;\n      _this.set('dragging', {\n        card: card,\n        x: e.clientX,\n        y: e.clientY,\n        left: px2Num(style.left),\n        top: px2Num(style.top)\n      });\n    });\n    card.addEventListener('drag', function (e) {\n      e.preventDefault();\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var clientX = e.clientX,\n        clientY = e.clientY;\n      var dragging = _this.get('dragging');\n      if (isNaN(clientX) || isNaN(clientY) || !dragging) return;\n      var x = dragging.x,\n        y = dragging.y,\n        left = dragging.left,\n        top = dragging.top,\n        draggingCard = dragging.card;\n      var dx = clientX - x;\n      var dy = clientY - y;\n      left += dx;\n      top += dy;\n      var graph = _this.get('graph');\n      var graphLeftTopCanvas = graph.getPointByCanvas(0, 0);\n      var graphRightBottomCanvas = graph.getPointByCanvas(graph.getWidth(), graph.getHeight());\n      var _a = graph.getClientByPoint(graphLeftTopCanvas.x, graphLeftTopCanvas.y),\n        graphLeft = _a.x,\n        graphTop = _a.y;\n      var _b = graph.getClientByPoint(graphRightBottomCanvas.x, graphRightBottomCanvas.y),\n        graphRight = _b.x,\n        graphBottom = _b.y;\n      var cardBBox = draggingCard.getBoundingClientRect();\n      var cardWidth = cardBBox.right - cardBBox.left;\n      var cardHeight = cardBBox.bottom - cardBBox.top;\n      if (left > graphRight - graphLeft - cardWidth && dx > 0 || left < 0 && dx < 0) left -= dx;\n      if (top > graphBottom - graphTop - cardHeight && dy > 0 || top < 0 && dy < 0) top -= dy;\n      // 更新卡片位置\n      modifyCSS(draggingCard, {\n        left: \"\".concat(left, \"px\"),\n        top: \"\".concat(top, \"px\"),\n        visibility: 'hidden'\n      });\n      x = clientX;\n      y = clientY;\n      // 更新连线位置\n      var link = (cardInfoMap[itemId] || {}).link;\n      if (link) {\n        var item = graph.findById(itemId);\n        link.attr('path', getPathItem2Card(item, cardBBox, graph, _this.get('canvas')));\n      }\n      _this.set('dragging', {\n        x: x,\n        y: y,\n        left: left,\n        top: top,\n        card: draggingCard\n      });\n    });\n    var dragendListener = function dragendListener(e) {\n      var cardInfoMap = _this.get('cardInfoMap');\n      if (!cardInfoMap) return;\n      var dragging = _this.get('dragging');\n      if (dragging) {\n        // = dragend\n        var left = dragging.left,\n          top_1 = dragging.top,\n          draggingCard = dragging.card;\n        cardInfoMap[itemId].x = left;\n        cardInfoMap[itemId].y = top_1;\n        modifyCSS(draggingCard, {\n          visibility: 'visible'\n        });\n        _this.set('dragging', false);\n        // 移动过的卡片从 rows 中移除，避免影响后续卡片出生位置\n        var rows = _this.get(\"rows\");\n        rows === null || rows === void 0 ? void 0 : rows.forEach(function (rowItems) {\n          for (var i = rowItems.length - 1; i >= 0; i--) {\n            if (rowItems[i].id === itemId) rowItems.splice(i, 1);\n          }\n        });\n        var onAnnotationChange = _this.get('onAnnotationChange');\n        onAnnotationChange === null || onAnnotationChange === void 0 ? void 0 : onAnnotationChange(cardInfoMap[itemId], 'update');\n      }\n    };\n    card.addEventListener('dragend', dragendListener);\n  };\n  Annotation.prototype.updateCardSize = function (id) {\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var card = cardInfoMap[id].card;\n    var width = card.getBoundingClientRect().width;\n    var title = card.getElementsByClassName('g6-annotation-title')[0];\n    if (title) {\n      var computeStyle = getComputedStyle(title);\n      var sideMargin = px2Num(computeStyle['marginLeft']);\n      var titleWidth = title.getBoundingClientRect().width;\n      modifyCSS(title, {\n        marginRight: \"\".concat(width - sideMargin - 24 - 16 - titleWidth, \"px\")\n      });\n    }\n  };\n  Annotation.prototype.updateLink = function (_a) {\n    var item = _a.item;\n    if (!item) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var canvas = this.get('canvas');\n    var graph = this.get('graph');\n    var id = item.getID();\n    var _b = cardInfoMap[id] || {},\n      link = _b.link,\n      card = _b.card;\n    if (link) {\n      var path = getPathItem2Card(item, card.getBoundingClientRect(), graph, canvas);\n      link.attr('path', path);\n    }\n  };\n  Annotation.prototype.updateLinks = function () {\n    var _this = this;\n    if (this.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var id = cardInfo.id;\n      var item = graph.findById(id);\n      _this.updateLink({\n        item: item\n      });\n    });\n  };\n  Annotation.prototype.onGraphDataChange = function () {\n    var _this = this;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    Object.values(cardInfoMap).forEach(function (info) {\n      var id = info.id,\n        card = info.card,\n        isCanvas = info.isCanvas;\n      if (!card || isCanvas || card.style.display === 'none') return;\n      var item = graph.findById(id);\n      if (item && item.isVisible()) {\n        _this.toggleAnnotation(item);\n      } else {\n        _this.hideCard(id);\n      }\n    });\n  };\n  Annotation.prototype.onGraphItemVisibilityChange = function (_a) {\n    var item = _a.item,\n      visible = _a.visible;\n    if (!item || item.destroyed) return;\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var id = item.getID();\n    if (!cardInfoMap[id]) return;\n    if (!visible) this.hideCard(id);\n  };\n  Annotation.prototype.saveData = function (saveClosed) {\n    if (saveClosed === void 0) {\n      saveClosed = false;\n    }\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var graph = this.get('graph');\n    var getTitle = this.get('getTitle');\n    var getContent = this.get('getContent');\n    var data = [];\n    Object.values(cardInfoMap).forEach(function (info) {\n      var title = info.title,\n        content = info.content,\n        x = info.x,\n        y = info.y,\n        id = info.id,\n        collapsed = info.collapsed,\n        card = info.card;\n      if (card && card.style.display === 'none' && !saveClosed) return;\n      var item = graph.findById(id) || graph.get('canvas');\n      data.push({\n        id: id,\n        x: x,\n        y: y,\n        collapsed: collapsed,\n        title: title || (getTitle === null || getTitle === void 0 ? void 0 : getTitle(item)),\n        content: content || (getContent === null || getContent === void 0 ? void 0 : getContent(item)),\n        visible: card && card.style.display !== 'none'\n      });\n    });\n    return data;\n  };\n  Annotation.prototype.readData = function (data) {\n    var _this = this;\n    var graph = this.get('graph');\n    data.forEach(function (info) {\n      var id = info.id,\n        x = info.x,\n        y = info.y,\n        title = info.title,\n        content = info.content,\n        collapsed = info.collapsed,\n        visible = info.visible;\n      var item = graph.findById(id);\n      if (!item && id === CANVAS_ANNOTATION_ID) {\n        item = graph.get('canvas');\n      }\n      if (!item) {\n        var cardInfoMap = _this.get('cardInfoMap') || {};\n        cardInfoMap[id] = info;\n        _this.set('cardInfoMap', cardInfoMap);\n        return;\n      }\n      _this.toggleAnnotation(item, {\n        x: x,\n        y: y,\n        title: title,\n        content: content,\n        collapsed: collapsed\n      });\n      if (!visible) _this.hideCard(id);\n    });\n  };\n  /**\n   * Clear the cards and links\n   */\n  Annotation.prototype.clear = function () {\n    var cardInfoMap = this.get('cardInfoMap');\n    if (!cardInfoMap) return;\n    var container = this.get('container');\n    Object.values(cardInfoMap).forEach(function (cardInfo) {\n      var card = cardInfo.card,\n        link = cardInfo.link;\n      container.removeChild(card);\n      link === null || link === void 0 ? void 0 : link.remove(true);\n    });\n    this.set('cardInfoMap', {});\n  };\n  /**\n   * Destroy the component\n   */\n  Annotation.prototype.destroy = function () {\n    var _a;\n    this.clear();\n    (_a = this.get('canvas')) === null || _a === void 0 ? void 0 : _a.destroy();\n    var graph = this.get('graph');\n    if (!graph || graph.destroyed) return;\n    if (this.get('containerCfg')) {\n      graph.getContainer().removeChild(this.get('container'));\n    }\n    this.destroyed = true;\n  };\n  return Annotation;\n}(Base);\nexport default Annotation;\nvar getPath = function getPath(startPoints, endPoints) {\n  var startPoint,\n    endPoint,\n    posKeys,\n    distance = Infinity;\n  Object.keys(startPoints).forEach(function (skey) {\n    var spos = startPoints[skey];\n    Object.keys(endPoints).forEach(function (ekey) {\n      var epos = endPoints[ekey];\n      var xdist = spos.x - epos.x;\n      var ydist = spos.y - epos.y;\n      var dist = xdist * xdist + ydist * ydist;\n      if (distance > dist) {\n        distance = dist;\n        startPoint = spos;\n        endPoint = epos;\n        posKeys = [skey, ekey];\n      }\n    });\n  });\n  var curveOffset = 20;\n  var controlPoint = Util.getControlPoint(startPoint, endPoint, 0.5, curveOffset);\n  return [['M', startPoint.x, startPoint.y], ['Q', controlPoint.x, controlPoint.y, endPoint.x, endPoint.y]];\n};\nvar getPathItem2Card = function getPathItem2Card(item, cardBBox, graph, annotationCanvas) {\n  var _a;\n  var itemLinkPoints;\n  var itemType = item.getType();\n  if (itemType === 'edge') {\n    itemLinkPoints = [item.getKeyShape().getPoint(0.5)];\n  } else {\n    var _b = (_a = item.getKeyShape) === null || _a === void 0 ? void 0 : _a.call(item).getBBox(),\n      minX = _b.minX,\n      minY = _b.minY,\n      maxX = _b.maxX,\n      maxY = _b.maxY;\n    var _c = item.getModel(),\n      x = _c.x,\n      y = _c.y;\n    minX += x;\n    minY += y;\n    maxX += x;\n    maxY += y;\n    itemLinkPoints = {\n      left: {\n        x: minX,\n        y: (minY + maxY) / 2\n      },\n      right: {\n        x: maxX,\n        y: (minY + maxY) / 2\n      },\n      top: {\n        x: (minX + maxX) / 2,\n        y: minY\n      },\n      bottom: {\n        x: (minX + maxX) / 2,\n        y: maxY\n      }\n    };\n  }\n  // 由 graph 所在 canvas 转换为 Client 坐标系，然后再由 annotation 所在 canvas 转换为绘制坐标系\n  Object.keys(itemLinkPoints).forEach(function (key) {\n    var _a = itemLinkPoints[key],\n      x = _a.x,\n      y = _a.y;\n    var clientPos = graph.getClientByPoint(x, y);\n    itemLinkPoints[key] = annotationCanvas.getPointByClient(clientPos.x, clientPos.y);\n  });\n  var _d = cardBBox.top,\n    cardTop = _d === void 0 ? 0 : _d,\n    _e = cardBBox.left,\n    cardLeft = _e === void 0 ? 0 : _e,\n    _f = cardBBox.right,\n    cardRight = _f === void 0 ? 0 : _f,\n    _g = cardBBox.bottom,\n    cardBottom = _g === void 0 ? 0 : _g;\n  var cardLinkPoints = {\n    left: annotationCanvas.getPointByClient(cardLeft, (cardTop + cardBottom) / 2),\n    right: annotationCanvas.getPointByClient(cardRight, (cardTop + cardBottom) / 2),\n    top: annotationCanvas.getPointByClient((cardLeft + cardRight) / 2, cardTop),\n    bottom: annotationCanvas.getPointByClient((cardLeft + cardRight) / 2, cardBottom)\n  };\n  return getPath(itemLinkPoints, cardLinkPoints);\n};\nvar px2Num = function px2Num(px) {\n  return Number(px.replace(/\\s+|px/gi, \"\")) || 0;\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}