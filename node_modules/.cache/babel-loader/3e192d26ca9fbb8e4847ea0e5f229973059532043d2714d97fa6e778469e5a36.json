{"ast":null,"code":"\"use strict\";\n\n/**\n * @fileOverview concentric layout\n * @author shiwu.wyy@antfin.com\n * this algorithm refers to <cytoscape.js> - https://github.com/cytoscape/cytoscape.js/\n */\nrequire(\"core-js/modules/es.array.push.js\");\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ConcentricLayout = void 0;\nvar util_1 = require(\"../util\");\nvar base_1 = require(\"./base\");\n/**\n * 同心圆布局\n */\nvar ConcentricLayout = /** @class */function (_super) {\n  __extends(ConcentricLayout, _super);\n  function ConcentricLayout(options) {\n    var _this = _super.call(this) || this;\n    _this.nodeSize = 30;\n    /** min spacing between outside of nodes (used for radius adjustment) */\n    _this.minNodeSpacing = 10;\n    /** same as minNodeSpacing. min spacing between outside of nodes (used for radius adjustment) */\n    _this.nodeSpacing = 10;\n    /** prevents node overlap, may overflow boundingBox if not enough space */\n    _this.preventOverlap = false;\n    /** whether levels have an equal radial distance betwen them, may cause bounding box overflow */\n    _this.equidistant = false;\n    /** where nodes start in radians */\n    _this.startAngle = 3 / 2 * Math.PI;\n    /** whether the layout should go clockwise (true) or counterclockwise/anticlockwise (false) */\n    _this.clockwise = true;\n    /** 根据 sortBy 指定的属性进行排布，数值高的放在中心，如果是 sortBy 则会计算节点度数，度数最高的放在中心 */\n    _this.sortBy = \"degree\";\n    _this.nodes = [];\n    _this.edges = [];\n    _this.width = 300;\n    _this.height = 300;\n    /** 迭代结束的回调函数 */\n    _this.onLayoutEnd = function () {};\n    _this.updateCfg(options);\n    return _this;\n  }\n  ConcentricLayout.prototype.getDefaultCfg = function () {\n    return {\n      nodeSize: 30,\n      minNodeSpacing: 10,\n      nodeSpacing: 10,\n      preventOverlap: false,\n      sweep: undefined,\n      equidistant: false,\n      startAngle: 3 / 2 * Math.PI,\n      clockwise: true,\n      maxLevelDiff: undefined,\n      sortBy: \"degree\"\n    };\n  };\n  /**\n   * 执行布局\n   */\n  ConcentricLayout.prototype.execute = function () {\n    var _a, _b;\n    var self = this;\n    var nodes = self.nodes,\n      edges = self.edges;\n    var n = nodes.length;\n    if (n === 0) {\n      (_a = self.onLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(self);\n      return;\n    }\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n    if (!self.center) {\n      self.center = [self.width / 2, self.height / 2];\n    }\n    var center = self.center;\n    if (n === 1) {\n      nodes[0].x = center[0];\n      nodes[0].y = center[1];\n      (_b = self.onLayoutEnd) === null || _b === void 0 ? void 0 : _b.call(self);\n      return;\n    }\n    var nodeSize = self.nodeSize,\n      nodeSpacing = self.nodeSpacing;\n    var layoutNodes = [];\n    var maxNodeSize;\n    var maxNodeSpacing = 0;\n    if ((0, util_1.isArray)(nodeSize)) {\n      maxNodeSize = Math.max(nodeSize[0], nodeSize[1]);\n    } else {\n      maxNodeSize = nodeSize;\n    }\n    if ((0, util_1.isArray)(nodeSpacing)) {\n      maxNodeSpacing = Math.max(nodeSpacing[0], nodeSpacing[1]);\n    } else if ((0, util_1.isNumber)(nodeSpacing)) {\n      maxNodeSpacing = nodeSpacing;\n    }\n    nodes.forEach(function (node) {\n      layoutNodes.push(node);\n      var nodeSize = maxNodeSize;\n      if ((0, util_1.isArray)(node.size)) {\n        nodeSize = Math.max(node.size[0], node.size[1]);\n      } else if ((0, util_1.isNumber)(node.size)) {\n        nodeSize = node.size;\n      } else if ((0, util_1.isObject)(node.size)) {\n        nodeSize = Math.max(node.size.width, node.size.height);\n      }\n      maxNodeSize = Math.max(maxNodeSize, nodeSize);\n      if ((0, util_1.isFunction)(nodeSpacing)) {\n        maxNodeSpacing = Math.max(nodeSpacing(node), maxNodeSpacing);\n      }\n    });\n    self.clockwise = self.counterclockwise !== undefined ? !self.counterclockwise : self.clockwise;\n    // layout\n    var nodeMap = {};\n    var indexMap = {};\n    layoutNodes.forEach(function (node, i) {\n      nodeMap[node.id] = node;\n      indexMap[node.id] = i;\n    });\n    // get the node degrees\n    if (self.sortBy === \"degree\" || !(0, util_1.isString)(self.sortBy) || layoutNodes[0][self.sortBy] === undefined) {\n      self.sortBy = \"degree\";\n      if (!(0, util_1.isNumber)(nodes[0].degree)) {\n        var values_1 = (0, util_1.getDegree)(nodes.length, indexMap, edges);\n        layoutNodes.forEach(function (node, i) {\n          node.degree = values_1[i].all;\n        });\n      }\n    }\n    // sort nodes by value\n    layoutNodes.sort(function (n1, n2) {\n      return n2[self.sortBy] - n1[self.sortBy];\n    });\n    self.maxValueNode = layoutNodes[0];\n    self.maxLevelDiff = self.maxLevelDiff || self.maxValueNode[self.sortBy] / 4;\n    // put the values into levels\n    var levels = [[]];\n    var currentLevel = levels[0];\n    layoutNodes.forEach(function (node) {\n      if (currentLevel.length > 0) {\n        var diff = Math.abs(currentLevel[0][self.sortBy] - node[self.sortBy]);\n        if (self.maxLevelDiff && diff >= self.maxLevelDiff) {\n          currentLevel = [];\n          levels.push(currentLevel);\n        }\n      }\n      currentLevel.push(node);\n    });\n    // create positions for levels\n    var minDist = maxNodeSize + (maxNodeSpacing || self.minNodeSpacing); // min dist between nodes\n    if (!self.preventOverlap) {\n      // then strictly constrain to bb\n      var firstLvlHasMulti = levels.length > 0 && levels[0].length > 1;\n      var maxR = Math.min(self.width, self.height) / 2 - minDist;\n      var rStep = maxR / (levels.length + (firstLvlHasMulti ? 1 : 0));\n      minDist = Math.min(minDist, rStep);\n    }\n    // find the metrics for each level\n    var r = 0;\n    levels.forEach(function (level) {\n      var sweep = self.sweep;\n      if (sweep === undefined) {\n        sweep = 2 * Math.PI - 2 * Math.PI / level.length;\n      }\n      var dTheta = level.dTheta = sweep / Math.max(1, level.length - 1);\n      // calculate the radius\n      if (level.length > 1 && self.preventOverlap) {\n        // but only if more than one node (can't overlap)\n        var dcos = Math.cos(dTheta) - Math.cos(0);\n        var dsin = Math.sin(dTheta) - Math.sin(0);\n        var rMin = Math.sqrt(minDist * minDist / (dcos * dcos + dsin * dsin)); // s.t. no nodes overlapping\n        r = Math.max(rMin, r);\n      }\n      level.r = r;\n      r += minDist;\n    });\n    if (self.equidistant) {\n      var rDeltaMax_1 = 0;\n      var rr_1 = 0;\n      for (var i = 0; i < levels.length; i++) {\n        var level = levels[i];\n        var rDelta = level.r - rr_1;\n        rDeltaMax_1 = Math.max(rDeltaMax_1, rDelta);\n      }\n      rr_1 = 0;\n      levels.forEach(function (level, i) {\n        if (i === 0) {\n          rr_1 = level.r;\n        }\n        level.r = rr_1;\n        rr_1 += rDeltaMax_1;\n      });\n    }\n    // calculate the node positions\n    levels.forEach(function (level) {\n      var dTheta = level.dTheta;\n      var rr = level.r;\n      level.forEach(function (node, j) {\n        var theta = self.startAngle + (self.clockwise ? 1 : -1) * dTheta * j;\n        node.x = center[0] + rr * Math.cos(theta);\n        node.y = center[1] + rr * Math.sin(theta);\n      });\n    });\n    if (self.onLayoutEnd) self.onLayoutEnd();\n    return {\n      nodes: nodes,\n      edges: edges\n    };\n  };\n  ConcentricLayout.prototype.getType = function () {\n    return \"concentric\";\n  };\n  return ConcentricLayout;\n}(base_1.Base);\nexports.ConcentricLayout = ConcentricLayout;","map":{"version":3,"names":["require","util_1","base_1","ConcentricLayout","_super","__extends","options","_this","call","nodeSize","minNodeSpacing","nodeSpacing","preventOverlap","equidistant","startAngle","Math","PI","clockwise","sortBy","nodes","edges","width","height","onLayoutEnd","updateCfg","prototype","getDefaultCfg","sweep","undefined","maxLevelDiff","execute","self","n","length","_a","window","innerWidth","innerHeight","center","x","y","_b","layoutNodes","maxNodeSize","maxNodeSpacing","isArray","max","isNumber","forEach","node","push","size","isObject","isFunction","counterclockwise","nodeMap","indexMap","i","id","isString","degree","values_1","getDegree","all","sort","n1","n2","maxValueNode","levels","currentLevel","diff","abs","minDist","firstLvlHasMulti","maxR","min","rStep","r","level","dTheta","dcos","cos","dsin","sin","rMin","sqrt","rDeltaMax_1","rr_1","rDelta","rr","j","theta","getType","Base","exports"],"sources":["../../src/layout/concentric.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}