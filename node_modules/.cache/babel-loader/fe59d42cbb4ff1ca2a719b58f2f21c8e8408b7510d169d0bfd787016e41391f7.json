{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { getElements, getElementValue, getCurrentElement } from '../util';\nimport Highlight, { STATUS_ACTIVE, STATUS_UNACTIVE } from './highlight';\n/**\n * Highlight x\n * @ignore\n */\nvar HighlightX = /** @class */function (_super) {\n  __extends(HighlightX, _super);\n  function HighlightX() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  // 不允许多选\n  HighlightX.prototype.setElementHighlight = function (el, callback) {\n    if (callback(el)) {\n      if (el.hasState(STATUS_UNACTIVE)) {\n        el.setState(STATUS_UNACTIVE, false);\n      }\n      el.setState(STATUS_ACTIVE, true);\n    } else {\n      el.setState(STATUS_UNACTIVE, true);\n      if (el.hasState(STATUS_ACTIVE)) {\n        el.setState(STATUS_ACTIVE, false);\n      }\n    }\n  };\n  HighlightX.prototype.setStateByElement = function (element, enable) {\n    var view = this.context.view;\n    var scale = view.getXScale();\n    var value = getElementValue(element, scale.field);\n    var elements = getElements(view);\n    var highlightElements = elements.filter(function (el) {\n      return getElementValue(el, scale.field) === value;\n    });\n    this.setHighlightBy(elements, function (el) {\n      return highlightElements.includes(el);\n    }, enable);\n  };\n  /**\n   * 切换状态\n   */\n  HighlightX.prototype.toggle = function () {\n    var element = getCurrentElement(this.context);\n    if (element) {\n      var hasState = element.hasState(this.stateName);\n      this.setStateByElement(element, !hasState);\n    }\n  };\n  return HighlightX;\n}(Highlight);\nexport default HighlightX;","map":{"version":3,"names":["getElements","getElementValue","getCurrentElement","Highlight","STATUS_ACTIVE","STATUS_UNACTIVE","HighlightX","_super","__extends","prototype","setElementHighlight","el","callback","hasState","setState","setStateByElement","element","enable","view","context","scale","getXScale","value","field","elements","highlightElements","filter","setHighlightBy","includes","toggle","stateName"],"sources":["../../../../src/interaction/action/element/highlight-by-x.ts"],"sourcesContent":["import Element from '../../../geometry/element/';\nimport { getElements, getElementValue, getCurrentElement } from '../util';\nimport Highlight, { STATUS_ACTIVE, STATUS_UNACTIVE, Callback } from './highlight';\n\n/**\n * Highlight x\n * @ignore\n */\nclass HighlightX extends Highlight {\n  // 不允许多选\n  protected setElementHighlight(el: Element, callback: Callback) {\n    if (callback(el)) {\n      if (el.hasState(STATUS_UNACTIVE)) {\n        el.setState(STATUS_UNACTIVE, false);\n      }\n      el.setState(STATUS_ACTIVE, true);\n    } else {\n      el.setState(STATUS_UNACTIVE, true);\n      if (el.hasState(STATUS_ACTIVE)) {\n        el.setState(STATUS_ACTIVE, false);\n      }\n    }\n  }\n\n  protected setStateByElement(element: Element, enable: boolean) {\n    const view = this.context.view;\n    const scale = view.getXScale();\n    const value = getElementValue(element, scale.field);\n    const elements = getElements(view);\n    const highlightElements = elements.filter((el) => {\n      return getElementValue(el, scale.field) === value;\n    });\n    this.setHighlightBy(elements, (el) => highlightElements.includes(el), enable);\n  }\n\n  /**\n   * 切换状态\n   */\n  public toggle() {\n    const element = getCurrentElement(this.context);\n    if (element) {\n      const hasState = element.hasState(this.stateName);\n      this.setStateByElement(element, !hasState);\n    }\n  }\n}\n\nexport default HighlightX;\n"],"mappings":";AACA,SAASA,WAAW,EAAEC,eAAe,EAAEC,iBAAiB,QAAQ,SAAS;AACzE,OAAOC,SAAS,IAAIC,aAAa,EAAEC,eAAe,QAAkB,aAAa;AAEjF;;;;AAIA,IAAAC,UAAA,0BAAAC,MAAA;EAAyBC,SAAA,CAAAF,UAAA,EAAAC,MAAA;EAAzB,SAAAD,WAAA;;EAqCA;EApCE;EACUA,UAAA,CAAAG,SAAA,CAAAC,mBAAmB,GAA7B,UAA8BC,EAAW,EAAEC,QAAkB;IAC3D,IAAIA,QAAQ,CAACD,EAAE,CAAC,EAAE;MAChB,IAAIA,EAAE,CAACE,QAAQ,CAACR,eAAe,CAAC,EAAE;QAChCM,EAAE,CAACG,QAAQ,CAACT,eAAe,EAAE,KAAK,CAAC;;MAErCM,EAAE,CAACG,QAAQ,CAACV,aAAa,EAAE,IAAI,CAAC;KACjC,MAAM;MACLO,EAAE,CAACG,QAAQ,CAACT,eAAe,EAAE,IAAI,CAAC;MAClC,IAAIM,EAAE,CAACE,QAAQ,CAACT,aAAa,CAAC,EAAE;QAC9BO,EAAE,CAACG,QAAQ,CAACV,aAAa,EAAE,KAAK,CAAC;;;EAGvC,CAAC;EAESE,UAAA,CAAAG,SAAA,CAAAM,iBAAiB,GAA3B,UAA4BC,OAAgB,EAAEC,MAAe;IAC3D,IAAMC,IAAI,GAAG,IAAI,CAACC,OAAO,CAACD,IAAI;IAC9B,IAAME,KAAK,GAAGF,IAAI,CAACG,SAAS,EAAE;IAC9B,IAAMC,KAAK,GAAGrB,eAAe,CAACe,OAAO,EAAEI,KAAK,CAACG,KAAK,CAAC;IACnD,IAAMC,QAAQ,GAAGxB,WAAW,CAACkB,IAAI,CAAC;IAClC,IAAMO,iBAAiB,GAAGD,QAAQ,CAACE,MAAM,CAAC,UAACf,EAAE;MAC3C,OAAOV,eAAe,CAACU,EAAE,EAAES,KAAK,CAACG,KAAK,CAAC,KAAKD,KAAK;IACnD,CAAC,CAAC;IACF,IAAI,CAACK,cAAc,CAACH,QAAQ,EAAE,UAACb,EAAE;MAAK,OAAAc,iBAAiB,CAACG,QAAQ,CAACjB,EAAE,CAAC;IAA9B,CAA8B,EAAEM,MAAM,CAAC;EAC/E,CAAC;EAED;;;EAGOX,UAAA,CAAAG,SAAA,CAAAoB,MAAM,GAAb;IACE,IAAMb,OAAO,GAAGd,iBAAiB,CAAC,IAAI,CAACiB,OAAO,CAAC;IAC/C,IAAIH,OAAO,EAAE;MACX,IAAMH,QAAQ,GAAGG,OAAO,CAACH,QAAQ,CAAC,IAAI,CAACiB,SAAS,CAAC;MACjD,IAAI,CAACf,iBAAiB,CAACC,OAAO,EAAE,CAACH,QAAQ,CAAC;;EAE9C,CAAC;EACH,OAAAP,UAAC;AAAD,CAAC,CArCwBH,SAAS;AAuClC,eAAeG,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}