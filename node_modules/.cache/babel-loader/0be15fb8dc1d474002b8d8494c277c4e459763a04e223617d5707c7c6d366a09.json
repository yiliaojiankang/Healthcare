{"ast":null,"code":"import \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { AttributeType, gl } from '@antv/l7-core';\nimport { getDefaultDomain } from '@antv/l7-utils';\nimport BaseModel from \"../../core/BaseModel\";\nimport { ShaderLocation } from \"../../core/CommonStyleAttribute\";\nimport { RasterImageTriangulation } from \"../../core/triangulation\";\n/* babel-plugin-inline-import '../shaders/raster/raster_2d_frag.glsl' */\nvar rasterFrag = \"layout(std140) uniform commonUniforms {\\n  vec2 u_domain;\\n  float u_opacity;\\n  float u_noDataValue;\\n  float u_clampLow;\\n  float u_clampHigh;\\n};\\n\\nuniform sampler2D u_rasterTexture;\\nuniform sampler2D u_colorTexture;\\n\\nin vec2 v_texCoord;\\n\\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\\n\\nout vec4 outputColor;\\n\\nvoid main() {\\n  // Can use any component here since u_rasterTexture is under luminance format.\\n  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;\\n  if (value == u_noDataValue || isnan_emu(value)) {\\n    discard;\\n  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {\\n    discard;\\n  } else {\\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);\\n    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));\\n    \\n    outputColor = color;\\n    outputColor.a = outputColor.a * u_opacity ;\\n    if (outputColor.a < 0.01)\\n      discard;\\n  }\\n}\\n\";\n/* babel-plugin-inline-import '../shaders/raster/raster_2d_vert.glsl' */\nvar rasterVert = \"\\nlayout(location = 0) in vec3 a_Position;\\nlayout(location = 14) in vec2 a_Uv;\\n\\nlayout(std140) uniform commonUniforms {\\n  vec2 u_domain;\\n  float u_opacity;\\n  float u_noDataValue;\\n  float u_clampLow;\\n  float u_clampHigh;\\n};\\n\\nout vec2 v_texCoord;\\n\\n#pragma include \\\"projection\\\"\\n\\nvoid main() {\\n   v_texCoord = a_Uv;\\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\\n  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));\\n}\\n\";\nvar RasterModel = /*#__PURE__*/function (_BaseModel) {\n  _inherits(RasterModel, _BaseModel);\n  var _super = _createSuper(RasterModel);\n  function RasterModel() {\n    _classCallCheck(this, RasterModel);\n    return _super.apply(this, arguments);\n  }\n  _createClass(RasterModel, [{\n    key: \"getUninforms\",\n    value: function getUninforms() {\n      var commoninfo = this.getCommonUniformsInfo();\n      var attributeInfo = this.getUniformsBufferInfo(this.getStyleAttribute());\n      this.updateStyleUnifoms();\n      return _objectSpread(_objectSpread({}, commoninfo.uniformsOption), attributeInfo.uniformsOption);\n    }\n  }, {\n    key: \"getCommonUniformsInfo\",\n    value: function getCommonUniformsInfo() {\n      var _ref = this.layer.getLayerConfig(),\n        _ref$opacity = _ref.opacity,\n        opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n        _ref$clampLow = _ref.clampLow,\n        clampLow = _ref$clampLow === void 0 ? true : _ref$clampLow,\n        _ref$clampHigh = _ref.clampHigh,\n        clampHigh = _ref$clampHigh === void 0 ? true : _ref$clampHigh,\n        _ref$noDataValue = _ref.noDataValue,\n        noDataValue = _ref$noDataValue === void 0 ? -9999999 : _ref$noDataValue,\n        domain = _ref.domain,\n        rampColors = _ref.rampColors;\n      var newdomain = domain || getDefaultDomain(rampColors);\n      this.colorTexture = this.layer.textureService.getColorTexture(rampColors, newdomain);\n      var commonOptions = {\n        u_domain: newdomain,\n        u_opacity: opacity || 1,\n        u_noDataValue: noDataValue,\n        u_clampLow: clampLow ? 1 : 0,\n        u_clampHigh: (typeof clampHigh !== 'undefined' ? clampHigh : clampLow) ? 1 : 0,\n        u_rasterTexture: this.texture,\n        u_colorTexture: this.colorTexture\n      };\n      this.textures = [this.texture, this.colorTexture];\n      var commonBufferInfo = this.getUniformsBufferInfo(commonOptions);\n      return commonBufferInfo;\n    }\n  }, {\n    key: \"getRasterData\",\n    value: function () {\n      var _getRasterData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(parserDataItem) {\n        var _yield$parserDataItem, rasterData, width, height;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!Array.isArray(parserDataItem.data)) {\n                _context.next = 4;\n                break;\n              }\n              return _context.abrupt(\"return\", {\n                data: parserDataItem.data,\n                width: parserDataItem.width,\n                height: parserDataItem.height\n              });\n            case 4:\n              _context.next = 6;\n              return parserDataItem.data;\n            case 6:\n              _yield$parserDataItem = _context.sent;\n              rasterData = _yield$parserDataItem.rasterData;\n              width = _yield$parserDataItem.width;\n              height = _yield$parserDataItem.height;\n              return _context.abrupt(\"return\", {\n                data: Array.from(rasterData),\n                width: width,\n                height: height\n              });\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function getRasterData(_x) {\n        return _getRasterData.apply(this, arguments);\n      }\n      return getRasterData;\n    }()\n  }, {\n    key: \"initModels\",\n    value: function () {\n      var _initModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", this.buildModels());\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function initModels() {\n        return _initModels.apply(this, arguments);\n      }\n      return initModels;\n    }()\n  }, {\n    key: \"buildModels\",\n    value: function () {\n      var _buildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var source, _this$rendererService, createTexture2D, queryVerdorInfo, parserDataItem, _yield$this$getRaster, data, width, height, model;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              this.initUniformsBuffer();\n              source = this.layer.getSource();\n              _this$rendererService = this.rendererService, createTexture2D = _this$rendererService.createTexture2D, queryVerdorInfo = _this$rendererService.queryVerdorInfo;\n              parserDataItem = source.data.dataArray[0];\n              _context3.next = 6;\n              return this.getRasterData(parserDataItem);\n            case 6:\n              _yield$this$getRaster = _context3.sent;\n              data = _yield$this$getRaster.data;\n              width = _yield$this$getRaster.width;\n              height = _yield$this$getRaster.height;\n              this.texture = createTexture2D({\n                // @ts-ignore\n                data: new Float32Array(data),\n                width: width,\n                height: height,\n                /**\n                 * WebGL1 allow the combination of gl.LUMINANCE & gl.FLOAT with OES_texture_float\n                 */\n                format: queryVerdorInfo() === 'WebGL1' ? gl.LUMINANCE : gl.RED,\n                type: gl.FLOAT,\n                alignment: 1\n              });\n              _context3.next = 13;\n              return this.layer.buildLayerModel({\n                moduleName: 'rasterImageData',\n                vertexShader: rasterVert,\n                fragmentShader: rasterFrag,\n                triangulation: RasterImageTriangulation,\n                primitive: gl.TRIANGLES,\n                depth: {\n                  enable: false\n                },\n                pickingEnabled: false\n              });\n            case 13:\n              model = _context3.sent;\n              return _context3.abrupt(\"return\", [model]);\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function buildModels() {\n        return _buildModels.apply(this, arguments);\n      }\n      return buildModels;\n    }()\n  }, {\n    key: \"clearModels\",\n    value: function clearModels() {\n      var _this$texture, _this$colorTexture;\n      (_this$texture = this.texture) === null || _this$texture === void 0 || _this$texture.destroy();\n      (_this$colorTexture = this.colorTexture) === null || _this$colorTexture === void 0 || _this$colorTexture.destroy();\n    }\n  }, {\n    key: \"registerBuiltinAttributes\",\n    value: function registerBuiltinAttributes() {\n      // point layer size;\n      this.styleAttributeService.registerStyleAttribute({\n        name: 'uv',\n        type: AttributeType.Attribute,\n        descriptor: {\n          shaderLocation: ShaderLocation.UV,\n          name: 'a_Uv',\n          buffer: {\n            // give the WebGL driver a hint that this buffer may change\n            usage: gl.DYNAMIC_DRAW,\n            data: [],\n            type: gl.FLOAT\n          },\n          size: 2,\n          update: function update(feature, featureIdx, vertex) {\n            return [vertex[3], vertex[4]];\n          }\n        }\n      });\n    }\n  }]);\n  return RasterModel;\n}(BaseModel);\nexport { RasterModel as default };","map":{"version":3,"names":["_asyncToGenerator","_objectSpread","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","AttributeType","gl","getDefaultDomain","BaseModel","ShaderLocation","RasterImageTriangulation","rasterFrag","rasterVert","RasterModel","_BaseModel","_super","key","value","getUninforms","commoninfo","getCommonUniformsInfo","attributeInfo","getUniformsBufferInfo","getStyleAttribute","updateStyleUnifoms","uniformsOption","_ref","layer","getLayerConfig","_ref$opacity","opacity","_ref$clampLow","clampLow","_ref$clampHigh","clampHigh","_ref$noDataValue","noDataValue","domain","rampColors","newdomain","colorTexture","textureService","getColorTexture","commonOptions","u_domain","u_opacity","u_noDataValue","u_clampLow","u_clampHigh","u_rasterTexture","texture","u_colorTexture","textures","commonBufferInfo","_getRasterData","mark","_callee","parserDataItem","_yield$parserDataItem","rasterData","width","height","wrap","_callee$","_context","prev","next","Array","isArray","data","abrupt","sent","from","stop","getRasterData","_x","_initModels","_callee2","_callee2$","_context2","buildModels","initModels","_buildModels","_callee3","source","_this$rendererService","createTexture2D","queryVerdorInfo","_yield$this$getRaster","model","_callee3$","_context3","initUniformsBuffer","getSource","rendererService","dataArray","Float32Array","format","LUMINANCE","RED","type","FLOAT","alignment","buildLayerModel","moduleName","vertexShader","fragmentShader","triangulation","primitive","TRIANGLES","depth","enable","pickingEnabled","clearModels","_this$texture","_this$colorTexture","destroy","registerBuiltinAttributes","styleAttributeService","registerStyleAttribute","name","Attribute","descriptor","shaderLocation","UV","buffer","usage","DYNAMIC_DRAW","size","update","feature","featureIdx","vertex","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-layers/es/raster/models/raster.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { AttributeType, gl } from '@antv/l7-core';\nimport { getDefaultDomain } from '@antv/l7-utils';\nimport BaseModel from \"../../core/BaseModel\";\nimport { ShaderLocation } from \"../../core/CommonStyleAttribute\";\nimport { RasterImageTriangulation } from \"../../core/triangulation\";\n/* babel-plugin-inline-import '../shaders/raster/raster_2d_frag.glsl' */\nvar rasterFrag = \"layout(std140) uniform commonUniforms {\\n  vec2 u_domain;\\n  float u_opacity;\\n  float u_noDataValue;\\n  float u_clampLow;\\n  float u_clampHigh;\\n};\\n\\nuniform sampler2D u_rasterTexture;\\nuniform sampler2D u_colorTexture;\\n\\nin vec2 v_texCoord;\\n\\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\\n\\nout vec4 outputColor;\\n\\nvoid main() {\\n  // Can use any component here since u_rasterTexture is under luminance format.\\n  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;\\n  if (value == u_noDataValue || isnan_emu(value)) {\\n    discard;\\n  } else if ((u_clampLow < 0.5 && value < u_domain[0]) || (u_clampHigh < 0.5 && value > u_domain[1])) {\\n    discard;\\n  } else {\\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] - u_domain[0]);\\n    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));\\n    \\n    outputColor = color;\\n    outputColor.a = outputColor.a * u_opacity ;\\n    if (outputColor.a < 0.01)\\n      discard;\\n  }\\n}\\n\";\n/* babel-plugin-inline-import '../shaders/raster/raster_2d_vert.glsl' */\nvar rasterVert = \"\\nlayout(location = 0) in vec3 a_Position;\\nlayout(location = 14) in vec2 a_Uv;\\n\\nlayout(std140) uniform commonUniforms {\\n  vec2 u_domain;\\n  float u_opacity;\\n  float u_noDataValue;\\n  float u_clampLow;\\n  float u_clampHigh;\\n};\\n\\nout vec2 v_texCoord;\\n\\n#pragma include \\\"projection\\\"\\n\\nvoid main() {\\n   v_texCoord = a_Uv;\\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\\n  gl_Position = project_common_position_to_clipspace_v2(vec4(project_pos.xy,0., 1.0));\\n}\\n\";\nvar RasterModel = /*#__PURE__*/function (_BaseModel) {\n  _inherits(RasterModel, _BaseModel);\n  var _super = _createSuper(RasterModel);\n  function RasterModel() {\n    _classCallCheck(this, RasterModel);\n    return _super.apply(this, arguments);\n  }\n  _createClass(RasterModel, [{\n    key: \"getUninforms\",\n    value: function getUninforms() {\n      var commoninfo = this.getCommonUniformsInfo();\n      var attributeInfo = this.getUniformsBufferInfo(this.getStyleAttribute());\n      this.updateStyleUnifoms();\n      return _objectSpread(_objectSpread({}, commoninfo.uniformsOption), attributeInfo.uniformsOption);\n    }\n  }, {\n    key: \"getCommonUniformsInfo\",\n    value: function getCommonUniformsInfo() {\n      var _ref = this.layer.getLayerConfig(),\n        _ref$opacity = _ref.opacity,\n        opacity = _ref$opacity === void 0 ? 1 : _ref$opacity,\n        _ref$clampLow = _ref.clampLow,\n        clampLow = _ref$clampLow === void 0 ? true : _ref$clampLow,\n        _ref$clampHigh = _ref.clampHigh,\n        clampHigh = _ref$clampHigh === void 0 ? true : _ref$clampHigh,\n        _ref$noDataValue = _ref.noDataValue,\n        noDataValue = _ref$noDataValue === void 0 ? -9999999 : _ref$noDataValue,\n        domain = _ref.domain,\n        rampColors = _ref.rampColors;\n      var newdomain = domain || getDefaultDomain(rampColors);\n      this.colorTexture = this.layer.textureService.getColorTexture(rampColors, newdomain);\n      var commonOptions = {\n        u_domain: newdomain,\n        u_opacity: opacity || 1,\n        u_noDataValue: noDataValue,\n        u_clampLow: clampLow ? 1 : 0,\n        u_clampHigh: (typeof clampHigh !== 'undefined' ? clampHigh : clampLow) ? 1 : 0,\n        u_rasterTexture: this.texture,\n        u_colorTexture: this.colorTexture\n      };\n      this.textures = [this.texture, this.colorTexture];\n      var commonBufferInfo = this.getUniformsBufferInfo(commonOptions);\n      return commonBufferInfo;\n    }\n  }, {\n    key: \"getRasterData\",\n    value: function () {\n      var _getRasterData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(parserDataItem) {\n        var _yield$parserDataItem, rasterData, width, height;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (!Array.isArray(parserDataItem.data)) {\n                _context.next = 4;\n                break;\n              }\n              return _context.abrupt(\"return\", {\n                data: parserDataItem.data,\n                width: parserDataItem.width,\n                height: parserDataItem.height\n              });\n            case 4:\n              _context.next = 6;\n              return parserDataItem.data;\n            case 6:\n              _yield$parserDataItem = _context.sent;\n              rasterData = _yield$parserDataItem.rasterData;\n              width = _yield$parserDataItem.width;\n              height = _yield$parserDataItem.height;\n              return _context.abrupt(\"return\", {\n                data: Array.from(rasterData),\n                width: width,\n                height: height\n              });\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function getRasterData(_x) {\n        return _getRasterData.apply(this, arguments);\n      }\n      return getRasterData;\n    }()\n  }, {\n    key: \"initModels\",\n    value: function () {\n      var _initModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              return _context2.abrupt(\"return\", this.buildModels());\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function initModels() {\n        return _initModels.apply(this, arguments);\n      }\n      return initModels;\n    }()\n  }, {\n    key: \"buildModels\",\n    value: function () {\n      var _buildModels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var source, _this$rendererService, createTexture2D, queryVerdorInfo, parserDataItem, _yield$this$getRaster, data, width, height, model;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              this.initUniformsBuffer();\n              source = this.layer.getSource();\n              _this$rendererService = this.rendererService, createTexture2D = _this$rendererService.createTexture2D, queryVerdorInfo = _this$rendererService.queryVerdorInfo;\n              parserDataItem = source.data.dataArray[0];\n              _context3.next = 6;\n              return this.getRasterData(parserDataItem);\n            case 6:\n              _yield$this$getRaster = _context3.sent;\n              data = _yield$this$getRaster.data;\n              width = _yield$this$getRaster.width;\n              height = _yield$this$getRaster.height;\n              this.texture = createTexture2D({\n                // @ts-ignore\n                data: new Float32Array(data),\n                width: width,\n                height: height,\n                /**\n                 * WebGL1 allow the combination of gl.LUMINANCE & gl.FLOAT with OES_texture_float\n                 */\n                format: queryVerdorInfo() === 'WebGL1' ? gl.LUMINANCE : gl.RED,\n                type: gl.FLOAT,\n                alignment: 1\n              });\n              _context3.next = 13;\n              return this.layer.buildLayerModel({\n                moduleName: 'rasterImageData',\n                vertexShader: rasterVert,\n                fragmentShader: rasterFrag,\n                triangulation: RasterImageTriangulation,\n                primitive: gl.TRIANGLES,\n                depth: {\n                  enable: false\n                },\n                pickingEnabled: false\n              });\n            case 13:\n              model = _context3.sent;\n              return _context3.abrupt(\"return\", [model]);\n            case 15:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function buildModels() {\n        return _buildModels.apply(this, arguments);\n      }\n      return buildModels;\n    }()\n  }, {\n    key: \"clearModels\",\n    value: function clearModels() {\n      var _this$texture, _this$colorTexture;\n      (_this$texture = this.texture) === null || _this$texture === void 0 || _this$texture.destroy();\n      (_this$colorTexture = this.colorTexture) === null || _this$colorTexture === void 0 || _this$colorTexture.destroy();\n    }\n  }, {\n    key: \"registerBuiltinAttributes\",\n    value: function registerBuiltinAttributes() {\n      // point layer size;\n      this.styleAttributeService.registerStyleAttribute({\n        name: 'uv',\n        type: AttributeType.Attribute,\n        descriptor: {\n          shaderLocation: ShaderLocation.UV,\n          name: 'a_Uv',\n          buffer: {\n            // give the WebGL driver a hint that this buffer may change\n            usage: gl.DYNAMIC_DRAW,\n            data: [],\n            type: gl.FLOAT\n          },\n          size: 2,\n          update: function update(feature, featureIdx, vertex) {\n            return [vertex[3], vertex[4]];\n          }\n        }\n      });\n    }\n  }]);\n  return RasterModel;\n}(BaseModel);\nexport { RasterModel as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}