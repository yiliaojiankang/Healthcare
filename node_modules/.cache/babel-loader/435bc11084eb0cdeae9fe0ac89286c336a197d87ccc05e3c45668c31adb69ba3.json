{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __rest } from \"tslib\";\nimport { get } from '@antv/util';\nimport { animation, annotation, interaction, scale, state, theme } from '../../adaptor/common';\nimport { interval } from '../../adaptor/geometries';\nimport { getLocale } from '../../core/locale';\nimport { deepAssign, findGeometry, flow, transformLabel } from '../../utils';\nimport { ABSOLUTE_FIELD, DIFF_FIELD, IS_TOTAL, Y_FIELD } from './constant';\nimport './shape';\nimport { transformData } from './utils';\n/**\n *  处理默认配置项\n * @param params\n * @returns\n */\nfunction defaultOptions(params) {\n  var _a = params.options,\n    locale = _a.locale,\n    total = _a.total;\n  var localeTotalLabel = getLocale(locale).get(['waterfall', 'total']);\n  if (total && typeof total.label !== 'string' && localeTotalLabel) {\n    // @ts-ignore\n    params.options.total.label = localeTotalLabel;\n  }\n  return params;\n}\n/**\n * 字段\n * @param params\n */\nfunction geometry(params) {\n  var chart = params.chart,\n    options = params.options;\n  var data = options.data,\n    xField = options.xField,\n    yField = options.yField,\n    total = options.total,\n    leaderLine = options.leaderLine,\n    columnWidthRatio = options.columnWidthRatio,\n    waterfallStyle = options.waterfallStyle,\n    risingFill = options.risingFill,\n    fallingFill = options.fallingFill,\n    color = options.color,\n    shape = options.shape,\n    customInfo = options.customInfo;\n  // 数据处理\n  chart.data(transformData(data, xField, yField, total));\n  // 瀑布图自带的 colorMapping\n  var colorMapping = color || function (datum) {\n    if (get(datum, [IS_TOTAL])) {\n      return get(total, ['style', 'fill'], '');\n    }\n    return get(datum, [Y_FIELD, 1]) - get(datum, [Y_FIELD, 0]) > 0 ? risingFill : fallingFill;\n  };\n  var p = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: Y_FIELD,\n      seriesField: xField,\n      rawFields: [yField, DIFF_FIELD, IS_TOTAL, Y_FIELD],\n      widthRatio: columnWidthRatio,\n      interval: {\n        style: waterfallStyle,\n        // 支持外部自定义形状\n        shape: shape || 'waterfall',\n        color: colorMapping\n      }\n    }\n  });\n  var ext = interval(p).ext;\n  var geometry = ext.geometry;\n  // 将 waterfall leaderLineCfg 传入到自定义 shape 中\n  geometry.customInfo(__assign(__assign({}, customInfo), {\n    leaderLine: leaderLine\n  }));\n  return params;\n}\n/**\n * meta 配置\n * @param params\n */\nfunction meta(params) {\n  var _a, _b;\n  var options = params.options;\n  var xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField,\n    yField = options.yField,\n    meta = options.meta;\n  var Y_FIELD_META = deepAssign({}, {\n    alias: yField\n  }, get(meta, yField));\n  return flow(scale((_a = {}, _a[xField] = xAxis, _a[yField] = yAxis, _a[Y_FIELD] = yAxis, _a), deepAssign({}, meta, (_b = {}, _b[Y_FIELD] = Y_FIELD_META, _b[DIFF_FIELD] = Y_FIELD_META, _b[ABSOLUTE_FIELD] = Y_FIELD_META, _b))))(params);\n}\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params) {\n  var chart = params.chart,\n    options = params.options;\n  var xAxis = options.xAxis,\n    yAxis = options.yAxis,\n    xField = options.xField,\n    yField = options.yField;\n  // 为 false 则是不显示轴\n  if (xAxis === false) {\n    chart.axis(xField, false);\n  } else {\n    chart.axis(xField, xAxis);\n  }\n  if (yAxis === false) {\n    chart.axis(yField, false);\n    chart.axis(Y_FIELD, false);\n  } else {\n    chart.axis(yField, yAxis);\n    chart.axis(Y_FIELD, yAxis);\n  }\n  return params;\n}\n/**\n * legend 配置 todo 添加 hover 交互\n * @param params\n */\nfunction legend(params) {\n  var chart = params.chart,\n    options = params.options;\n  var legend = options.legend,\n    total = options.total,\n    risingFill = options.risingFill,\n    fallingFill = options.fallingFill,\n    locale = options.locale;\n  var i18n = getLocale(locale);\n  if (legend === false) {\n    chart.legend(false);\n  } else {\n    var items = [{\n      name: i18n.get(['general', 'increase']),\n      value: 'increase',\n      marker: {\n        symbol: 'square',\n        style: {\n          r: 5,\n          fill: risingFill\n        }\n      }\n    }, {\n      name: i18n.get(['general', 'decrease']),\n      value: 'decrease',\n      marker: {\n        symbol: 'square',\n        style: {\n          r: 5,\n          fill: fallingFill\n        }\n      }\n    }];\n    if (total) {\n      items.push({\n        name: total.label || '',\n        value: 'total',\n        marker: {\n          symbol: 'square',\n          style: deepAssign({}, {\n            r: 5\n          }, get(total, 'style'))\n        }\n      });\n    }\n    chart.legend(deepAssign({}, {\n      custom: true,\n      position: 'top',\n      items: items\n    }, legend));\n    chart.removeInteraction('legend-filter');\n  }\n  return params;\n}\n/**\n * 数据标签\n * @param params\n */\nfunction label(params) {\n  var chart = params.chart,\n    options = params.options;\n  var label = options.label,\n    labelMode = options.labelMode,\n    xField = options.xField;\n  var geometry = findGeometry(chart, 'interval');\n  if (!label) {\n    geometry.label(false);\n  } else {\n    var callback = label.callback,\n      cfg = __rest(label, [\"callback\"]);\n    geometry.label({\n      fields: labelMode === 'absolute' ? [ABSOLUTE_FIELD, xField] : [DIFF_FIELD, xField],\n      callback: callback,\n      cfg: transformLabel(cfg)\n    });\n  }\n  return params;\n}\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params) {\n  var chart = params.chart,\n    options = params.options;\n  var tooltip = options.tooltip,\n    xField = options.xField,\n    yField = options.yField;\n  if (tooltip !== false) {\n    chart.tooltip(__assign({\n      showCrosshairs: false,\n      showMarkers: false,\n      shared: true,\n      // tooltip 默认展示 y 字段值\n      fields: [yField]\n    }, tooltip));\n    // 瀑布图默认以 yField 作为 tooltip 内容\n    var geometry_1 = chart.geometries[0];\n    (tooltip === null || tooltip === void 0 ? void 0 : tooltip.formatter) ? geometry_1.tooltip(\"\".concat(xField, \"*\").concat(yField), tooltip.formatter) : geometry_1.tooltip(yField);\n  } else {\n    chart.tooltip(false);\n  }\n  return params;\n}\n/**\n * 瀑布图适配器\n * @param params\n */\nexport function adaptor(params) {\n  return flow(defaultOptions, theme, geometry, meta, axis, legend, tooltip, label, state, interaction, animation, annotation())(params);\n}","map":{"version":3,"names":["get","animation","annotation","interaction","scale","state","theme","interval","getLocale","deepAssign","findGeometry","flow","transformLabel","ABSOLUTE_FIELD","DIFF_FIELD","IS_TOTAL","Y_FIELD","transformData","defaultOptions","params","_a","options","locale","total","localeTotalLabel","label","geometry","chart","data","xField","yField","leaderLine","columnWidthRatio","waterfallStyle","risingFill","fallingFill","color","shape","customInfo","colorMapping","datum","p","seriesField","rawFields","widthRatio","style","ext","__assign","meta","xAxis","yAxis","Y_FIELD_META","alias","_b","axis","legend","i18n","items","name","value","marker","symbol","r","fill","push","custom","position","removeInteraction","labelMode","callback","cfg","__rest","fields","tooltip","showCrosshairs","showMarkers","shared","geometry_1","geometries","formatter","concat","adaptor"],"sources":["../../../src/plots/waterfall/adaptor.ts"],"sourcesContent":["import { Geometry } from '@antv/g2';\nimport { get } from '@antv/util';\nimport { animation, annotation, interaction, scale, state, theme } from '../../adaptor/common';\nimport { interval } from '../../adaptor/geometries';\nimport { Params } from '../../core/adaptor';\nimport { getLocale } from '../../core/locale';\nimport { Datum } from '../../types';\nimport { deepAssign, findGeometry, flow, transformLabel } from '../../utils';\nimport { ABSOLUTE_FIELD, DIFF_FIELD, IS_TOTAL, Y_FIELD } from './constant';\nimport './shape';\nimport { WaterfallOptions } from './types';\nimport { transformData } from './utils';\n\n/**\n *  处理默认配置项\n * @param params\n * @returns\n */\nfunction defaultOptions(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { locale, total } = params.options;\n\n  const localeTotalLabel = getLocale(locale).get(['waterfall', 'total']);\n\n  if (total && typeof total.label !== 'string' && localeTotalLabel) {\n    // @ts-ignore\n    params.options.total.label = localeTotalLabel;\n  }\n\n  return params;\n}\n\n/**\n * 字段\n * @param params\n */\nfunction geometry(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { chart, options } = params;\n  const {\n    data,\n    xField,\n    yField,\n    total,\n    leaderLine,\n    columnWidthRatio,\n    waterfallStyle,\n    risingFill,\n    fallingFill,\n    color,\n    shape,\n    customInfo,\n  } = options;\n\n  // 数据处理\n  chart.data(transformData(data, xField, yField, total));\n\n  // 瀑布图自带的 colorMapping\n  const colorMapping =\n    color ||\n    function (datum: Datum) {\n      if (get(datum, [IS_TOTAL])) {\n        return get(total, ['style', 'fill'], '');\n      }\n      return get(datum, [Y_FIELD, 1]) - get(datum, [Y_FIELD, 0]) > 0 ? risingFill : fallingFill;\n    };\n\n  const p = deepAssign({}, params, {\n    options: {\n      xField: xField,\n      yField: Y_FIELD,\n      seriesField: xField,\n      rawFields: [yField, DIFF_FIELD, IS_TOTAL, Y_FIELD],\n      widthRatio: columnWidthRatio,\n      interval: {\n        style: waterfallStyle,\n        // 支持外部自定义形状\n        shape: shape || 'waterfall',\n        color: colorMapping,\n      },\n    },\n  });\n  const { ext } = interval(p);\n  const geometry = ext.geometry as Geometry;\n\n  // 将 waterfall leaderLineCfg 传入到自定义 shape 中\n  geometry.customInfo({\n    ...customInfo,\n    leaderLine,\n  });\n\n  return params;\n}\n\n/**\n * meta 配置\n * @param params\n */\nfunction meta(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { options } = params;\n  const { xAxis, yAxis, xField, yField, meta } = options;\n\n  const Y_FIELD_META = deepAssign({}, { alias: yField }, get(meta, yField));\n\n  return flow(\n    scale(\n      {\n        [xField]: xAxis,\n        [yField]: yAxis,\n        [Y_FIELD]: yAxis,\n      },\n      deepAssign({}, meta, { [Y_FIELD]: Y_FIELD_META, [DIFF_FIELD]: Y_FIELD_META, [ABSOLUTE_FIELD]: Y_FIELD_META })\n    )\n  )(params);\n}\n\n/**\n * axis 配置\n * @param params\n */\nfunction axis(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { chart, options } = params;\n  const { xAxis, yAxis, xField, yField } = options;\n\n  // 为 false 则是不显示轴\n  if (xAxis === false) {\n    chart.axis(xField, false);\n  } else {\n    chart.axis(xField, xAxis);\n  }\n\n  if (yAxis === false) {\n    chart.axis(yField, false);\n    chart.axis(Y_FIELD, false);\n  } else {\n    chart.axis(yField, yAxis);\n    chart.axis(Y_FIELD, yAxis);\n  }\n\n  return params;\n}\n\n/**\n * legend 配置 todo 添加 hover 交互\n * @param params\n */\nfunction legend(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { chart, options } = params;\n  const { legend, total, risingFill, fallingFill, locale } = options;\n\n  const i18n = getLocale(locale);\n\n  if (legend === false) {\n    chart.legend(false);\n  } else {\n    const items = [\n      {\n        name: i18n.get(['general', 'increase']),\n        value: 'increase',\n        marker: { symbol: 'square', style: { r: 5, fill: risingFill } },\n      },\n      {\n        name: i18n.get(['general', 'decrease']),\n        value: 'decrease',\n        marker: { symbol: 'square', style: { r: 5, fill: fallingFill } },\n      },\n    ];\n\n    if (total) {\n      items.push({\n        name: total.label || '',\n        value: 'total',\n        marker: {\n          symbol: 'square',\n          style: deepAssign({}, { r: 5 }, get(total, 'style')),\n        },\n      });\n    }\n    chart.legend(\n      deepAssign(\n        {},\n        {\n          custom: true,\n          position: 'top',\n          items,\n        },\n        legend\n      )\n    );\n    chart.removeInteraction('legend-filter');\n  }\n\n  return params;\n}\n\n/**\n * 数据标签\n * @param params\n */\nfunction label(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { chart, options } = params;\n  const { label, labelMode, xField } = options;\n\n  const geometry = findGeometry(chart, 'interval');\n\n  if (!label) {\n    geometry.label(false);\n  } else {\n    const { callback, ...cfg } = label;\n    geometry.label({\n      fields: labelMode === 'absolute' ? [ABSOLUTE_FIELD, xField] : [DIFF_FIELD, xField],\n      callback,\n      cfg: transformLabel(cfg),\n    });\n  }\n\n  return params;\n}\n\n/**\n * tooltip 配置\n * @param params\n */\nexport function tooltip(params: Params<WaterfallOptions>): Params<WaterfallOptions> {\n  const { chart, options } = params;\n  const { tooltip, xField, yField } = options;\n\n  if (tooltip !== false) {\n    chart.tooltip({\n      showCrosshairs: false,\n      showMarkers: false,\n      shared: true,\n      // tooltip 默认展示 y 字段值\n      fields: [yField],\n      ...tooltip,\n    });\n    // 瀑布图默认以 yField 作为 tooltip 内容\n    const geometry = chart.geometries[0];\n    tooltip?.formatter ? geometry.tooltip(`${xField}*${yField}`, tooltip.formatter) : geometry.tooltip(yField);\n  } else {\n    chart.tooltip(false);\n  }\n\n  return params;\n}\n\n/**\n * 瀑布图适配器\n * @param params\n */\nexport function adaptor(params: Params<WaterfallOptions>) {\n  return flow(\n    defaultOptions,\n    theme,\n    geometry,\n    meta,\n    axis,\n    legend,\n    tooltip,\n    label,\n    state,\n    interaction,\n    animation,\n    annotation()\n  )(params);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}