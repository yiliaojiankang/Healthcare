{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Event } from '../../../chart';\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementRangeState from './range-state';\nvar EVENTS;\n(function (EVENTS) {\n  EVENTS[\"BEFORE_HIGHLIGHT\"] = \"element-range-highlight:beforehighlight\";\n  EVENTS[\"AFTER_HIGHLIGHT\"] = \"element-range-highlight:afterhighlight\";\n  EVENTS[\"BEFORE_CLEAR\"] = \"element-range-highlight:beforeclear\";\n  EVENTS[\"AFTER_CLEAR\"] = \"element-range-highlight:afterclear\";\n})(EVENTS || (EVENTS = {}));\nexport { EVENTS as ELEMENT_RANGE_HIGHLIGHT_EVENTS };\n/**\n * @ignore\n * 区域 highlight 的 Action\n */\nvar ElementRangeHighlight = /** @class */function (_super) {\n  __extends(ElementRangeHighlight, _super);\n  function ElementRangeHighlight() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.stateName = 'active';\n    return _this;\n  }\n  // 清理掉所有的 active， unactive 状态\n  ElementRangeHighlight.prototype.clearViewState = function (view) {\n    clearHighlight(view);\n  };\n  /**\n   * 设置 highlight\n   */\n  ElementRangeHighlight.prototype.highlight = function () {\n    var _a = this.context,\n      view = _a.view,\n      event = _a.event;\n    var elements = this.getIntersectElements();\n    var payload = {\n      view: view,\n      event: event,\n      highlightElements: elements\n    };\n    view.emit(EVENTS.BEFORE_HIGHLIGHT, Event.fromData(view, EVENTS.BEFORE_HIGHLIGHT, payload));\n    this.setState();\n    view.emit(EVENTS.AFTER_HIGHLIGHT, Event.fromData(view, EVENTS.AFTER_HIGHLIGHT, payload));\n  };\n  /**\n   * @overrider 添加事件\n   */\n  ElementRangeHighlight.prototype.clear = function () {\n    var view = this.context.view;\n    view.emit(EVENTS.BEFORE_CLEAR, Event.fromData(view, EVENTS.BEFORE_CLEAR, {}));\n    _super.prototype.clear.call(this);\n    view.emit(EVENTS.AFTER_CLEAR, Event.fromData(view, EVENTS.AFTER_CLEAR, {}));\n  };\n  ElementRangeHighlight.prototype.setElementsState = function (elements, enable, allElements) {\n    setHighlightBy(allElements, function (el) {\n      return elements.indexOf(el) >= 0;\n    }, enable);\n  };\n  return ElementRangeHighlight;\n}(ElementRangeState);\nexport default ElementRangeHighlight;","map":{"version":3,"names":["Event","clearHighlight","setHighlightBy","ElementRangeState","EVENTS","ELEMENT_RANGE_HIGHLIGHT_EVENTS","ElementRangeHighlight","_super","__extends","_this","apply","arguments","stateName","prototype","clearViewState","view","highlight","_a","context","event","elements","getIntersectElements","payload","highlightElements","emit","BEFORE_HIGHLIGHT","fromData","setState","AFTER_HIGHLIGHT","clear","BEFORE_CLEAR","call","AFTER_CLEAR","setElementsState","enable","allElements","el","indexOf"],"sources":["../../../../src/interaction/action/element/range-highlight.ts"],"sourcesContent":["import Element from '../../../geometry/element';\nimport { Event } from '../../../chart';\nimport { clearHighlight, setHighlightBy } from './highlight-util';\nimport ElementRangeState from './range-state';\n\nenum EVENTS {\n  BEFORE_HIGHLIGHT = 'element-range-highlight:beforehighlight',\n  AFTER_HIGHLIGHT = 'element-range-highlight:afterhighlight',\n  BEFORE_CLEAR = 'element-range-highlight:beforeclear',\n  AFTER_CLEAR = 'element-range-highlight:afterclear',\n}\n\nexport { EVENTS as ELEMENT_RANGE_HIGHLIGHT_EVENTS };\n\n/**\n * @ignore\n * 区域 highlight 的 Action\n */\nclass ElementRangeHighlight extends ElementRangeState {\n  protected stateName: string = 'active';\n\n  // 清理掉所有的 active， unactive 状态\n  protected clearViewState(view) {\n    clearHighlight(view);\n  }\n\n  /**\n   * 设置 highlight\n   */\n  public highlight() {\n    const { view, event } = this.context;\n    const elements = this.getIntersectElements();\n    const payload = { view, event, highlightElements: elements };\n    view.emit(EVENTS.BEFORE_HIGHLIGHT, Event.fromData(view, EVENTS.BEFORE_HIGHLIGHT, payload));\n    this.setState();\n    view.emit(EVENTS.AFTER_HIGHLIGHT, Event.fromData(view, EVENTS.AFTER_HIGHLIGHT, payload));\n  }\n\n  /**\n   * @overrider 添加事件\n   */\n  public clear() {\n    const view = this.context.view;\n    view.emit(EVENTS.BEFORE_CLEAR, Event.fromData(view, EVENTS.BEFORE_CLEAR, {}));\n    super.clear();\n    view.emit(EVENTS.AFTER_CLEAR, Event.fromData(view, EVENTS.AFTER_CLEAR, {}));\n  }\n\n  protected setElementsState(elements: Element[], enable: boolean, allElements: Element[]) {\n    setHighlightBy(allElements, (el) => elements.indexOf(el) >= 0, enable);\n  }\n}\n\nexport default ElementRangeHighlight;\n"],"mappings":";AACA,SAASA,KAAK,QAAQ,gBAAgB;AACtC,SAASC,cAAc,EAAEC,cAAc,QAAQ,kBAAkB;AACjE,OAAOC,iBAAiB,MAAM,eAAe;AAE7C,IAAKC,MAKJ;AALD,WAAKA,MAAM;EACTA,MAAA,gEAA4D;EAC5DA,MAAA,8DAA0D;EAC1DA,MAAA,wDAAoD;EACpDA,MAAA,sDAAkD;AACpD,CAAC,EALIA,MAAM,KAANA,MAAM;AAOX,SAASA,MAAM,IAAIC,8BAA8B;AAEjD;;;;AAIA,IAAAC,qBAAA,0BAAAC,MAAA;EAAoCC,SAAA,CAAAF,qBAAA,EAAAC,MAAA;EAApC,SAAAD,sBAAA;IAAA,IAAAG,KAAA,GAAAF,MAAA,aAAAA,MAAA,CAAAG,KAAA,OAAAC,SAAA;IACYF,KAAA,CAAAG,SAAS,GAAW,QAAQ;;EAgCxC;EA9BE;EACUN,qBAAA,CAAAO,SAAA,CAAAC,cAAc,GAAxB,UAAyBC,IAAI;IAC3Bd,cAAc,CAACc,IAAI,CAAC;EACtB,CAAC;EAED;;;EAGOT,qBAAA,CAAAO,SAAA,CAAAG,SAAS,GAAhB;IACQ,IAAAC,EAAA,GAAkB,IAAI,CAACC,OAAO;MAA5BH,IAAI,GAAAE,EAAA,CAAAF,IAAA;MAAEI,KAAK,GAAAF,EAAA,CAAAE,KAAiB;IACpC,IAAMC,QAAQ,GAAG,IAAI,CAACC,oBAAoB,EAAE;IAC5C,IAAMC,OAAO,GAAG;MAAEP,IAAI,EAAAA,IAAA;MAAEI,KAAK,EAAAA,KAAA;MAAEI,iBAAiB,EAAEH;IAAQ,CAAE;IAC5DL,IAAI,CAACS,IAAI,CAACpB,MAAM,CAACqB,gBAAgB,EAAEzB,KAAK,CAAC0B,QAAQ,CAACX,IAAI,EAAEX,MAAM,CAACqB,gBAAgB,EAAEH,OAAO,CAAC,CAAC;IAC1F,IAAI,CAACK,QAAQ,EAAE;IACfZ,IAAI,CAACS,IAAI,CAACpB,MAAM,CAACwB,eAAe,EAAE5B,KAAK,CAAC0B,QAAQ,CAACX,IAAI,EAAEX,MAAM,CAACwB,eAAe,EAAEN,OAAO,CAAC,CAAC;EAC1F,CAAC;EAED;;;EAGOhB,qBAAA,CAAAO,SAAA,CAAAgB,KAAK,GAAZ;IACE,IAAMd,IAAI,GAAG,IAAI,CAACG,OAAO,CAACH,IAAI;IAC9BA,IAAI,CAACS,IAAI,CAACpB,MAAM,CAAC0B,YAAY,EAAE9B,KAAK,CAAC0B,QAAQ,CAACX,IAAI,EAAEX,MAAM,CAAC0B,YAAY,EAAE,EAAE,CAAC,CAAC;IAC7EvB,MAAA,CAAAM,SAAA,CAAMgB,KAAK,CAAAE,IAAA,MAAE;IACbhB,IAAI,CAACS,IAAI,CAACpB,MAAM,CAAC4B,WAAW,EAAEhC,KAAK,CAAC0B,QAAQ,CAACX,IAAI,EAAEX,MAAM,CAAC4B,WAAW,EAAE,EAAE,CAAC,CAAC;EAC7E,CAAC;EAES1B,qBAAA,CAAAO,SAAA,CAAAoB,gBAAgB,GAA1B,UAA2Bb,QAAmB,EAAEc,MAAe,EAAEC,WAAsB;IACrFjC,cAAc,CAACiC,WAAW,EAAE,UAACC,EAAE;MAAK,OAAAhB,QAAQ,CAACiB,OAAO,CAACD,EAAE,CAAC,IAAI,CAAC;IAAzB,CAAyB,EAAEF,MAAM,CAAC;EACxE,CAAC;EACH,OAAA5B,qBAAC;AAAD,CAAC,CAjCmCH,iBAAiB;AAmCrD,eAAeG,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}