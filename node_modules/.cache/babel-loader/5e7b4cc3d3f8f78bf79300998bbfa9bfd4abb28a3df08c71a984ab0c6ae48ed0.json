{"ast":null,"code":"import { memoize } from '../lodash';\nimport { arr2rgb } from './arr2rgb';\nvar RGB_REG = /rgba?\\(([\\s.,0-9]+)\\)/;\n/**\n * 创建辅助 tag 取颜色\n * @returns\n */\nfunction createTmp() {\n  var i = document.createElement('i');\n  i.title = 'Web Colour Picker';\n  i.style.display = 'none';\n  document.body.appendChild(i);\n  return i;\n}\nvar iEl;\n/**\n * 将颜色转换到 rgb 的格式\n * @param {color} color 颜色\n * @return 将颜色转换到 '#ffffff' 的格式\n */\nfunction toRGBString(color) {\n  // 如果已经是 rgb的格式\n  if (color[0] === '#' && color.length === 7) {\n    return color;\n  }\n  if (!iEl) {\n    // 防止防止在页头报错\n    iEl = createTmp();\n  }\n  iEl.style.color = color;\n  var rst = document.defaultView.getComputedStyle(iEl, '').getPropertyValue('color');\n  var matches = RGB_REG.exec(rst);\n  var cArray = matches[1].split(/\\s*,\\s*/).map(function (s) {\n    return Number(s);\n  });\n  rst = arr2rgb(cArray);\n  return rst;\n}\n/**\n * export with memoize.\n * @param color\n * @returns\n */\nexport var toRGB = memoize(toRGBString, function (color) {\n  return color;\n}, 256);","map":{"version":3,"names":["memoize","arr2rgb","RGB_REG","createTmp","i","document","createElement","title","style","display","body","appendChild","iEl","toRGBString","color","length","rst","defaultView","getComputedStyle","getPropertyValue","matches","exec","cArray","split","map","s","Number","toRGB"],"sources":["src/color/torgb.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,OAAO,QAAQ,WAAW;AACnC,SAASC,OAAO,QAAQ,WAAW;AAEnC,IAAMC,OAAO,GAAG,uBAAuB;AAEvC;;;;AAIA,SAASC,SAASA,CAAA;EAChB,IAAMC,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACrCF,CAAC,CAACG,KAAK,GAAG,mBAAmB;EAC7BH,CAAC,CAACI,KAAK,CAACC,OAAO,GAAG,MAAM;EACxBJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,CAAC,CAAC;EAC5B,OAAOA,CAAC;AACV;AAEA,IAAIQ,GAAgB;AAEpB;;;;;AAKA,SAASC,WAAWA,CAACC,KAAa;EAChC;EACA,IAAIA,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,IAAIA,KAAK,CAACC,MAAM,KAAK,CAAC,EAAE;IAC1C,OAAOD,KAAK;;EAGd,IAAI,CAACF,GAAG,EAAE;IACR;IACAA,GAAG,GAAGT,SAAS,EAAE;;EAGnBS,GAAG,CAACJ,KAAK,CAACM,KAAK,GAAGA,KAAK;EAEvB,IAAIE,GAAG,GAAGX,QAAQ,CAACY,WAAW,CAACC,gBAAgB,CAACN,GAAG,EAAE,EAAE,CAAC,CAACO,gBAAgB,CAAC,OAAO,CAAC;EAElF,IAAMC,OAAO,GAAGlB,OAAO,CAACmB,IAAI,CAACL,GAAG,CAAa;EAC7C,IAAMM,MAAM,GAAaF,OAAO,CAAC,CAAC,CAAC,CAACG,KAAK,CAAC,SAAS,CAAC,CAACC,GAAG,CAAC,UAACC,CAAC;IAAK,OAAAC,MAAM,CAACD,CAAC,CAAC;EAAT,CAAS,CAAC;EAE1ET,GAAG,GAAGf,OAAO,CAACqB,MAAM,CAAC;EAErB,OAAON,GAAG;AACZ;AAEA;;;;;AAKA,OAAO,IAAMW,KAAK,GAAG3B,OAAO,CAACa,WAAW,EAAE,UAACC,KAAK;EAAK,OAAAA,KAAK;AAAL,CAAK,EAAE,GAAG,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}