{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar acyclic_1 = __importDefault(require(\"./acyclic\"));\nvar normalize_1 = __importDefault(require(\"./normalize\"));\nvar rank_1 = __importDefault(require(\"./rank\"));\nvar util_1 = require(\"./util\");\nvar parent_dummy_chains_1 = __importDefault(require(\"./parent-dummy-chains\"));\nvar nesting_graph_1 = __importDefault(require(\"./nesting-graph\"));\nvar add_border_segments_1 = __importDefault(require(\"./add-border-segments\"));\nvar coordinate_system_1 = __importDefault(require(\"./coordinate-system\"));\nvar order_1 = __importDefault(require(\"./order\"));\nvar position_1 = __importDefault(require(\"./position\"));\nvar init_data_order_1 = __importDefault(require(\"./order/init-data-order\"));\nvar graph_1 = require(\"../graph\");\nvar layout = function (g, opts) {\n  var time = opts && opts.debugTiming ? util_1.time : util_1.notime;\n  time(\"layout\", function () {\n    // 如果在原图基础上修改，继承原图的order结果\n    if (opts && !opts.keepNodeOrder && opts.prevGraph) {\n      time(\"  inheritOrder\", function () {\n        inheritOrder(g, opts.prevGraph);\n      });\n    }\n    var layoutGraph = time(\"  buildLayoutGraph\", function () {\n      return buildLayoutGraph(g);\n    });\n    // 控制是否为边的label留位置（这会影响是否在边中间添加dummy node）\n    if (!(opts && opts.edgeLabelSpace === false)) {\n      time(\"  makeSpaceForEdgeLabels\", function () {\n        makeSpaceForEdgeLabels(layoutGraph);\n      });\n    }\n    // TODO: 暂时处理层级设置不正确时的异常报错，提示设置正确的层级\n    try {\n      time(\"  runLayout\", function () {\n        runLayout(layoutGraph, time, opts);\n      });\n    } catch (e) {\n      if (e.message === \"Not possible to find intersection inside of the rectangle\") {\n        console.error(\"The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\\n\", e);\n        return;\n      }\n      throw e;\n    }\n    time(\"  updateInputGraph\", function () {\n      updateInputGraph(g, layoutGraph);\n    });\n  });\n};\nvar runLayout = function (g, time, opts) {\n  time(\"    removeSelfEdges\", function () {\n    removeSelfEdges(g);\n  });\n  time(\"    acyclic\", function () {\n    acyclic_1.default.run(g);\n  });\n  time(\"    nestingGraph.run\", function () {\n    nesting_graph_1.default.run(g);\n  });\n  time(\"    rank\", function () {\n    (0, rank_1.default)((0, util_1.asNonCompoundGraph)(g));\n  });\n  time(\"    injectEdgeLabelProxies\", function () {\n    injectEdgeLabelProxies(g);\n  });\n  time(\"    removeEmptyRanks\", function () {\n    (0, util_1.removeEmptyRanks)(g);\n  });\n  time(\"    nestingGraph.cleanup\", function () {\n    nesting_graph_1.default.cleanup(g);\n  });\n  time(\"    normalizeRanks\", function () {\n    (0, util_1.normalizeRanks)(g);\n  });\n  time(\"    assignRankMinMax\", function () {\n    assignRankMinMax(g);\n  });\n  time(\"    removeEdgeLabelProxies\", function () {\n    removeEdgeLabelProxies(g);\n  });\n  time(\"    normalize.run\", function () {\n    normalize_1.default.run(g);\n  });\n  time(\"    parentDummyChains\", function () {\n    (0, parent_dummy_chains_1.default)(g);\n  });\n  time(\"    addBorderSegments\", function () {\n    (0, add_border_segments_1.default)(g);\n  });\n  if (opts && opts.keepNodeOrder) {\n    time(\"    initDataOrder\", function () {\n      (0, init_data_order_1.default)(g, opts.nodeOrder);\n    });\n  }\n  time(\"    order\", function () {\n    (0, order_1.default)(g, opts === null || opts === void 0 ? void 0 : opts.keepNodeOrder);\n  });\n  time(\"    insertSelfEdges\", function () {\n    insertSelfEdges(g);\n  });\n  time(\"    adjustCoordinateSystem\", function () {\n    coordinate_system_1.default.adjust(g);\n  });\n  time(\"    position\", function () {\n    (0, position_1.default)(g);\n  });\n  time(\"    positionSelfEdges\", function () {\n    positionSelfEdges(g);\n  });\n  time(\"    removeBorderNodes\", function () {\n    removeBorderNodes(g);\n  });\n  time(\"    normalize.undo\", function () {\n    normalize_1.default.undo(g);\n  });\n  time(\"    fixupEdgeLabelCoords\", function () {\n    fixupEdgeLabelCoords(g);\n  });\n  time(\"    undoCoordinateSystem\", function () {\n    coordinate_system_1.default.undo(g);\n  });\n  time(\"    translateGraph\", function () {\n    translateGraph(g);\n  });\n  time(\"    assignNodeIntersects\", function () {\n    assignNodeIntersects(g);\n  });\n  time(\"    reversePoints\", function () {\n    reversePointsForReversedEdges(g);\n  });\n  time(\"    acyclic.undo\", function () {\n    acyclic_1.default.undo(g);\n  });\n};\n/**\n * 继承上一个布局中的order，防止翻转\n * TODO: 暂时没有考虑涉及层级变动的布局，只保证原来布局层级和相对顺序不变\n */\nvar inheritOrder = function (currG, prevG) {\n  currG.nodes().forEach(function (n) {\n    var node = currG.node(n);\n    var prevNode = prevG.node(n);\n    if (prevNode !== undefined) {\n      node.fixorder = prevNode._order;\n      delete prevNode._order;\n    } else {\n      delete node.fixorder;\n    }\n  });\n};\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nvar updateInputGraph = function (inputGraph, layoutGraph) {\n  inputGraph.nodes().forEach(function (v) {\n    var _a;\n    var inputLabel = inputGraph.node(v);\n    if (inputLabel) {\n      var layoutLabel = layoutGraph.node(v);\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n      inputLabel._order = layoutLabel.order;\n      inputLabel._rank = layoutLabel.rank;\n      if ((_a = layoutGraph.children(v)) === null || _a === void 0 ? void 0 : _a.length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n  inputGraph.edges().forEach(function (e) {\n    var inputLabel = inputGraph.edge(e);\n    var layoutLabel = layoutGraph.edge(e);\n    inputLabel.points = layoutLabel ? layoutLabel.points : [];\n    if (layoutLabel && layoutLabel.hasOwnProperty(\"x\")) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n};\nvar graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nvar graphDefaults = {\n  ranksep: 50,\n  edgesep: 20,\n  nodesep: 50,\n  rankdir: \"tb\"\n};\nvar graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nvar nodeNumAttrs = [\"width\", \"height\", \"layer\", \"fixorder\"]; // 需要传入layer, fixOrder作为参数参考\nvar nodeDefaults = {\n  width: 0,\n  height: 0\n};\nvar edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nvar edgeDefaults = {\n  minlen: 1,\n  weight: 1,\n  width: 0,\n  height: 0,\n  labeloffset: 10,\n  labelpos: \"r\"\n};\nvar edgeAttrs = [\"labelpos\"];\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nvar buildLayoutGraph = function (inputGraph) {\n  var g = new graph_1.Graph({\n    multigraph: true,\n    compound: true\n  });\n  var graph = canonicalize(inputGraph.graph());\n  var pickedProperties = {};\n  graphAttrs === null || graphAttrs === void 0 ? void 0 : graphAttrs.forEach(function (key) {\n    if (graph[key] !== undefined) pickedProperties[key] = graph[key];\n  });\n  g.setGraph(Object.assign({}, graphDefaults, selectNumberAttrs(graph, graphNumAttrs), pickedProperties));\n  inputGraph.nodes().forEach(function (v) {\n    var node = canonicalize(inputGraph.node(v));\n    var defaultNode = __assign(__assign({}, nodeDefaults), node);\n    var defaultAttrs = selectNumberAttrs(defaultNode, nodeNumAttrs);\n    g.setNode(v, defaultAttrs);\n    g.setParent(v, inputGraph.parent(v));\n  });\n  inputGraph.edges().forEach(function (e) {\n    var edge = canonicalize(inputGraph.edge(e));\n    var pickedProperties = {};\n    edgeAttrs === null || edgeAttrs === void 0 ? void 0 : edgeAttrs.forEach(function (key) {\n      if (edge[key] !== undefined) pickedProperties[key] = edge[key];\n    });\n    g.setEdgeObj(e, Object.assign({}, edgeDefaults, selectNumberAttrs(edge, edgeNumAttrs), pickedProperties));\n  });\n  return g;\n};\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nvar makeSpaceForEdgeLabels = function (g) {\n  var graph = g.graph();\n  if (!graph.ranksep) graph.ranksep = 0;\n  graph.ranksep /= 2;\n  g.nodes().forEach(function (n) {\n    var node = g.node(n);\n    if (!isNaN(node.layer)) {\n      if (!node.layer) node.layer = 0;\n    }\n  });\n  g.edges().forEach(function (e) {\n    var _a;\n    var edge = g.edge(e);\n    edge.minlen *= 2;\n    if (((_a = edge.labelpos) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== \"c\") {\n      if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n};\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nvar injectEdgeLabelProxies = function (g) {\n  g.edges().forEach(function (e) {\n    var edge = g.edge(e);\n    if (edge.width && edge.height) {\n      var v = g.node(e.v);\n      var w = g.node(e.w);\n      var label = {\n        e: e,\n        rank: (w.rank - v.rank) / 2 + v.rank\n      };\n      (0, util_1.addDummyNode)(g, \"edge-proxy\", label, \"_ep\");\n    }\n  });\n};\nvar assignRankMinMax = function (g) {\n  var maxRank = 0;\n  g.nodes().forEach(function (v) {\n    var _a, _b;\n    var node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = (_a = g.node(node.borderTop)) === null || _a === void 0 ? void 0 : _a.rank;\n      node.maxRank = (_b = g.node(node.borderBottom)) === null || _b === void 0 ? void 0 : _b.rank;\n      maxRank = Math.max(maxRank, node.maxRank || -Infinity);\n    }\n  });\n  g.graph().maxRank = maxRank;\n};\nvar removeEdgeLabelProxies = function (g) {\n  g.nodes().forEach(function (v) {\n    var node = g.node(v);\n    if (node.dummy === \"edge-proxy\") {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n};\nvar translateGraph = function (g) {\n  var minX;\n  var maxX = 0;\n  var minY;\n  var maxY = 0;\n  var graphLabel = g.graph();\n  var marginX = graphLabel.marginx || 0;\n  var marginY = graphLabel.marginy || 0;\n  var getExtremes = function (attrs) {\n    if (!attrs) return;\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    if (!isNaN(x) && !isNaN(w)) {\n      if (minX === undefined) {\n        minX = x - w / 2;\n      }\n      minX = Math.min(minX, x - w / 2);\n      maxX = Math.max(maxX, x + w / 2);\n    }\n    if (!isNaN(y) && !isNaN(h)) {\n      if (minY === undefined) {\n        minY = y - h / 2;\n      }\n      minY = Math.min(minY, y - h / 2);\n      maxY = Math.max(maxY, y + h / 2);\n    }\n  };\n  g.nodes().forEach(function (v) {\n    getExtremes(g.node(v));\n  });\n  g.edges().forEach(function (e) {\n    var edge = g.edge(e);\n    if (edge === null || edge === void 0 ? void 0 : edge.hasOwnProperty(\"x\")) {\n      getExtremes(edge);\n    }\n  });\n  minX -= marginX;\n  minY -= marginY;\n  g.nodes().forEach(function (v) {\n    var node = g.node(v);\n    if (node) {\n      node.x -= minX;\n      node.y -= minY;\n    }\n  });\n  g.edges().forEach(function (e) {\n    var _a;\n    var edge = g.edge(e);\n    (_a = edge.points) === null || _a === void 0 ? void 0 : _a.forEach(function (p) {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (edge.hasOwnProperty(\"x\")) {\n      edge.x -= minX;\n    }\n    if (edge.hasOwnProperty(\"y\")) {\n      edge.y -= minY;\n    }\n  });\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n};\nvar assignNodeIntersects = function (g) {\n  g.edges().forEach(function (e) {\n    var edge = g.edge(e);\n    var nodeV = g.node(e.v);\n    var nodeW = g.node(e.w);\n    var p1;\n    var p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift((0, util_1.intersectRect)(nodeV, p1));\n    edge.points.push((0, util_1.intersectRect)(nodeW, p2));\n  });\n};\nvar fixupEdgeLabelCoords = function (g) {\n  g.edges().forEach(function (e) {\n    var edge = g.edge(e);\n    if (edge === null || edge === void 0 ? void 0 : edge.hasOwnProperty(\"x\")) {\n      if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n        case \"l\":\n          edge.x -= edge.width / 2 + edge.labeloffset;\n          break;\n        case \"r\":\n          edge.x += edge.width / 2 + edge.labeloffset;\n          break;\n      }\n    }\n  });\n};\nvar reversePointsForReversedEdges = function (g) {\n  g.edges().forEach(function (e) {\n    var _a;\n    var edge = g.edge(e);\n    if (edge.reversed) {\n      (_a = edge.points) === null || _a === void 0 ? void 0 : _a.reverse();\n    }\n  });\n};\nvar removeBorderNodes = function (g) {\n  g.nodes().forEach(function (v) {\n    var _a, _b, _c;\n    if ((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length) {\n      var node = g.node(v);\n      var t = g.node(node.borderTop);\n      var b = g.node(node.borderBottom);\n      var l = g.node(node.borderLeft[((_b = node.borderLeft) === null || _b === void 0 ? void 0 : _b.length) - 1]);\n      var r = g.node(node.borderRight[((_c = node.borderRight) === null || _c === void 0 ? void 0 : _c.length) - 1]);\n      node.width = Math.abs((r === null || r === void 0 ? void 0 : r.x) - (l === null || l === void 0 ? void 0 : l.x)) || 10;\n      node.height = Math.abs((b === null || b === void 0 ? void 0 : b.y) - (t === null || t === void 0 ? void 0 : t.y)) || 10;\n      node.x = ((l === null || l === void 0 ? void 0 : l.x) || 0) + node.width / 2;\n      node.y = ((t === null || t === void 0 ? void 0 : t.y) || 0) + node.height / 2;\n    }\n  });\n  g.nodes().forEach(function (v) {\n    var _a;\n    if (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) === \"border\") {\n      g.removeNode(v);\n    }\n  });\n};\nvar removeSelfEdges = function (g) {\n  g.edges().forEach(function (e) {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({\n        e: e,\n        label: g.edge(e)\n      });\n      g.removeEdgeObj(e);\n    }\n  });\n};\nvar insertSelfEdges = function (g) {\n  var layers = (0, util_1.buildLayerMatrix)(g);\n  layers === null || layers === void 0 ? void 0 : layers.forEach(function (layer) {\n    var orderShift = 0;\n    layer === null || layer === void 0 ? void 0 : layer.forEach(function (v, i) {\n      var _a;\n      var node = g.node(v);\n      node.order = i + orderShift;\n      (_a = node.selfEdges) === null || _a === void 0 ? void 0 : _a.forEach(function (selfEdge) {\n        (0, util_1.addDummyNode)(g, \"selfedge\", {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + ++orderShift,\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, \"_se\");\n      });\n      delete node.selfEdges;\n    });\n  });\n};\nvar positionSelfEdges = function (g) {\n  g.nodes().forEach(function (v) {\n    var node = g.node(v);\n    if (node.dummy === \"selfedge\") {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdgeObj(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [{\n        x: x + 2 * dx / 3,\n        y: y - dy\n      }, {\n        x: x + 5 * dx / 6,\n        y: y - dy\n      }, {\n        y: y,\n        x: x + dx\n      }, {\n        x: x + 5 * dx / 6,\n        y: y + dy\n      }, {\n        x: x + 2 * dx / 3,\n        y: y + dy\n      }];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n};\nvar selectNumberAttrs = function (obj, attrs) {\n  var pickedProperties = {};\n  attrs === null || attrs === void 0 ? void 0 : attrs.forEach(function (key) {\n    if (obj[key] === undefined) return;\n    pickedProperties[key] = +obj[key];\n  });\n  return pickedProperties;\n};\nvar canonicalize = function (attrs) {\n  if (attrs === void 0) {\n    attrs = {};\n  }\n  var newAttrs = {};\n  Object.keys(attrs).forEach(function (k) {\n    newAttrs[k.toLowerCase()] = attrs[k];\n  });\n  return newAttrs;\n};\nexports.default = layout;","map":{"version":3,"names":["acyclic_1","__importDefault","require","normalize_1","rank_1","util_1","parent_dummy_chains_1","nesting_graph_1","add_border_segments_1","coordinate_system_1","order_1","position_1","init_data_order_1","graph_1","layout","g","opts","time","debugTiming","notime","keepNodeOrder","prevGraph","inheritOrder","layoutGraph","buildLayoutGraph","edgeLabelSpace","makeSpaceForEdgeLabels","runLayout","e","message","console","error","updateInputGraph","removeSelfEdges","default","run","asNonCompoundGraph","injectEdgeLabelProxies","removeEmptyRanks","cleanup","normalizeRanks","assignRankMinMax","removeEdgeLabelProxies","nodeOrder","insertSelfEdges","adjust","positionSelfEdges","removeBorderNodes","undo","fixupEdgeLabelCoords","translateGraph","assignNodeIntersects","reversePointsForReversedEdges","currG","prevG","nodes","forEach","n","node","prevNode","undefined","fixorder","_order","inputGraph","v","inputLabel","layoutLabel","x","y","order","_rank","rank","_a","children","length","width","height","edges","edge","points","hasOwnProperty","graph","graphNumAttrs","graphDefaults","ranksep","edgesep","nodesep","rankdir","graphAttrs","nodeNumAttrs","nodeDefaults","edgeNumAttrs","edgeDefaults","minlen","weight","labeloffset","labelpos","edgeAttrs","Graph","multigraph","compound","canonicalize","pickedProperties","key","setGraph","Object","assign","selectNumberAttrs","defaultNode","__assign","defaultAttrs","setNode","setParent","parent","setEdgeObj","isNaN","layer","toLowerCase","w","label","addDummyNode","maxRank","borderTop","minRank","_b","borderBottom","Math","max","Infinity","dummy","labelRank","removeNode","minX","maxX","minY","maxY","graphLabel","marginX","marginx","marginY","marginy","getExtremes","attrs","h","min","p","nodeV","nodeW","p1","p2","unshift","intersectRect","push","reversed","reverse","t","b","l","borderLeft","r","borderRight","_c","abs","selfEdges","removeEdgeObj","layers","buildLayerMatrix","orderShift","i","selfEdge","selfNode","dx","dy","obj","newAttrs","keys","k","exports"],"sources":["../../../../src/layout/dagre/src/layout.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}