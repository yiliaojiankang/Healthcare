{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { Action } from '..';\nvar DIM_X = 'x';\nvar DIM_Y = 'y';\n/**\n * Scale translate\n * @ignore\n */\nvar ScaleTranslate = /** @class */function (_super) {\n  __extends(ScaleTranslate, _super);\n  function ScaleTranslate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.dims = [DIM_X, DIM_Y];\n    _this.cfgFields = ['dims'];\n    _this.cacheScaleDefs = {};\n    return _this;\n  }\n  // 是否支持对应字段的平移\n  ScaleTranslate.prototype.hasDim = function (dim) {\n    return this.dims.includes(dim);\n  };\n  ScaleTranslate.prototype.getScale = function (dim) {\n    var view = this.context.view;\n    if (dim === 'x') {\n      return view.getXScale();\n    } else {\n      return view.getYScales()[0];\n    }\n  };\n  ScaleTranslate.prototype.resetDim = function (dim) {\n    var view = this.context.view;\n    if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n      var scale = this.getScale(dim);\n      view.scale(scale.field, this.cacheScaleDefs[dim]);\n      this.cacheScaleDefs[dim] = null;\n    }\n  };\n  /**\n   * 回滚\n   */\n  ScaleTranslate.prototype.reset = function () {\n    this.resetDim(DIM_X);\n    this.resetDim(DIM_Y);\n    var view = this.context.view;\n    view.render(true);\n  };\n  return ScaleTranslate;\n}(Action);\nexport default ScaleTranslate;","map":{"version":3,"names":["Action","DIM_X","DIM_Y","ScaleTranslate","_super","__extends","_this","apply","arguments","dims","cfgFields","cacheScaleDefs","prototype","hasDim","dim","includes","getScale","view","context","getXScale","getYScales","resetDim","scale","field","reset","render"],"sources":["../../../../src/interaction/action/view/scale-transform.ts"],"sourcesContent":["import { Action } from '..';\n\nconst DIM_X = 'x';\nconst DIM_Y = 'y';\n\n/**\n * Scale translate\n * @ignore\n */\nclass ScaleTranslate extends Action {\n  protected dims = [DIM_X, DIM_Y];\n  protected cfgFields = ['dims'];\n  protected cacheScaleDefs = {};\n\n  // 是否支持对应字段的平移\n  protected hasDim(dim) {\n    return this.dims.includes(dim);\n  }\n\n  protected getScale(dim) {\n    const view = this.context.view;\n    if (dim === 'x') {\n      return view.getXScale();\n    } else {\n      return view.getYScales()[0];\n    }\n  }\n\n  private resetDim(dim) {\n    const view = this.context.view;\n    if (this.hasDim(dim) && this.cacheScaleDefs[dim]) {\n      const scale = this.getScale(dim);\n      view.scale(scale.field, this.cacheScaleDefs[dim]);\n      this.cacheScaleDefs[dim] = null;\n    }\n  }\n\n  /**\n   * 回滚\n   */\n  public reset() {\n    this.resetDim(DIM_X);\n    this.resetDim(DIM_Y);\n    const view = this.context.view;\n    view.render(true);\n  }\n}\n\nexport default ScaleTranslate;\n"],"mappings":";AAAA,SAASA,MAAM,QAAQ,IAAI;AAE3B,IAAMC,KAAK,GAAG,GAAG;AACjB,IAAMC,KAAK,GAAG,GAAG;AAEjB;;;;AAIA,IAAAC,cAAA,0BAAAC,MAAA;EAA6BC,SAAA,CAAAF,cAAA,EAAAC,MAAA;EAA7B,SAAAD,eAAA;IAAA,IAAAG,KAAA,GAAAF,MAAA,aAAAA,MAAA,CAAAG,KAAA,OAAAC,SAAA;IACYF,KAAA,CAAAG,IAAI,GAAG,CAACR,KAAK,EAAEC,KAAK,CAAC;IACrBI,KAAA,CAAAI,SAAS,GAAG,CAAC,MAAM,CAAC;IACpBJ,KAAA,CAAAK,cAAc,GAAG,EAAE;;EAkC/B;EAhCE;EACUR,cAAA,CAAAS,SAAA,CAAAC,MAAM,GAAhB,UAAiBC,GAAG;IAClB,OAAO,IAAI,CAACL,IAAI,CAACM,QAAQ,CAACD,GAAG,CAAC;EAChC,CAAC;EAESX,cAAA,CAAAS,SAAA,CAAAI,QAAQ,GAAlB,UAAmBF,GAAG;IACpB,IAAMG,IAAI,GAAG,IAAI,CAACC,OAAO,CAACD,IAAI;IAC9B,IAAIH,GAAG,KAAK,GAAG,EAAE;MACf,OAAOG,IAAI,CAACE,SAAS,EAAE;KACxB,MAAM;MACL,OAAOF,IAAI,CAACG,UAAU,EAAE,CAAC,CAAC,CAAC;;EAE/B,CAAC;EAEOjB,cAAA,CAAAS,SAAA,CAAAS,QAAQ,GAAhB,UAAiBP,GAAG;IAClB,IAAMG,IAAI,GAAG,IAAI,CAACC,OAAO,CAACD,IAAI;IAC9B,IAAI,IAAI,CAACJ,MAAM,CAACC,GAAG,CAAC,IAAI,IAAI,CAACH,cAAc,CAACG,GAAG,CAAC,EAAE;MAChD,IAAMQ,KAAK,GAAG,IAAI,CAACN,QAAQ,CAACF,GAAG,CAAC;MAChCG,IAAI,CAACK,KAAK,CAACA,KAAK,CAACC,KAAK,EAAE,IAAI,CAACZ,cAAc,CAACG,GAAG,CAAC,CAAC;MACjD,IAAI,CAACH,cAAc,CAACG,GAAG,CAAC,GAAG,IAAI;;EAEnC,CAAC;EAED;;;EAGOX,cAAA,CAAAS,SAAA,CAAAY,KAAK,GAAZ;IACE,IAAI,CAACH,QAAQ,CAACpB,KAAK,CAAC;IACpB,IAAI,CAACoB,QAAQ,CAACnB,KAAK,CAAC;IACpB,IAAMe,IAAI,GAAG,IAAI,CAACC,OAAO,CAACD,IAAI;IAC9BA,IAAI,CAACQ,MAAM,CAAC,IAAI,CAAC;EACnB,CAAC;EACH,OAAAtB,cAAC;AAAD,CAAC,CArC4BH,MAAM;AAuCnC,eAAeG,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}