{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { SyncHook } from '@antv/async-hook';\nimport { bBoxToBounds, extent, lodashUtil, padBounds, TilesetManager } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nvar cloneDeep = lodashUtil.cloneDeep,\n  isFunction = lodashUtil.isFunction,\n  isString = lodashUtil.isString,\n  mergeWith = lodashUtil.mergeWith;\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\n\nimport { getParser, getTransform } from \"./factory\";\nimport { cluster } from \"./transform/cluster\";\nimport { statMap } from \"./utils/statistics\";\nimport { getColumn } from \"./utils/util\";\nfunction mergeCustomizer(objValue, srcValue) {\n  if (Array.isArray(srcValue)) {\n    return srcValue;\n  }\n}\n//\nvar Source = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Source, _EventEmitter);\n  var _super = _createSuper(Source);\n  function Source(data, cfg) {\n    var _this;\n    _classCallCheck(this, Source);\n    _this = _super.call(this);\n    // this.rawData = cloneDeep(data);\n    _defineProperty(_assertThisInitialized(_this), \"type\", 'source');\n    _defineProperty(_assertThisInitialized(_this), \"isTile\", false);\n    _defineProperty(_assertThisInitialized(_this), \"inited\", false);\n    // 生命周期钩子\n    _defineProperty(_assertThisInitialized(_this), \"hooks\", {\n      init: new SyncHook()\n    });\n    _defineProperty(_assertThisInitialized(_this), \"parser\", {\n      type: 'geojson'\n    });\n    _defineProperty(_assertThisInitialized(_this), \"transforms\", []);\n    _defineProperty(_assertThisInitialized(_this), \"cluster\", false);\n    _defineProperty(_assertThisInitialized(_this), \"clusterOptions\", {\n      enable: false,\n      radius: 40,\n      maxZoom: 20,\n      zoom: -99,\n      method: 'count'\n    });\n    // 是否有效范围\n    _defineProperty(_assertThisInitialized(_this), \"invalidExtent\", false);\n    _defineProperty(_assertThisInitialized(_this), \"dataArrayChanged\", false);\n    _defineProperty(_assertThisInitialized(_this), \"cfg\", {\n      autoRender: true\n    });\n    _this.originData = data;\n    _this.initCfg(cfg);\n    _this.init().then(function () {\n      _this.inited = true;\n      _this.emit('update', {\n        type: 'inited'\n      });\n    });\n    return _this;\n  }\n  _createClass(Source, [{\n    key: \"getSourceCfg\",\n    value: function getSourceCfg() {\n      return this.cfg;\n    }\n  }, {\n    key: \"getClusters\",\n    value: function getClusters(zoom) {\n      return this.clusterIndex.getClusters(this.caculClusterExtent(2), zoom);\n    }\n  }, {\n    key: \"getClustersLeaves\",\n    value: function getClustersLeaves(id) {\n      return this.clusterIndex.getLeaves(id, Infinity);\n    }\n  }, {\n    key: \"getParserType\",\n    value: function getParserType() {\n      return this.parser.type;\n    }\n  }, {\n    key: \"updateClusterData\",\n    value: function updateClusterData(zoom) {\n      var _this2 = this;\n      var _this$clusterOptions = this.clusterOptions,\n        _this$clusterOptions$ = _this$clusterOptions.method,\n        method = _this$clusterOptions$ === void 0 ? 'sum' : _this$clusterOptions$,\n        field = _this$clusterOptions.field;\n      var data = this.clusterIndex.getClusters(this.caculClusterExtent(2), Math.floor(zoom));\n      this.clusterOptions.zoom = zoom;\n      data.forEach(function (p) {\n        if (!p.id) {\n          p.properties.point_count = 1;\n        }\n      });\n      if (field || isFunction(method)) {\n        data = data.map(function (item) {\n          var id = item.id;\n          if (id) {\n            var points = _this2.clusterIndex.getLeaves(id, Infinity);\n            var properties = points.map(function (d) {\n              return d.properties;\n            });\n            var statNum;\n            if (isString(method) && field) {\n              var column = getColumn(properties, field);\n              statNum = statMap[method](column);\n            }\n            if (isFunction(method)) {\n              statNum = method(properties);\n            }\n            item.properties.stat = statNum;\n          } else {\n            item.properties.point_count = 1;\n          }\n          return item;\n        });\n      }\n      this.data = getParser('geojson')({\n        type: 'FeatureCollection',\n        features: data\n      });\n      this.executeTrans();\n    }\n  }, {\n    key: \"getFeatureById\",\n    value: function getFeatureById(id) {\n      var _ref = this.parser,\n        _ref$type = _ref.type,\n        type = _ref$type === void 0 ? 'geojson' : _ref$type,\n        geometry = _ref.geometry;\n      if (type === 'geojson' && !this.cluster) {\n        var feature = id < this.originData.features.length ? this.originData.features[id] : 'null';\n        var newFeature = cloneDeep(feature);\n        if (newFeature !== null && newFeature !== void 0 && newFeature.properties && (this.transforms.length !== 0 || this.dataArrayChanged)) {\n          // 如果数据进行了transforms 属性会发生改变 或者数据dataArray发生更新\n          var item = this.data.dataArray.find(function (dataItem) {\n            return dataItem._id === id;\n          });\n          newFeature.properties = item;\n        }\n        return newFeature;\n      } else if (type === 'json' && geometry) {\n        return this.data.dataArray.find(function (dataItem) {\n          return dataItem._id === id;\n        });\n      } else {\n        return id < this.data.dataArray.length ? this.data.dataArray[id] : 'null';\n      }\n    }\n  }, {\n    key: \"updateFeaturePropertiesById\",\n    value: function updateFeaturePropertiesById(id, properties) {\n      this.data.dataArray = this.data.dataArray.map(function (dataItem) {\n        if (dataItem._id === id) {\n          return _objectSpread(_objectSpread({}, dataItem), properties);\n        }\n        return dataItem;\n      });\n      this.dataArrayChanged = true;\n      this.emit('update', {\n        type: 'update'\n      });\n    }\n  }, {\n    key: \"getFeatureId\",\n    value: function getFeatureId(field, value) {\n      var feature = this.data.dataArray.find(function (dataItem) {\n        return dataItem[field] === value;\n      });\n      return feature === null || feature === void 0 ? void 0 : feature._id;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, options) {\n      var _this3 = this;\n      this.originData = data;\n      this.dataArrayChanged = false;\n      this.initCfg(options);\n      this.init().then(function () {\n        _this3.emit('update', {\n          type: 'update'\n        });\n      });\n    }\n  }, {\n    key: \"reloadAllTile\",\n    value: function reloadAllTile() {\n      var _this$tileset;\n      (_this$tileset = this.tileset) === null || _this$tileset === void 0 || _this$tileset.reloadAll();\n    }\n  }, {\n    key: \"reloadTilebyId\",\n    value: function reloadTilebyId(z, x, y) {\n      var _this$tileset2;\n      (_this$tileset2 = this.tileset) === null || _this$tileset2 === void 0 || _this$tileset2.reloadTileById(z, x, y);\n    }\n  }, {\n    key: \"reloadTileByLnglat\",\n    value: function reloadTileByLnglat(lng, lat, z) {\n      var _this$tileset3;\n      (_this$tileset3 = this.tileset) === null || _this$tileset3 === void 0 || _this$tileset3.reloadTileByLnglat(lng, lat, z);\n    }\n  }, {\n    key: \"getTileExtent\",\n    value: function getTileExtent(e, zoom) {\n      var _this$tileset4;\n      return (_this$tileset4 = this.tileset) === null || _this$tileset4 === void 0 ? void 0 : _this$tileset4.getTileExtent(e, zoom);\n    }\n  }, {\n    key: \"getTileByZXY\",\n    value: function getTileByZXY(z, x, y) {\n      var _this$tileset5;\n      return (_this$tileset5 = this.tileset) === null || _this$tileset5 === void 0 ? void 0 : _this$tileset5.getTileByZXY(z, x, y);\n    }\n  }, {\n    key: \"reloadTileByExtent\",\n    value: function reloadTileByExtent(bounds, z) {\n      var _this$tileset6;\n      (_this$tileset6 = this.tileset) === null || _this$tileset6 === void 0 || _this$tileset6.reloadTileByExtent(bounds, z);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$tileset7;\n      this.removeAllListeners();\n      this.originData = null;\n      this.clusterIndex = null;\n      // @ts-ignore\n      this.data = null;\n      (_this$tileset7 = this.tileset) === null || _this$tileset7 === void 0 || _this$tileset7.destroy();\n    }\n  }, {\n    key: \"processData\",\n    value: function () {\n      var _processData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this4 = this;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                try {\n                  _this4.excuteParser();\n                  _this4.initCluster();\n                  _this4.executeTrans();\n                  resolve({});\n                } catch (err) {\n                  reject(err);\n                }\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function processData() {\n        return _processData.apply(this, arguments);\n      }\n      return processData;\n    }()\n  }, {\n    key: \"initCfg\",\n    value: function initCfg(option) {\n      this.cfg = mergeWith(this.cfg, option, mergeCustomizer);\n      var cfg = this.cfg;\n      if (cfg) {\n        if (cfg.parser) {\n          this.parser = cfg.parser;\n        }\n        if (cfg.transforms) {\n          this.transforms = cfg.transforms;\n        }\n        this.cluster = cfg.cluster || false;\n        if (cfg.clusterOptions) {\n          this.cluster = true;\n          this.clusterOptions = _objectSpread(_objectSpread({}, this.clusterOptions), cfg.clusterOptions);\n        }\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              this.inited = false;\n              _context2.next = 3;\n              return this.processData();\n            case 3:\n              this.inited = true;\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * 数据解析\n     */\n  }, {\n    key: \"excuteParser\",\n    value: function excuteParser() {\n      // 耗时计算测试\n      var parser = this.parser;\n      var type = parser.type || 'geojson';\n      var sourceParser = getParser(type);\n      this.data = sourceParser(this.originData, parser);\n      // 为瓦片图层的父图层创建数据瓦片金字塔管理器\n      this.tileset = this.initTileset();\n\n      // 判断当前 source 是否需要计算范围\n      if (parser.cancelExtent) {\n        return;\n      }\n\n      // 计算范围\n      this.extent = extent(this.data.dataArray);\n      this.setCenter(this.extent);\n      this.invalidExtent = this.extent[0] === this.extent[2] || this.extent[1] === this.extent[3];\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(bbox) {\n      this.center = [(bbox[0] + bbox[2]) / 2, (bbox[1] + bbox[3]) / 2];\n      if (isNaN(this.center[0]) || isNaN(this.center[1])) {\n        // this.center = [NaN, NaN] // Infinity - Infinity = NaN\n        // 默认设置为大地原点\n        this.center = [108.92361111111111, 34.54083333333333];\n      }\n    }\n\n    /**\n     * 瓦片数据管理器\n     */\n  }, {\n    key: \"initTileset\",\n    value: function initTileset() {\n      var tilesetOptions = this.data.tilesetOptions;\n      if (!tilesetOptions) {\n        return;\n      }\n      this.isTile = true;\n      if (this.tileset) {\n        this.tileset.updateOptions(tilesetOptions);\n        return this.tileset;\n      }\n      var tileset = new TilesetManager(_objectSpread({}, tilesetOptions));\n      return tileset;\n    }\n\n    /**\n     * 数据统计\n     */\n  }, {\n    key: \"executeTrans\",\n    value: function executeTrans() {\n      var _this5 = this;\n      var trans = this.transforms;\n      trans.forEach(function (tran) {\n        var type = tran.type;\n        var data = getTransform(type)(_this5.data, tran);\n        Object.assign(_this5.data, data);\n      });\n    }\n\n    /**\n     * 数据聚合\n     */\n  }, {\n    key: \"initCluster\",\n    value: function initCluster() {\n      if (!this.cluster) {\n        return;\n      }\n      var clusterOptions = this.clusterOptions || {};\n      this.clusterIndex = cluster(this.data, clusterOptions);\n    }\n  }, {\n    key: \"caculClusterExtent\",\n    value: function caculClusterExtent(bufferRatio) {\n      var newBounds = [[-Infinity, -Infinity], [Infinity, Infinity]];\n      if (!this.invalidExtent) {\n        newBounds = padBounds(bBoxToBounds(this.extent), bufferRatio);\n      }\n      return newBounds[0].concat(newBounds[1]);\n    }\n  }]);\n  return Source;\n}(EventEmitter);\nexport { Source as default };","map":{"version":3,"names":["_asyncToGenerator","_objectSpread","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","SyncHook","bBoxToBounds","extent","lodashUtil","padBounds","TilesetManager","EventEmitter","cloneDeep","isFunction","isString","mergeWith","getParser","getTransform","cluster","statMap","getColumn","mergeCustomizer","objValue","srcValue","Array","isArray","Source","_EventEmitter","_super","data","cfg","_this","init","type","enable","radius","maxZoom","zoom","method","autoRender","originData","initCfg","then","inited","emit","key","value","getSourceCfg","getClusters","clusterIndex","caculClusterExtent","getClustersLeaves","id","getLeaves","Infinity","getParserType","parser","updateClusterData","_this2","_this$clusterOptions","clusterOptions","_this$clusterOptions$","field","Math","floor","forEach","p","properties","point_count","map","item","points","d","statNum","column","stat","features","executeTrans","getFeatureById","_ref","_ref$type","geometry","feature","length","newFeature","transforms","dataArrayChanged","dataArray","find","dataItem","_id","updateFeaturePropertiesById","getFeatureId","setData","options","_this3","reloadAllTile","_this$tileset","tileset","reloadAll","reloadTilebyId","z","x","y","_this$tileset2","reloadTileById","reloadTileByLnglat","lng","lat","_this$tileset3","getTileExtent","_this$tileset4","getTileByZXY","_this$tileset5","reloadTileByExtent","bounds","_this$tileset6","destroy","_this$tileset7","removeAllListeners","_processData","mark","_callee","_this4","wrap","_callee$","_context","prev","next","abrupt","Promise","resolve","reject","excuteParser","initCluster","err","stop","processData","option","_init","_callee2","_callee2$","_context2","sourceParser","initTileset","cancelExtent","setCenter","invalidExtent","bbox","center","isNaN","tilesetOptions","isTile","updateOptions","_this5","trans","tran","Object","assign","bufferRatio","newBounds","concat","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-source/es/source.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { SyncHook } from '@antv/async-hook';\nimport { bBoxToBounds, extent, lodashUtil, padBounds, TilesetManager } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nvar cloneDeep = lodashUtil.cloneDeep,\n  isFunction = lodashUtil.isFunction,\n  isString = lodashUtil.isString,\n  mergeWith = lodashUtil.mergeWith;\n// @ts-ignore\n// tslint:disable-next-line:no-submodule-imports\n\nimport { getParser, getTransform } from \"./factory\";\nimport { cluster } from \"./transform/cluster\";\nimport { statMap } from \"./utils/statistics\";\nimport { getColumn } from \"./utils/util\";\nfunction mergeCustomizer(objValue, srcValue) {\n  if (Array.isArray(srcValue)) {\n    return srcValue;\n  }\n}\n//\nvar Source = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Source, _EventEmitter);\n  var _super = _createSuper(Source);\n  function Source(data, cfg) {\n    var _this;\n    _classCallCheck(this, Source);\n    _this = _super.call(this);\n    // this.rawData = cloneDeep(data);\n    _defineProperty(_assertThisInitialized(_this), \"type\", 'source');\n    _defineProperty(_assertThisInitialized(_this), \"isTile\", false);\n    _defineProperty(_assertThisInitialized(_this), \"inited\", false);\n    // 生命周期钩子\n    _defineProperty(_assertThisInitialized(_this), \"hooks\", {\n      init: new SyncHook()\n    });\n    _defineProperty(_assertThisInitialized(_this), \"parser\", {\n      type: 'geojson'\n    });\n    _defineProperty(_assertThisInitialized(_this), \"transforms\", []);\n    _defineProperty(_assertThisInitialized(_this), \"cluster\", false);\n    _defineProperty(_assertThisInitialized(_this), \"clusterOptions\", {\n      enable: false,\n      radius: 40,\n      maxZoom: 20,\n      zoom: -99,\n      method: 'count'\n    });\n    // 是否有效范围\n    _defineProperty(_assertThisInitialized(_this), \"invalidExtent\", false);\n    _defineProperty(_assertThisInitialized(_this), \"dataArrayChanged\", false);\n    _defineProperty(_assertThisInitialized(_this), \"cfg\", {\n      autoRender: true\n    });\n    _this.originData = data;\n    _this.initCfg(cfg);\n    _this.init().then(function () {\n      _this.inited = true;\n      _this.emit('update', {\n        type: 'inited'\n      });\n    });\n    return _this;\n  }\n  _createClass(Source, [{\n    key: \"getSourceCfg\",\n    value: function getSourceCfg() {\n      return this.cfg;\n    }\n  }, {\n    key: \"getClusters\",\n    value: function getClusters(zoom) {\n      return this.clusterIndex.getClusters(this.caculClusterExtent(2), zoom);\n    }\n  }, {\n    key: \"getClustersLeaves\",\n    value: function getClustersLeaves(id) {\n      return this.clusterIndex.getLeaves(id, Infinity);\n    }\n  }, {\n    key: \"getParserType\",\n    value: function getParserType() {\n      return this.parser.type;\n    }\n  }, {\n    key: \"updateClusterData\",\n    value: function updateClusterData(zoom) {\n      var _this2 = this;\n      var _this$clusterOptions = this.clusterOptions,\n        _this$clusterOptions$ = _this$clusterOptions.method,\n        method = _this$clusterOptions$ === void 0 ? 'sum' : _this$clusterOptions$,\n        field = _this$clusterOptions.field;\n      var data = this.clusterIndex.getClusters(this.caculClusterExtent(2), Math.floor(zoom));\n      this.clusterOptions.zoom = zoom;\n      data.forEach(function (p) {\n        if (!p.id) {\n          p.properties.point_count = 1;\n        }\n      });\n      if (field || isFunction(method)) {\n        data = data.map(function (item) {\n          var id = item.id;\n          if (id) {\n            var points = _this2.clusterIndex.getLeaves(id, Infinity);\n            var properties = points.map(function (d) {\n              return d.properties;\n            });\n            var statNum;\n            if (isString(method) && field) {\n              var column = getColumn(properties, field);\n              statNum = statMap[method](column);\n            }\n            if (isFunction(method)) {\n              statNum = method(properties);\n            }\n            item.properties.stat = statNum;\n          } else {\n            item.properties.point_count = 1;\n          }\n          return item;\n        });\n      }\n      this.data = getParser('geojson')({\n        type: 'FeatureCollection',\n        features: data\n      });\n      this.executeTrans();\n    }\n  }, {\n    key: \"getFeatureById\",\n    value: function getFeatureById(id) {\n      var _ref = this.parser,\n        _ref$type = _ref.type,\n        type = _ref$type === void 0 ? 'geojson' : _ref$type,\n        geometry = _ref.geometry;\n      if (type === 'geojson' && !this.cluster) {\n        var feature = id < this.originData.features.length ? this.originData.features[id] : 'null';\n        var newFeature = cloneDeep(feature);\n        if (newFeature !== null && newFeature !== void 0 && newFeature.properties && (this.transforms.length !== 0 || this.dataArrayChanged)) {\n          // 如果数据进行了transforms 属性会发生改变 或者数据dataArray发生更新\n          var item = this.data.dataArray.find(function (dataItem) {\n            return dataItem._id === id;\n          });\n          newFeature.properties = item;\n        }\n        return newFeature;\n      } else if (type === 'json' && geometry) {\n        return this.data.dataArray.find(function (dataItem) {\n          return dataItem._id === id;\n        });\n      } else {\n        return id < this.data.dataArray.length ? this.data.dataArray[id] : 'null';\n      }\n    }\n  }, {\n    key: \"updateFeaturePropertiesById\",\n    value: function updateFeaturePropertiesById(id, properties) {\n      this.data.dataArray = this.data.dataArray.map(function (dataItem) {\n        if (dataItem._id === id) {\n          return _objectSpread(_objectSpread({}, dataItem), properties);\n        }\n        return dataItem;\n      });\n      this.dataArrayChanged = true;\n      this.emit('update', {\n        type: 'update'\n      });\n    }\n  }, {\n    key: \"getFeatureId\",\n    value: function getFeatureId(field, value) {\n      var feature = this.data.dataArray.find(function (dataItem) {\n        return dataItem[field] === value;\n      });\n      return feature === null || feature === void 0 ? void 0 : feature._id;\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data, options) {\n      var _this3 = this;\n      this.originData = data;\n      this.dataArrayChanged = false;\n      this.initCfg(options);\n      this.init().then(function () {\n        _this3.emit('update', {\n          type: 'update'\n        });\n      });\n    }\n  }, {\n    key: \"reloadAllTile\",\n    value: function reloadAllTile() {\n      var _this$tileset;\n      (_this$tileset = this.tileset) === null || _this$tileset === void 0 || _this$tileset.reloadAll();\n    }\n  }, {\n    key: \"reloadTilebyId\",\n    value: function reloadTilebyId(z, x, y) {\n      var _this$tileset2;\n      (_this$tileset2 = this.tileset) === null || _this$tileset2 === void 0 || _this$tileset2.reloadTileById(z, x, y);\n    }\n  }, {\n    key: \"reloadTileByLnglat\",\n    value: function reloadTileByLnglat(lng, lat, z) {\n      var _this$tileset3;\n      (_this$tileset3 = this.tileset) === null || _this$tileset3 === void 0 || _this$tileset3.reloadTileByLnglat(lng, lat, z);\n    }\n  }, {\n    key: \"getTileExtent\",\n    value: function getTileExtent(e, zoom) {\n      var _this$tileset4;\n      return (_this$tileset4 = this.tileset) === null || _this$tileset4 === void 0 ? void 0 : _this$tileset4.getTileExtent(e, zoom);\n    }\n  }, {\n    key: \"getTileByZXY\",\n    value: function getTileByZXY(z, x, y) {\n      var _this$tileset5;\n      return (_this$tileset5 = this.tileset) === null || _this$tileset5 === void 0 ? void 0 : _this$tileset5.getTileByZXY(z, x, y);\n    }\n  }, {\n    key: \"reloadTileByExtent\",\n    value: function reloadTileByExtent(bounds, z) {\n      var _this$tileset6;\n      (_this$tileset6 = this.tileset) === null || _this$tileset6 === void 0 || _this$tileset6.reloadTileByExtent(bounds, z);\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      var _this$tileset7;\n      this.removeAllListeners();\n      this.originData = null;\n      this.clusterIndex = null;\n      // @ts-ignore\n      this.data = null;\n      (_this$tileset7 = this.tileset) === null || _this$tileset7 === void 0 || _this$tileset7.destroy();\n    }\n  }, {\n    key: \"processData\",\n    value: function () {\n      var _processData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this4 = this;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", new Promise(function (resolve, reject) {\n                try {\n                  _this4.excuteParser();\n                  _this4.initCluster();\n                  _this4.executeTrans();\n                  resolve({});\n                } catch (err) {\n                  reject(err);\n                }\n              }));\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      function processData() {\n        return _processData.apply(this, arguments);\n      }\n      return processData;\n    }()\n  }, {\n    key: \"initCfg\",\n    value: function initCfg(option) {\n      this.cfg = mergeWith(this.cfg, option, mergeCustomizer);\n      var cfg = this.cfg;\n      if (cfg) {\n        if (cfg.parser) {\n          this.parser = cfg.parser;\n        }\n        if (cfg.transforms) {\n          this.transforms = cfg.transforms;\n        }\n        this.cluster = cfg.cluster || false;\n        if (cfg.clusterOptions) {\n          this.cluster = true;\n          this.clusterOptions = _objectSpread(_objectSpread({}, this.clusterOptions), cfg.clusterOptions);\n        }\n      }\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              this.inited = false;\n              _context2.next = 3;\n              return this.processData();\n            case 3:\n              this.inited = true;\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n    /**\n     * 数据解析\n     */\n  }, {\n    key: \"excuteParser\",\n    value: function excuteParser() {\n      // 耗时计算测试\n      var parser = this.parser;\n      var type = parser.type || 'geojson';\n      var sourceParser = getParser(type);\n      this.data = sourceParser(this.originData, parser);\n      // 为瓦片图层的父图层创建数据瓦片金字塔管理器\n      this.tileset = this.initTileset();\n\n      // 判断当前 source 是否需要计算范围\n      if (parser.cancelExtent) {\n        return;\n      }\n\n      // 计算范围\n      this.extent = extent(this.data.dataArray);\n      this.setCenter(this.extent);\n      this.invalidExtent = this.extent[0] === this.extent[2] || this.extent[1] === this.extent[3];\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(bbox) {\n      this.center = [(bbox[0] + bbox[2]) / 2, (bbox[1] + bbox[3]) / 2];\n      if (isNaN(this.center[0]) || isNaN(this.center[1])) {\n        // this.center = [NaN, NaN] // Infinity - Infinity = NaN\n        // 默认设置为大地原点\n        this.center = [108.92361111111111, 34.54083333333333];\n      }\n    }\n\n    /**\n     * 瓦片数据管理器\n     */\n  }, {\n    key: \"initTileset\",\n    value: function initTileset() {\n      var tilesetOptions = this.data.tilesetOptions;\n      if (!tilesetOptions) {\n        return;\n      }\n      this.isTile = true;\n      if (this.tileset) {\n        this.tileset.updateOptions(tilesetOptions);\n        return this.tileset;\n      }\n      var tileset = new TilesetManager(_objectSpread({}, tilesetOptions));\n      return tileset;\n    }\n\n    /**\n     * 数据统计\n     */\n  }, {\n    key: \"executeTrans\",\n    value: function executeTrans() {\n      var _this5 = this;\n      var trans = this.transforms;\n      trans.forEach(function (tran) {\n        var type = tran.type;\n        var data = getTransform(type)(_this5.data, tran);\n        Object.assign(_this5.data, data);\n      });\n    }\n\n    /**\n     * 数据聚合\n     */\n  }, {\n    key: \"initCluster\",\n    value: function initCluster() {\n      if (!this.cluster) {\n        return;\n      }\n      var clusterOptions = this.clusterOptions || {};\n      this.clusterIndex = cluster(this.data, clusterOptions);\n    }\n  }, {\n    key: \"caculClusterExtent\",\n    value: function caculClusterExtent(bufferRatio) {\n      var newBounds = [[-Infinity, -Infinity], [Infinity, Infinity]];\n      if (!this.invalidExtent) {\n        newBounds = padBounds(bBoxToBounds(this.extent), bufferRatio);\n      }\n      return newBounds[0].concat(newBounds[1]);\n    }\n  }]);\n  return Source;\n}(EventEmitter);\nexport { Source as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}