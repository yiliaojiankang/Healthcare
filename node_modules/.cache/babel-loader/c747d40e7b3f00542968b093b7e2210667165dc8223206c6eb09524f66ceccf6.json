{"ast":null,"code":"import { each } from '@antv/util';\nimport { translate } from '../../../util/transform';\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\nexport function limitInCanvas(items, labels, shapes, region) {\n  each(labels, function (label) {\n    var regionMinX = region.minX,\n      regionMinY = region.minY,\n      regionMaxX = region.maxX,\n      regionMaxY = region.maxY;\n    var _a = label.getCanvasBBox(),\n      minX = _a.minX,\n      minY = _a.minY,\n      maxX = _a.maxX,\n      maxY = _a.maxY,\n      x = _a.x,\n      y = _a.y,\n      width = _a.width,\n      height = _a.height;\n    var finalX = x;\n    var finalY = y;\n    if (minX < regionMinX || maxX < regionMinX) {\n      // 超出左侧\n      finalX = regionMinX;\n    }\n    if (minY < regionMinY || maxY < regionMinY) {\n      // 超出顶部\n      finalY = regionMinY;\n    }\n    if (minX > regionMaxX) {\n      // 整体超出右侧\n      finalX = regionMaxX - width;\n    } else if (maxX > regionMaxX) {\n      // 超出右侧\n      finalX = finalX - (maxX - regionMaxX);\n    }\n    if (minY > regionMaxY) {\n      // 整体超出顶部\n      finalY = regionMaxY - height;\n    } else if (maxY > regionMaxY) {\n      // 超出底部\n      finalY = finalY - (maxY - regionMaxY);\n    }\n    if (finalX !== x || finalY !== y) {\n      translate(label, finalX - x, finalY - y);\n    }\n  });\n}","map":{"version":3,"names":["each","translate","limitInCanvas","items","labels","shapes","region","label","regionMinX","minX","regionMinY","minY","regionMaxX","maxX","regionMaxY","maxY","_a","getCanvasBBox","x","y","width","height","finalX","finalY"],"sources":["../../../../src/geometry/label/layout/limit-in-canvas.ts"],"sourcesContent":["import { each } from '@antv/util';\nimport { BBox, IGroup, IShape } from '../../../dependents';\nimport { translate } from '../../../util/transform';\nimport { LabelItem } from '../interface';\n\n/**\n * @ignore\n * 将 label 限制在画布范围内，简单得将超出画布的 label 往画布内调整\n * @param labels\n * @param cfg\n */\nexport function limitInCanvas(items: LabelItem[], labels: IGroup[], shapes: IShape[] | IGroup[], region: BBox) {\n  each(labels, (label: IGroup) => {\n    const { minX: regionMinX, minY: regionMinY, maxX: regionMaxX, maxY: regionMaxY } = region;\n    const { minX, minY, maxX, maxY, x, y, width, height } = label.getCanvasBBox();\n\n    let finalX = x;\n    let finalY = y;\n    if (minX < regionMinX || maxX < regionMinX) {\n      // 超出左侧\n      finalX = regionMinX;\n    }\n    if (minY < regionMinY || maxY < regionMinY) {\n      // 超出顶部\n      finalY = regionMinY;\n    }\n\n    if (minX > regionMaxX) {\n      // 整体超出右侧\n      finalX = regionMaxX - width;\n    } else if (maxX > regionMaxX) {\n      // 超出右侧\n      finalX = finalX - (maxX - regionMaxX);\n    }\n\n    if (minY > regionMaxY) {\n      // 整体超出顶部\n      finalY = regionMaxY - height;\n    } else if (maxY > regionMaxY) {\n      // 超出底部\n      finalY = finalY - (maxY - regionMaxY);\n    }\n\n    if (finalX !== x || finalY !== y) {\n      translate(label, finalX - x, finalY - y);\n    }\n  });\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,YAAY;AAEjC,SAASC,SAAS,QAAQ,yBAAyB;AAGnD;;;;;;AAMA,OAAM,SAAUC,aAAaA,CAACC,KAAkB,EAAEC,MAAgB,EAAEC,MAA2B,EAAEC,MAAY;EAC3GN,IAAI,CAACI,MAAM,EAAE,UAACG,KAAa;IACjB,IAAMC,UAAU,GAA2DF,MAAM,CAAAG,IAAjE;MAAQC,UAAU,GAAyCJ,MAAM,CAAAK,IAA/C;MAAQC,UAAU,GAAuBN,MAAM,CAAAO,IAA7B;MAAQC,UAAU,GAAKR,MAAM,CAAAS,IAAX;IACxE,IAAAC,EAAA,GAAkDT,KAAK,CAACU,aAAa,EAAE;MAArER,IAAI,GAAAO,EAAA,CAAAP,IAAA;MAAEE,IAAI,GAAAK,EAAA,CAAAL,IAAA;MAAEE,IAAI,GAAAG,EAAA,CAAAH,IAAA;MAAEE,IAAI,GAAAC,EAAA,CAAAD,IAAA;MAAEG,CAAC,GAAAF,EAAA,CAAAE,CAAA;MAAEC,CAAC,GAAAH,EAAA,CAAAG,CAAA;MAAEC,KAAK,GAAAJ,EAAA,CAAAI,KAAA;MAAEC,MAAM,GAAAL,EAAA,CAAAK,MAA0B;IAE7E,IAAIC,MAAM,GAAGJ,CAAC;IACd,IAAIK,MAAM,GAAGJ,CAAC;IACd,IAAIV,IAAI,GAAGD,UAAU,IAAIK,IAAI,GAAGL,UAAU,EAAE;MAC1C;MACAc,MAAM,GAAGd,UAAU;;IAErB,IAAIG,IAAI,GAAGD,UAAU,IAAIK,IAAI,GAAGL,UAAU,EAAE;MAC1C;MACAa,MAAM,GAAGb,UAAU;;IAGrB,IAAID,IAAI,GAAGG,UAAU,EAAE;MACrB;MACAU,MAAM,GAAGV,UAAU,GAAGQ,KAAK;KAC5B,MAAM,IAAIP,IAAI,GAAGD,UAAU,EAAE;MAC5B;MACAU,MAAM,GAAGA,MAAM,IAAIT,IAAI,GAAGD,UAAU,CAAC;;IAGvC,IAAID,IAAI,GAAGG,UAAU,EAAE;MACrB;MACAS,MAAM,GAAGT,UAAU,GAAGO,MAAM;KAC7B,MAAM,IAAIN,IAAI,GAAGD,UAAU,EAAE;MAC5B;MACAS,MAAM,GAAGA,MAAM,IAAIR,IAAI,GAAGD,UAAU,CAAC;;IAGvC,IAAIQ,MAAM,KAAKJ,CAAC,IAAIK,MAAM,KAAKJ,CAAC,EAAE;MAChClB,SAAS,CAACM,KAAK,EAAEe,MAAM,GAAGJ,CAAC,EAAEK,MAAM,GAAGJ,CAAC,CAAC;;EAE5C,CAAC,CAAC;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}