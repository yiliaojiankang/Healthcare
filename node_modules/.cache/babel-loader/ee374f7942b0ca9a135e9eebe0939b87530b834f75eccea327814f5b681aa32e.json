{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport Base from '../base';\nimport { isString, isNil } from '@antv/util';\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { Util } from '@antv/g6-core';\nimport { mat3 } from '@antv/matrix-util';\nvar applyMatrix = Util.applyMatrix;\nfunction getImgNaturalDimension(img, callback) {\n  var nWidth, nHeight;\n  if (img.naturalWidth) {\n    // 现代浏览器\n    nWidth = img.naturalWidth;\n    nHeight = img.naturalHeight;\n  } else {\n    // IE6/7/8\n    var image_1 = new Image();\n    image_1.src = img.src;\n    image_1.onload = function () {\n      if (callback) callback(image_1.width, image_1.height);\n    };\n  }\n  return [nWidth, nHeight];\n}\nvar ImageMiniMap = /** @class */function (_super) {\n  __extends(ImageMiniMap, _super);\n  function ImageMiniMap(config) {\n    return _super.call(this, config) || this;\n  }\n  ImageMiniMap.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-minimap',\n      viewportClassName: 'g6-minimap-viewport',\n      width: 200,\n      delegateStyle: {\n        fill: '#40a9ff',\n        stroke: '#096dd9'\n      },\n      refresh: true\n    };\n  };\n  ImageMiniMap.prototype.getEvents = function () {\n    return {\n      beforepaint: 'updateViewport',\n      beforeanimate: 'disableRefresh',\n      afteranimate: 'enableRefresh',\n      viewportchange: 'disableOneRefresh'\n    };\n  };\n  // 若是正在进行动画，不刷新缩略图\n  ImageMiniMap.prototype.disableRefresh = function () {\n    this.set('refresh', false);\n  };\n  ImageMiniMap.prototype.enableRefresh = function () {\n    this.set('refresh', true);\n    this.updateCanvas();\n  };\n  ImageMiniMap.prototype.disableOneRefresh = function () {\n    this.set('viewportChange', true);\n  };\n  ImageMiniMap.prototype.initViewport = function () {\n    var _this = this;\n    var cfgs = this._cfgs;\n    // cWidth and cHeight are the width and height of the minimap's container\n    var graph = cfgs.graph;\n    if (this.destroyed) return;\n    var containerDOM = this.get('container');\n    if (isString(containerDOM)) {\n      containerDOM = document.getElementById(containerDOM);\n    }\n    var viewport = createDom(\"<div class=\".concat(cfgs.viewportClassName, \"\\n      style='position:absolute;\\n        left:0;\\n        top:0;\\n        box-sizing:border-box;\\n        border: 2px solid #1980ff;\\n        cursor:move'\\n      </div>\"));\n    // 计算拖拽水平方向距离\n    var x = 0;\n    // 计算拖拽垂直方向距离\n    var y = 0;\n    // 是否在拖拽minimap的视口\n    var dragging = false;\n    // 缓存viewport当前对于画布的x\n    var left = 0;\n    // 缓存viewport当前对于画布的y\n    var top = 0;\n    // 缓存viewport当前宽度\n    var width = 0;\n    // 缓存viewport当前高度\n    var height = 0;\n    var ratio = 0;\n    var zoom = 0;\n    containerDOM.addEventListener('mousedown', function (e) {\n      cfgs.refresh = false;\n      if (e.target !== viewport) {\n        return;\n      }\n      // 如果视口已经最大了，不需要拖拽\n      var style = viewport.style;\n      width = parseInt(style.width, 10);\n      height = parseInt(style.height, 10);\n      var cWidth = _this.get('width');\n      var cHeight = _this.get('height');\n      if (width > cWidth || height > cHeight) {\n        return;\n      }\n      zoom = graph.getZoom();\n      ratio = _this.get('ratio');\n      dragging = true;\n      x = e.clientX;\n      y = e.clientY;\n    }, false);\n    containerDOM.addEventListener('mousemove', function (e) {\n      if (!dragging || isNil(e.clientX) || isNil(e.clientY)) {\n        return;\n      }\n      var cWidth = _this.get('width');\n      var cHeight = _this.get('height');\n      var style = viewport.style;\n      left = parseInt(style.left, 10);\n      top = parseInt(style.top, 10);\n      width = parseInt(style.width, 10);\n      height = parseInt(style.height, 10);\n      var dx = x - e.clientX;\n      var dy = y - e.clientY;\n      // 若视口移动到最左边或最右边了,仅移动到边界\n      if (left - dx < 0) {\n        dx = left;\n      } else if (left - dx + width >= cWidth) {\n        dx = 0;\n      }\n      // 若视口移动到最上或最下边了，仅移动到边界\n      if (top - dy < 0) {\n        dy = top;\n      } else if (top - dy + height >= cHeight) {\n        dy = 0;\n      }\n      left -= dx;\n      top -= dy;\n      // 先移动视口，避免移动到边上以后出现视口闪烁\n      modifyCSS(viewport, {\n        left: \"\".concat(left, \"px\"),\n        top: \"\".concat(top, \"px\")\n      });\n      // graph 移动需要偏移量 dx/dy * 缩放比例才会得到正确的移动距离\n      graph.translate(dx * zoom / ratio, dy * zoom / ratio);\n      x = e.clientX;\n      y = e.clientY;\n    }, false);\n    containerDOM.addEventListener('mouseleave', function () {\n      dragging = false;\n      cfgs.refresh = true;\n    }, false);\n    containerDOM.addEventListener('mouseup', function () {\n      dragging = false;\n      cfgs.refresh = true;\n    }, false);\n    this.set('viewport', viewport);\n    containerDOM.appendChild(viewport);\n  };\n  /**\n   * 更新 viewport 视图\n   */\n  ImageMiniMap.prototype.updateViewport = function () {\n    if (this.destroyed) return;\n    var ratio = this.get('ratio');\n    var cWidth = this.get('width');\n    var cHeight = this.get('height');\n    var graph = this.get('graph');\n    var graphWidth = graph.get('width');\n    var graphHeight = graph.get('height');\n    var aspectRatio = graphWidth / graphHeight;\n    var graphGroup = graph.getGroup();\n    // 主图的 bbox（矩阵变换相关的 bbox）\n    var graphCanvasBBox = graphGroup.getCanvasBBox();\n    // 扩展 graphBBox 到和 graphWidth / graphHeight 等比\n    var graphCanvasBBoxMean = [(graphCanvasBBox.minX + graphCanvasBBox.maxX) / 2, (graphCanvasBBox.minY + graphCanvasBBox.maxY) / 2];\n    var graphCanvasBBoxSize = [graphCanvasBBox.maxX - graphCanvasBBox.minX, graphCanvasBBox.maxY - graphCanvasBBox.minY];\n    var expandedGraphCanvasBBox = {\n      centerX: graphCanvasBBoxMean[0],\n      centerY: graphCanvasBBoxMean[1],\n      width: 0,\n      height: 0,\n      minX: 0,\n      minY: 0\n    };\n    if (graphCanvasBBox[0] / graphCanvasBBox[1] > aspectRatio) {\n      expandedGraphCanvasBBox.width = graphCanvasBBoxSize[0];\n      expandedGraphCanvasBBox.height = expandedGraphCanvasBBox.width / aspectRatio;\n    } else {\n      expandedGraphCanvasBBox.height = graphCanvasBBoxSize[1];\n      expandedGraphCanvasBBox.width = expandedGraphCanvasBBox.height * aspectRatio;\n    }\n    expandedGraphCanvasBBox.minX = graphCanvasBBoxMean[0] - expandedGraphCanvasBBox.width / 2;\n    expandedGraphCanvasBBox.minY = graphCanvasBBoxMean[1] - expandedGraphCanvasBBox.height / 2;\n    var graphMatrix = graphGroup.getMatrix();\n    if (!graphMatrix) graphMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var invertGraphMatrix = mat3.invert([1, 0, 0, 0, 1, 0, 0, 0, 1], graphMatrix);\n    var minXY = applyMatrix({\n      x: expandedGraphCanvasBBox.minX,\n      y: expandedGraphCanvasBBox.minY\n    }, invertGraphMatrix);\n    // 扩展 graphBBox 后的 bbox 的左上角对应的 canvas container 坐标\n    var topLeft = graph.getCanvasByPoint(minXY.x, minXY.y);\n    var viewport = this.get('viewport');\n    if (!viewport) {\n      this.initViewport();\n    }\n    // Viewport 与 minimap container 的比例 =  Graph container 与 expandedGraphBBox 比例\n    var vpToMc = graphWidth / expandedGraphCanvasBBox.width;\n    // viewport 宽高 = vpToMc * minimap container 宽高\n    var width = vpToMc * cWidth;\n    var height = vpToMc * cHeight;\n    // vierport 左上角到 minimap container 的距离 / minimap container 宽高\n    // = 主图 expandedBBox 左上角 canvas container 坐标距离 / expandedBBox 宽高\n    var left = cWidth * -topLeft.x / expandedGraphCanvasBBox.width;\n    var top = cHeight * -topLeft.y / expandedGraphCanvasBBox.height;\n    var right = left + width;\n    var bottom = top + height;\n    if (left < 0) {\n      width += left;\n      left = 0;\n    }\n    if (right > cWidth) {\n      width = width - (right - cWidth);\n    }\n    if (top < 0) {\n      height += top;\n      top = 0;\n    }\n    if (bottom > cHeight) {\n      height = height - (bottom - cHeight);\n    }\n    // 缓存目前缩放比，在移动 minimap 视窗时就不用再计算大图的移动量\n    this.set('ratio', ratio);\n    var correctLeft = \"\".concat(left, \"px\");\n    var correctTop = \"\".concat(top, \"px\");\n    modifyCSS(viewport, {\n      left: correctLeft,\n      top: correctTop,\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\")\n    });\n  };\n  ImageMiniMap.prototype.init = function () {\n    this.initContainer();\n  };\n  /**\n   * 初始化 Minimap 的容器\n   */\n  ImageMiniMap.prototype.initContainer = function () {\n    var self = this;\n    var graph = self.get('graph');\n    var graphWidth = graph.get('width');\n    var graphHeight = graph.get('height');\n    var aspectRatio = graphHeight / graphWidth;\n    var className = self.get('className');\n    var parentNode = self.get('container');\n    // size of the minimap's container\n    var cWidth = self.get('width');\n    var cHeight = self.get('height');\n    if (!cWidth && !cHeight) {\n      cWidth = 200;\n    }\n    if (cWidth) {\n      cHeight = aspectRatio * cWidth;\n      self.set('height', cHeight);\n    } else {\n      cWidth = 1 / aspectRatio * cHeight;\n      self.set('width', cWidth);\n    }\n    var container = createDom(\"<div class='\".concat(className, \"' style='width: \").concat(cWidth, \"px; height: \").concat(cHeight, \"px; overflow: hidden; position: relative;'></div>\"));\n    if (isString(parentNode)) {\n      parentNode = document.getElementById(parentNode);\n    }\n    if (parentNode) {\n      parentNode.appendChild(container);\n    } else {\n      graph.get('container').appendChild(container);\n    }\n    self.set('container', container);\n    var containerDOM = createDom(\"<div class=\\\"g6-minimap-container\\\" style=\\\"position: relative; width: 100%; height: 100%; text-align: center; display: table;\\\"></div>\");\n    container.appendChild(containerDOM);\n    var span = createDom(\"<span style=\\\"display: table-cell; vertical-align: middle; \\\"></span>\");\n    containerDOM.appendChild(span);\n    self.set('containerDOM', containerDOM);\n    self.set('containerSpan', span);\n    var img = createDom(\"<img alt=\\\"\\\" src=\\\"\".concat(this.get('graphImg'), \"\\\" style=\\\"display: inline-block; user-select: none;\\\" draggable=\\\"false\\\" />\"));\n    self.set('imgDOM', img);\n    self.updateImgSize();\n    span.appendChild(img);\n    self.updateCanvas();\n  };\n  ImageMiniMap.prototype.updateImgSize = function () {\n    var self = this;\n    var imgDOM = self.get('imgDOM');\n    var cWidth = self.get('width');\n    var cHeight = self.get('height');\n    imgDOM.onload = function () {\n      var naturalSize = getImgNaturalDimension(imgDOM);\n      if (naturalSize[0] > naturalSize[1]) {\n        imgDOM.width = cWidth;\n      } else {\n        imgDOM.height = cHeight;\n      }\n    };\n  };\n  ImageMiniMap.prototype.updateCanvas = function () {\n    // 如果是在动画，则不刷新视图\n    var isRefresh = this.get('refresh');\n    if (!isRefresh) {\n      return;\n    }\n    var graph = this.get('graph');\n    if (graph.get('destroyed')) {\n      return;\n    }\n    // 如果是视口变换，也不刷新视图，但是需要重置视口大小和位置\n    if (this.get('viewportChange')) {\n      this.set('viewportChange', false);\n      this.updateViewport();\n    }\n    var cWidth = this.get('width');\n    var graphBBox = graph.get('canvas').getCanvasBBox();\n    var width = graphBBox.width;\n    var ratio = cWidth / width;\n    // // 更新minimap视口\n    this.set('ratio', ratio);\n    this.updateViewport();\n  };\n  /**\n   * 获取minimap的窗口\n   * @return {HTMLElement} 窗口的dom实例\n   */\n  ImageMiniMap.prototype.getViewport = function () {\n    return this.get('viewport');\n  };\n  /**\n   * 获取minimap的容器dom\n   * @return {HTMLElement} dom\n   */\n  ImageMiniMap.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  ImageMiniMap.prototype.updateGraphImg = function (img) {\n    var self = this;\n    var oriImgDOM = self.get('imgDOM');\n    oriImgDOM.remove();\n    self.set('graphImg', img);\n    var imgDOM = createDom(\"<img alt=\\\"\\\" src=\\\"\".concat(img, \"\\\" style=\\\"display: inline-block;\\\" ondragstart=\\\"return false;\\\" onselectstart=\\\"return false;\\\"/>\"));\n    self.set('imgDOM', imgDOM);\n    imgDOM.src = img;\n    self.updateImgSize();\n    var span = self.get('containerSpan');\n    span.appendChild(imgDOM);\n    self.updateCanvas();\n  };\n  ImageMiniMap.prototype.destroy = function () {\n    var container = this.get('container');\n    container.parentNode.removeChild(container);\n  };\n  return ImageMiniMap;\n}(Base);\nexport default ImageMiniMap;","map":{"version":3,"names":["__extends","_extendStatics","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","Base","isString","isNil","modifyCSS","createDom","Util","mat3","applyMatrix","getImgNaturalDimension","img","callback","nWidth","nHeight","naturalWidth","naturalHeight","image_1","Image","src","onload","width","height","ImageMiniMap","_super","config","getDefaultCfgs","container","className","viewportClassName","delegateStyle","fill","stroke","refresh","getEvents","beforepaint","beforeanimate","afteranimate","viewportchange","disableRefresh","set","enableRefresh","updateCanvas","disableOneRefresh","initViewport","_this","cfgs","_cfgs","graph","destroyed","containerDOM","get","document","getElementById","viewport","concat","x","y","dragging","left","top","ratio","zoom","addEventListener","e","target","style","parseInt","cWidth","cHeight","getZoom","clientX","clientY","dx","dy","translate","appendChild","updateViewport","graphWidth","graphHeight","aspectRatio","graphGroup","getGroup","graphCanvasBBox","getCanvasBBox","graphCanvasBBoxMean","minX","maxX","minY","maxY","graphCanvasBBoxSize","expandedGraphCanvasBBox","centerX","centerY","graphMatrix","getMatrix","invertGraphMatrix","invert","minXY","topLeft","getCanvasByPoint","vpToMc","right","bottom","correctLeft","correctTop","init","initContainer","self","parentNode","span","updateImgSize","imgDOM","naturalSize","isRefresh","graphBBox","getViewport","getContainer","updateGraphImg","oriImgDOM","remove","destroy","removeChild"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-plugin/es/imageMinimap/index.js"],"sourcesContent":["var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return _extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    _extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nimport Base from '../base';\nimport { isString, isNil } from '@antv/util';\nimport { modifyCSS, createDom } from '@antv/dom-util';\nimport { Util } from '@antv/g6-core';\nimport { mat3 } from '@antv/matrix-util';\nvar applyMatrix = Util.applyMatrix;\nfunction getImgNaturalDimension(img, callback) {\n  var nWidth, nHeight;\n  if (img.naturalWidth) {\n    // 现代浏览器\n    nWidth = img.naturalWidth;\n    nHeight = img.naturalHeight;\n  } else {\n    // IE6/7/8\n    var image_1 = new Image();\n    image_1.src = img.src;\n    image_1.onload = function () {\n      if (callback) callback(image_1.width, image_1.height);\n    };\n  }\n  return [nWidth, nHeight];\n}\nvar ImageMiniMap = /** @class */function (_super) {\n  __extends(ImageMiniMap, _super);\n  function ImageMiniMap(config) {\n    return _super.call(this, config) || this;\n  }\n  ImageMiniMap.prototype.getDefaultCfgs = function () {\n    return {\n      container: null,\n      className: 'g6-minimap',\n      viewportClassName: 'g6-minimap-viewport',\n      width: 200,\n      delegateStyle: {\n        fill: '#40a9ff',\n        stroke: '#096dd9'\n      },\n      refresh: true\n    };\n  };\n  ImageMiniMap.prototype.getEvents = function () {\n    return {\n      beforepaint: 'updateViewport',\n      beforeanimate: 'disableRefresh',\n      afteranimate: 'enableRefresh',\n      viewportchange: 'disableOneRefresh'\n    };\n  };\n  // 若是正在进行动画，不刷新缩略图\n  ImageMiniMap.prototype.disableRefresh = function () {\n    this.set('refresh', false);\n  };\n  ImageMiniMap.prototype.enableRefresh = function () {\n    this.set('refresh', true);\n    this.updateCanvas();\n  };\n  ImageMiniMap.prototype.disableOneRefresh = function () {\n    this.set('viewportChange', true);\n  };\n  ImageMiniMap.prototype.initViewport = function () {\n    var _this = this;\n    var cfgs = this._cfgs;\n    // cWidth and cHeight are the width and height of the minimap's container\n    var graph = cfgs.graph;\n    if (this.destroyed) return;\n    var containerDOM = this.get('container');\n    if (isString(containerDOM)) {\n      containerDOM = document.getElementById(containerDOM);\n    }\n    var viewport = createDom(\"<div class=\".concat(cfgs.viewportClassName, \"\\n      style='position:absolute;\\n        left:0;\\n        top:0;\\n        box-sizing:border-box;\\n        border: 2px solid #1980ff;\\n        cursor:move'\\n      </div>\"));\n    // 计算拖拽水平方向距离\n    var x = 0;\n    // 计算拖拽垂直方向距离\n    var y = 0;\n    // 是否在拖拽minimap的视口\n    var dragging = false;\n    // 缓存viewport当前对于画布的x\n    var left = 0;\n    // 缓存viewport当前对于画布的y\n    var top = 0;\n    // 缓存viewport当前宽度\n    var width = 0;\n    // 缓存viewport当前高度\n    var height = 0;\n    var ratio = 0;\n    var zoom = 0;\n    containerDOM.addEventListener('mousedown', function (e) {\n      cfgs.refresh = false;\n      if (e.target !== viewport) {\n        return;\n      }\n      // 如果视口已经最大了，不需要拖拽\n      var style = viewport.style;\n      width = parseInt(style.width, 10);\n      height = parseInt(style.height, 10);\n      var cWidth = _this.get('width');\n      var cHeight = _this.get('height');\n      if (width > cWidth || height > cHeight) {\n        return;\n      }\n      zoom = graph.getZoom();\n      ratio = _this.get('ratio');\n      dragging = true;\n      x = e.clientX;\n      y = e.clientY;\n    }, false);\n    containerDOM.addEventListener('mousemove', function (e) {\n      if (!dragging || isNil(e.clientX) || isNil(e.clientY)) {\n        return;\n      }\n      var cWidth = _this.get('width');\n      var cHeight = _this.get('height');\n      var style = viewport.style;\n      left = parseInt(style.left, 10);\n      top = parseInt(style.top, 10);\n      width = parseInt(style.width, 10);\n      height = parseInt(style.height, 10);\n      var dx = x - e.clientX;\n      var dy = y - e.clientY;\n      // 若视口移动到最左边或最右边了,仅移动到边界\n      if (left - dx < 0) {\n        dx = left;\n      } else if (left - dx + width >= cWidth) {\n        dx = 0;\n      }\n      // 若视口移动到最上或最下边了，仅移动到边界\n      if (top - dy < 0) {\n        dy = top;\n      } else if (top - dy + height >= cHeight) {\n        dy = 0;\n      }\n      left -= dx;\n      top -= dy;\n      // 先移动视口，避免移动到边上以后出现视口闪烁\n      modifyCSS(viewport, {\n        left: \"\".concat(left, \"px\"),\n        top: \"\".concat(top, \"px\")\n      });\n      // graph 移动需要偏移量 dx/dy * 缩放比例才会得到正确的移动距离\n      graph.translate(dx * zoom / ratio, dy * zoom / ratio);\n      x = e.clientX;\n      y = e.clientY;\n    }, false);\n    containerDOM.addEventListener('mouseleave', function () {\n      dragging = false;\n      cfgs.refresh = true;\n    }, false);\n    containerDOM.addEventListener('mouseup', function () {\n      dragging = false;\n      cfgs.refresh = true;\n    }, false);\n    this.set('viewport', viewport);\n    containerDOM.appendChild(viewport);\n  };\n  /**\n   * 更新 viewport 视图\n   */\n  ImageMiniMap.prototype.updateViewport = function () {\n    if (this.destroyed) return;\n    var ratio = this.get('ratio');\n    var cWidth = this.get('width');\n    var cHeight = this.get('height');\n    var graph = this.get('graph');\n    var graphWidth = graph.get('width');\n    var graphHeight = graph.get('height');\n    var aspectRatio = graphWidth / graphHeight;\n    var graphGroup = graph.getGroup();\n    // 主图的 bbox（矩阵变换相关的 bbox）\n    var graphCanvasBBox = graphGroup.getCanvasBBox();\n    // 扩展 graphBBox 到和 graphWidth / graphHeight 等比\n    var graphCanvasBBoxMean = [(graphCanvasBBox.minX + graphCanvasBBox.maxX) / 2, (graphCanvasBBox.minY + graphCanvasBBox.maxY) / 2];\n    var graphCanvasBBoxSize = [graphCanvasBBox.maxX - graphCanvasBBox.minX, graphCanvasBBox.maxY - graphCanvasBBox.minY];\n    var expandedGraphCanvasBBox = {\n      centerX: graphCanvasBBoxMean[0],\n      centerY: graphCanvasBBoxMean[1],\n      width: 0,\n      height: 0,\n      minX: 0,\n      minY: 0\n    };\n    if (graphCanvasBBox[0] / graphCanvasBBox[1] > aspectRatio) {\n      expandedGraphCanvasBBox.width = graphCanvasBBoxSize[0];\n      expandedGraphCanvasBBox.height = expandedGraphCanvasBBox.width / aspectRatio;\n    } else {\n      expandedGraphCanvasBBox.height = graphCanvasBBoxSize[1];\n      expandedGraphCanvasBBox.width = expandedGraphCanvasBBox.height * aspectRatio;\n    }\n    expandedGraphCanvasBBox.minX = graphCanvasBBoxMean[0] - expandedGraphCanvasBBox.width / 2;\n    expandedGraphCanvasBBox.minY = graphCanvasBBoxMean[1] - expandedGraphCanvasBBox.height / 2;\n    var graphMatrix = graphGroup.getMatrix();\n    if (!graphMatrix) graphMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];\n    var invertGraphMatrix = mat3.invert([1, 0, 0, 0, 1, 0, 0, 0, 1], graphMatrix);\n    var minXY = applyMatrix({\n      x: expandedGraphCanvasBBox.minX,\n      y: expandedGraphCanvasBBox.minY\n    }, invertGraphMatrix);\n    // 扩展 graphBBox 后的 bbox 的左上角对应的 canvas container 坐标\n    var topLeft = graph.getCanvasByPoint(minXY.x, minXY.y);\n    var viewport = this.get('viewport');\n    if (!viewport) {\n      this.initViewport();\n    }\n    // Viewport 与 minimap container 的比例 =  Graph container 与 expandedGraphBBox 比例\n    var vpToMc = graphWidth / expandedGraphCanvasBBox.width;\n    // viewport 宽高 = vpToMc * minimap container 宽高\n    var width = vpToMc * cWidth;\n    var height = vpToMc * cHeight;\n    // vierport 左上角到 minimap container 的距离 / minimap container 宽高\n    // = 主图 expandedBBox 左上角 canvas container 坐标距离 / expandedBBox 宽高\n    var left = cWidth * -topLeft.x / expandedGraphCanvasBBox.width;\n    var top = cHeight * -topLeft.y / expandedGraphCanvasBBox.height;\n    var right = left + width;\n    var bottom = top + height;\n    if (left < 0) {\n      width += left;\n      left = 0;\n    }\n    if (right > cWidth) {\n      width = width - (right - cWidth);\n    }\n    if (top < 0) {\n      height += top;\n      top = 0;\n    }\n    if (bottom > cHeight) {\n      height = height - (bottom - cHeight);\n    }\n    // 缓存目前缩放比，在移动 minimap 视窗时就不用再计算大图的移动量\n    this.set('ratio', ratio);\n    var correctLeft = \"\".concat(left, \"px\");\n    var correctTop = \"\".concat(top, \"px\");\n    modifyCSS(viewport, {\n      left: correctLeft,\n      top: correctTop,\n      width: \"\".concat(width, \"px\"),\n      height: \"\".concat(height, \"px\")\n    });\n  };\n  ImageMiniMap.prototype.init = function () {\n    this.initContainer();\n  };\n  /**\n   * 初始化 Minimap 的容器\n   */\n  ImageMiniMap.prototype.initContainer = function () {\n    var self = this;\n    var graph = self.get('graph');\n    var graphWidth = graph.get('width');\n    var graphHeight = graph.get('height');\n    var aspectRatio = graphHeight / graphWidth;\n    var className = self.get('className');\n    var parentNode = self.get('container');\n    // size of the minimap's container\n    var cWidth = self.get('width');\n    var cHeight = self.get('height');\n    if (!cWidth && !cHeight) {\n      cWidth = 200;\n    }\n    if (cWidth) {\n      cHeight = aspectRatio * cWidth;\n      self.set('height', cHeight);\n    } else {\n      cWidth = 1 / aspectRatio * cHeight;\n      self.set('width', cWidth);\n    }\n    var container = createDom(\"<div class='\".concat(className, \"' style='width: \").concat(cWidth, \"px; height: \").concat(cHeight, \"px; overflow: hidden; position: relative;'></div>\"));\n    if (isString(parentNode)) {\n      parentNode = document.getElementById(parentNode);\n    }\n    if (parentNode) {\n      parentNode.appendChild(container);\n    } else {\n      graph.get('container').appendChild(container);\n    }\n    self.set('container', container);\n    var containerDOM = createDom(\"<div class=\\\"g6-minimap-container\\\" style=\\\"position: relative; width: 100%; height: 100%; text-align: center; display: table;\\\"></div>\");\n    container.appendChild(containerDOM);\n    var span = createDom(\"<span style=\\\"display: table-cell; vertical-align: middle; \\\"></span>\");\n    containerDOM.appendChild(span);\n    self.set('containerDOM', containerDOM);\n    self.set('containerSpan', span);\n    var img = createDom(\"<img alt=\\\"\\\" src=\\\"\".concat(this.get('graphImg'), \"\\\" style=\\\"display: inline-block; user-select: none;\\\" draggable=\\\"false\\\" />\"));\n    self.set('imgDOM', img);\n    self.updateImgSize();\n    span.appendChild(img);\n    self.updateCanvas();\n  };\n  ImageMiniMap.prototype.updateImgSize = function () {\n    var self = this;\n    var imgDOM = self.get('imgDOM');\n    var cWidth = self.get('width');\n    var cHeight = self.get('height');\n    imgDOM.onload = function () {\n      var naturalSize = getImgNaturalDimension(imgDOM);\n      if (naturalSize[0] > naturalSize[1]) {\n        imgDOM.width = cWidth;\n      } else {\n        imgDOM.height = cHeight;\n      }\n    };\n  };\n  ImageMiniMap.prototype.updateCanvas = function () {\n    // 如果是在动画，则不刷新视图\n    var isRefresh = this.get('refresh');\n    if (!isRefresh) {\n      return;\n    }\n    var graph = this.get('graph');\n    if (graph.get('destroyed')) {\n      return;\n    }\n    // 如果是视口变换，也不刷新视图，但是需要重置视口大小和位置\n    if (this.get('viewportChange')) {\n      this.set('viewportChange', false);\n      this.updateViewport();\n    }\n    var cWidth = this.get('width');\n    var graphBBox = graph.get('canvas').getCanvasBBox();\n    var width = graphBBox.width;\n    var ratio = cWidth / width;\n    // // 更新minimap视口\n    this.set('ratio', ratio);\n    this.updateViewport();\n  };\n  /**\n   * 获取minimap的窗口\n   * @return {HTMLElement} 窗口的dom实例\n   */\n  ImageMiniMap.prototype.getViewport = function () {\n    return this.get('viewport');\n  };\n  /**\n   * 获取minimap的容器dom\n   * @return {HTMLElement} dom\n   */\n  ImageMiniMap.prototype.getContainer = function () {\n    return this.get('container');\n  };\n  ImageMiniMap.prototype.updateGraphImg = function (img) {\n    var self = this;\n    var oriImgDOM = self.get('imgDOM');\n    oriImgDOM.remove();\n    self.set('graphImg', img);\n    var imgDOM = createDom(\"<img alt=\\\"\\\" src=\\\"\".concat(img, \"\\\" style=\\\"display: inline-block;\\\" ondragstart=\\\"return false;\\\" onselectstart=\\\"return false;\\\"/>\"));\n    self.set('imgDOM', imgDOM);\n    imgDOM.src = img;\n    self.updateImgSize();\n    var span = self.get('containerSpan');\n    span.appendChild(imgDOM);\n    self.updateCanvas();\n  };\n  ImageMiniMap.prototype.destroy = function () {\n    var container = this.get('container');\n    container.parentNode.removeChild(container);\n  };\n  return ImageMiniMap;\n}(Base);\nexport default ImageMiniMap;"],"mappings":"AAAA,IAAIA,SAAS,GAAG,IAAI,IAAI,IAAI,CAACA,SAAS,IAAI,YAAY;EACpD,IAAIC,cAAc,GAAG,SAASC,aAAaA,CAACC,CAAC,EAAEC,CAAC,EAAE;IAChDH,cAAc,GAAGI,MAAM,CAACC,cAAc,IAAI;MACxCC,SAAS,EAAE;IACb,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;MACpCD,CAAC,CAACI,SAAS,GAAGH,CAAC;IACjB,CAAC,IAAI,UAAUD,CAAC,EAAEC,CAAC,EAAE;MACnB,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;IAC9E,CAAC;IACD,OAAOR,cAAc,CAACE,CAAC,EAAEC,CAAC,CAAC;EAC7B,CAAC;EACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;IACrB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EAAE,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;IACpIH,cAAc,CAACE,CAAC,EAAEC,CAAC,CAAC;IACpB,SAASW,EAAEA,CAAA,EAAG;MACZ,IAAI,CAACC,WAAW,GAAGb,CAAC;IACtB;IACAA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;EACtF,CAAC;AACH,CAAC,CAAC,CAAC;AACH,OAAOG,IAAI,MAAM,SAAS;AAC1B,SAASC,QAAQ,EAAEC,KAAK,QAAQ,YAAY;AAC5C,SAASC,SAAS,EAAEC,SAAS,QAAQ,gBAAgB;AACrD,SAASC,IAAI,QAAQ,eAAe;AACpC,SAASC,IAAI,QAAQ,mBAAmB;AACxC,IAAIC,WAAW,GAAGF,IAAI,CAACE,WAAW;AAClC,SAASC,sBAAsBA,CAACC,GAAG,EAAEC,QAAQ,EAAE;EAC7C,IAAIC,MAAM,EAAEC,OAAO;EACnB,IAAIH,GAAG,CAACI,YAAY,EAAE;IACpB;IACAF,MAAM,GAAGF,GAAG,CAACI,YAAY;IACzBD,OAAO,GAAGH,GAAG,CAACK,aAAa;EAC7B,CAAC,MAAM;IACL;IACA,IAAIC,OAAO,GAAG,IAAIC,KAAK,CAAC,CAAC;IACzBD,OAAO,CAACE,GAAG,GAAGR,GAAG,CAACQ,GAAG;IACrBF,OAAO,CAACG,MAAM,GAAG,YAAY;MAC3B,IAAIR,QAAQ,EAAEA,QAAQ,CAACK,OAAO,CAACI,KAAK,EAAEJ,OAAO,CAACK,MAAM,CAAC;IACvD,CAAC;EACH;EACA,OAAO,CAACT,MAAM,EAAEC,OAAO,CAAC;AAC1B;AACA,IAAIS,YAAY,GAAG,aAAa,UAAUC,MAAM,EAAE;EAChDxC,SAAS,CAACuC,YAAY,EAAEC,MAAM,CAAC;EAC/B,SAASD,YAAYA,CAACE,MAAM,EAAE;IAC5B,OAAOD,MAAM,CAAC5B,IAAI,CAAC,IAAI,EAAE6B,MAAM,CAAC,IAAI,IAAI;EAC1C;EACAF,YAAY,CAAC7B,SAAS,CAACgC,cAAc,GAAG,YAAY;IAClD,OAAO;MACLC,SAAS,EAAE,IAAI;MACfC,SAAS,EAAE,YAAY;MACvBC,iBAAiB,EAAE,qBAAqB;MACxCR,KAAK,EAAE,GAAG;MACVS,aAAa,EAAE;QACbC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;MACV,CAAC;MACDC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDV,YAAY,CAAC7B,SAAS,CAACwC,SAAS,GAAG,YAAY;IAC7C,OAAO;MACLC,WAAW,EAAE,gBAAgB;MAC7BC,aAAa,EAAE,gBAAgB;MAC/BC,YAAY,EAAE,eAAe;MAC7BC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC;EACD;EACAf,YAAY,CAAC7B,SAAS,CAAC6C,cAAc,GAAG,YAAY;IAClD,IAAI,CAACC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;EAC5B,CAAC;EACDjB,YAAY,CAAC7B,SAAS,CAAC+C,aAAa,GAAG,YAAY;IACjD,IAAI,CAACD,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC;IACzB,IAAI,CAACE,YAAY,CAAC,CAAC;EACrB,CAAC;EACDnB,YAAY,CAAC7B,SAAS,CAACiD,iBAAiB,GAAG,YAAY;IACrD,IAAI,CAACH,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC;EAClC,CAAC;EACDjB,YAAY,CAAC7B,SAAS,CAACkD,YAAY,GAAG,YAAY;IAChD,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIC,IAAI,GAAG,IAAI,CAACC,KAAK;IACrB;IACA,IAAIC,KAAK,GAAGF,IAAI,CAACE,KAAK;IACtB,IAAI,IAAI,CAACC,SAAS,EAAE;IACpB,IAAIC,YAAY,GAAG,IAAI,CAACC,GAAG,CAAC,WAAW,CAAC;IACxC,IAAIhD,QAAQ,CAAC+C,YAAY,CAAC,EAAE;MAC1BA,YAAY,GAAGE,QAAQ,CAACC,cAAc,CAACH,YAAY,CAAC;IACtD;IACA,IAAII,QAAQ,GAAGhD,SAAS,CAAC,aAAa,CAACiD,MAAM,CAACT,IAAI,CAACjB,iBAAiB,EAAE,4KAA4K,CAAC,CAAC;IACpP;IACA,IAAI2B,CAAC,GAAG,CAAC;IACT;IACA,IAAIC,CAAC,GAAG,CAAC;IACT;IACA,IAAIC,QAAQ,GAAG,KAAK;IACpB;IACA,IAAIC,IAAI,GAAG,CAAC;IACZ;IACA,IAAIC,GAAG,GAAG,CAAC;IACX;IACA,IAAIvC,KAAK,GAAG,CAAC;IACb;IACA,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIuC,KAAK,GAAG,CAAC;IACb,IAAIC,IAAI,GAAG,CAAC;IACZZ,YAAY,CAACa,gBAAgB,CAAC,WAAW,EAAE,UAAUC,CAAC,EAAE;MACtDlB,IAAI,CAACb,OAAO,GAAG,KAAK;MACpB,IAAI+B,CAAC,CAACC,MAAM,KAAKX,QAAQ,EAAE;QACzB;MACF;MACA;MACA,IAAIY,KAAK,GAAGZ,QAAQ,CAACY,KAAK;MAC1B7C,KAAK,GAAG8C,QAAQ,CAACD,KAAK,CAAC7C,KAAK,EAAE,EAAE,CAAC;MACjCC,MAAM,GAAG6C,QAAQ,CAACD,KAAK,CAAC5C,MAAM,EAAE,EAAE,CAAC;MACnC,IAAI8C,MAAM,GAAGvB,KAAK,CAACM,GAAG,CAAC,OAAO,CAAC;MAC/B,IAAIkB,OAAO,GAAGxB,KAAK,CAACM,GAAG,CAAC,QAAQ,CAAC;MACjC,IAAI9B,KAAK,GAAG+C,MAAM,IAAI9C,MAAM,GAAG+C,OAAO,EAAE;QACtC;MACF;MACAP,IAAI,GAAGd,KAAK,CAACsB,OAAO,CAAC,CAAC;MACtBT,KAAK,GAAGhB,KAAK,CAACM,GAAG,CAAC,OAAO,CAAC;MAC1BO,QAAQ,GAAG,IAAI;MACfF,CAAC,GAAGQ,CAAC,CAACO,OAAO;MACbd,CAAC,GAAGO,CAAC,CAACQ,OAAO;IACf,CAAC,EAAE,KAAK,CAAC;IACTtB,YAAY,CAACa,gBAAgB,CAAC,WAAW,EAAE,UAAUC,CAAC,EAAE;MACtD,IAAI,CAACN,QAAQ,IAAItD,KAAK,CAAC4D,CAAC,CAACO,OAAO,CAAC,IAAInE,KAAK,CAAC4D,CAAC,CAACQ,OAAO,CAAC,EAAE;QACrD;MACF;MACA,IAAIJ,MAAM,GAAGvB,KAAK,CAACM,GAAG,CAAC,OAAO,CAAC;MAC/B,IAAIkB,OAAO,GAAGxB,KAAK,CAACM,GAAG,CAAC,QAAQ,CAAC;MACjC,IAAIe,KAAK,GAAGZ,QAAQ,CAACY,KAAK;MAC1BP,IAAI,GAAGQ,QAAQ,CAACD,KAAK,CAACP,IAAI,EAAE,EAAE,CAAC;MAC/BC,GAAG,GAAGO,QAAQ,CAACD,KAAK,CAACN,GAAG,EAAE,EAAE,CAAC;MAC7BvC,KAAK,GAAG8C,QAAQ,CAACD,KAAK,CAAC7C,KAAK,EAAE,EAAE,CAAC;MACjCC,MAAM,GAAG6C,QAAQ,CAACD,KAAK,CAAC5C,MAAM,EAAE,EAAE,CAAC;MACnC,IAAImD,EAAE,GAAGjB,CAAC,GAAGQ,CAAC,CAACO,OAAO;MACtB,IAAIG,EAAE,GAAGjB,CAAC,GAAGO,CAAC,CAACQ,OAAO;MACtB;MACA,IAAIb,IAAI,GAAGc,EAAE,GAAG,CAAC,EAAE;QACjBA,EAAE,GAAGd,IAAI;MACX,CAAC,MAAM,IAAIA,IAAI,GAAGc,EAAE,GAAGpD,KAAK,IAAI+C,MAAM,EAAE;QACtCK,EAAE,GAAG,CAAC;MACR;MACA;MACA,IAAIb,GAAG,GAAGc,EAAE,GAAG,CAAC,EAAE;QAChBA,EAAE,GAAGd,GAAG;MACV,CAAC,MAAM,IAAIA,GAAG,GAAGc,EAAE,GAAGpD,MAAM,IAAI+C,OAAO,EAAE;QACvCK,EAAE,GAAG,CAAC;MACR;MACAf,IAAI,IAAIc,EAAE;MACVb,GAAG,IAAIc,EAAE;MACT;MACArE,SAAS,CAACiD,QAAQ,EAAE;QAClBK,IAAI,EAAE,EAAE,CAACJ,MAAM,CAACI,IAAI,EAAE,IAAI,CAAC;QAC3BC,GAAG,EAAE,EAAE,CAACL,MAAM,CAACK,GAAG,EAAE,IAAI;MAC1B,CAAC,CAAC;MACF;MACAZ,KAAK,CAAC2B,SAAS,CAACF,EAAE,GAAGX,IAAI,GAAGD,KAAK,EAAEa,EAAE,GAAGZ,IAAI,GAAGD,KAAK,CAAC;MACrDL,CAAC,GAAGQ,CAAC,CAACO,OAAO;MACbd,CAAC,GAAGO,CAAC,CAACQ,OAAO;IACf,CAAC,EAAE,KAAK,CAAC;IACTtB,YAAY,CAACa,gBAAgB,CAAC,YAAY,EAAE,YAAY;MACtDL,QAAQ,GAAG,KAAK;MAChBZ,IAAI,CAACb,OAAO,GAAG,IAAI;IACrB,CAAC,EAAE,KAAK,CAAC;IACTiB,YAAY,CAACa,gBAAgB,CAAC,SAAS,EAAE,YAAY;MACnDL,QAAQ,GAAG,KAAK;MAChBZ,IAAI,CAACb,OAAO,GAAG,IAAI;IACrB,CAAC,EAAE,KAAK,CAAC;IACT,IAAI,CAACO,GAAG,CAAC,UAAU,EAAEc,QAAQ,CAAC;IAC9BJ,YAAY,CAAC0B,WAAW,CAACtB,QAAQ,CAAC;EACpC,CAAC;EACD;AACF;AACA;EACE/B,YAAY,CAAC7B,SAAS,CAACmF,cAAc,GAAG,YAAY;IAClD,IAAI,IAAI,CAAC5B,SAAS,EAAE;IACpB,IAAIY,KAAK,GAAG,IAAI,CAACV,GAAG,CAAC,OAAO,CAAC;IAC7B,IAAIiB,MAAM,GAAG,IAAI,CAACjB,GAAG,CAAC,OAAO,CAAC;IAC9B,IAAIkB,OAAO,GAAG,IAAI,CAAClB,GAAG,CAAC,QAAQ,CAAC;IAChC,IAAIH,KAAK,GAAG,IAAI,CAACG,GAAG,CAAC,OAAO,CAAC;IAC7B,IAAI2B,UAAU,GAAG9B,KAAK,CAACG,GAAG,CAAC,OAAO,CAAC;IACnC,IAAI4B,WAAW,GAAG/B,KAAK,CAACG,GAAG,CAAC,QAAQ,CAAC;IACrC,IAAI6B,WAAW,GAAGF,UAAU,GAAGC,WAAW;IAC1C,IAAIE,UAAU,GAAGjC,KAAK,CAACkC,QAAQ,CAAC,CAAC;IACjC;IACA,IAAIC,eAAe,GAAGF,UAAU,CAACG,aAAa,CAAC,CAAC;IAChD;IACA,IAAIC,mBAAmB,GAAG,CAAC,CAACF,eAAe,CAACG,IAAI,GAAGH,eAAe,CAACI,IAAI,IAAI,CAAC,EAAE,CAACJ,eAAe,CAACK,IAAI,GAAGL,eAAe,CAACM,IAAI,IAAI,CAAC,CAAC;IAChI,IAAIC,mBAAmB,GAAG,CAACP,eAAe,CAACI,IAAI,GAAGJ,eAAe,CAACG,IAAI,EAAEH,eAAe,CAACM,IAAI,GAAGN,eAAe,CAACK,IAAI,CAAC;IACpH,IAAIG,uBAAuB,GAAG;MAC5BC,OAAO,EAAEP,mBAAmB,CAAC,CAAC,CAAC;MAC/BQ,OAAO,EAAER,mBAAmB,CAAC,CAAC,CAAC;MAC/BhE,KAAK,EAAE,CAAC;MACRC,MAAM,EAAE,CAAC;MACTgE,IAAI,EAAE,CAAC;MACPE,IAAI,EAAE;IACR,CAAC;IACD,IAAIL,eAAe,CAAC,CAAC,CAAC,GAAGA,eAAe,CAAC,CAAC,CAAC,GAAGH,WAAW,EAAE;MACzDW,uBAAuB,CAACtE,KAAK,GAAGqE,mBAAmB,CAAC,CAAC,CAAC;MACtDC,uBAAuB,CAACrE,MAAM,GAAGqE,uBAAuB,CAACtE,KAAK,GAAG2D,WAAW;IAC9E,CAAC,MAAM;MACLW,uBAAuB,CAACrE,MAAM,GAAGoE,mBAAmB,CAAC,CAAC,CAAC;MACvDC,uBAAuB,CAACtE,KAAK,GAAGsE,uBAAuB,CAACrE,MAAM,GAAG0D,WAAW;IAC9E;IACAW,uBAAuB,CAACL,IAAI,GAAGD,mBAAmB,CAAC,CAAC,CAAC,GAAGM,uBAAuB,CAACtE,KAAK,GAAG,CAAC;IACzFsE,uBAAuB,CAACH,IAAI,GAAGH,mBAAmB,CAAC,CAAC,CAAC,GAAGM,uBAAuB,CAACrE,MAAM,GAAG,CAAC;IAC1F,IAAIwE,WAAW,GAAGb,UAAU,CAACc,SAAS,CAAC,CAAC;IACxC,IAAI,CAACD,WAAW,EAAEA,WAAW,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAC3D,IAAIE,iBAAiB,GAAGxF,IAAI,CAACyF,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAEH,WAAW,CAAC;IAC7E,IAAII,KAAK,GAAGzF,WAAW,CAAC;MACtB+C,CAAC,EAAEmC,uBAAuB,CAACL,IAAI;MAC/B7B,CAAC,EAAEkC,uBAAuB,CAACH;IAC7B,CAAC,EAAEQ,iBAAiB,CAAC;IACrB;IACA,IAAIG,OAAO,GAAGnD,KAAK,CAACoD,gBAAgB,CAACF,KAAK,CAAC1C,CAAC,EAAE0C,KAAK,CAACzC,CAAC,CAAC;IACtD,IAAIH,QAAQ,GAAG,IAAI,CAACH,GAAG,CAAC,UAAU,CAAC;IACnC,IAAI,CAACG,QAAQ,EAAE;MACb,IAAI,CAACV,YAAY,CAAC,CAAC;IACrB;IACA;IACA,IAAIyD,MAAM,GAAGvB,UAAU,GAAGa,uBAAuB,CAACtE,KAAK;IACvD;IACA,IAAIA,KAAK,GAAGgF,MAAM,GAAGjC,MAAM;IAC3B,IAAI9C,MAAM,GAAG+E,MAAM,GAAGhC,OAAO;IAC7B;IACA;IACA,IAAIV,IAAI,GAAGS,MAAM,GAAG,CAAC+B,OAAO,CAAC3C,CAAC,GAAGmC,uBAAuB,CAACtE,KAAK;IAC9D,IAAIuC,GAAG,GAAGS,OAAO,GAAG,CAAC8B,OAAO,CAAC1C,CAAC,GAAGkC,uBAAuB,CAACrE,MAAM;IAC/D,IAAIgF,KAAK,GAAG3C,IAAI,GAAGtC,KAAK;IACxB,IAAIkF,MAAM,GAAG3C,GAAG,GAAGtC,MAAM;IACzB,IAAIqC,IAAI,GAAG,CAAC,EAAE;MACZtC,KAAK,IAAIsC,IAAI;MACbA,IAAI,GAAG,CAAC;IACV;IACA,IAAI2C,KAAK,GAAGlC,MAAM,EAAE;MAClB/C,KAAK,GAAGA,KAAK,IAAIiF,KAAK,GAAGlC,MAAM,CAAC;IAClC;IACA,IAAIR,GAAG,GAAG,CAAC,EAAE;MACXtC,MAAM,IAAIsC,GAAG;MACbA,GAAG,GAAG,CAAC;IACT;IACA,IAAI2C,MAAM,GAAGlC,OAAO,EAAE;MACpB/C,MAAM,GAAGA,MAAM,IAAIiF,MAAM,GAAGlC,OAAO,CAAC;IACtC;IACA;IACA,IAAI,CAAC7B,GAAG,CAAC,OAAO,EAAEqB,KAAK,CAAC;IACxB,IAAI2C,WAAW,GAAG,EAAE,CAACjD,MAAM,CAACI,IAAI,EAAE,IAAI,CAAC;IACvC,IAAI8C,UAAU,GAAG,EAAE,CAAClD,MAAM,CAACK,GAAG,EAAE,IAAI,CAAC;IACrCvD,SAAS,CAACiD,QAAQ,EAAE;MAClBK,IAAI,EAAE6C,WAAW;MACjB5C,GAAG,EAAE6C,UAAU;MACfpF,KAAK,EAAE,EAAE,CAACkC,MAAM,CAAClC,KAAK,EAAE,IAAI,CAAC;MAC7BC,MAAM,EAAE,EAAE,CAACiC,MAAM,CAACjC,MAAM,EAAE,IAAI;IAChC,CAAC,CAAC;EACJ,CAAC;EACDC,YAAY,CAAC7B,SAAS,CAACgH,IAAI,GAAG,YAAY;IACxC,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC;EACD;AACF;AACA;EACEpF,YAAY,CAAC7B,SAAS,CAACiH,aAAa,GAAG,YAAY;IACjD,IAAIC,IAAI,GAAG,IAAI;IACf,IAAI5D,KAAK,GAAG4D,IAAI,CAACzD,GAAG,CAAC,OAAO,CAAC;IAC7B,IAAI2B,UAAU,GAAG9B,KAAK,CAACG,GAAG,CAAC,OAAO,CAAC;IACnC,IAAI4B,WAAW,GAAG/B,KAAK,CAACG,GAAG,CAAC,QAAQ,CAAC;IACrC,IAAI6B,WAAW,GAAGD,WAAW,GAAGD,UAAU;IAC1C,IAAIlD,SAAS,GAAGgF,IAAI,CAACzD,GAAG,CAAC,WAAW,CAAC;IACrC,IAAI0D,UAAU,GAAGD,IAAI,CAACzD,GAAG,CAAC,WAAW,CAAC;IACtC;IACA,IAAIiB,MAAM,GAAGwC,IAAI,CAACzD,GAAG,CAAC,OAAO,CAAC;IAC9B,IAAIkB,OAAO,GAAGuC,IAAI,CAACzD,GAAG,CAAC,QAAQ,CAAC;IAChC,IAAI,CAACiB,MAAM,IAAI,CAACC,OAAO,EAAE;MACvBD,MAAM,GAAG,GAAG;IACd;IACA,IAAIA,MAAM,EAAE;MACVC,OAAO,GAAGW,WAAW,GAAGZ,MAAM;MAC9BwC,IAAI,CAACpE,GAAG,CAAC,QAAQ,EAAE6B,OAAO,CAAC;IAC7B,CAAC,MAAM;MACLD,MAAM,GAAG,CAAC,GAAGY,WAAW,GAAGX,OAAO;MAClCuC,IAAI,CAACpE,GAAG,CAAC,OAAO,EAAE4B,MAAM,CAAC;IAC3B;IACA,IAAIzC,SAAS,GAAGrB,SAAS,CAAC,cAAc,CAACiD,MAAM,CAAC3B,SAAS,EAAE,kBAAkB,CAAC,CAAC2B,MAAM,CAACa,MAAM,EAAE,cAAc,CAAC,CAACb,MAAM,CAACc,OAAO,EAAE,mDAAmD,CAAC,CAAC;IACnL,IAAIlE,QAAQ,CAAC0G,UAAU,CAAC,EAAE;MACxBA,UAAU,GAAGzD,QAAQ,CAACC,cAAc,CAACwD,UAAU,CAAC;IAClD;IACA,IAAIA,UAAU,EAAE;MACdA,UAAU,CAACjC,WAAW,CAACjD,SAAS,CAAC;IACnC,CAAC,MAAM;MACLqB,KAAK,CAACG,GAAG,CAAC,WAAW,CAAC,CAACyB,WAAW,CAACjD,SAAS,CAAC;IAC/C;IACAiF,IAAI,CAACpE,GAAG,CAAC,WAAW,EAAEb,SAAS,CAAC;IAChC,IAAIuB,YAAY,GAAG5C,SAAS,CAAC,yIAAyI,CAAC;IACvKqB,SAAS,CAACiD,WAAW,CAAC1B,YAAY,CAAC;IACnC,IAAI4D,IAAI,GAAGxG,SAAS,CAAC,uEAAuE,CAAC;IAC7F4C,YAAY,CAAC0B,WAAW,CAACkC,IAAI,CAAC;IAC9BF,IAAI,CAACpE,GAAG,CAAC,cAAc,EAAEU,YAAY,CAAC;IACtC0D,IAAI,CAACpE,GAAG,CAAC,eAAe,EAAEsE,IAAI,CAAC;IAC/B,IAAInG,GAAG,GAAGL,SAAS,CAAC,sBAAsB,CAACiD,MAAM,CAAC,IAAI,CAACJ,GAAG,CAAC,UAAU,CAAC,EAAE,+EAA+E,CAAC,CAAC;IACzJyD,IAAI,CAACpE,GAAG,CAAC,QAAQ,EAAE7B,GAAG,CAAC;IACvBiG,IAAI,CAACG,aAAa,CAAC,CAAC;IACpBD,IAAI,CAAClC,WAAW,CAACjE,GAAG,CAAC;IACrBiG,IAAI,CAAClE,YAAY,CAAC,CAAC;EACrB,CAAC;EACDnB,YAAY,CAAC7B,SAAS,CAACqH,aAAa,GAAG,YAAY;IACjD,IAAIH,IAAI,GAAG,IAAI;IACf,IAAII,MAAM,GAAGJ,IAAI,CAACzD,GAAG,CAAC,QAAQ,CAAC;IAC/B,IAAIiB,MAAM,GAAGwC,IAAI,CAACzD,GAAG,CAAC,OAAO,CAAC;IAC9B,IAAIkB,OAAO,GAAGuC,IAAI,CAACzD,GAAG,CAAC,QAAQ,CAAC;IAChC6D,MAAM,CAAC5F,MAAM,GAAG,YAAY;MAC1B,IAAI6F,WAAW,GAAGvG,sBAAsB,CAACsG,MAAM,CAAC;MAChD,IAAIC,WAAW,CAAC,CAAC,CAAC,GAAGA,WAAW,CAAC,CAAC,CAAC,EAAE;QACnCD,MAAM,CAAC3F,KAAK,GAAG+C,MAAM;MACvB,CAAC,MAAM;QACL4C,MAAM,CAAC1F,MAAM,GAAG+C,OAAO;MACzB;IACF,CAAC;EACH,CAAC;EACD9C,YAAY,CAAC7B,SAAS,CAACgD,YAAY,GAAG,YAAY;IAChD;IACA,IAAIwE,SAAS,GAAG,IAAI,CAAC/D,GAAG,CAAC,SAAS,CAAC;IACnC,IAAI,CAAC+D,SAAS,EAAE;MACd;IACF;IACA,IAAIlE,KAAK,GAAG,IAAI,CAACG,GAAG,CAAC,OAAO,CAAC;IAC7B,IAAIH,KAAK,CAACG,GAAG,CAAC,WAAW,CAAC,EAAE;MAC1B;IACF;IACA;IACA,IAAI,IAAI,CAACA,GAAG,CAAC,gBAAgB,CAAC,EAAE;MAC9B,IAAI,CAACX,GAAG,CAAC,gBAAgB,EAAE,KAAK,CAAC;MACjC,IAAI,CAACqC,cAAc,CAAC,CAAC;IACvB;IACA,IAAIT,MAAM,GAAG,IAAI,CAACjB,GAAG,CAAC,OAAO,CAAC;IAC9B,IAAIgE,SAAS,GAAGnE,KAAK,CAACG,GAAG,CAAC,QAAQ,CAAC,CAACiC,aAAa,CAAC,CAAC;IACnD,IAAI/D,KAAK,GAAG8F,SAAS,CAAC9F,KAAK;IAC3B,IAAIwC,KAAK,GAAGO,MAAM,GAAG/C,KAAK;IAC1B;IACA,IAAI,CAACmB,GAAG,CAAC,OAAO,EAAEqB,KAAK,CAAC;IACxB,IAAI,CAACgB,cAAc,CAAC,CAAC;EACvB,CAAC;EACD;AACF;AACA;AACA;EACEtD,YAAY,CAAC7B,SAAS,CAAC0H,WAAW,GAAG,YAAY;IAC/C,OAAO,IAAI,CAACjE,GAAG,CAAC,UAAU,CAAC;EAC7B,CAAC;EACD;AACF;AACA;AACA;EACE5B,YAAY,CAAC7B,SAAS,CAAC2H,YAAY,GAAG,YAAY;IAChD,OAAO,IAAI,CAAClE,GAAG,CAAC,WAAW,CAAC;EAC9B,CAAC;EACD5B,YAAY,CAAC7B,SAAS,CAAC4H,cAAc,GAAG,UAAU3G,GAAG,EAAE;IACrD,IAAIiG,IAAI,GAAG,IAAI;IACf,IAAIW,SAAS,GAAGX,IAAI,CAACzD,GAAG,CAAC,QAAQ,CAAC;IAClCoE,SAAS,CAACC,MAAM,CAAC,CAAC;IAClBZ,IAAI,CAACpE,GAAG,CAAC,UAAU,EAAE7B,GAAG,CAAC;IACzB,IAAIqG,MAAM,GAAG1G,SAAS,CAAC,sBAAsB,CAACiD,MAAM,CAAC5C,GAAG,EAAE,qGAAqG,CAAC,CAAC;IACjKiG,IAAI,CAACpE,GAAG,CAAC,QAAQ,EAAEwE,MAAM,CAAC;IAC1BA,MAAM,CAAC7F,GAAG,GAAGR,GAAG;IAChBiG,IAAI,CAACG,aAAa,CAAC,CAAC;IACpB,IAAID,IAAI,GAAGF,IAAI,CAACzD,GAAG,CAAC,eAAe,CAAC;IACpC2D,IAAI,CAAClC,WAAW,CAACoC,MAAM,CAAC;IACxBJ,IAAI,CAAClE,YAAY,CAAC,CAAC;EACrB,CAAC;EACDnB,YAAY,CAAC7B,SAAS,CAAC+H,OAAO,GAAG,YAAY;IAC3C,IAAI9F,SAAS,GAAG,IAAI,CAACwB,GAAG,CAAC,WAAW,CAAC;IACrCxB,SAAS,CAACkF,UAAU,CAACa,WAAW,CAAC/F,SAAS,CAAC;EAC7C,CAAC;EACD,OAAOJ,YAAY;AACrB,CAAC,CAACrB,IAAI,CAAC;AACP,eAAeqB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}