{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __extends } from \"tslib\";\nimport { each } from '@antv/util';\nimport GridBase from './base';\nfunction distance(x1, y1, x2, y2) {\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n  return Math.sqrt(dx * dx + dy * dy);\n}\nvar Circle = /** @class */function (_super) {\n  __extends(Circle, _super);\n  function Circle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  Circle.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n    return __assign(__assign({}, cfg), {\n      type: 'circle',\n      /**\n       * 中心点\n       * @type {object}\n       */\n      center: null,\n      /**\n       * 栅格线是否封闭\n       * @type {true}\n       */\n      closed: true\n    });\n  };\n  Circle.prototype.getGridPath = function (points, reversed) {\n    var lineType = this.getLineType();\n    var closed = this.get('closed');\n    var path = [];\n    if (points.length) {\n      // 防止出错\n      if (lineType === 'circle') {\n        var center = this.get('center');\n        var firstPoint = points[0];\n        var radius_1 = distance(center.x, center.y, firstPoint.x, firstPoint.y);\n        var sweepFlag_1 = reversed ? 0 : 1; // 顺时针还是逆时针\n        if (closed) {\n          // 封闭时，绘制整个圆\n          path.push(['M', center.x, center.y - radius_1]);\n          path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y + radius_1]);\n          path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, center.x, center.y - radius_1]);\n          path.push(['Z']);\n        } else {\n          each(points, function (point, index) {\n            if (index === 0) {\n              path.push(['M', point.x, point.y]);\n            } else {\n              path.push(['A', radius_1, radius_1, 0, 0, sweepFlag_1, point.x, point.y]);\n            }\n          });\n        }\n      } else {\n        each(points, function (point, index) {\n          if (index === 0) {\n            path.push(['M', point.x, point.y]);\n          } else {\n            path.push(['L', point.x, point.y]);\n          }\n        });\n        if (closed) {\n          path.push(['Z']);\n        }\n      }\n    }\n    return path;\n  };\n  return Circle;\n}(GridBase);\nexport default Circle;","map":{"version":3,"names":["each","GridBase","distance","x1","y1","x2","y2","dx","dy","Math","sqrt","Circle","_super","__extends","prototype","getDefaultCfg","cfg","call","__assign","type","center","closed","getGridPath","points","reversed","lineType","getLineType","get","path","length","firstPoint","radius_1","x","y","sweepFlag_1","push","point","index"],"sources":["../../src/grid/circle.ts"],"sourcesContent":[null],"mappings":";;AAAA,SAASA,IAAI,QAAQ,YAAY;AAEjC,OAAOC,QAAQ,MAAM,QAAQ;AAE7B,SAASC,QAAQA,CAACC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;EAC9B,IAAMC,EAAE,GAAGF,EAAE,GAAGF,EAAE;EAClB,IAAMK,EAAE,GAAGF,EAAE,GAAGF,EAAE;EAClB,OAAOK,IAAI,CAACC,IAAI,CAACH,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE,CAAC;AACrC;AAEA,IAAAG,MAAA,0BAAAC,MAAA;EAAqBC,SAAA,CAAAF,MAAA,EAAAC,MAAA;EAArB,SAAAD,OAAA;;EA4DA;EA3DSA,MAAA,CAAAG,SAAA,CAAAC,aAAa,GAApB;IACE,IAAMC,GAAG,GAAGJ,MAAA,CAAAE,SAAA,CAAMC,aAAa,CAAAE,IAAA,MAAE;IACjC,OAAAC,QAAA,CAAAA,QAAA,KACKF,GAAG;MACNG,IAAI,EAAE,QAAQ;MACd;;;;MAIAC,MAAM,EAAE,IAAI;MACZ;;;;MAIAC,MAAM,EAAE;IAAI;EAEhB,CAAC;EAESV,MAAA,CAAAG,SAAA,CAAAQ,WAAW,GAArB,UAAsBC,MAAe,EAAEC,QAAiB;IACtD,IAAMC,QAAQ,GAAG,IAAI,CAACC,WAAW,EAAE;IACnC,IAAML,MAAM,GAAG,IAAI,CAACM,GAAG,CAAC,QAAQ,CAAC;IACjC,IAAMC,IAAI,GAAG,EAAE;IACf,IAAIL,MAAM,CAACM,MAAM,EAAE;MACjB;MACA,IAAIJ,QAAQ,KAAK,QAAQ,EAAE;QACzB,IAAML,MAAM,GAAG,IAAI,CAACO,GAAG,CAAC,QAAQ,CAAC;QACjC,IAAMG,UAAU,GAAGP,MAAM,CAAC,CAAC,CAAC;QAC5B,IAAMQ,QAAM,GAAG7B,QAAQ,CAACkB,MAAM,CAACY,CAAC,EAAEZ,MAAM,CAACa,CAAC,EAAEH,UAAU,CAACE,CAAC,EAAEF,UAAU,CAACG,CAAC,CAAC;QACvE,IAAMC,WAAS,GAAGV,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACpC,IAAIH,MAAM,EAAE;UACV;UACAO,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEf,MAAM,CAACY,CAAC,EAAEZ,MAAM,CAACa,CAAC,GAAGF,QAAM,CAAC,CAAC;UAC7CH,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEJ,QAAM,EAAEA,QAAM,EAAE,CAAC,EAAE,CAAC,EAAEG,WAAS,EAAEd,MAAM,CAACY,CAAC,EAAEZ,MAAM,CAACa,CAAC,GAAGF,QAAM,CAAC,CAAC;UAC9EH,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEJ,QAAM,EAAEA,QAAM,EAAE,CAAC,EAAE,CAAC,EAAEG,WAAS,EAAEd,MAAM,CAACY,CAAC,EAAEZ,MAAM,CAACa,CAAC,GAAGF,QAAM,CAAC,CAAC;UAC9EH,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;SACjB,MAAM;UACLnC,IAAI,CAACuB,MAAM,EAAE,UAACa,KAAK,EAAEC,KAAK;YACxB,IAAIA,KAAK,KAAK,CAAC,EAAE;cACfT,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEC,KAAK,CAACJ,CAAC,EAAEI,KAAK,CAACH,CAAC,CAAC,CAAC;aACnC,MAAM;cACLL,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEJ,QAAM,EAAEA,QAAM,EAAE,CAAC,EAAE,CAAC,EAAEG,WAAS,EAAEE,KAAK,CAACJ,CAAC,EAAEI,KAAK,CAACH,CAAC,CAAC,CAAC;;UAEvE,CAAC,CAAC;;OAEL,MAAM;QACLjC,IAAI,CAACuB,MAAM,EAAE,UAACa,KAAK,EAAEC,KAAK;UACxB,IAAIA,KAAK,KAAK,CAAC,EAAE;YACfT,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEC,KAAK,CAACJ,CAAC,EAAEI,KAAK,CAACH,CAAC,CAAC,CAAC;WACnC,MAAM;YACLL,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,EAAEC,KAAK,CAACJ,CAAC,EAAEI,KAAK,CAACH,CAAC,CAAC,CAAC;;QAEtC,CAAC,CAAC;QACF,IAAIZ,MAAM,EAAE;UACVO,IAAI,CAACO,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;;;;IAItB,OAAOP,IAAI;EACb,CAAC;EACH,OAAAjB,MAAC;AAAD,CAAC,CA5DoBV,QAAQ;AA8D7B,eAAeU,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}