{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n  var parent = request.parentRequest;\n  if (parent !== null) {\n    return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n  } else {\n    return false;\n  }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) {\n  return function (value) {\n    var constraint = function (request) {\n      return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n  };\n};\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) {\n  return function (request) {\n    var binding = null;\n    if (request !== null) {\n      binding = request.bindings[0];\n      if (typeof type === \"string\") {\n        var serviceIdentifier = binding.serviceIdentifier;\n        return serviceIdentifier === type;\n      } else {\n        var constructor = request.bindings[0].implementationType;\n        return type === constructor;\n      }\n    }\n    return false;\n  };\n};\nexports.typeConstraint = typeConstraint;","map":{"version":3,"names":["METADATA_KEY","require","metadata_1","traverseAncerstors","request","constraint","parent","parentRequest","exports","taggedConstraint","key","value","target","matchesTag","metaData","Metadata","namedConstraint","NAMED_TAG","typeConstraint","type","binding","bindings","serviceIdentifier","constructor","implementationType"],"sources":["../../src/syntax/constraint_helpers.ts"],"sourcesContent":[null],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAEA,IAAAC,UAAA,GAAAD,OAAA;AAEA,IAAME,kBAAkB,GAAG,SAAAA,CACvBC,OAA2B,EAC3BC,UAAyC;EAGzC,IAAMC,MAAM,GAAGF,OAAO,CAACG,aAAa;EACpC,IAAID,MAAM,KAAK,IAAI,EAAE;IACjB,OAAOD,UAAU,CAACC,MAAM,CAAC,GAAG,IAAI,GAAGH,kBAAkB,CAACG,MAAM,EAAED,UAAU,CAAC;GAC5E,MAAM;IACH,OAAO,KAAK;;AAEpB,CAAC;AAoCQG,OAAA,CAAAL,kBAAA,GAAAA,kBAAA;AAhCT,IAAMM,gBAAgB,GAAG,SAAAA,CAACC,GAA6B;EAAK,iBAACC,KAAU;IAEnE,IAAMN,UAAU,GAAmC,SAAAA,CAACD,OAAkC;MAClF,OAAAA,OAAO,KAAK,IAAI,IAAIA,OAAO,CAACQ,MAAM,KAAK,IAAI,IAAIR,OAAO,CAACQ,MAAM,CAACC,UAAU,CAACH,GAAG,CAAC,CAACC,KAAK,CAAC;IAApF,CAAoF;IAExFN,UAAU,CAACS,QAAQ,GAAG,IAAIZ,UAAA,CAAAa,QAAQ,CAACL,GAAG,EAAEC,KAAK,CAAC;IAE9C,OAAON,UAAU;EACrB,CAAC;AAR2D,CAQ3D;AAwB4BG,OAAA,CAAAC,gBAAA,GAAAA,gBAAA;AAtB7B,IAAMO,eAAe,GAAGP,gBAAgB,CAACT,YAAY,CAACiB,SAAS,CAAC;AAsBjBT,OAAA,CAAAQ,eAAA,GAAAA,eAAA;AApB/C,IAAME,cAAc,GAAG,SAAAA,CAACC,IAAyB;EAAK,iBAACf,OAAkC;IAIrF,IAAIgB,OAAO,GAAmC,IAAI;IAElD,IAAIhB,OAAO,KAAK,IAAI,EAAE;MAClBgB,OAAO,GAAGhB,OAAO,CAACiB,QAAQ,CAAC,CAAC,CAAC;MAC7B,IAAI,OAAOF,IAAI,KAAK,QAAQ,EAAE;QAC1B,IAAMG,iBAAiB,GAAGF,OAAO,CAACE,iBAAiB;QACnD,OAAOA,iBAAiB,KAAKH,IAAI;OACpC,MAAM;QACH,IAAMI,WAAW,GAAGnB,OAAO,CAACiB,QAAQ,CAAC,CAAC,CAAC,CAACG,kBAAkB;QAC1D,OAAOL,IAAI,KAAKI,WAAW;;;IAInC,OAAO,KAAK;EAChB,CAAC;AAlBqD,CAkBrD;AAE+Df,OAAA,CAAAU,cAAA,GAAAA,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}