{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.array.push.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Target = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = function () {\n  function Target(type, name, serviceIdentifier, namedOrTagged) {\n    this.id = id_1.id();\n    this.type = type;\n    this.serviceIdentifier = serviceIdentifier;\n    this.name = new queryable_string_1.QueryableString(name || \"\");\n    this.metadata = new Array();\n    var metadataItem = null;\n    if (typeof namedOrTagged === \"string\") {\n      metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n    } else if (namedOrTagged instanceof metadata_1.Metadata) {\n      metadataItem = namedOrTagged;\n    }\n    if (metadataItem !== null) {\n      this.metadata.push(metadataItem);\n    }\n  }\n  Target.prototype.hasTag = function (key) {\n    for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n      var m = _a[_i];\n      if (m.key === key) {\n        return true;\n      }\n    }\n    return false;\n  };\n  Target.prototype.isArray = function () {\n    return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n  };\n  Target.prototype.matchesArray = function (name) {\n    return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n  };\n  Target.prototype.isNamed = function () {\n    return this.hasTag(METADATA_KEY.NAMED_TAG);\n  };\n  Target.prototype.isTagged = function () {\n    return this.metadata.some(function (metadata) {\n      return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n        return metadata.key !== key;\n      });\n    });\n  };\n  Target.prototype.isOptional = function () {\n    return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n  };\n  Target.prototype.getNamedTag = function () {\n    if (this.isNamed()) {\n      return this.metadata.filter(function (m) {\n        return m.key === METADATA_KEY.NAMED_TAG;\n      })[0];\n    }\n    return null;\n  };\n  Target.prototype.getCustomTags = function () {\n    if (this.isTagged()) {\n      return this.metadata.filter(function (metadata) {\n        return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) {\n          return metadata.key !== key;\n        });\n      });\n    } else {\n      return null;\n    }\n  };\n  Target.prototype.matchesNamedTag = function (name) {\n    return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n  };\n  Target.prototype.matchesTag = function (key) {\n    var _this = this;\n    return function (value) {\n      for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n        var m = _a[_i];\n        if (m.key === key && m.value === value) {\n          return true;\n        }\n      }\n      return false;\n    };\n  };\n  return Target;\n}();\nexports.Target = Target;","map":{"version":3,"names":["METADATA_KEY","require","id_1","metadata_1","queryable_string_1","Target","type","name","serviceIdentifier","namedOrTagged","id","QueryableString","metadata","Array","metadataItem","Metadata","NAMED_TAG","push","prototype","hasTag","key","_i","_a","length","m","isArray","MULTI_INJECT_TAG","matchesArray","matchesTag","isNamed","isTagged","some","NON_CUSTOM_TAG_KEYS","every","isOptional","OPTIONAL_TAG","getNamedTag","filter","getCustomTags","matchesNamedTag","_this","value","exports"],"sources":["../../src/planning/target.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}