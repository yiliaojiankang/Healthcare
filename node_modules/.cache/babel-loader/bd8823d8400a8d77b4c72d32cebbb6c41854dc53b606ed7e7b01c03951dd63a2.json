{"ast":null,"code":"import _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"center\", \"zoom\", \"token\", \"mapInstance\", \"version\", \"mapSize\", \"minZoom\", \"maxZoom\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nimport { toPaddingOptions } from \"../utils/utils\";\nimport BMapGLLoader from \"./bmapglloader\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\".BMap_cpyCtrl .anchorBL {\\n  display: none !important;\\n}\\n\\n.anchorBL {\\n  display: none !important;\\n}\\n\");\nvar EventMap = {\n  mapmove: 'moving',\n  contextmenu: 'rightclick',\n  camerachange: 'update',\n  zoomchange: 'zoomend'\n};\nvar BMAP_API_KEY = 'zLhopYPPERGtpGOgimcdKcCimGRyyIsh';\nvar BMAP_VERSION = '1.0';\nvar BMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(BMapService, _BaseMapService);\n  var _super = _createSuper(BMapService);\n  function BMapService() {\n    var _this;\n    _classCallCheck(this, BMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"styleConfig\", {\n      normal: []\n    });\n    _defineProperty(_assertThisInitialized(_this), \"currentStyle\", 'normal');\n    // 事件回调代理\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      _this.emit('mapchange');\n      var map = _this.getMap();\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng, lat],\n        viewportHeight: map.getContainer().clientHeight,\n        viewportWidth: map.getContainer().clientWidth,\n        bearing: 360 - map.getHeading(),\n        pitch: map.getTilt(),\n        zoom: map.getZoom() - 1.75\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(BMapService, [{\n    key: \"getMap\",\n    value: function getMap() {\n      return this.map;\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n        var _this$config, id, _this$config$center, center, _this$config$zoom, zoom, _this$config$token, token, mapInstance, _this$config$version, version, _this$config$mapSize, mapSize, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, rest, point, mapConstructorOptions, mapContainer, mapChildNodes, map, _point;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n              _this$config = this.config, id = _this$config.id, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$zoom = _this$config.zoom, zoom = _this$config$zoom === void 0 ? 12 : _this$config$zoom, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? BMAP_API_KEY : _this$config$token, mapInstance = _this$config.mapInstance, _this$config$version = _this$config.version, version = _this$config$version === void 0 ? BMAP_VERSION : _this$config$version, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 0 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 21 : _this$config$maxZoom, rest = _objectWithoutProperties(_this$config, _excluded);\n              this.viewport = new Viewport();\n              this.version = version;\n              this.simpleMapCoord.setSize(mapSize);\n              if (window.BMapGL || mapInstance) {\n                _context.next = 8;\n                break;\n              }\n              _context.next = 8;\n              return BMapGLLoader.load({\n                key: token,\n                // 申请好的Web端开发者Key，首次调用 load 时必填\n                version: BMAP_VERSION // 指定要加载的 JSAPI 的gl版本，缺省时默认为 1.0\n              });\n\n            case 8:\n              if (!mapInstance) {\n                _context.next = 17;\n                break;\n              }\n              // @ts-ignore\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getContainer();\n              point = new BMapGL.Point(center[0], center[1]); // false，表示用户未执行centerAndZoom进行地图初始渲染\n              // @ts-ignore\n              if (!this.map.isLoaded()) {\n                this.map.centerAndZoom(point, zoom);\n              }\n              this.initMapByConfig(this.config);\n              this.map.on('update', this.handleCameraChanged);\n              _context.next = 32;\n              break;\n            case 17:\n              mapConstructorOptions = _objectSpread({\n                enableWheelZoom: true,\n                minZoom: minZoom,\n                maxZoom: maxZoom\n              }, rest);\n              if (token === BMAP_API_KEY) {\n                console.warn(\"%c\".concat(this.configService.getSceneWarninfo('MapToken'), \"!\"), 'color: #873bf4;font-weigh:900;font-size: 16px;');\n              }\n              if (id) {\n                _context.next = 21;\n                break;\n              }\n              throw Error('No container id specified');\n            case 21:\n              mapContainer = DOM.getContainer(id); // 存储控件等容器，百度地图实例会被卸载掉，所以实例化后需要重新挂载\n              // @ts-ignore\n              mapChildNodes = _toConsumableArray(mapContainer.childNodes); // @ts-ignore\n              map = new BMapGL.Map(mapContainer, mapConstructorOptions);\n              this.$mapContainer = map.getContainer();\n              mapChildNodes.forEach(function (child) {\n                _this2.$mapContainer.appendChild(child);\n              });\n              // @ts-ignore\n              mapChildNodes = null;\n\n              // @ts-ignore\n              this.map = map;\n              _point = new BMapGL.Point(center[0], center[1]);\n              this.map.centerAndZoom(_point, zoom);\n              this.initMapByConfig(this.config);\n              // 监听地图相机事件\n              // @ts-ignore\n              map.on('update', this.handleCameraChanged);\n            case 32:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.getMap().destroy();\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n\n    // tslint:disable-next-line:no-empty\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {}\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.map.getPanes().markerPane;\n    }\n\n    // MapEvent // 定义事件类型\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n        return;\n      }\n      var cbProxyMap = this.evtCbProxyMap.get(type);\n      if (!cbProxyMap) {\n        this.evtCbProxyMap.set(type, cbProxyMap = new Map());\n      }\n\n      // 忽略重复监听回调\n      if (cbProxyMap.get(handle)) {\n        return;\n      }\n\n      // 对事件对象的经纬度进行统一处理l7需要的\n      var handleProxy = function handleProxy() {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n          args[0].lngLat = args[0].latlng || args[0].latLng;\n        }\n        handle.apply(void 0, args);\n      };\n      cbProxyMap.set(handle, handleProxy);\n      this.map.on(EventMap[type] || type, handleProxy);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this$evtCbProxyMap$g, _this$evtCbProxyMap$g2;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var handleProxy = (_this$evtCbProxyMap$g = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g === void 0 ? void 0 : _this$evtCbProxyMap$g.get(handle);\n      if (!handleProxy) {\n        return;\n      }\n      (_this$evtCbProxyMap$g2 = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g2 === void 0 || _this$evtCbProxyMap$g2.delete(handle);\n      this.map.off(EventMap[type] || type, handleProxy);\n    }\n  }, {\n    key: \"once\",\n    value: function once(type, handler) {\n      this.eventEmitter.once(type, handler);\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      var size = this.getMap().getSize();\n      return [size.width, size.height];\n    }\n    // 百度地图缩放等级\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.map.getMinZoom();\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.map.getMaxZoom();\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'bmap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.getMap().getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(options) {\n      if (options !== null && options !== void 0 && options.padding) {\n        var originCenter = this.getCenter();\n        var padding = toPaddingOptions(options.padding);\n        var px = this.lngLatToPixel([originCenter.lng, originCenter.lat]);\n        var offsetPx = [(padding.right - padding.left) / 2, (padding.bottom - padding.top) / 2];\n        var newCenter = this.pixelToLngLat([px.x - offsetPx[0], px.y - offsetPx[1]]);\n        return newCenter;\n      }\n      var center = this.map.getCenter();\n      return {\n        lng: center.lng,\n        lat: center.lat\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.getMap().getTilt();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return 360 - this.getMap().getHeading();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var bounds = this.getMap().getBounds();\n      var ne = bounds.getNorthEast();\n      var sw = bounds.getSouthWest();\n      return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      return this.styleConfig;\n    }\n  }, {\n    key: \"getMapStyleValue\",\n    value: function getMapStyleValue(name) {\n      return this.styleConfig[name];\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(style) {\n      if (this.currentStyle === style) {\n        return;\n      }\n      var styleVal = Array.isArray(style) ? style : this.styleConfig[style] || style;\n      if (Array.isArray(styleVal)) {\n        this.map.setMapStyleV2({\n          styleJson: styleVal\n        });\n        this.currentStyle = style;\n        return;\n      }\n      if (typeof styleVal === 'string') {\n        this.map.setMapStyleV2({\n          styleId: styleVal\n        });\n        this.currentStyle = style;\n        return;\n      }\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.getMap().setHeading(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.getMap().zoomIn();\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.getMap().zoomOut();\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(p) {\n      this.getMap().panTo(new BMapGL.Point(p[0], p[1]));\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.getMap().panBy(x, y);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      this.map.setViewport(bound.map(function (item) {\n        return new BMapGL.Point(item[0], item[1]);\n      }), fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.getMap().centerAndZoom(new BMapGL.Point(lng, lat), zoom + 1.75);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref3, options) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      var newCenter = {\n        lng: lng,\n        lat: lat\n      };\n      if (options !== null && options !== void 0 && options.padding) {\n        var padding = toPaddingOptions(options.padding);\n        var px = this.lngLatToPixel([lng, lat]);\n        var offsetPx = [(padding.right - padding.left) / 2, (padding.bottom - padding.top) / 2];\n        newCenter = this.pixelToLngLat([px.x + offsetPx[0], px.y + offsetPx[1]]);\n      }\n      this.getMap().setCenter(new BMapGL.Point(newCenter.lng, newCenter.lat));\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.getMap().setTilt(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.getMap().setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this3 = this;\n      var map = this.getMap();\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            option.doubleClickZoom ? map.enableDoubleClickZoom() : map.disableDoubleClickZoom();\n            break;\n          case 'dragEnable':\n            option.dragEnable ? map.enableDragging() : map.disableDragging();\n            break;\n          case 'keyboardEnable':\n            option.keyboardEnable ? map.enableKeyboard() : map.disableKeyboard();\n            break;\n          case 'resizeEnable':\n            option.resizeEnable ? map.enableAutoResize() : map.disableAutoResize();\n            break;\n          case 'rotateEnable':\n            if (option.rotateEnable) {\n              map.enableRotate();\n              map.enableRotateGestures();\n            } else {\n              map.disableRotate();\n              map.disableRotateGestures();\n            }\n            break;\n          case 'zoomEnable':\n            if (option.zoomEnable) {\n              _this3.map.enableDoubleClickZoom();\n              _this3.map.enableScrollWheelZoom();\n              _this3.map.enablePinchToZoom();\n            } else {\n              _this3.map.disableDoubleClickZoom();\n              _this3.map.disableScrollWheelZoom();\n              _this3.map.disablePinchToZoom();\n            }\n            break;\n          case 'showIndoorMap':\n            map.setDisplayOptions({\n              indoor: !!option.showIndoorMap\n            });\n            break;\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(center, outer) {\n      var metreDistance = this.getMap().getDistance(_construct(BMapGL.Point, _toConsumableArray(center)), _construct(BMapGL.Point, _toConsumableArray(outer)));\n      var _this$lngLatToCoord = this.lngLatToCoord(center),\n        _this$lngLatToCoord2 = _slicedToArray(_this$lngLatToCoord, 2),\n        x1 = _this$lngLatToCoord2[0],\n        y1 = _this$lngLatToCoord2[1];\n      var _this$lngLatToCoord3 = this.lngLatToCoord(outer),\n        _this$lngLatToCoord4 = _slicedToArray(_this$lngLatToCoord3, 2),\n        x2 = _this$lngLatToCoord4[0],\n        y2 = _this$lngLatToCoord4[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        x = _ref6[0],\n        y = _ref6[1];\n      var lngLat = this.getMap().pixelToPoint(new BMapGL.Pixel(x, y));\n      return {\n        lng: lngLat.lng,\n        lat: lngLat.lat\n      };\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 2),\n        lng = _ref8[0],\n        lat = _ref8[1];\n      var pixel = this.getMap().pointToPixel(new BMapGL.Point(lng, lat));\n      return {\n        x: pixel.x,\n        y: pixel.y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref9) {\n      var _ref10 = _slicedToArray(_ref9, 2),\n        x = _ref10[0],\n        y = _ref10[1];\n      var point = this.getMap().overlayPixelToPoint(new BMapGL.Pixel(x, y));\n      return {\n        lng: point.lng,\n        lat: point.lat\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref11) {\n      var _ref12 = _slicedToArray(_ref11, 2),\n        lng = _ref12[0],\n        lat = _ref12[1];\n      var overlayPixel = this.getMap().pointToOverlayPixel(new BMapGL.Point(lng, lat));\n      return {\n        x: overlayPixel.x,\n        y: overlayPixel.y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref13) {\n      var _ref14 = _slicedToArray(_ref13, 2),\n        lng = _ref14[0],\n        lat = _ref14[1];\n      var _this$getMap$pointToP = this.getMap().pointToPixel(new BMapGL.Point(lng, lat)),\n        x = _this$getMap$pointToP.x,\n        y = _this$getMap$pointToP.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this4 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this4.lngLatToCoords(item) : _this4.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(_ref15, altitude) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        lng = _ref16[0],\n        lat = _ref16[1];\n      var _this$getMap$lnglatTo = this.getMap().lnglatToMercator(lng, lat),\n        _this$getMap$lnglatTo2 = _slicedToArray(_this$getMap$lnglatTo, 2),\n        McLng = _this$getMap$lnglatTo2[0],\n        McLat = _this$getMap$lnglatTo2[1];\n      return {\n        x: McLng,\n        y: McLat,\n        z: altitude\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMap()._webglPainter._canvas;\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getContainer();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'bmap-contianer--hide-logo');\n    }\n  }, {\n    key: \"initMapByConfig\",\n    value: function initMapByConfig(config) {\n      var style = config.style,\n        _config$pitch = config.pitch,\n        pitch = _config$pitch === void 0 ? 0 : _config$pitch,\n        _config$rotation = config.rotation,\n        rotation = _config$rotation === void 0 ? 0 : _config$rotation,\n        _config$logoVisible = config.logoVisible,\n        logoVisible = _config$logoVisible === void 0 ? true : _config$logoVisible;\n      if (style) {\n        this.setMapStyle(style);\n      }\n      if (pitch) {\n        this.setPitch(pitch);\n      }\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n      if (logoVisible === false) {\n        this.hideLogo();\n      }\n    }\n  }]);\n  return BMapService;\n}(BaseMapService);\nexport { BMapService as default };","map":{"version":3,"names":["_construct","_slicedToArray","_typeof","_toConsumableArray","_objectSpread","_objectWithoutProperties","_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_excluded","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","MapServiceEvent","DOM","mat4","vec3","BaseMapService","Viewport","toPaddingOptions","BMapGLLoader","loadStyles","css","doc","isMiniAli","my","showToast","isFRM","isWeChatMiniProgram","wx","request","miniProgram","document","head","getElementsByTagName","createElement","body","parentNode","insertBefore","documentElement","appendChild","style","type","styleSheet","cssText","createTextNode","EventMap","mapmove","contextmenu","camerachange","zoomchange","BMAP_API_KEY","BMAP_VERSION","BMapService","_BaseMapService","_super","_this","_len","length","args","Array","_key","concat","normal","Map","emit","map","getMap","_map$getCenter","getCenter","lng","lat","option","center","viewportHeight","getContainer","clientHeight","viewportWidth","clientWidth","bearing","getHeading","pitch","getTilt","zoom","getZoom","viewport","syncWithMapCamera","updateCoordinateSystemService","cameraChangedCallback","key","value","setBgColor","color","bgColor","_init","mark","_callee","_this2","_this$config","id","_this$config$center","_this$config$zoom","_this$config$token","token","mapInstance","_this$config$version","version","_this$config$mapSize","mapSize","_this$config$minZoom","minZoom","_this$config$maxZoom","maxZoom","rest","point","mapConstructorOptions","mapContainer","mapChildNodes","_point","wrap","_callee$","_context","prev","next","config","simpleMapCoord","setSize","window","BMapGL","load","$mapContainer","Point","isLoaded","centerAndZoom","initMapByConfig","on","handleCameraChanged","enableWheelZoom","console","warn","configService","getSceneWarninfo","Error","childNodes","forEach","child","stop","init","destroy","onCameraChanged","callback","addMarkerContainer","getMarkerContainer","getPanes","markerPane","handle","indexOf","eventEmitter","cbProxyMap","evtCbProxyMap","get","set","handleProxy","_len2","_key2","lngLat","lnglat","latlng","latLng","off","_this$evtCbProxyMap$g","_this$evtCbProxyMap$g2","delete","once","handler","getSize","size","width","height","getMinZoom","getMaxZoom","getType","options","padding","originCenter","px","lngLatToPixel","offsetPx","right","left","bottom","top","newCenter","pixelToLngLat","x","y","getPitch","getRotation","getBounds","bounds","ne","getNorthEast","sw","getSouthWest","getMapContainer","getMapCanvasContainer","getMapStyleConfig","styleConfig","getMapStyleValue","name","setMapStyle","currentStyle","styleVal","isArray","setMapStyleV2","styleJson","styleId","setRotation","rotation","setHeading","zoomIn","zoomOut","panTo","p","panBy","fitBounds","bound","fitBoundsOptions","setViewport","item","setZoomAndCenter","_ref","_ref2","setCenter","_ref3","_ref4","setPitch","setTilt","setZoom","setMapStatus","_this3","Object","keys","status","doubleClickZoom","enableDoubleClickZoom","disableDoubleClickZoom","dragEnable","enableDragging","disableDragging","keyboardEnable","enableKeyboard","disableKeyboard","resizeEnable","enableAutoResize","disableAutoResize","rotateEnable","enableRotate","enableRotateGestures","disableRotate","disableRotateGestures","zoomEnable","enableScrollWheelZoom","enablePinchToZoom","disableScrollWheelZoom","disablePinchToZoom","setDisplayOptions","indoor","showIndoorMap","meterToCoord","outer","metreDistance","getDistance","_this$lngLatToCoord","lngLatToCoord","_this$lngLatToCoord2","x1","y1","_this$lngLatToCoord3","_this$lngLatToCoord4","x2","y2","coordDistance","Math","sqrt","pow","_ref5","_ref6","pixelToPoint","Pixel","_ref7","_ref8","pixel","pointToPixel","containerToLngLat","_ref9","_ref10","overlayPixelToPoint","lngLatToContainer","_ref11","_ref12","overlayPixel","pointToOverlayPixel","_ref13","_ref14","_this$getMap$pointToP","lngLatToCoords","list","_this4","lngLatToMercator","_ref15","altitude","_ref16","_this$getMap$lnglatTo","lnglatToMercator","_this$getMap$lnglatTo2","McLng","McLat","z","getModelMatrix","rotate","scale","undefined","flat","projectFlat","modelMatrix","create","translate","fromValues","rotateX","rotateY","rotateZ","getCustomCoordCenter","exportMap","renderCanvas","_webglPainter","_canvas","layersPng","toDataURL","hideLogo","container","addClass","_config$pitch","_config$rotation","_config$logoVisible","logoVisible","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-maps/es/bmap/map.js"],"sourcesContent":["import _construct from \"@babel/runtime/helpers/esm/construct\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"center\", \"zoom\", \"token\", \"mapInstance\", \"version\", \"mapSize\", \"minZoom\", \"maxZoom\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nimport { toPaddingOptions } from \"../utils/utils\";\nimport BMapGLLoader from \"./bmapglloader\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\".BMap_cpyCtrl .anchorBL {\\n  display: none !important;\\n}\\n\\n.anchorBL {\\n  display: none !important;\\n}\\n\");\nvar EventMap = {\n  mapmove: 'moving',\n  contextmenu: 'rightclick',\n  camerachange: 'update',\n  zoomchange: 'zoomend'\n};\nvar BMAP_API_KEY = 'zLhopYPPERGtpGOgimcdKcCimGRyyIsh';\nvar BMAP_VERSION = '1.0';\nvar BMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(BMapService, _BaseMapService);\n  var _super = _createSuper(BMapService);\n  function BMapService() {\n    var _this;\n    _classCallCheck(this, BMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"styleConfig\", {\n      normal: []\n    });\n    _defineProperty(_assertThisInitialized(_this), \"currentStyle\", 'normal');\n    // 事件回调代理\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      _this.emit('mapchange');\n      var map = _this.getMap();\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng, lat],\n        viewportHeight: map.getContainer().clientHeight,\n        viewportWidth: map.getContainer().clientWidth,\n        bearing: 360 - map.getHeading(),\n        pitch: map.getTilt(),\n        zoom: map.getZoom() - 1.75\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(BMapService, [{\n    key: \"getMap\",\n    value: function getMap() {\n      return this.map;\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n        var _this$config, id, _this$config$center, center, _this$config$zoom, zoom, _this$config$token, token, mapInstance, _this$config$version, version, _this$config$mapSize, mapSize, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, rest, point, mapConstructorOptions, mapContainer, mapChildNodes, map, _point;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n              _this$config = this.config, id = _this$config.id, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$zoom = _this$config.zoom, zoom = _this$config$zoom === void 0 ? 12 : _this$config$zoom, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? BMAP_API_KEY : _this$config$token, mapInstance = _this$config.mapInstance, _this$config$version = _this$config.version, version = _this$config$version === void 0 ? BMAP_VERSION : _this$config$version, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 0 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 21 : _this$config$maxZoom, rest = _objectWithoutProperties(_this$config, _excluded);\n              this.viewport = new Viewport();\n              this.version = version;\n              this.simpleMapCoord.setSize(mapSize);\n              if (window.BMapGL || mapInstance) {\n                _context.next = 8;\n                break;\n              }\n              _context.next = 8;\n              return BMapGLLoader.load({\n                key: token,\n                // 申请好的Web端开发者Key，首次调用 load 时必填\n                version: BMAP_VERSION // 指定要加载的 JSAPI 的gl版本，缺省时默认为 1.0\n              });\n            case 8:\n              if (!mapInstance) {\n                _context.next = 17;\n                break;\n              }\n              // @ts-ignore\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getContainer();\n              point = new BMapGL.Point(center[0], center[1]); // false，表示用户未执行centerAndZoom进行地图初始渲染\n              // @ts-ignore\n              if (!this.map.isLoaded()) {\n                this.map.centerAndZoom(point, zoom);\n              }\n              this.initMapByConfig(this.config);\n              this.map.on('update', this.handleCameraChanged);\n              _context.next = 32;\n              break;\n            case 17:\n              mapConstructorOptions = _objectSpread({\n                enableWheelZoom: true,\n                minZoom: minZoom,\n                maxZoom: maxZoom\n              }, rest);\n              if (token === BMAP_API_KEY) {\n                console.warn(\"%c\".concat(this.configService.getSceneWarninfo('MapToken'), \"!\"), 'color: #873bf4;font-weigh:900;font-size: 16px;');\n              }\n              if (id) {\n                _context.next = 21;\n                break;\n              }\n              throw Error('No container id specified');\n            case 21:\n              mapContainer = DOM.getContainer(id); // 存储控件等容器，百度地图实例会被卸载掉，所以实例化后需要重新挂载\n              // @ts-ignore\n              mapChildNodes = _toConsumableArray(mapContainer.childNodes); // @ts-ignore\n              map = new BMapGL.Map(mapContainer, mapConstructorOptions);\n              this.$mapContainer = map.getContainer();\n              mapChildNodes.forEach(function (child) {\n                _this2.$mapContainer.appendChild(child);\n              });\n              // @ts-ignore\n              mapChildNodes = null;\n\n              // @ts-ignore\n              this.map = map;\n              _point = new BMapGL.Point(center[0], center[1]);\n              this.map.centerAndZoom(_point, zoom);\n              this.initMapByConfig(this.config);\n              // 监听地图相机事件\n              // @ts-ignore\n              map.on('update', this.handleCameraChanged);\n            case 32:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.getMap().destroy();\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n\n    // tslint:disable-next-line:no-empty\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {}\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.map.getPanes().markerPane;\n    }\n\n    // MapEvent // 定义事件类型\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n        return;\n      }\n      var cbProxyMap = this.evtCbProxyMap.get(type);\n      if (!cbProxyMap) {\n        this.evtCbProxyMap.set(type, cbProxyMap = new Map());\n      }\n\n      // 忽略重复监听回调\n      if (cbProxyMap.get(handle)) {\n        return;\n      }\n\n      // 对事件对象的经纬度进行统一处理l7需要的\n      var handleProxy = function handleProxy() {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n          args[0].lngLat = args[0].latlng || args[0].latLng;\n        }\n        handle.apply(void 0, args);\n      };\n      cbProxyMap.set(handle, handleProxy);\n      this.map.on(EventMap[type] || type, handleProxy);\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this$evtCbProxyMap$g, _this$evtCbProxyMap$g2;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var handleProxy = (_this$evtCbProxyMap$g = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g === void 0 ? void 0 : _this$evtCbProxyMap$g.get(handle);\n      if (!handleProxy) {\n        return;\n      }\n      (_this$evtCbProxyMap$g2 = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g2 === void 0 || _this$evtCbProxyMap$g2.delete(handle);\n      this.map.off(EventMap[type] || type, handleProxy);\n    }\n  }, {\n    key: \"once\",\n    value: function once(type, handler) {\n      this.eventEmitter.once(type, handler);\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      var size = this.getMap().getSize();\n      return [size.width, size.height];\n    }\n    // 百度地图缩放等级\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      return this.map.getMinZoom();\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      return this.map.getMaxZoom();\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'bmap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.getMap().getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter(options) {\n      if (options !== null && options !== void 0 && options.padding) {\n        var originCenter = this.getCenter();\n        var padding = toPaddingOptions(options.padding);\n        var px = this.lngLatToPixel([originCenter.lng, originCenter.lat]);\n        var offsetPx = [(padding.right - padding.left) / 2, (padding.bottom - padding.top) / 2];\n        var newCenter = this.pixelToLngLat([px.x - offsetPx[0], px.y - offsetPx[1]]);\n        return newCenter;\n      }\n      var center = this.map.getCenter();\n      return {\n        lng: center.lng,\n        lat: center.lat\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.getMap().getTilt();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return 360 - this.getMap().getHeading();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var bounds = this.getMap().getBounds();\n      var ne = bounds.getNorthEast();\n      var sw = bounds.getSouthWest();\n      return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      return this.getMap().getContainer();\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      return this.styleConfig;\n    }\n  }, {\n    key: \"getMapStyleValue\",\n    value: function getMapStyleValue(name) {\n      return this.styleConfig[name];\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(style) {\n      if (this.currentStyle === style) {\n        return;\n      }\n      var styleVal = Array.isArray(style) ? style : this.styleConfig[style] || style;\n      if (Array.isArray(styleVal)) {\n        this.map.setMapStyleV2({\n          styleJson: styleVal\n        });\n        this.currentStyle = style;\n        return;\n      }\n      if (typeof styleVal === 'string') {\n        this.map.setMapStyleV2({\n          styleId: styleVal\n        });\n        this.currentStyle = style;\n        return;\n      }\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.getMap().setHeading(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.getMap().zoomIn();\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.getMap().zoomOut();\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(p) {\n      this.getMap().panTo(new BMapGL.Point(p[0], p[1]));\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.getMap().panBy(x, y);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      this.map.setViewport(bound.map(function (item) {\n        return new BMapGL.Point(item[0], item[1]);\n      }), fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.getMap().centerAndZoom(new BMapGL.Point(lng, lat), zoom + 1.75);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref3, options) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      var newCenter = {\n        lng: lng,\n        lat: lat\n      };\n      if (options !== null && options !== void 0 && options.padding) {\n        var padding = toPaddingOptions(options.padding);\n        var px = this.lngLatToPixel([lng, lat]);\n        var offsetPx = [(padding.right - padding.left) / 2, (padding.bottom - padding.top) / 2];\n        newCenter = this.pixelToLngLat([px.x + offsetPx[0], px.y + offsetPx[1]]);\n      }\n      this.getMap().setCenter(new BMapGL.Point(newCenter.lng, newCenter.lat));\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.getMap().setTilt(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.getMap().setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this3 = this;\n      var map = this.getMap();\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            option.doubleClickZoom ? map.enableDoubleClickZoom() : map.disableDoubleClickZoom();\n            break;\n          case 'dragEnable':\n            option.dragEnable ? map.enableDragging() : map.disableDragging();\n            break;\n          case 'keyboardEnable':\n            option.keyboardEnable ? map.enableKeyboard() : map.disableKeyboard();\n            break;\n          case 'resizeEnable':\n            option.resizeEnable ? map.enableAutoResize() : map.disableAutoResize();\n            break;\n          case 'rotateEnable':\n            if (option.rotateEnable) {\n              map.enableRotate();\n              map.enableRotateGestures();\n            } else {\n              map.disableRotate();\n              map.disableRotateGestures();\n            }\n            break;\n          case 'zoomEnable':\n            if (option.zoomEnable) {\n              _this3.map.enableDoubleClickZoom();\n              _this3.map.enableScrollWheelZoom();\n              _this3.map.enablePinchToZoom();\n            } else {\n              _this3.map.disableDoubleClickZoom();\n              _this3.map.disableScrollWheelZoom();\n              _this3.map.disablePinchToZoom();\n            }\n            break;\n          case 'showIndoorMap':\n            map.setDisplayOptions({\n              indoor: !!option.showIndoorMap\n            });\n            break;\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(center, outer) {\n      var metreDistance = this.getMap().getDistance(_construct(BMapGL.Point, _toConsumableArray(center)), _construct(BMapGL.Point, _toConsumableArray(outer)));\n      var _this$lngLatToCoord = this.lngLatToCoord(center),\n        _this$lngLatToCoord2 = _slicedToArray(_this$lngLatToCoord, 2),\n        x1 = _this$lngLatToCoord2[0],\n        y1 = _this$lngLatToCoord2[1];\n      var _this$lngLatToCoord3 = this.lngLatToCoord(outer),\n        _this$lngLatToCoord4 = _slicedToArray(_this$lngLatToCoord3, 2),\n        x2 = _this$lngLatToCoord4[0],\n        y2 = _this$lngLatToCoord4[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        x = _ref6[0],\n        y = _ref6[1];\n      var lngLat = this.getMap().pixelToPoint(new BMapGL.Pixel(x, y));\n      return {\n        lng: lngLat.lng,\n        lat: lngLat.lat\n      };\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref7) {\n      var _ref8 = _slicedToArray(_ref7, 2),\n        lng = _ref8[0],\n        lat = _ref8[1];\n      var pixel = this.getMap().pointToPixel(new BMapGL.Point(lng, lat));\n      return {\n        x: pixel.x,\n        y: pixel.y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref9) {\n      var _ref10 = _slicedToArray(_ref9, 2),\n        x = _ref10[0],\n        y = _ref10[1];\n      var point = this.getMap().overlayPixelToPoint(new BMapGL.Pixel(x, y));\n      return {\n        lng: point.lng,\n        lat: point.lat\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref11) {\n      var _ref12 = _slicedToArray(_ref11, 2),\n        lng = _ref12[0],\n        lat = _ref12[1];\n      var overlayPixel = this.getMap().pointToOverlayPixel(new BMapGL.Point(lng, lat));\n      return {\n        x: overlayPixel.x,\n        y: overlayPixel.y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref13) {\n      var _ref14 = _slicedToArray(_ref13, 2),\n        lng = _ref14[0],\n        lat = _ref14[1];\n      var _this$getMap$pointToP = this.getMap().pointToPixel(new BMapGL.Point(lng, lat)),\n        x = _this$getMap$pointToP.x,\n        y = _this$getMap$pointToP.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this4 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this4.lngLatToCoords(item) : _this4.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(_ref15, altitude) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        lng = _ref16[0],\n        lat = _ref16[1];\n      var _this$getMap$lnglatTo = this.getMap().lnglatToMercator(lng, lat),\n        _this$getMap$lnglatTo2 = _slicedToArray(_this$getMap$lnglatTo, 2),\n        McLng = _this$getMap$lnglatTo2[0],\n        McLat = _this$getMap$lnglatTo2[1];\n      return {\n        x: McLng,\n        y: McLat,\n        z: altitude\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMap()._webglPainter._canvas;\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getContainer();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'bmap-contianer--hide-logo');\n    }\n  }, {\n    key: \"initMapByConfig\",\n    value: function initMapByConfig(config) {\n      var style = config.style,\n        _config$pitch = config.pitch,\n        pitch = _config$pitch === void 0 ? 0 : _config$pitch,\n        _config$rotation = config.rotation,\n        rotation = _config$rotation === void 0 ? 0 : _config$rotation,\n        _config$logoVisible = config.logoVisible,\n        logoVisible = _config$logoVisible === void 0 ? true : _config$logoVisible;\n      if (style) {\n        this.setMapStyle(style);\n      }\n      if (pitch) {\n        this.setPitch(pitch);\n      }\n      if (rotation) {\n        this.setRotation(rotation);\n      }\n      if (logoVisible === false) {\n        this.hideLogo();\n      }\n    }\n  }]);\n  return BMapService;\n}(BaseMapService);\nexport { BMapService as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}