{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { __assign, __awaiter, __generator, __rest } from \"tslib\";\nimport { isFunction, groupBy } from '@antv/util';\nimport { isNaN, calculationItemsBBox } from '../../util/base';\nimport { isForce } from '../../util/layout';\nvar LayoutController = /** @class */function () {\n  function LayoutController(graph) {\n    this.graph = graph;\n    this.layoutCfg = graph.get('layout') || {};\n    this.layoutType = this.getLayoutType();\n    this.layoutMethods = [];\n    this.initLayout();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  LayoutController.prototype.initLayout = function () {\n    // no data before rendering\n  };\n  LayoutController.prototype.getLayoutType = function () {\n    return this.getLayoutCfgType(this.layoutCfg);\n  };\n  LayoutController.prototype.getLayoutCfgType = function (layoutCfg) {\n    var type = layoutCfg.type;\n    // type should be top priority\n    if (type) {\n      return type;\n    }\n    var pipes = layoutCfg.pipes;\n    if (Array.isArray(pipes)) {\n      return pipes.map(function (pipe) {\n        return (pipe === null || pipe === void 0 ? void 0 : pipe.type) || '';\n      });\n    }\n    return null;\n  };\n  LayoutController.prototype.isLayoutTypeSame = function (cfg) {\n    var current = this.getLayoutCfgType(cfg);\n    var preHasPipes = Array.isArray(this.layoutType);\n    var currentHasPipes = Array.isArray(current);\n    // already has pipes, and the new one is pipes\n    if (preHasPipes && currentHasPipes) {\n      return this.layoutType.every(function (type, index) {\n        return type === current[index];\n      });\n    }\n    // only one of the pre and current is pipes\n    if (Array.isArray(current) || Array.isArray(this.layoutType)) {\n      return false;\n    }\n    // both of the pre and current are not pipes\n    return (cfg === null || cfg === void 0 ? void 0 : cfg.type) === this.layoutType;\n  };\n  // 绘制\n  LayoutController.prototype.refreshLayout = function () {\n    var _a = this,\n      graph = _a.graph,\n      layoutType = _a.layoutType,\n      _b = _a.layoutCfg,\n      layoutCfg = _b === void 0 ? {} : _b;\n    if (!graph) return;\n    var animate = layoutCfg.animate;\n    var isDefaultAnimateLayout = animate === undefined && (layoutType === 'force' || layoutType === 'force2');\n    var forceAnimate = isForce(layoutType) && (animate || isDefaultAnimateLayout);\n    if (graph.get('animate') && !forceAnimate) {\n      graph.positionsAnimate(layoutType === 'comboCombined');\n    } else {\n      graph.refreshPositions(layoutType === 'comboCombined');\n    }\n  };\n  // 更换布局\n  LayoutController.prototype.changeLayout = function (cfg) {\n    var disableTriggerLayout = cfg.disableTriggerLayout,\n      otherCfgs = __rest(cfg, [\"disableTriggerLayout\"]);\n    this.layoutCfg = otherCfgs;\n    this.layoutType = otherCfgs.type || this.layoutType;\n    // 不触发重新布局，仅更新参数\n    if (disableTriggerLayout) return;\n    this.layout();\n  };\n  // 更换数据\n  LayoutController.prototype.changeData = function (success) {\n    this.layout(success);\n  };\n  LayoutController.prototype.destoryLayoutMethods = function () {\n    var layoutMethods = this.layoutMethods;\n    var destroyedLayoutTypes = [];\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod) {\n      var _a;\n      var layoutType = (_a = layoutMethod.getType) === null || _a === void 0 ? void 0 : _a.call(layoutMethod);\n      if (layoutType) destroyedLayoutTypes.push(layoutType);\n      layoutMethod.destroy();\n    });\n    this.layoutMethods = [];\n    return destroyedLayoutTypes;\n  };\n  // 销毁布局，不能使用 this.destroy，因为 controller 还需要被使用，只是把布局算法销毁\n  LayoutController.prototype.destroyLayout = function () {\n    this.destoryLayoutMethods();\n    var graph = this.graph;\n    if (graph && !graph.get('destroyed')) {\n      graph.set('layout', undefined);\n    }\n    this.layoutCfg = undefined;\n    this.layoutType = undefined;\n    this.layoutMethods = undefined;\n  };\n  // 从 this.graph 获取数据\n  LayoutController.prototype.setDataFromGraph = function () {\n    var _a;\n    var nodes = [];\n    var hiddenNodes = [];\n    var edges = [];\n    var hiddenEdges = [];\n    var comboEdges = [];\n    var combos = [];\n    var hiddenCombos = [];\n    var nodeItems = this.graph.getNodes();\n    var edgeItems = this.graph.getEdges();\n    var comboItems = this.graph.getCombos();\n    var nodeLength = nodeItems.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var nodeItem = nodeItems[i];\n      if (!nodeItem || nodeItem.destroyed) continue;\n      var model = nodeItem.getModel();\n      if (!nodeItem.isVisible()) {\n        hiddenNodes.push(model);\n        continue;\n      }\n      nodes.push(model);\n    }\n    var edgeLength = edgeItems.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edgeItem = edgeItems[i];\n      if (!edgeItem || edgeItem.destroyed) continue;\n      var model = edgeItem.getModel();\n      if (!edgeItem.isVisible()) {\n        hiddenEdges.push(model);\n        continue;\n      }\n      if (!model.isComboEdge) edges.push(model);else comboEdges.push(model);\n    }\n    var comboLength = comboItems.length;\n    for (var i = 0; i < comboLength; i++) {\n      var comboItem = comboItems[i];\n      if (comboItem.destroyed) continue;\n      var model = comboItem.getModel();\n      if (!comboItem.isVisible()) {\n        hiddenCombos.push(model);\n        continue;\n      }\n      combos.push(model);\n    }\n    return {\n      nodes: nodes,\n      hiddenNodes: hiddenNodes,\n      edges: edges,\n      hiddenEdges: hiddenEdges,\n      combos: combos,\n      hiddenCombos: hiddenCombos,\n      comboEdges: comboEdges,\n      vedges: (_a = this.graph.get('vedges')) === null || _a === void 0 ? void 0 : _a.map(function (edge) {\n        return edge.getModel();\n      })\n    };\n  };\n  // 重新布局\n  LayoutController.prototype.relayout = function (reloadData) {\n    var _this = this;\n    var _a = this,\n      graph = _a.graph,\n      layoutMethods = _a.layoutMethods,\n      layoutCfg = _a.layoutCfg;\n    if (!graph || graph.get('destroyed')) return;\n    var start = Promise.resolve();\n    if (reloadData) {\n      this.data = this.setDataFromGraph();\n      var nodes = this.data.nodes;\n      if (!nodes) {\n        return false;\n      }\n      start = this.initPositions(layoutCfg.center, nodes);\n    }\n    graph.emit('beforelayout');\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod, index) {\n      var currentCfg = layoutCfg[index] || layoutCfg;\n      start = start.then(function () {\n        var _a;\n        var relayoutPromise = _this.execLayoutMethod(currentCfg, index);\n        if (index === layoutMethods.length - 1) {\n          (_a = layoutCfg.onAllLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(layoutCfg);\n        }\n        return relayoutPromise;\n      });\n    });\n  };\n  // 筛选参与布局的nodes和edges\n  LayoutController.prototype.filterLayoutData = function (data, cfg) {\n    var nodes = data.nodes,\n      edges = data.edges,\n      rest = __rest(data, [\"nodes\", \"edges\"]);\n    if (!nodes) {\n      return data;\n    }\n    var nodesFilter;\n    var edegsFilter;\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.nodesFilter)) {\n      nodesFilter = cfg.nodesFilter;\n    } else {\n      nodesFilter = function nodesFilter() {\n        return true;\n      };\n    }\n    var fNodes = nodes.filter(nodesFilter);\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.edgesFilter)) {\n      edegsFilter = cfg.edgesFilter;\n    } else {\n      var nodesMap_1 = fNodes.reduce(function (acc, cur) {\n        acc[cur.id] = true;\n        return acc;\n      }, {});\n      edegsFilter = function edegsFilter(edge) {\n        return nodesMap_1[edge.source] && nodesMap_1[edge.target];\n      };\n    }\n    return __assign({\n      nodes: fNodes,\n      edges: edges.filter(edegsFilter)\n    }, rest);\n  };\n  LayoutController.prototype.getLayoutBBox = function (nodes) {\n    var graph = this.graph;\n    var graphGroupNodes = groupBy(graph.getNodes(), function (n) {\n      return n.getModel().layoutOrder;\n    });\n    var layoutNodes = Object.values(graphGroupNodes).map(function (value) {\n      var bbox = calculationItemsBBox(value);\n      bbox.size = [bbox.width, bbox.height];\n      return bbox;\n    });\n    var groupNodes = Object.values(groupBy(nodes, 'layoutOrder'));\n    return {\n      groupNodes: groupNodes,\n      layoutNodes: layoutNodes\n    };\n  };\n  // 控制布局动画\n  // eslint-disable-next-line class-methods-use-this\n  LayoutController.prototype.layoutAnimate = function () {};\n  // 将当前节点的平均中心移动到原点\n  LayoutController.prototype.moveToZero = function () {\n    var graph = this.graph;\n    var data = graph.get('data');\n    var nodes = data.nodes;\n    if (nodes[0].x === undefined || nodes[0].x === null || isNaN(nodes[0].x)) {\n      return;\n    }\n    var meanCenter = [0, 0];\n    var nodeLength = nodes.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      meanCenter[0] += node.x;\n      meanCenter[1] += node.y;\n    }\n    meanCenter[0] /= nodes.length;\n    meanCenter[1] /= nodes.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      node.x -= meanCenter[0];\n      node.y -= meanCenter[1];\n    }\n  };\n  // 初始化节点到 center 附近\n  LayoutController.prototype.initPositions = function (center, nodes) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var graph, nodesToInit, nodeLength;\n      return __generator(this, function (_b) {\n        graph = this.graph;\n        if (!(nodes === null || nodes === void 0 ? void 0 : nodes.length)) {\n          return [2 /*return*/, Promise.resolve()];\n        }\n        nodesToInit = nodes.filter(function (node) {\n          return isNaN(node.x) || isNaN(node.y);\n        });\n        nodeLength = nodesToInit ? nodesToInit.length : 0;\n        if (!nodeLength) return [2 /*return*/];\n        return [2 /*return*/, (_a = this.initWithPreset) === null || _a === void 0 ? void 0 : _a.call(this, function () {},\n        // onFullfillment\n        function () {\n          var width = graph.get('width') * 0.85;\n          var height = graph.get('height') * 0.85;\n          var horiNum = Math.ceil(Math.sqrt(nodeLength) * (width / height));\n          var vertiNum = Math.ceil(nodeLength / horiNum);\n          var horiGap = width / (horiNum - 1);\n          var vertiGap = height / (vertiNum - 1);\n          if (!isFinite(horiGap) || !horiGap) horiGap = 0;\n          if (!isFinite(vertiGap) || !horiGap) vertiGap = 0;\n          var beginX = center[0] - width / 2;\n          var beginY = center[1] - height / 2;\n          var allHavePos = true;\n          for (var i = 0; i < nodeLength; i++) {\n            var node = nodesToInit[i];\n            if (isNaN(+node.x)) {\n              allHavePos = false;\n              node.x = i % horiNum * horiGap + beginX;\n            }\n            if (isNaN(+node.y)) {\n              allHavePos = false;\n              node.y = Math.floor(i / horiNum) * vertiGap + beginY;\n            }\n          }\n        })];\n      });\n    });\n  };\n  LayoutController.prototype.destroy = function () {\n    this.graph = null;\n    this.destoryLayoutMethods();\n    this.destroyed = true;\n  };\n  return LayoutController;\n}();\nexport default LayoutController;","map":{"version":3,"names":["__assign","__awaiter","__generator","__rest","isFunction","groupBy","isNaN","calculationItemsBBox","isForce","LayoutController","graph","layoutCfg","get","layoutType","getLayoutType","layoutMethods","initLayout","prototype","getLayoutCfgType","type","pipes","Array","isArray","map","pipe","isLayoutTypeSame","cfg","current","preHasPipes","currentHasPipes","every","index","refreshLayout","_a","_b","animate","isDefaultAnimateLayout","undefined","forceAnimate","positionsAnimate","refreshPositions","changeLayout","disableTriggerLayout","otherCfgs","layout","changeData","success","destoryLayoutMethods","destroyedLayoutTypes","forEach","layoutMethod","getType","call","push","destroy","destroyLayout","set","setDataFromGraph","nodes","hiddenNodes","edges","hiddenEdges","comboEdges","combos","hiddenCombos","nodeItems","getNodes","edgeItems","getEdges","comboItems","getCombos","nodeLength","length","i","nodeItem","destroyed","model","getModel","isVisible","edgeLength","edgeItem","isComboEdge","comboLength","comboItem","vedges","edge","relayout","reloadData","_this","start","Promise","resolve","data","initPositions","center","emit","currentCfg","then","relayoutPromise","execLayoutMethod","onAllLayoutEnd","filterLayoutData","rest","nodesFilter","edegsFilter","fNodes","filter","edgesFilter","nodesMap_1","reduce","acc","cur","id","source","target","getLayoutBBox","graphGroupNodes","n","layoutOrder","layoutNodes","Object","values","value","bbox","size","width","height","groupNodes","layoutAnimate","moveToZero","x","meanCenter","node","y","nodesToInit","initWithPreset","horiNum","Math","ceil","sqrt","vertiNum","horiGap","vertiGap","isFinite","beginX","beginY","allHavePos","floor"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-core/es/graph/controller/layout.js"],"sourcesContent":["import { __assign, __awaiter, __generator, __rest } from \"tslib\";\nimport { isFunction, groupBy } from '@antv/util';\nimport { isNaN, calculationItemsBBox } from '../../util/base';\nimport { isForce } from '../../util/layout';\nvar LayoutController = /** @class */function () {\n  function LayoutController(graph) {\n    this.graph = graph;\n    this.layoutCfg = graph.get('layout') || {};\n    this.layoutType = this.getLayoutType();\n    this.layoutMethods = [];\n    this.initLayout();\n  }\n  // eslint-disable-next-line class-methods-use-this\n  LayoutController.prototype.initLayout = function () {\n    // no data before rendering\n  };\n  LayoutController.prototype.getLayoutType = function () {\n    return this.getLayoutCfgType(this.layoutCfg);\n  };\n  LayoutController.prototype.getLayoutCfgType = function (layoutCfg) {\n    var type = layoutCfg.type;\n    // type should be top priority\n    if (type) {\n      return type;\n    }\n    var pipes = layoutCfg.pipes;\n    if (Array.isArray(pipes)) {\n      return pipes.map(function (pipe) {\n        return (pipe === null || pipe === void 0 ? void 0 : pipe.type) || '';\n      });\n    }\n    return null;\n  };\n  LayoutController.prototype.isLayoutTypeSame = function (cfg) {\n    var current = this.getLayoutCfgType(cfg);\n    var preHasPipes = Array.isArray(this.layoutType);\n    var currentHasPipes = Array.isArray(current);\n    // already has pipes, and the new one is pipes\n    if (preHasPipes && currentHasPipes) {\n      return this.layoutType.every(function (type, index) {\n        return type === current[index];\n      });\n    }\n    // only one of the pre and current is pipes\n    if (Array.isArray(current) || Array.isArray(this.layoutType)) {\n      return false;\n    }\n    // both of the pre and current are not pipes\n    return (cfg === null || cfg === void 0 ? void 0 : cfg.type) === this.layoutType;\n  };\n  // 绘制\n  LayoutController.prototype.refreshLayout = function () {\n    var _a = this,\n      graph = _a.graph,\n      layoutType = _a.layoutType,\n      _b = _a.layoutCfg,\n      layoutCfg = _b === void 0 ? {} : _b;\n    if (!graph) return;\n    var animate = layoutCfg.animate;\n    var isDefaultAnimateLayout = animate === undefined && (layoutType === 'force' || layoutType === 'force2');\n    var forceAnimate = isForce(layoutType) && (animate || isDefaultAnimateLayout);\n    if (graph.get('animate') && !forceAnimate) {\n      graph.positionsAnimate(layoutType === 'comboCombined');\n    } else {\n      graph.refreshPositions(layoutType === 'comboCombined');\n    }\n  };\n  // 更换布局\n  LayoutController.prototype.changeLayout = function (cfg) {\n    var disableTriggerLayout = cfg.disableTriggerLayout,\n      otherCfgs = __rest(cfg, [\"disableTriggerLayout\"]);\n    this.layoutCfg = otherCfgs;\n    this.layoutType = otherCfgs.type || this.layoutType;\n    // 不触发重新布局，仅更新参数\n    if (disableTriggerLayout) return;\n    this.layout();\n  };\n  // 更换数据\n  LayoutController.prototype.changeData = function (success) {\n    this.layout(success);\n  };\n  LayoutController.prototype.destoryLayoutMethods = function () {\n    var layoutMethods = this.layoutMethods;\n    var destroyedLayoutTypes = [];\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod) {\n      var _a;\n      var layoutType = (_a = layoutMethod.getType) === null || _a === void 0 ? void 0 : _a.call(layoutMethod);\n      if (layoutType) destroyedLayoutTypes.push(layoutType);\n      layoutMethod.destroy();\n    });\n    this.layoutMethods = [];\n    return destroyedLayoutTypes;\n  };\n  // 销毁布局，不能使用 this.destroy，因为 controller 还需要被使用，只是把布局算法销毁\n  LayoutController.prototype.destroyLayout = function () {\n    this.destoryLayoutMethods();\n    var graph = this.graph;\n    if (graph && !graph.get('destroyed')) {\n      graph.set('layout', undefined);\n    }\n    this.layoutCfg = undefined;\n    this.layoutType = undefined;\n    this.layoutMethods = undefined;\n  };\n  // 从 this.graph 获取数据\n  LayoutController.prototype.setDataFromGraph = function () {\n    var _a;\n    var nodes = [];\n    var hiddenNodes = [];\n    var edges = [];\n    var hiddenEdges = [];\n    var comboEdges = [];\n    var combos = [];\n    var hiddenCombos = [];\n    var nodeItems = this.graph.getNodes();\n    var edgeItems = this.graph.getEdges();\n    var comboItems = this.graph.getCombos();\n    var nodeLength = nodeItems.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var nodeItem = nodeItems[i];\n      if (!nodeItem || nodeItem.destroyed) continue;\n      var model = nodeItem.getModel();\n      if (!nodeItem.isVisible()) {\n        hiddenNodes.push(model);\n        continue;\n      }\n      nodes.push(model);\n    }\n    var edgeLength = edgeItems.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edgeItem = edgeItems[i];\n      if (!edgeItem || edgeItem.destroyed) continue;\n      var model = edgeItem.getModel();\n      if (!edgeItem.isVisible()) {\n        hiddenEdges.push(model);\n        continue;\n      }\n      if (!model.isComboEdge) edges.push(model);else comboEdges.push(model);\n    }\n    var comboLength = comboItems.length;\n    for (var i = 0; i < comboLength; i++) {\n      var comboItem = comboItems[i];\n      if (comboItem.destroyed) continue;\n      var model = comboItem.getModel();\n      if (!comboItem.isVisible()) {\n        hiddenCombos.push(model);\n        continue;\n      }\n      combos.push(model);\n    }\n    return {\n      nodes: nodes,\n      hiddenNodes: hiddenNodes,\n      edges: edges,\n      hiddenEdges: hiddenEdges,\n      combos: combos,\n      hiddenCombos: hiddenCombos,\n      comboEdges: comboEdges,\n      vedges: (_a = this.graph.get('vedges')) === null || _a === void 0 ? void 0 : _a.map(function (edge) {\n        return edge.getModel();\n      })\n    };\n  };\n  // 重新布局\n  LayoutController.prototype.relayout = function (reloadData) {\n    var _this = this;\n    var _a = this,\n      graph = _a.graph,\n      layoutMethods = _a.layoutMethods,\n      layoutCfg = _a.layoutCfg;\n    if (!graph || graph.get('destroyed')) return;\n    var start = Promise.resolve();\n    if (reloadData) {\n      this.data = this.setDataFromGraph();\n      var nodes = this.data.nodes;\n      if (!nodes) {\n        return false;\n      }\n      start = this.initPositions(layoutCfg.center, nodes);\n    }\n    graph.emit('beforelayout');\n    layoutMethods === null || layoutMethods === void 0 ? void 0 : layoutMethods.forEach(function (layoutMethod, index) {\n      var currentCfg = layoutCfg[index] || layoutCfg;\n      start = start.then(function () {\n        var _a;\n        var relayoutPromise = _this.execLayoutMethod(currentCfg, index);\n        if (index === layoutMethods.length - 1) {\n          (_a = layoutCfg.onAllLayoutEnd) === null || _a === void 0 ? void 0 : _a.call(layoutCfg);\n        }\n        return relayoutPromise;\n      });\n    });\n  };\n  // 筛选参与布局的nodes和edges\n  LayoutController.prototype.filterLayoutData = function (data, cfg) {\n    var nodes = data.nodes,\n      edges = data.edges,\n      rest = __rest(data, [\"nodes\", \"edges\"]);\n    if (!nodes) {\n      return data;\n    }\n    var nodesFilter;\n    var edegsFilter;\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.nodesFilter)) {\n      nodesFilter = cfg.nodesFilter;\n    } else {\n      nodesFilter = function nodesFilter() {\n        return true;\n      };\n    }\n    var fNodes = nodes.filter(nodesFilter);\n    if (isFunction(cfg === null || cfg === void 0 ? void 0 : cfg.edgesFilter)) {\n      edegsFilter = cfg.edgesFilter;\n    } else {\n      var nodesMap_1 = fNodes.reduce(function (acc, cur) {\n        acc[cur.id] = true;\n        return acc;\n      }, {});\n      edegsFilter = function edegsFilter(edge) {\n        return nodesMap_1[edge.source] && nodesMap_1[edge.target];\n      };\n    }\n    return __assign({\n      nodes: fNodes,\n      edges: edges.filter(edegsFilter)\n    }, rest);\n  };\n  LayoutController.prototype.getLayoutBBox = function (nodes) {\n    var graph = this.graph;\n    var graphGroupNodes = groupBy(graph.getNodes(), function (n) {\n      return n.getModel().layoutOrder;\n    });\n    var layoutNodes = Object.values(graphGroupNodes).map(function (value) {\n      var bbox = calculationItemsBBox(value);\n      bbox.size = [bbox.width, bbox.height];\n      return bbox;\n    });\n    var groupNodes = Object.values(groupBy(nodes, 'layoutOrder'));\n    return {\n      groupNodes: groupNodes,\n      layoutNodes: layoutNodes\n    };\n  };\n  // 控制布局动画\n  // eslint-disable-next-line class-methods-use-this\n  LayoutController.prototype.layoutAnimate = function () {};\n  // 将当前节点的平均中心移动到原点\n  LayoutController.prototype.moveToZero = function () {\n    var graph = this.graph;\n    var data = graph.get('data');\n    var nodes = data.nodes;\n    if (nodes[0].x === undefined || nodes[0].x === null || isNaN(nodes[0].x)) {\n      return;\n    }\n    var meanCenter = [0, 0];\n    var nodeLength = nodes.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      meanCenter[0] += node.x;\n      meanCenter[1] += node.y;\n    }\n    meanCenter[0] /= nodes.length;\n    meanCenter[1] /= nodes.length;\n    for (var i = 0; i < nodeLength; i++) {\n      var node = nodes[i];\n      node.x -= meanCenter[0];\n      node.y -= meanCenter[1];\n    }\n  };\n  // 初始化节点到 center 附近\n  LayoutController.prototype.initPositions = function (center, nodes) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function () {\n      var graph, nodesToInit, nodeLength;\n      return __generator(this, function (_b) {\n        graph = this.graph;\n        if (!(nodes === null || nodes === void 0 ? void 0 : nodes.length)) {\n          return [2 /*return*/, Promise.resolve()];\n        }\n        nodesToInit = nodes.filter(function (node) {\n          return isNaN(node.x) || isNaN(node.y);\n        });\n        nodeLength = nodesToInit ? nodesToInit.length : 0;\n        if (!nodeLength) return [2 /*return*/];\n        return [2 /*return*/, (_a = this.initWithPreset) === null || _a === void 0 ? void 0 : _a.call(this, function () {},\n        // onFullfillment\n        function () {\n          var width = graph.get('width') * 0.85;\n          var height = graph.get('height') * 0.85;\n          var horiNum = Math.ceil(Math.sqrt(nodeLength) * (width / height));\n          var vertiNum = Math.ceil(nodeLength / horiNum);\n          var horiGap = width / (horiNum - 1);\n          var vertiGap = height / (vertiNum - 1);\n          if (!isFinite(horiGap) || !horiGap) horiGap = 0;\n          if (!isFinite(vertiGap) || !horiGap) vertiGap = 0;\n          var beginX = center[0] - width / 2;\n          var beginY = center[1] - height / 2;\n          var allHavePos = true;\n          for (var i = 0; i < nodeLength; i++) {\n            var node = nodesToInit[i];\n            if (isNaN(+node.x)) {\n              allHavePos = false;\n              node.x = i % horiNum * horiGap + beginX;\n            }\n            if (isNaN(+node.y)) {\n              allHavePos = false;\n              node.y = Math.floor(i / horiNum) * vertiGap + beginY;\n            }\n          }\n        })];\n      });\n    });\n  };\n  LayoutController.prototype.destroy = function () {\n    this.graph = null;\n    this.destoryLayoutMethods();\n    this.destroyed = true;\n  };\n  return LayoutController;\n}();\nexport default LayoutController;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}