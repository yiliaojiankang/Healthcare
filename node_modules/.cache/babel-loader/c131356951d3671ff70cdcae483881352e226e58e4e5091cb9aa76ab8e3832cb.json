{"ast":null,"code":"import { ext } from '@antv/matrix-util';\nvar transform = ext.transform;\nexport { transform };\n/**\n * 对元素进行平移操作。\n * @param element 进行变换的元素\n * @param x x 方向位移\n * @param y y 方向位移\n */\nexport function translate(element, x, y) {\n  var matrix = transform(element.getMatrix(), [['t', x, y]]);\n  element.setMatrix(matrix);\n}\n/**\n * 获取元素旋转矩阵 (以元素的左上角为旋转点)\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function getRotateMatrix(element, rotateRadian) {\n  var _a = element.attr(),\n    x = _a.x,\n    y = _a.y;\n  var matrix = transform(element.getMatrix(), [['t', -x, -y], ['r', rotateRadian], ['t', x, y]]);\n  return matrix;\n}\n/**\n * 对元素进行旋转操作。\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function rotate(element, rotateRadian) {\n  var matrix = getRotateMatrix(element, rotateRadian);\n  element.setMatrix(matrix);\n}\n/**\n * 获取元矩阵。\n * @returns identity matrix\n */\nexport function getIdentityMatrix() {\n  return [1, 0, 0, 0, 1, 0, 0, 0, 1];\n}\n/**\n * 围绕图形中心点进行缩放\n * @param element 进行缩放的图形元素\n * @param ratio 缩放比例\n */\nexport function zoom(element, ratio) {\n  var bbox = element.getBBox();\n  var x = (bbox.minX + bbox.maxX) / 2;\n  var y = (bbox.minY + bbox.maxY) / 2;\n  element.applyToMatrix([x, y, 1]);\n  var matrix = transform(element.getMatrix(), [['t', -x, -y], ['s', ratio, ratio], ['t', x, y]]);\n  element.setMatrix(matrix);\n}","map":{"version":3,"names":["ext","transform","translate","element","x","y","matrix","getMatrix","setMatrix","getRotateMatrix","rotateRadian","_a","attr","rotate","getIdentityMatrix","zoom","ratio","bbox","getBBox","minX","maxX","minY","maxY","applyToMatrix"],"sources":["../../src/util/transform.ts"],"sourcesContent":["import { ext } from '@antv/matrix-util';\nimport { IElement, IGroup, IShape } from '../dependents';\n\nconst transform: (m: number[], actions: any[][]) => number[] = ext.transform;\n\nexport { transform };\n\n/**\n * 对元素进行平移操作。\n * @param element 进行变换的元素\n * @param x x 方向位移\n * @param y y 方向位移\n */\nexport function translate(element: IGroup | IShape, x: number, y: number) {\n  const matrix = transform(element.getMatrix(), [['t', x, y]]);\n  element.setMatrix(matrix);\n}\n\n/**\n * 获取元素旋转矩阵 (以元素的左上角为旋转点)\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function getRotateMatrix(element: IElement, rotateRadian: number) {\n  const { x, y } = element.attr();\n  const matrix = transform(element.getMatrix(), [\n    ['t', -x, -y],\n    ['r', rotateRadian],\n    ['t', x, y],\n  ]);\n  return matrix;\n}\n\n/**\n * 对元素进行旋转操作。\n * @param element 进行变换的元素\n * @param rotateRadian 旋转弧度\n */\nexport function rotate(element: IGroup | IShape, rotateRadian: number) {\n  const matrix = getRotateMatrix(element, rotateRadian);\n  element.setMatrix(matrix);\n}\n\n/**\n * 获取元矩阵。\n * @returns identity matrix\n */\nexport function getIdentityMatrix(): number[] {\n  return [1, 0, 0, 0, 1, 0, 0, 0, 1];\n}\n\n/**\n * 围绕图形中心点进行缩放\n * @param element 进行缩放的图形元素\n * @param ratio 缩放比例\n */\nexport function zoom(element: IGroup | IShape, ratio: number) {\n  const bbox = element.getBBox();\n  const x = (bbox.minX + bbox.maxX) / 2;\n  const y = (bbox.minY + bbox.maxY) / 2;\n  element.applyToMatrix([x, y, 1]);\n\n  const matrix = transform(element.getMatrix(), [\n    ['t', -x, -y],\n    ['s', ratio, ratio],\n    ['t', x, y],\n  ]);\n  element.setMatrix(matrix);\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,mBAAmB;AAGvC,IAAMC,SAAS,GAAgDD,GAAG,CAACC,SAAS;AAE5E,SAASA,SAAS;AAElB;;;;;;AAMA,OAAM,SAAUC,SAASA,CAACC,OAAwB,EAAEC,CAAS,EAAEC,CAAS;EACtE,IAAMC,MAAM,GAAGL,SAAS,CAACE,OAAO,CAACI,SAAS,EAAE,EAAE,CAAC,CAAC,GAAG,EAAEH,CAAC,EAAEC,CAAC,CAAC,CAAC,CAAC;EAC5DF,OAAO,CAACK,SAAS,CAACF,MAAM,CAAC;AAC3B;AAEA;;;;;AAKA,OAAM,SAAUG,eAAeA,CAACN,OAAiB,EAAEO,YAAoB;EAC/D,IAAAC,EAAA,GAAWR,OAAO,CAACS,IAAI,EAAE;IAAvBR,CAAC,GAAAO,EAAA,CAAAP,CAAA;IAAEC,CAAC,GAAAM,EAAA,CAAAN,CAAmB;EAC/B,IAAMC,MAAM,GAAGL,SAAS,CAACE,OAAO,CAACI,SAAS,EAAE,EAAE,CAC5C,CAAC,GAAG,EAAE,CAACH,CAAC,EAAE,CAACC,CAAC,CAAC,EACb,CAAC,GAAG,EAAEK,YAAY,CAAC,EACnB,CAAC,GAAG,EAAEN,CAAC,EAAEC,CAAC,CAAC,CACZ,CAAC;EACF,OAAOC,MAAM;AACf;AAEA;;;;;AAKA,OAAM,SAAUO,MAAMA,CAACV,OAAwB,EAAEO,YAAoB;EACnE,IAAMJ,MAAM,GAAGG,eAAe,CAACN,OAAO,EAAEO,YAAY,CAAC;EACrDP,OAAO,CAACK,SAAS,CAACF,MAAM,CAAC;AAC3B;AAEA;;;;AAIA,OAAM,SAAUQ,iBAAiBA,CAAA;EAC/B,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AACpC;AAEA;;;;;AAKA,OAAM,SAAUC,IAAIA,CAACZ,OAAwB,EAAEa,KAAa;EAC1D,IAAMC,IAAI,GAAGd,OAAO,CAACe,OAAO,EAAE;EAC9B,IAAMd,CAAC,GAAG,CAACa,IAAI,CAACE,IAAI,GAAGF,IAAI,CAACG,IAAI,IAAI,CAAC;EACrC,IAAMf,CAAC,GAAG,CAACY,IAAI,CAACI,IAAI,GAAGJ,IAAI,CAACK,IAAI,IAAI,CAAC;EACrCnB,OAAO,CAACoB,aAAa,CAAC,CAACnB,CAAC,EAAEC,CAAC,EAAE,CAAC,CAAC,CAAC;EAEhC,IAAMC,MAAM,GAAGL,SAAS,CAACE,OAAO,CAACI,SAAS,EAAE,EAAE,CAC5C,CAAC,GAAG,EAAE,CAACH,CAAC,EAAE,CAACC,CAAC,CAAC,EACb,CAAC,GAAG,EAAEW,KAAK,EAAEA,KAAK,CAAC,EACnB,CAAC,GAAG,EAAEZ,CAAC,EAAEC,CAAC,CAAC,CACZ,CAAC;EACFF,OAAO,CAACK,SAAS,CAACF,MAAM,CAAC;AAC3B"},"metadata":{},"sourceType":"module","externalDependencies":[]}