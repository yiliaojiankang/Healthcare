{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\nimport { mix } from '@antv/util';\n// 三角形\nregisterNode('triangle', {\n  // 自定义节点时的配置\n  options: {\n    size: 40,\n    direction: 'up',\n    style: {\n      stroke: Global.defaultNode.style.stroke,\n      fill: Global.defaultNode.style.fill,\n      lineWidth: Global.defaultNode.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.nodeLabel.style.fill,\n        fontSize: Global.nodeLabel.style.fontSize\n      },\n      offset: 15\n    },\n    // 节点上左右上下四个方向上的链接circle配置\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // circle的大小\n      size: Global.defaultNode.linkPoints.size,\n      lineWidth: Global.defaultNode.linkPoints.lineWidth,\n      fill: Global.defaultNode.linkPoints.fill,\n      stroke: Global.defaultNode.linkPoints.stroke\n    },\n    // 节点中icon配置\n    icon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: false,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg',\n      width: 20,\n      height: 20,\n      offset: 6\n    },\n    stateStyles: __assign({}, Global.nodeStateStyles)\n  },\n  shapeType: 'triangle',\n  // 文本位置\n  labelPosition: 'bottom',\n  drawShape: function drawShape(cfg, group) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n      _b = _a.icon,\n      icon = _b === void 0 ? {} : _b,\n      defaultDirection = _a.direction;\n    var style = this.getShapeStyle(cfg);\n    var direction = cfg.direction || defaultDirection;\n    var keyShape = group.addShape('path', {\n      attrs: style,\n      className: \"\".concat(this.type, \"-keyShape\"),\n      name: \"\".concat(this.type, \"-keyShape\"),\n      draggable: true\n    });\n    group['shapeMap'][\"\".concat(this.type, \"-keyShape\")] = keyShape;\n    var w = icon.width,\n      h = icon.height,\n      show = icon.show,\n      offset = icon.offset,\n      text = icon.text;\n    if (show) {\n      if (text) {\n        group['shapeMap'][\"\".concat(this.type, \"-icon\")] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, icon),\n          className: \"\".concat(this.type, \"-icon\"),\n          name: \"\".concat(this.type, \"-icon\"),\n          draggable: true\n        });\n      } else {\n        var iconW = -w / 2;\n        var iconH = -h / 2;\n        if (direction === 'up' || direction === 'down') {\n          iconH += offset;\n        }\n        if (direction === 'left' || direction === 'right') {\n          iconW += offset;\n        }\n        group['shapeMap'][\"\".concat(this.type, \"-icon\")] = group.addShape('image', {\n          attrs: __assign({\n            x: iconW,\n            y: iconH\n          }, icon),\n          className: \"\".concat(this.type, \"-icon\"),\n          name: \"\".concat(this.type, \"-icon\"),\n          draggable: true\n        });\n      }\n    }\n    this.drawLinkPoints(cfg, group);\n    return keyShape;\n  },\n  /**\n   * 绘制节点上的LinkPoints\n   * @param {Object} cfg data数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n      _b = _a.linkPoints,\n      linkPoints = _b === void 0 ? {} : _b,\n      defaultDirection = _a.direction;\n    var direction = cfg.direction || defaultDirection;\n    var top = linkPoints.top,\n      left = linkPoints.left,\n      right = linkPoints.right,\n      bottom = linkPoints.bottom,\n      markSize = linkPoints.size,\n      markR = linkPoints.r,\n      markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\n    var size = this.getSize(cfg);\n    var len = size[0];\n    if (left) {\n      // up down left right 四个方向的坐标均不相同\n      var leftPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        leftPos = [-r, diffY];\n      } else if (direction === 'down') {\n        leftPos = [-r, -diffY];\n      } else if (direction === 'left') {\n        leftPos = [-r, r - diffY];\n      }\n      if (leftPos) {\n        // left circle\n        group['shapeMap']['link-point-left'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: leftPos[0],\n            y: leftPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-left',\n          name: 'link-point-left'\n        });\n      }\n    }\n    if (right) {\n      // right circle\n      // up down left right 四个方向的坐标均不相同\n      var rightPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        rightPos = [r, diffY];\n      } else if (direction === 'down') {\n        rightPos = [r, -diffY];\n      } else if (direction === 'right') {\n        rightPos = [r, r - diffY];\n      }\n      if (rightPos) {\n        group['shapeMap']['link-point-right'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: rightPos[0],\n            y: rightPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-right',\n          name: 'link-point-right'\n        });\n      }\n    }\n    if (top) {\n      // up down left right 四个方向的坐标均不相同\n      var topPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        topPos = [r - diffY, -diffY];\n      } else if (direction === 'left') {\n        topPos = [r, -diffY];\n      } else if (direction === 'right') {\n        topPos = [-r, -diffY];\n      }\n      if (topPos) {\n        // top circle\n        group['shapeMap']['link-point-top'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: topPos[0],\n            y: topPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-top',\n          name: 'link-point-top'\n        });\n      }\n    }\n    if (bottom) {\n      // up down left right 四个方向的坐标均不相同\n      var bottomPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'down') {\n        bottomPos = [-r + diffY, diffY];\n      } else if (direction === 'left') {\n        bottomPos = [r, diffY];\n      } else if (direction === 'right') {\n        bottomPos = [-r, diffY];\n      }\n      if (bottomPos) {\n        // bottom circle\n        group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: bottomPos[0],\n            y: bottomPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-bottom',\n          name: 'link-point-bottom'\n        });\n      }\n    }\n  },\n  getPath: function getPath(cfg) {\n    var defaultDirection = (this.mergeStyle || this.getOptions(cfg)).direction;\n    var direction = cfg.direction || defaultDirection;\n    var size = this.getSize(cfg);\n    var len = size[0];\n    var diffY = len * Math.sin(1 / 3 * Math.PI);\n    var r = len * Math.sin(1 / 3 * Math.PI);\n    var path = [['M', -r, diffY], ['L', 0, -diffY], ['L', r, diffY], ['Z'] // 封闭\n    ];\n\n    if (direction === 'down') {\n      path = [['M', -r, -diffY], ['L', r, -diffY], ['L', 0, diffY], ['Z'] // 封闭\n      ];\n    } else if (direction === 'left') {\n      path = [['M', -r, r - diffY], ['L', r, -r], ['L', r, r], ['Z'] // 封闭\n      ];\n    } else if (direction === 'right') {\n      path = [['M', r, r - diffY], ['L', -r, r], ['L', -r, -r], ['Z'] // 封闭\n      ];\n    }\n\n    return path;\n  },\n  /**\n   * 获取节点的样式，供基于该节点自定义时使用\n   * @param {Object} cfg 节点数据模型\n   * @return {Object} 节点的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = (this.mergeStyle || this.getOptions(cfg)).style;\n    var strokeStyle = {\n      stroke: cfg.color\n    };\n    // 如果设置了color，则覆盖默认的stroke属性\n    var style = mix({}, defaultStyle, strokeStyle);\n    var path = this.getPath(cfg);\n    var styles = __assign({\n      path: path\n    }, style);\n    return styles;\n  },\n  update: function update(cfg, item, updateType) {\n    var group = item.getContainer();\n    // 这里不传 cfg 参数是因为 cfg.style 需要最后覆盖样式\n    var defaultStyle = this.getOptions({}).style;\n    var path = this.getPath(cfg);\n    // 下面这些属性需要覆盖默认样式与目前样式，但若在 cfg 中有指定则应该被 cfg 的相应配置覆盖。\n    var strokeStyle = {\n      stroke: cfg.color,\n      path: path\n    };\n    // 与 getShapeStyle 不同在于，update 时需要获取到当前的 style 进行融合。即新传入的配置项中没有涉及的属性，保留当前的配置。\n    var keyShape = item.get('keyShape');\n    var style = mix({}, defaultStyle, keyShape.attr(), strokeStyle);\n    style = mix(style, cfg.style);\n    this.updateShape(cfg, item, style, true, updateType);\n    this.updateLinkPoints(cfg, group);\n  },\n  /**\n   * 更新linkPoints\n   * @param {Object} cfg 节点数据配置项\n   * @param {Group} group Item所在的group\n   */\n  updateLinkPoints: function updateLinkPoints(cfg, group) {\n    var _a = this.getOptions({}),\n      defaultLinkPoints = _a.linkPoints,\n      defaultDirection = _a.direction;\n    var direction = cfg.direction || defaultDirection;\n    var markLeft = group['shapeMap']['link-point-left'] || group.find(function (element) {\n      return element.get('className') === 'link-point-left';\n    });\n    var markRight = group['shapeMap']['link-point-right'] || group.find(function (element) {\n      return element.get('className') === 'link-point-right';\n    });\n    var markTop = group['shapeMap']['link-point-top'] || group.find(function (element) {\n      return element.get('className') === 'link-point-top';\n    });\n    var markBottom = group['shapeMap']['link-point-bottom'] || group.find(function (element) {\n      return element.get('className') === 'link-point-bottom';\n    });\n    var currentLinkPoints = defaultLinkPoints;\n    var existLinkPoint = markLeft || markRight || markTop || markBottom;\n    if (existLinkPoint) {\n      currentLinkPoints = existLinkPoint.attr();\n    }\n    var linkPoints = mix({}, currentLinkPoints, cfg.linkPoints);\n    var markFill = linkPoints.fill,\n      markStroke = linkPoints.stroke,\n      borderWidth = linkPoints.lineWidth;\n    var markSize = linkPoints.size / 2;\n    if (!markSize) markSize = linkPoints.r;\n    var _b = cfg.linkPoints ? cfg.linkPoints : {\n        left: undefined,\n        right: undefined,\n        top: undefined,\n        bottom: undefined\n      },\n      left = _b.left,\n      right = _b.right,\n      top = _b.top,\n      bottom = _b.bottom;\n    var size = this.getSize(cfg);\n    var len = size[0];\n    var styles = {\n      r: markSize,\n      fill: markFill,\n      stroke: markStroke,\n      lineWidth: borderWidth\n    };\n    var leftPos = null;\n    var diffY = len * Math.sin(1 / 3 * Math.PI);\n    var r = len * Math.sin(1 / 3 * Math.PI);\n    if (direction === 'up') {\n      leftPos = [-r, diffY];\n    } else if (direction === 'down') {\n      leftPos = [-r, -diffY];\n    } else if (direction === 'left') {\n      leftPos = [-r, r - diffY];\n    }\n    if (leftPos) {\n      if (markLeft) {\n        if (!left && left !== undefined) {\n          markLeft.remove();\n          delete group['shapeMap']['link-point-left'];\n        } else {\n          markLeft.attr(__assign(__assign({}, styles), {\n            x: leftPos[0],\n            y: leftPos[1]\n          }));\n        }\n      } else if (left) {\n        group['shapeMap']['link-point-left'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: leftPos[0],\n            y: leftPos[1]\n          }),\n          className: 'link-point-left',\n          name: 'link-point-left',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var rightPos = null;\n    if (direction === 'up') {\n      rightPos = [r, diffY];\n    } else if (direction === 'down') {\n      rightPos = [r, -diffY];\n    } else if (direction === 'right') {\n      rightPos = [r, r - diffY];\n    }\n    if (rightPos) {\n      if (markRight) {\n        if (!right && right !== undefined) {\n          markRight.remove();\n          delete group['shapeMap']['link-point-right'];\n        } else {\n          markRight.attr(__assign(__assign({}, styles), {\n            x: rightPos[0],\n            y: rightPos[1]\n          }));\n        }\n      } else if (right) {\n        group['shapeMap']['link-point-right'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: rightPos[0],\n            y: rightPos[1]\n          }),\n          className: 'link-point-right',\n          name: 'link-point-right',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var topPos = null;\n    if (direction === 'up') {\n      topPos = [r - diffY, -diffY];\n    } else if (direction === 'left') {\n      topPos = [r, -diffY];\n    } else if (direction === 'right') {\n      topPos = [-r, -diffY];\n    }\n    if (topPos) {\n      if (markTop) {\n        if (!top && top !== undefined) {\n          markTop.remove();\n          delete group['shapeMap']['link-point-top'];\n        } else {\n          // top circle\n          markTop.attr(__assign(__assign({}, styles), {\n            x: topPos[0],\n            y: topPos[1]\n          }));\n        }\n      } else if (top) {\n        group['shapeMap']['link-point-top'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: topPos[0],\n            y: topPos[1]\n          }),\n          className: 'link-point-top',\n          name: 'link-point-top',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var bottomPos = null;\n    if (direction === 'down') {\n      bottomPos = [-r + diffY, diffY];\n    } else if (direction === 'left') {\n      bottomPos = [r, diffY];\n    } else if (direction === 'right') {\n      bottomPos = [-r, diffY];\n    }\n    if (bottomPos) {\n      if (markBottom) {\n        if (!bottom && bottom !== undefined) {\n          markBottom.remove();\n          delete group['shapeMap']['link-point-bottom'];\n        } else {\n          markBottom.attr(__assign(__assign({}, styles), {\n            x: bottomPos[0],\n            y: bottomPos[1]\n          }));\n        }\n      } else if (bottom) {\n        group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: bottomPos[0],\n            y: bottomPos[1]\n          }),\n          className: 'link-point-bottom',\n          name: 'link-point-bottom',\n          isAnchorPoint: true\n        });\n      }\n    }\n  }\n}, 'single-node');","map":{"version":3,"names":["__assign","__rest","registerNode","BaseGlobal","Global","mix","options","size","direction","style","stroke","defaultNode","fill","lineWidth","labelCfg","nodeLabel","fontSize","offset","linkPoints","top","right","bottom","left","icon","show","img","width","height","stateStyles","nodeStateStyles","shapeType","labelPosition","drawShape","cfg","group","_a","mergeStyle","getOptions","_b","defaultDirection","getShapeStyle","keyShape","addShape","attrs","className","concat","type","name","draggable","w","h","text","x","y","textBaseline","textAlign","iconW","iconH","drawLinkPoints","markSize","markR","r","markStyle","getSize","len","leftPos","diffY","Math","sin","PI","rightPos","topPos","bottomPos","getPath","path","defaultStyle","strokeStyle","color","styles","update","item","updateType","getContainer","get","attr","updateShape","updateLinkPoints","defaultLinkPoints","markLeft","find","element","markRight","markTop","markBottom","currentLinkPoints","existLinkPoint","markFill","markStroke","borderWidth","undefined","remove","isAnchorPoint"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/g6-element/es/nodes/triangle.js"],"sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\nimport { mix } from '@antv/util';\n// 三角形\nregisterNode('triangle', {\n  // 自定义节点时的配置\n  options: {\n    size: 40,\n    direction: 'up',\n    style: {\n      stroke: Global.defaultNode.style.stroke,\n      fill: Global.defaultNode.style.fill,\n      lineWidth: Global.defaultNode.style.lineWidth\n    },\n    labelCfg: {\n      style: {\n        fill: Global.nodeLabel.style.fill,\n        fontSize: Global.nodeLabel.style.fontSize\n      },\n      offset: 15\n    },\n    // 节点上左右上下四个方向上的链接circle配置\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // circle的大小\n      size: Global.defaultNode.linkPoints.size,\n      lineWidth: Global.defaultNode.linkPoints.lineWidth,\n      fill: Global.defaultNode.linkPoints.fill,\n      stroke: Global.defaultNode.linkPoints.stroke\n    },\n    // 节点中icon配置\n    icon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: false,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg',\n      width: 20,\n      height: 20,\n      offset: 6\n    },\n    stateStyles: __assign({}, Global.nodeStateStyles)\n  },\n  shapeType: 'triangle',\n  // 文本位置\n  labelPosition: 'bottom',\n  drawShape: function drawShape(cfg, group) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n      _b = _a.icon,\n      icon = _b === void 0 ? {} : _b,\n      defaultDirection = _a.direction;\n    var style = this.getShapeStyle(cfg);\n    var direction = cfg.direction || defaultDirection;\n    var keyShape = group.addShape('path', {\n      attrs: style,\n      className: \"\".concat(this.type, \"-keyShape\"),\n      name: \"\".concat(this.type, \"-keyShape\"),\n      draggable: true\n    });\n    group['shapeMap'][\"\".concat(this.type, \"-keyShape\")] = keyShape;\n    var w = icon.width,\n      h = icon.height,\n      show = icon.show,\n      offset = icon.offset,\n      text = icon.text;\n    if (show) {\n      if (text) {\n        group['shapeMap'][\"\".concat(this.type, \"-icon\")] = group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, icon),\n          className: \"\".concat(this.type, \"-icon\"),\n          name: \"\".concat(this.type, \"-icon\"),\n          draggable: true\n        });\n      } else {\n        var iconW = -w / 2;\n        var iconH = -h / 2;\n        if (direction === 'up' || direction === 'down') {\n          iconH += offset;\n        }\n        if (direction === 'left' || direction === 'right') {\n          iconW += offset;\n        }\n        group['shapeMap'][\"\".concat(this.type, \"-icon\")] = group.addShape('image', {\n          attrs: __assign({\n            x: iconW,\n            y: iconH\n          }, icon),\n          className: \"\".concat(this.type, \"-icon\"),\n          name: \"\".concat(this.type, \"-icon\"),\n          draggable: true\n        });\n      }\n    }\n    this.drawLinkPoints(cfg, group);\n    return keyShape;\n  },\n  /**\n   * 绘制节点上的LinkPoints\n   * @param {Object} cfg data数据配置项\n   * @param {Group} group Group实例\n   */\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\n    var _a = this.mergeStyle || this.getOptions(cfg),\n      _b = _a.linkPoints,\n      linkPoints = _b === void 0 ? {} : _b,\n      defaultDirection = _a.direction;\n    var direction = cfg.direction || defaultDirection;\n    var top = linkPoints.top,\n      left = linkPoints.left,\n      right = linkPoints.right,\n      bottom = linkPoints.bottom,\n      markSize = linkPoints.size,\n      markR = linkPoints.r,\n      markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\n    var size = this.getSize(cfg);\n    var len = size[0];\n    if (left) {\n      // up down left right 四个方向的坐标均不相同\n      var leftPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        leftPos = [-r, diffY];\n      } else if (direction === 'down') {\n        leftPos = [-r, -diffY];\n      } else if (direction === 'left') {\n        leftPos = [-r, r - diffY];\n      }\n      if (leftPos) {\n        // left circle\n        group['shapeMap']['link-point-left'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: leftPos[0],\n            y: leftPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-left',\n          name: 'link-point-left'\n        });\n      }\n    }\n    if (right) {\n      // right circle\n      // up down left right 四个方向的坐标均不相同\n      var rightPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        rightPos = [r, diffY];\n      } else if (direction === 'down') {\n        rightPos = [r, -diffY];\n      } else if (direction === 'right') {\n        rightPos = [r, r - diffY];\n      }\n      if (rightPos) {\n        group['shapeMap']['link-point-right'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: rightPos[0],\n            y: rightPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-right',\n          name: 'link-point-right'\n        });\n      }\n    }\n    if (top) {\n      // up down left right 四个方向的坐标均不相同\n      var topPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'up') {\n        topPos = [r - diffY, -diffY];\n      } else if (direction === 'left') {\n        topPos = [r, -diffY];\n      } else if (direction === 'right') {\n        topPos = [-r, -diffY];\n      }\n      if (topPos) {\n        // top circle\n        group['shapeMap']['link-point-top'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: topPos[0],\n            y: topPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-top',\n          name: 'link-point-top'\n        });\n      }\n    }\n    if (bottom) {\n      // up down left right 四个方向的坐标均不相同\n      var bottomPos = null;\n      var diffY = len * Math.sin(1 / 3 * Math.PI);\n      var r = len * Math.sin(1 / 3 * Math.PI);\n      if (direction === 'down') {\n        bottomPos = [-r + diffY, diffY];\n      } else if (direction === 'left') {\n        bottomPos = [r, diffY];\n      } else if (direction === 'right') {\n        bottomPos = [-r, diffY];\n      }\n      if (bottomPos) {\n        // bottom circle\n        group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, markStyle), {\n            x: bottomPos[0],\n            y: bottomPos[1],\n            r: markSize / 2 || markR || 5\n          }),\n          className: 'link-point-bottom',\n          name: 'link-point-bottom'\n        });\n      }\n    }\n  },\n  getPath: function getPath(cfg) {\n    var defaultDirection = (this.mergeStyle || this.getOptions(cfg)).direction;\n    var direction = cfg.direction || defaultDirection;\n    var size = this.getSize(cfg);\n    var len = size[0];\n    var diffY = len * Math.sin(1 / 3 * Math.PI);\n    var r = len * Math.sin(1 / 3 * Math.PI);\n    var path = [['M', -r, diffY], ['L', 0, -diffY], ['L', r, diffY], ['Z'] // 封闭\n    ];\n\n    if (direction === 'down') {\n      path = [['M', -r, -diffY], ['L', r, -diffY], ['L', 0, diffY], ['Z'] // 封闭\n      ];\n    } else if (direction === 'left') {\n      path = [['M', -r, r - diffY], ['L', r, -r], ['L', r, r], ['Z'] // 封闭\n      ];\n    } else if (direction === 'right') {\n      path = [['M', r, r - diffY], ['L', -r, r], ['L', -r, -r], ['Z'] // 封闭\n      ];\n    }\n\n    return path;\n  },\n  /**\n   * 获取节点的样式，供基于该节点自定义时使用\n   * @param {Object} cfg 节点数据模型\n   * @return {Object} 节点的样式\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = (this.mergeStyle || this.getOptions(cfg)).style;\n    var strokeStyle = {\n      stroke: cfg.color\n    };\n    // 如果设置了color，则覆盖默认的stroke属性\n    var style = mix({}, defaultStyle, strokeStyle);\n    var path = this.getPath(cfg);\n    var styles = __assign({\n      path: path\n    }, style);\n    return styles;\n  },\n  update: function update(cfg, item, updateType) {\n    var group = item.getContainer();\n    // 这里不传 cfg 参数是因为 cfg.style 需要最后覆盖样式\n    var defaultStyle = this.getOptions({}).style;\n    var path = this.getPath(cfg);\n    // 下面这些属性需要覆盖默认样式与目前样式，但若在 cfg 中有指定则应该被 cfg 的相应配置覆盖。\n    var strokeStyle = {\n      stroke: cfg.color,\n      path: path\n    };\n    // 与 getShapeStyle 不同在于，update 时需要获取到当前的 style 进行融合。即新传入的配置项中没有涉及的属性，保留当前的配置。\n    var keyShape = item.get('keyShape');\n    var style = mix({}, defaultStyle, keyShape.attr(), strokeStyle);\n    style = mix(style, cfg.style);\n    this.updateShape(cfg, item, style, true, updateType);\n    this.updateLinkPoints(cfg, group);\n  },\n  /**\n   * 更新linkPoints\n   * @param {Object} cfg 节点数据配置项\n   * @param {Group} group Item所在的group\n   */\n  updateLinkPoints: function updateLinkPoints(cfg, group) {\n    var _a = this.getOptions({}),\n      defaultLinkPoints = _a.linkPoints,\n      defaultDirection = _a.direction;\n    var direction = cfg.direction || defaultDirection;\n    var markLeft = group['shapeMap']['link-point-left'] || group.find(function (element) {\n      return element.get('className') === 'link-point-left';\n    });\n    var markRight = group['shapeMap']['link-point-right'] || group.find(function (element) {\n      return element.get('className') === 'link-point-right';\n    });\n    var markTop = group['shapeMap']['link-point-top'] || group.find(function (element) {\n      return element.get('className') === 'link-point-top';\n    });\n    var markBottom = group['shapeMap']['link-point-bottom'] || group.find(function (element) {\n      return element.get('className') === 'link-point-bottom';\n    });\n    var currentLinkPoints = defaultLinkPoints;\n    var existLinkPoint = markLeft || markRight || markTop || markBottom;\n    if (existLinkPoint) {\n      currentLinkPoints = existLinkPoint.attr();\n    }\n    var linkPoints = mix({}, currentLinkPoints, cfg.linkPoints);\n    var markFill = linkPoints.fill,\n      markStroke = linkPoints.stroke,\n      borderWidth = linkPoints.lineWidth;\n    var markSize = linkPoints.size / 2;\n    if (!markSize) markSize = linkPoints.r;\n    var _b = cfg.linkPoints ? cfg.linkPoints : {\n        left: undefined,\n        right: undefined,\n        top: undefined,\n        bottom: undefined\n      },\n      left = _b.left,\n      right = _b.right,\n      top = _b.top,\n      bottom = _b.bottom;\n    var size = this.getSize(cfg);\n    var len = size[0];\n    var styles = {\n      r: markSize,\n      fill: markFill,\n      stroke: markStroke,\n      lineWidth: borderWidth\n    };\n    var leftPos = null;\n    var diffY = len * Math.sin(1 / 3 * Math.PI);\n    var r = len * Math.sin(1 / 3 * Math.PI);\n    if (direction === 'up') {\n      leftPos = [-r, diffY];\n    } else if (direction === 'down') {\n      leftPos = [-r, -diffY];\n    } else if (direction === 'left') {\n      leftPos = [-r, r - diffY];\n    }\n    if (leftPos) {\n      if (markLeft) {\n        if (!left && left !== undefined) {\n          markLeft.remove();\n          delete group['shapeMap']['link-point-left'];\n        } else {\n          markLeft.attr(__assign(__assign({}, styles), {\n            x: leftPos[0],\n            y: leftPos[1]\n          }));\n        }\n      } else if (left) {\n        group['shapeMap']['link-point-left'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: leftPos[0],\n            y: leftPos[1]\n          }),\n          className: 'link-point-left',\n          name: 'link-point-left',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var rightPos = null;\n    if (direction === 'up') {\n      rightPos = [r, diffY];\n    } else if (direction === 'down') {\n      rightPos = [r, -diffY];\n    } else if (direction === 'right') {\n      rightPos = [r, r - diffY];\n    }\n    if (rightPos) {\n      if (markRight) {\n        if (!right && right !== undefined) {\n          markRight.remove();\n          delete group['shapeMap']['link-point-right'];\n        } else {\n          markRight.attr(__assign(__assign({}, styles), {\n            x: rightPos[0],\n            y: rightPos[1]\n          }));\n        }\n      } else if (right) {\n        group['shapeMap']['link-point-right'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: rightPos[0],\n            y: rightPos[1]\n          }),\n          className: 'link-point-right',\n          name: 'link-point-right',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var topPos = null;\n    if (direction === 'up') {\n      topPos = [r - diffY, -diffY];\n    } else if (direction === 'left') {\n      topPos = [r, -diffY];\n    } else if (direction === 'right') {\n      topPos = [-r, -diffY];\n    }\n    if (topPos) {\n      if (markTop) {\n        if (!top && top !== undefined) {\n          markTop.remove();\n          delete group['shapeMap']['link-point-top'];\n        } else {\n          // top circle\n          markTop.attr(__assign(__assign({}, styles), {\n            x: topPos[0],\n            y: topPos[1]\n          }));\n        }\n      } else if (top) {\n        group['shapeMap']['link-point-top'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: topPos[0],\n            y: topPos[1]\n          }),\n          className: 'link-point-top',\n          name: 'link-point-top',\n          isAnchorPoint: true\n        });\n      }\n    }\n    var bottomPos = null;\n    if (direction === 'down') {\n      bottomPos = [-r + diffY, diffY];\n    } else if (direction === 'left') {\n      bottomPos = [r, diffY];\n    } else if (direction === 'right') {\n      bottomPos = [-r, diffY];\n    }\n    if (bottomPos) {\n      if (markBottom) {\n        if (!bottom && bottom !== undefined) {\n          markBottom.remove();\n          delete group['shapeMap']['link-point-bottom'];\n        } else {\n          markBottom.attr(__assign(__assign({}, styles), {\n            x: bottomPos[0],\n            y: bottomPos[1]\n          }));\n        }\n      } else if (bottom) {\n        group['shapeMap']['link-point-bottom'] = group.addShape('circle', {\n          attrs: __assign(__assign({}, styles), {\n            x: bottomPos[0],\n            y: bottomPos[1]\n          }),\n          className: 'link-point-bottom',\n          name: 'link-point-bottom',\n          isAnchorPoint: true\n        });\n      }\n    }\n  }\n}, 'single-node');"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}