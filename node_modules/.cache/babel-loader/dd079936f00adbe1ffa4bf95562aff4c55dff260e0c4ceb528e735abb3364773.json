{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n// @ts-ignore\nimport { lodashUtil } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport LngLat from \"./geo/lng_lat\";\nimport LngLatBounds from \"./geo/lng_lat_bounds\";\nimport Point from \"./geo/point\";\nimport Transform from \"./geo/transform\";\nimport { Event } from \"./handler/events/event\";\nimport { clamp, ease as defaultEasing, extend, interpolate, now, pick, prefersReducedMotion, wrap } from \"./util\";\nvar merge = lodashUtil.merge;\nvar Camera = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Camera, _EventEmitter);\n  var _super = _createSuper(Camera);\n  // public requestRenderFrame: (_: any) => number;\n  // public cancelRenderFrame: (_: number) => void;\n\n  function Camera(options) {\n    var _this;\n    _classCallCheck(this, Camera);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"renderFrameCallback\", function () {\n      var t = Math.min((now() - _this.easeStart) / _this.easeOptions.duration, 1);\n      _this.onEaseFrame(_this.easeOptions.easing(t));\n      if (t < 1) {\n        // this.easeFrameId = window.requestAnimationFrame(this.renderFrameCallback);\n        _this.easeFrameId = _this.requestRenderFrame(_this.renderFrameCallback);\n      } else {\n        _this.stop();\n      }\n    });\n    _this.options = options;\n    var minZoom = options.minZoom,\n      maxZoom = options.maxZoom,\n      minPitch = options.minPitch,\n      maxPitch = options.maxPitch,\n      renderWorldCopies = options.renderWorldCopies;\n    _this.moving = false;\n    _this.zooming = false;\n    _this.bearingSnap = options.bearingSnap;\n    _this.pitchEnabled = options.pitchEnabled;\n    _this.rotateEnabled = options.rotateEnabled;\n    _this.transform = new Transform(minZoom, maxZoom, minPitch, maxPitch, renderWorldCopies);\n    return _this;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _createClass(Camera, [{\n    key: \"requestRenderFrame\",\n    value: function requestRenderFrame(cb) {\n      return 0;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"cancelRenderFrame\",\n    value: function cancelRenderFrame(_) {\n      return;\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$transform$cente = this.transform.center,\n        lng = _this$transform$cente.lng,\n        lat = _this$transform$cente.lat;\n      return new LngLat(lng, lat);\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.transform.zoom;\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.transform.pitch;\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(center, eventData) {\n      return this.jumpTo({\n        center: center\n      }, eventData);\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch, eventData) {\n      this.jumpTo({\n        pitch: pitch\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"getBearing\",\n    value: function getBearing() {\n      return this.transform.bearing;\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(lnglat, options, eventData) {\n      return this.easeTo(merge({\n        center: lnglat\n      }, options), eventData);\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(offset, options, eventData) {\n      offset = Point.convert(offset).mult(-1);\n      return this.panTo(this.transform.center, extend({\n        offset: offset\n      }, options || {}), eventData);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut(options, eventData) {\n      this.zoomTo(this.getZoom() - 1, options, eventData);\n      return this;\n    }\n  }, {\n    key: \"setBearing\",\n    value: function setBearing(bearing, eventData) {\n      this.jumpTo({\n        bearing: bearing\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom, eventData) {\n      this.jumpTo({\n        zoom: zoom\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn(options, eventData) {\n      this.zoomTo(this.getZoom() + 1, options, eventData);\n      return this;\n    }\n  }, {\n    key: \"zoomTo\",\n    value: function zoomTo(zoom, options, eventData) {\n      return this.easeTo(merge({\n        zoom: zoom\n      }, options), eventData);\n    }\n  }, {\n    key: \"getPadding\",\n    value: function getPadding() {\n      return this.transform.padding;\n    }\n  }, {\n    key: \"setPadding\",\n    value: function setPadding(padding, eventData) {\n      this.jumpTo({\n        padding: padding\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"rotateTo\",\n    value: function rotateTo(bearing, options, eventData) {\n      return this.easeTo(merge({\n        bearing: bearing\n      }, options), eventData);\n    }\n  }, {\n    key: \"resetNorth\",\n    value: function resetNorth(options, eventData) {\n      this.rotateTo(0, merge({\n        duration: 1000\n      }, options), eventData);\n      return this;\n    }\n  }, {\n    key: \"resetNorthPitch\",\n    value: function resetNorthPitch(options, eventData) {\n      this.easeTo(merge({\n        bearing: 0,\n        pitch: 0,\n        duration: 1000\n      }, options), eventData);\n      return this;\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds, options, eventData) {\n      return this.fitInternal(\n      // @ts-ignore\n      this.cameraForBounds(bounds, options), options, eventData);\n    }\n  }, {\n    key: \"cameraForBounds\",\n    value: function cameraForBounds(bounds, options) {\n      bounds = LngLatBounds.convert(bounds);\n      return this.cameraForBoxAndBearing(bounds.getNorthWest(), bounds.getSouthEast(), 0,\n      // @ts-ignore\n      options);\n    }\n  }, {\n    key: \"snapToNorth\",\n    value: function snapToNorth(options, eventData) {\n      if (Math.abs(this.getBearing()) < this.bearingSnap) {\n        return this.resetNorth(options, eventData);\n      }\n      return this;\n    }\n  }, {\n    key: \"jumpTo\",\n    value: function jumpTo() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      this.stop();\n      var tr = this.transform;\n      var zoomChanged = false;\n      var bearingChanged = false;\n      var pitchChanged = false;\n      if (options.zoom !== undefined && tr.zoom !== +options.zoom) {\n        zoomChanged = true;\n        tr.zoom = +options.zoom;\n      }\n      if (options.center !== undefined) {\n        tr.center = LngLat.convert(options.center);\n      }\n      if (options.bearing !== undefined && tr.bearing !== +options.bearing) {\n        bearingChanged = true;\n        tr.bearing = +options.bearing;\n      }\n      if (options.pitch !== undefined && tr.pitch !== +options.pitch) {\n        pitchChanged = true;\n        tr.pitch = +options.pitch;\n      }\n      if (options.padding !== undefined && !tr.isPaddingEqual(options.padding)) {\n        tr.padding = options.padding;\n      }\n      this.emit('movestart', new Event('movestart', eventData));\n      this.emit('move', new Event('move', eventData));\n      if (zoomChanged) {\n        this.emit('zoomstart', new Event('zoomstart', eventData));\n        this.emit('zoom', new Event('zoom', eventData));\n        this.emit('zoomend', new Event('zoomend', eventData));\n      }\n      if (bearingChanged) {\n        this.emit('rotatestart', new Event('rotatestart', eventData));\n        this.emit('rotate', new Event('rotate', eventData));\n        this.emit('rotateend', new Event('rotateend', eventData));\n      }\n      if (pitchChanged) {\n        this.emit('pitchstart', new Event('pitchstart', eventData));\n        this.emit('pitch', new Event('pitch', eventData));\n        this.emit('pitchend', new Event('pitchend', eventData));\n      }\n      return this.emit('moveend', new Event('moveend', eventData));\n    }\n  }, {\n    key: \"easeTo\",\n    value: function easeTo() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      options = merge({\n        offset: [0, 0],\n        duration: 500,\n        easing: defaultEasing\n      }, options);\n      if (options.animate === false || !options.essential && prefersReducedMotion()) {\n        options.duration = 0;\n      }\n      var tr = this.transform;\n      var startZoom = this.getZoom();\n      var startBearing = this.getBearing();\n      var startPitch = this.getPitch();\n      var startPadding = this.getPadding();\n      var zoom = options.zoom ? +options.zoom : startZoom;\n      var bearing = options.bearing ? this.normalizeBearing(options.bearing, startBearing) : startBearing;\n      var pitch = options.pitch ? +options.pitch : startPitch;\n      var padding = options.padding ? options.padding : tr.padding;\n      var offsetAsPoint = Point.convert(options.offset);\n      var pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n      var locationAtOffset = tr.pointLocation(pointAtOffset);\n      var center = LngLat.convert(options.center || locationAtOffset);\n      this.normalizeCenter(center);\n      var from = tr.project(locationAtOffset);\n      var delta = tr.project(center).sub(from);\n      var finalScale = tr.zoomScale(zoom - startZoom);\n      var around;\n      var aroundPoint;\n      if (options.around) {\n        around = LngLat.convert(options.around);\n        aroundPoint = tr.locationPoint(around);\n      }\n      var currently = {\n        moving: this.moving,\n        zooming: this.zooming,\n        rotating: this.rotating,\n        pitching: this.pitching\n      };\n      this.zooming = this.zooming || zoom !== startZoom;\n      this.rotating = this.rotating || startBearing !== bearing;\n      this.pitching = this.pitching || pitch !== startPitch;\n      this.padding = !tr.isPaddingEqual(padding);\n      this.easeId = options.easeId;\n      this.prepareEase(eventData, options.noMoveStart, currently);\n      clearTimeout(this.easeEndTimeoutID);\n      this.ease(function (k) {\n        if (_this2.zooming) {\n          tr.zoom = interpolate(startZoom, zoom, k);\n        }\n        if (_this2.rotating && _this2.rotateEnabled) {\n          tr.bearing = interpolate(startBearing, bearing, k);\n        }\n        if (_this2.pitching && _this2.pitchEnabled) {\n          tr.pitch = interpolate(startPitch, pitch, k);\n        }\n        if (_this2.padding) {\n          tr.interpolatePadding(startPadding, padding, k);\n          // When padding is being applied, Transform#centerPoint is changing continously,\n          // thus we need to recalculate offsetPoint every fra,e\n          pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n        }\n        if (around) {\n          tr.setLocationAtPoint(around, aroundPoint);\n        } else {\n          var scale = tr.zoomScale(tr.zoom - startZoom);\n          var base = zoom > startZoom ? Math.min(2, finalScale) : Math.max(0.5, finalScale);\n          var speedup = Math.pow(base, 1 - k);\n          var newCenter = tr.unproject(from.add(delta.mult(k * speedup)).mult(scale));\n          tr.setLocationAtPoint(tr.renderWorldCopies ? newCenter.wrap() : newCenter, pointAtOffset);\n        }\n        _this2.fireMoveEvents(eventData);\n      }, function (interruptingEaseId) {\n        _this2.afterEase(eventData, interruptingEaseId);\n      },\n      // @ts-ignore\n      options);\n      return this;\n    }\n  }, {\n    key: \"flyTo\",\n    value: function flyTo() {\n      var _this3 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      // Fall through to jumpTo if user has set prefers-reduced-motion\n      if (!options.essential && prefersReducedMotion()) {\n        var coercedOptions = pick(options, ['center', 'zoom', 'bearing', 'pitch', 'around']);\n        return this.jumpTo(coercedOptions, eventData);\n      }\n      this.stop();\n      options = merge({\n        offset: [0, 0],\n        speed: 1.2,\n        curve: 1.42,\n        easing: defaultEasing\n      }, options);\n      var tr = this.transform;\n      var startZoom = this.getZoom();\n      var startBearing = this.getBearing();\n      var startPitch = this.getPitch();\n      var startPadding = this.getPadding();\n      var zoom = options.zoom ? clamp(+options.zoom, tr.minZoom, tr.maxZoom) : startZoom;\n      var bearing = options.bearing ? this.normalizeBearing(options.bearing, startBearing) : startBearing;\n      var pitch = options.pitch ? +options.pitch : startPitch;\n      var padding = 'padding' in options ? options.padding : tr.padding;\n      var scale = tr.zoomScale(zoom - startZoom);\n      var offsetAsPoint = Point.convert(options.offset);\n      var pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n      var locationAtOffset = tr.pointLocation(pointAtOffset);\n      var center = LngLat.convert(options.center || locationAtOffset);\n      this.normalizeCenter(center);\n      var from = tr.project(locationAtOffset);\n      var delta = tr.project(center).sub(from);\n      var rho = options.curve;\n\n      // w₀: Initial visible span, measured in pixels at the initial scale.\n      var w0 = Math.max(tr.width, tr.height);\n      // w₁: Final visible span, measured in pixels with respect to the initial scale.\n      var w1 = w0 / scale;\n      // Length of the flight path as projected onto the ground plane, measured in pixels from\n      // the world image origin at the initial scale.\n      var u1 = delta.mag();\n      if ('minZoom' in options) {\n        var minZoom = clamp(Math.min(options.minZoom, startZoom, zoom), tr.minZoom, tr.maxZoom);\n        // w<sub>m</sub>: Maximum visible span, measured in pixels with respect to the initial\n        // scale.\n        var wMax = w0 / tr.zoomScale(minZoom - startZoom);\n        rho = Math.sqrt(wMax / u1 * 2);\n      }\n\n      // ρ²\n      var rho2 = rho * rho;\n\n      /**\n       * rᵢ: Returns the zoom-out factor at one end of the animation.\n       *\n       * @param i 0 for the ascent or 1 for the descent.\n       * @private\n       */\n      function r(i) {\n        var b = (w1 * w1 - w0 * w0 + (i ? -1 : 1) * rho2 * rho2 * u1 * u1) / (2 * (i ? w1 : w0) * rho2 * u1);\n        return Math.log(Math.sqrt(b * b + 1) - b);\n      }\n      function sinh(n) {\n        return (Math.exp(n) - Math.exp(-n)) / 2;\n      }\n      function cosh(n) {\n        return (Math.exp(n) + Math.exp(-n)) / 2;\n      }\n      function tanh(n) {\n        return sinh(n) / cosh(n);\n      }\n\n      // r₀: Zoom-out factor during ascent.\n      var r0 = r(0);\n\n      // w(s): Returns the visible span on the ground, measured in pixels with respect to the\n      // initial scale. Assumes an angular field of view of 2 arctan ½ ≈ 53°.\n      var w = function w(s) {\n        return cosh(r0) / cosh(r0 + rho * s);\n      };\n\n      // u(s): Returns the distance along the flight path as projected onto the ground plane,\n      // measured in pixels from the world image origin at the initial scale.\n      var u = function u(s) {\n        return w0 * ((cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2) / u1;\n      };\n\n      // S: Total length of the flight path, measured in ρ-screenfuls.\n      var S = (r(1) - r0) / rho;\n\n      // When u₀ = u₁, the optimal path doesn’t require both ascent and descent.\n      if (Math.abs(u1) < 0.000001 || !isFinite(S)) {\n        // Perform a more or less instantaneous transition if the path is too short.\n        if (Math.abs(w0 - w1) < 0.000001) {\n          return this.easeTo(options, eventData);\n        }\n        var k = w1 < w0 ? -1 : 1;\n        S = Math.abs(Math.log(w1 / w0)) / rho;\n        u = function u() {\n          return 0;\n        };\n        w = function w(s) {\n          return Math.exp(k * rho * s);\n        };\n      }\n      if ('duration' in options) {\n        options.duration = +options.duration;\n      } else {\n        var V = 'screenSpeed' in options ? +options.screenSpeed / rho : +options.speed;\n        options.duration = 1000 * S / V;\n      }\n      if (options.maxDuration && options.duration > options.maxDuration) {\n        options.duration = 0;\n      }\n      this.zooming = true;\n      this.rotating = startBearing !== bearing;\n      this.pitching = pitch !== startPitch;\n      this.padding = !tr.isPaddingEqual(padding);\n      this.prepareEase(eventData, false);\n      this.ease(function (k) {\n        // s: The distance traveled along the flight path, measured in ρ-screenfuls.\n        var s = k * S;\n        // @ts-ignore\n        var easeScale = 1 / w(s);\n        tr.zoom = k === 1 ? zoom : startZoom + tr.scaleZoom(easeScale);\n        if (_this3.rotating) {\n          tr.bearing = interpolate(startBearing, bearing, k);\n        }\n        if (_this3.pitching) {\n          tr.pitch = interpolate(startPitch, pitch, k);\n        }\n        if (_this3.padding) {\n          tr.interpolatePadding(startPadding, padding, k);\n          // When padding is being applied, Transform#centerPoint is changing continously,\n          // thus we need to recalculate offsetPoint every frame\n          pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n        }\n        var newCenter = k === 1 ? center : tr.unproject(from.add(delta.mult(u(s))).mult(easeScale));\n        tr.setLocationAtPoint(tr.renderWorldCopies ? newCenter.wrap() : newCenter, pointAtOffset);\n        _this3.fireMoveEvents(eventData);\n      }, function () {\n        return _this3.afterEase(eventData);\n      }, options);\n      return this;\n    }\n  }, {\n    key: \"fitScreenCoordinates\",\n    value: function fitScreenCoordinates(p0, p1, bearing, options, eventData) {\n      return this.fitInternal(\n      // @ts-ignore\n      this.cameraForBoxAndBearing(this.transform.pointLocation(Point.convert(p0)), this.transform.pointLocation(Point.convert(p1)), bearing,\n      // @ts-ignore\n      options), options, eventData);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(allowGestures, easeId) {\n      if (this.easeFrameId) {\n        this.cancelRenderFrame(this.easeFrameId);\n        // @ts-ignore\n        delete this.easeFrameId;\n        // @ts-ignore\n        delete this.onEaseFrame;\n      }\n      if (this.onEaseEnd) {\n        // The _onEaseEnd function might emit events which trigger new\n        // animation, which sets a new _onEaseEnd. Ensure we don't delete\n        // it unintentionally.\n        var onEaseEnd = this.onEaseEnd;\n        // @ts-ignore\n        delete this.onEaseEnd;\n        onEaseEnd.call(this, easeId);\n      }\n      // if (!allowGestures) {\n      //     const handlers = (this: any).handlers;\n      //     if (handlers) handlers.stop();\n      // }\n      return this;\n    }\n  }, {\n    key: \"normalizeBearing\",\n    value: function normalizeBearing(bearing, currentBearing) {\n      bearing = wrap(bearing, -180, 180);\n      var diff = Math.abs(bearing - currentBearing);\n      if (Math.abs(bearing - 360 - currentBearing) < diff) {\n        bearing -= 360;\n      }\n      if (Math.abs(bearing + 360 - currentBearing) < diff) {\n        bearing += 360;\n      }\n      return bearing;\n    }\n  }, {\n    key: \"normalizeCenter\",\n    value: function normalizeCenter(center) {\n      var tr = this.transform;\n      if (!tr.renderWorldCopies || tr.lngRange) {\n        return;\n      }\n      var delta = center.lng - tr.center.lng;\n      center.lng += delta > 180 ? -360 : delta < -180 ? 360 : 0;\n    }\n  }, {\n    key: \"fireMoveEvents\",\n    value: function fireMoveEvents(eventData) {\n      this.emit('move', new Event('move', eventData));\n      if (this.zooming) {\n        this.emit('zoom', new Event('zoom', eventData));\n      }\n      if (this.rotating) {\n        this.emit('rotate', new Event('rotate', eventData));\n      }\n      if (this.pitching) {\n        this.emit('rotate', new Event('pitch', eventData));\n      }\n    }\n  }, {\n    key: \"prepareEase\",\n    value: function prepareEase(eventData) {\n      var noMoveStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var currently = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.moving = true;\n      if (!noMoveStart && !currently.moving) {\n        this.emit('movestart', new Event('movestart', eventData));\n      }\n      if (this.zooming && !currently.zooming) {\n        this.emit('zoomstart', new Event('zoomstart', eventData));\n      }\n      if (this.rotating && !currently.rotating) {\n        this.emit('rotatestart', new Event('rotatestart', eventData));\n      }\n      if (this.pitching && !currently.pitching) {\n        this.emit('pitchstart', new Event('pitchstart', eventData));\n      }\n    }\n  }, {\n    key: \"afterEase\",\n    value: function afterEase(eventData, easeId) {\n      // if this easing is being stopped to start another easing with\n      // the same id then don't fire any events to avoid extra start/stop events\n      if (this.easeId && easeId && this.easeId === easeId) {\n        return;\n      }\n      // @ts-ignore\n      delete this.easeId;\n      var wasZooming = this.zooming;\n      var wasRotating = this.rotating;\n      var wasPitching = this.pitching;\n      this.moving = false;\n      this.zooming = false;\n      this.rotating = false;\n      this.pitching = false;\n      this.padding = false;\n      if (wasZooming) {\n        this.emit('zoomend', new Event('zoomend', eventData));\n      }\n      if (wasRotating) {\n        this.emit('rotateend', new Event('rotateend', eventData));\n      }\n      if (wasPitching) {\n        this.emit('pitchend', new Event('pitchend', eventData));\n      }\n      this.emit('moveend', new Event('moveend', eventData));\n    }\n  }, {\n    key: \"ease\",\n    value: function ease(frame, finish, options) {\n      if (options.animate === false || options.duration === 0) {\n        frame(1);\n        finish();\n      } else {\n        this.easeStart = now();\n        this.easeOptions = options;\n        this.onEaseFrame = frame;\n        this.onEaseEnd = finish;\n        this.easeFrameId = this.requestRenderFrame(this.renderFrameCallback);\n      }\n    }\n  }, {\n    key: \"cameraForBoxAndBearing\",\n    value: function cameraForBoxAndBearing(p0, p1, bearing, options) {\n      var defaultPadding = {\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0\n      };\n      options = merge({\n        padding: defaultPadding,\n        offset: [0, 0],\n        maxZoom: this.transform.maxZoom\n      }, options);\n      if (typeof options.padding === 'number') {\n        var p = options.padding;\n        options.padding = {\n          top: p,\n          bottom: p,\n          right: p,\n          left: p\n        };\n      }\n      options.padding = merge(defaultPadding, options.padding);\n      var tr = this.transform;\n      var edgePadding = tr.padding;\n\n      // We want to calculate the upper right and lower left of the box defined by p0 and p1\n      // in a coordinate system rotate to match the destination bearing.\n      var p0world = tr.project(LngLat.convert(p0));\n      var p1world = tr.project(LngLat.convert(p1));\n      var p0rotated = p0world.rotate(-bearing * Math.PI / 180);\n      var p1rotated = p1world.rotate(-bearing * Math.PI / 180);\n      var upperRight = new Point(Math.max(p0rotated.x, p1rotated.x), Math.max(p0rotated.y, p1rotated.y));\n      var lowerLeft = new Point(Math.min(p0rotated.x, p1rotated.x), Math.min(p0rotated.y, p1rotated.y));\n\n      // Calculate zoom: consider the original bbox and padding.\n      var size = upperRight.sub(lowerLeft);\n      var scaleX = (tr.width - (\n      // @ts-ignore\n      edgePadding.left +\n      // @ts-ignore\n      edgePadding.right +\n      // @ts-ignore\n      options.padding.left +\n      // @ts-ignore\n      options.padding.right)) / size.x;\n      var scaleY = (tr.height - (\n      // @ts-ignore\n      edgePadding.top +\n      // @ts-ignore\n      edgePadding.bottom +\n      // @ts-ignore\n      options.padding.top +\n      // @ts-ignore\n      options.padding.bottom)) / size.y;\n      if (scaleY < 0 || scaleX < 0) {\n        return;\n      }\n      var zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), options.maxZoom);\n\n      // Calculate center: apply the zoom, the configured offset, as well as offset that exists as a result of padding.\n      var offset = Point.convert(options.offset);\n      // @ts-ignore\n      var paddingOffsetX = (options.padding.left - options.padding.right) / 2;\n      // @ts-ignore\n      var paddingOffsetY = (options.padding.top - options.padding.bottom) / 2;\n      var offsetAtInitialZoom = new Point(offset.x + paddingOffsetX, offset.y + paddingOffsetY);\n      var offsetAtFinalZoom = offsetAtInitialZoom.mult(tr.scale / tr.zoomScale(zoom));\n      var center = tr.unproject(p0world.add(p1world).div(2).sub(offsetAtFinalZoom));\n      return {\n        center: center,\n        zoom: zoom,\n        bearing: bearing\n      };\n    }\n  }, {\n    key: \"fitInternal\",\n    value: function fitInternal(calculatedOptions, options, eventData) {\n      // cameraForBounds warns + returns undefined if unable to fit:\n      if (!calculatedOptions) {\n        return this;\n      }\n      options = merge(calculatedOptions, options);\n      // Explictly remove the padding field because, calculatedOptions already accounts for padding by setting zoom and center accordingly.\n      delete options.padding;\n      // @ts-ignore\n      return options.linear ? this.easeTo(options, eventData) : this.flyTo(options, eventData);\n    }\n  }]);\n  return Camera;\n}(EventEmitter);\nexport { Camera as default };","map":{"version":3,"names":["_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","lodashUtil","EventEmitter","LngLat","LngLatBounds","Point","Transform","Event","clamp","ease","defaultEasing","extend","interpolate","now","pick","prefersReducedMotion","wrap","merge","Camera","_EventEmitter","_super","options","_this","t","Math","min","easeStart","easeOptions","duration","onEaseFrame","easing","easeFrameId","requestRenderFrame","renderFrameCallback","stop","minZoom","maxZoom","minPitch","maxPitch","renderWorldCopies","moving","zooming","bearingSnap","pitchEnabled","rotateEnabled","transform","key","value","cb","cancelRenderFrame","_","getCenter","_this$transform$cente","center","lng","lat","getZoom","zoom","getPitch","pitch","setCenter","eventData","jumpTo","setPitch","getBearing","bearing","panTo","lnglat","easeTo","panBy","offset","convert","mult","zoomOut","zoomTo","setBearing","setZoom","zoomIn","getPadding","padding","setPadding","rotateTo","resetNorth","resetNorthPitch","fitBounds","bounds","fitInternal","cameraForBounds","cameraForBoxAndBearing","getNorthWest","getSouthEast","snapToNorth","abs","length","undefined","tr","zoomChanged","bearingChanged","pitchChanged","isPaddingEqual","emit","_this2","animate","essential","startZoom","startBearing","startPitch","startPadding","normalizeBearing","offsetAsPoint","pointAtOffset","centerPoint","add","locationAtOffset","pointLocation","normalizeCenter","from","project","delta","sub","finalScale","zoomScale","around","aroundPoint","locationPoint","currently","rotating","pitching","easeId","prepareEase","noMoveStart","clearTimeout","easeEndTimeoutID","k","interpolatePadding","setLocationAtPoint","scale","base","max","speedup","pow","newCenter","unproject","fireMoveEvents","interruptingEaseId","afterEase","flyTo","_this3","coercedOptions","speed","curve","rho","w0","width","height","w1","u1","mag","wMax","sqrt","rho2","r","i","b","log","sinh","n","exp","cosh","tanh","r0","w","s","u","S","isFinite","V","screenSpeed","maxDuration","easeScale","scaleZoom","fitScreenCoordinates","p0","p1","allowGestures","onEaseEnd","currentBearing","diff","lngRange","wasZooming","wasRotating","wasPitching","frame","finish","defaultPadding","top","bottom","right","left","p","edgePadding","p0world","p1world","p0rotated","rotate","PI","p1rotated","upperRight","x","y","lowerLeft","size","scaleX","scaleY","paddingOffsetX","paddingOffsetY","offsetAtInitialZoom","offsetAtFinalZoom","div","calculatedOptions","linear","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-map/es/camera.js"],"sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n// @ts-ignore\nimport { lodashUtil } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport LngLat from \"./geo/lng_lat\";\nimport LngLatBounds from \"./geo/lng_lat_bounds\";\nimport Point from \"./geo/point\";\nimport Transform from \"./geo/transform\";\nimport { Event } from \"./handler/events/event\";\nimport { clamp, ease as defaultEasing, extend, interpolate, now, pick, prefersReducedMotion, wrap } from \"./util\";\nvar merge = lodashUtil.merge;\nvar Camera = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(Camera, _EventEmitter);\n  var _super = _createSuper(Camera);\n  // public requestRenderFrame: (_: any) => number;\n  // public cancelRenderFrame: (_: number) => void;\n\n  function Camera(options) {\n    var _this;\n    _classCallCheck(this, Camera);\n    _this = _super.call(this);\n    _defineProperty(_assertThisInitialized(_this), \"renderFrameCallback\", function () {\n      var t = Math.min((now() - _this.easeStart) / _this.easeOptions.duration, 1);\n      _this.onEaseFrame(_this.easeOptions.easing(t));\n      if (t < 1) {\n        // this.easeFrameId = window.requestAnimationFrame(this.renderFrameCallback);\n        _this.easeFrameId = _this.requestRenderFrame(_this.renderFrameCallback);\n      } else {\n        _this.stop();\n      }\n    });\n    _this.options = options;\n    var minZoom = options.minZoom,\n      maxZoom = options.maxZoom,\n      minPitch = options.minPitch,\n      maxPitch = options.maxPitch,\n      renderWorldCopies = options.renderWorldCopies;\n    _this.moving = false;\n    _this.zooming = false;\n    _this.bearingSnap = options.bearingSnap;\n    _this.pitchEnabled = options.pitchEnabled;\n    _this.rotateEnabled = options.rotateEnabled;\n    _this.transform = new Transform(minZoom, maxZoom, minPitch, maxPitch, renderWorldCopies);\n    return _this;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _createClass(Camera, [{\n    key: \"requestRenderFrame\",\n    value: function requestRenderFrame(cb) {\n      return 0;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  }, {\n    key: \"cancelRenderFrame\",\n    value: function cancelRenderFrame(_) {\n      return;\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$transform$cente = this.transform.center,\n        lng = _this$transform$cente.lng,\n        lat = _this$transform$cente.lat;\n      return new LngLat(lng, lat);\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.transform.zoom;\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.transform.pitch;\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(center, eventData) {\n      return this.jumpTo({\n        center: center\n      }, eventData);\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch, eventData) {\n      this.jumpTo({\n        pitch: pitch\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"getBearing\",\n    value: function getBearing() {\n      return this.transform.bearing;\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(lnglat, options, eventData) {\n      return this.easeTo(merge({\n        center: lnglat\n      }, options), eventData);\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(offset, options, eventData) {\n      offset = Point.convert(offset).mult(-1);\n      return this.panTo(this.transform.center, extend({\n        offset: offset\n      }, options || {}), eventData);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut(options, eventData) {\n      this.zoomTo(this.getZoom() - 1, options, eventData);\n      return this;\n    }\n  }, {\n    key: \"setBearing\",\n    value: function setBearing(bearing, eventData) {\n      this.jumpTo({\n        bearing: bearing\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom, eventData) {\n      this.jumpTo({\n        zoom: zoom\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn(options, eventData) {\n      this.zoomTo(this.getZoom() + 1, options, eventData);\n      return this;\n    }\n  }, {\n    key: \"zoomTo\",\n    value: function zoomTo(zoom, options, eventData) {\n      return this.easeTo(merge({\n        zoom: zoom\n      }, options), eventData);\n    }\n  }, {\n    key: \"getPadding\",\n    value: function getPadding() {\n      return this.transform.padding;\n    }\n  }, {\n    key: \"setPadding\",\n    value: function setPadding(padding, eventData) {\n      this.jumpTo({\n        padding: padding\n      }, eventData);\n      return this;\n    }\n  }, {\n    key: \"rotateTo\",\n    value: function rotateTo(bearing, options, eventData) {\n      return this.easeTo(merge({\n        bearing: bearing\n      }, options), eventData);\n    }\n  }, {\n    key: \"resetNorth\",\n    value: function resetNorth(options, eventData) {\n      this.rotateTo(0, merge({\n        duration: 1000\n      }, options), eventData);\n      return this;\n    }\n  }, {\n    key: \"resetNorthPitch\",\n    value: function resetNorthPitch(options, eventData) {\n      this.easeTo(merge({\n        bearing: 0,\n        pitch: 0,\n        duration: 1000\n      }, options), eventData);\n      return this;\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bounds, options, eventData) {\n      return this.fitInternal(\n      // @ts-ignore\n      this.cameraForBounds(bounds, options), options, eventData);\n    }\n  }, {\n    key: \"cameraForBounds\",\n    value: function cameraForBounds(bounds, options) {\n      bounds = LngLatBounds.convert(bounds);\n      return this.cameraForBoxAndBearing(bounds.getNorthWest(), bounds.getSouthEast(), 0,\n      // @ts-ignore\n      options);\n    }\n  }, {\n    key: \"snapToNorth\",\n    value: function snapToNorth(options, eventData) {\n      if (Math.abs(this.getBearing()) < this.bearingSnap) {\n        return this.resetNorth(options, eventData);\n      }\n      return this;\n    }\n  }, {\n    key: \"jumpTo\",\n    value: function jumpTo() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      this.stop();\n      var tr = this.transform;\n      var zoomChanged = false;\n      var bearingChanged = false;\n      var pitchChanged = false;\n      if (options.zoom !== undefined && tr.zoom !== +options.zoom) {\n        zoomChanged = true;\n        tr.zoom = +options.zoom;\n      }\n      if (options.center !== undefined) {\n        tr.center = LngLat.convert(options.center);\n      }\n      if (options.bearing !== undefined && tr.bearing !== +options.bearing) {\n        bearingChanged = true;\n        tr.bearing = +options.bearing;\n      }\n      if (options.pitch !== undefined && tr.pitch !== +options.pitch) {\n        pitchChanged = true;\n        tr.pitch = +options.pitch;\n      }\n      if (options.padding !== undefined && !tr.isPaddingEqual(options.padding)) {\n        tr.padding = options.padding;\n      }\n      this.emit('movestart', new Event('movestart', eventData));\n      this.emit('move', new Event('move', eventData));\n      if (zoomChanged) {\n        this.emit('zoomstart', new Event('zoomstart', eventData));\n        this.emit('zoom', new Event('zoom', eventData));\n        this.emit('zoomend', new Event('zoomend', eventData));\n      }\n      if (bearingChanged) {\n        this.emit('rotatestart', new Event('rotatestart', eventData));\n        this.emit('rotate', new Event('rotate', eventData));\n        this.emit('rotateend', new Event('rotateend', eventData));\n      }\n      if (pitchChanged) {\n        this.emit('pitchstart', new Event('pitchstart', eventData));\n        this.emit('pitch', new Event('pitch', eventData));\n        this.emit('pitchend', new Event('pitchend', eventData));\n      }\n      return this.emit('moveend', new Event('moveend', eventData));\n    }\n  }, {\n    key: \"easeTo\",\n    value: function easeTo() {\n      var _this2 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      options = merge({\n        offset: [0, 0],\n        duration: 500,\n        easing: defaultEasing\n      }, options);\n      if (options.animate === false || !options.essential && prefersReducedMotion()) {\n        options.duration = 0;\n      }\n      var tr = this.transform;\n      var startZoom = this.getZoom();\n      var startBearing = this.getBearing();\n      var startPitch = this.getPitch();\n      var startPadding = this.getPadding();\n      var zoom = options.zoom ? +options.zoom : startZoom;\n      var bearing = options.bearing ? this.normalizeBearing(options.bearing, startBearing) : startBearing;\n      var pitch = options.pitch ? +options.pitch : startPitch;\n      var padding = options.padding ? options.padding : tr.padding;\n      var offsetAsPoint = Point.convert(options.offset);\n      var pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n      var locationAtOffset = tr.pointLocation(pointAtOffset);\n      var center = LngLat.convert(options.center || locationAtOffset);\n      this.normalizeCenter(center);\n      var from = tr.project(locationAtOffset);\n      var delta = tr.project(center).sub(from);\n      var finalScale = tr.zoomScale(zoom - startZoom);\n      var around;\n      var aroundPoint;\n      if (options.around) {\n        around = LngLat.convert(options.around);\n        aroundPoint = tr.locationPoint(around);\n      }\n      var currently = {\n        moving: this.moving,\n        zooming: this.zooming,\n        rotating: this.rotating,\n        pitching: this.pitching\n      };\n      this.zooming = this.zooming || zoom !== startZoom;\n      this.rotating = this.rotating || startBearing !== bearing;\n      this.pitching = this.pitching || pitch !== startPitch;\n      this.padding = !tr.isPaddingEqual(padding);\n      this.easeId = options.easeId;\n      this.prepareEase(eventData, options.noMoveStart, currently);\n      clearTimeout(this.easeEndTimeoutID);\n      this.ease(function (k) {\n        if (_this2.zooming) {\n          tr.zoom = interpolate(startZoom, zoom, k);\n        }\n        if (_this2.rotating && _this2.rotateEnabled) {\n          tr.bearing = interpolate(startBearing, bearing, k);\n        }\n        if (_this2.pitching && _this2.pitchEnabled) {\n          tr.pitch = interpolate(startPitch, pitch, k);\n        }\n        if (_this2.padding) {\n          tr.interpolatePadding(startPadding, padding, k);\n          // When padding is being applied, Transform#centerPoint is changing continously,\n          // thus we need to recalculate offsetPoint every fra,e\n          pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n        }\n        if (around) {\n          tr.setLocationAtPoint(around, aroundPoint);\n        } else {\n          var scale = tr.zoomScale(tr.zoom - startZoom);\n          var base = zoom > startZoom ? Math.min(2, finalScale) : Math.max(0.5, finalScale);\n          var speedup = Math.pow(base, 1 - k);\n          var newCenter = tr.unproject(from.add(delta.mult(k * speedup)).mult(scale));\n          tr.setLocationAtPoint(tr.renderWorldCopies ? newCenter.wrap() : newCenter, pointAtOffset);\n        }\n        _this2.fireMoveEvents(eventData);\n      }, function (interruptingEaseId) {\n        _this2.afterEase(eventData, interruptingEaseId);\n      },\n      // @ts-ignore\n      options);\n      return this;\n    }\n  }, {\n    key: \"flyTo\",\n    value: function flyTo() {\n      var _this3 = this;\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var eventData = arguments.length > 1 ? arguments[1] : undefined;\n      // Fall through to jumpTo if user has set prefers-reduced-motion\n      if (!options.essential && prefersReducedMotion()) {\n        var coercedOptions = pick(options, ['center', 'zoom', 'bearing', 'pitch', 'around']);\n        return this.jumpTo(coercedOptions, eventData);\n      }\n      this.stop();\n      options = merge({\n        offset: [0, 0],\n        speed: 1.2,\n        curve: 1.42,\n        easing: defaultEasing\n      }, options);\n      var tr = this.transform;\n      var startZoom = this.getZoom();\n      var startBearing = this.getBearing();\n      var startPitch = this.getPitch();\n      var startPadding = this.getPadding();\n      var zoom = options.zoom ? clamp(+options.zoom, tr.minZoom, tr.maxZoom) : startZoom;\n      var bearing = options.bearing ? this.normalizeBearing(options.bearing, startBearing) : startBearing;\n      var pitch = options.pitch ? +options.pitch : startPitch;\n      var padding = 'padding' in options ? options.padding : tr.padding;\n      var scale = tr.zoomScale(zoom - startZoom);\n      var offsetAsPoint = Point.convert(options.offset);\n      var pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n      var locationAtOffset = tr.pointLocation(pointAtOffset);\n      var center = LngLat.convert(options.center || locationAtOffset);\n      this.normalizeCenter(center);\n      var from = tr.project(locationAtOffset);\n      var delta = tr.project(center).sub(from);\n      var rho = options.curve;\n\n      // w₀: Initial visible span, measured in pixels at the initial scale.\n      var w0 = Math.max(tr.width, tr.height);\n      // w₁: Final visible span, measured in pixels with respect to the initial scale.\n      var w1 = w0 / scale;\n      // Length of the flight path as projected onto the ground plane, measured in pixels from\n      // the world image origin at the initial scale.\n      var u1 = delta.mag();\n      if ('minZoom' in options) {\n        var minZoom = clamp(Math.min(options.minZoom, startZoom, zoom), tr.minZoom, tr.maxZoom);\n        // w<sub>m</sub>: Maximum visible span, measured in pixels with respect to the initial\n        // scale.\n        var wMax = w0 / tr.zoomScale(minZoom - startZoom);\n        rho = Math.sqrt(wMax / u1 * 2);\n      }\n\n      // ρ²\n      var rho2 = rho * rho;\n\n      /**\n       * rᵢ: Returns the zoom-out factor at one end of the animation.\n       *\n       * @param i 0 for the ascent or 1 for the descent.\n       * @private\n       */\n      function r(i) {\n        var b = (w1 * w1 - w0 * w0 + (i ? -1 : 1) * rho2 * rho2 * u1 * u1) / (2 * (i ? w1 : w0) * rho2 * u1);\n        return Math.log(Math.sqrt(b * b + 1) - b);\n      }\n      function sinh(n) {\n        return (Math.exp(n) - Math.exp(-n)) / 2;\n      }\n      function cosh(n) {\n        return (Math.exp(n) + Math.exp(-n)) / 2;\n      }\n      function tanh(n) {\n        return sinh(n) / cosh(n);\n      }\n\n      // r₀: Zoom-out factor during ascent.\n      var r0 = r(0);\n\n      // w(s): Returns the visible span on the ground, measured in pixels with respect to the\n      // initial scale. Assumes an angular field of view of 2 arctan ½ ≈ 53°.\n      var w = function w(s) {\n        return cosh(r0) / cosh(r0 + rho * s);\n      };\n\n      // u(s): Returns the distance along the flight path as projected onto the ground plane,\n      // measured in pixels from the world image origin at the initial scale.\n      var u = function u(s) {\n        return w0 * ((cosh(r0) * tanh(r0 + rho * s) - sinh(r0)) / rho2) / u1;\n      };\n\n      // S: Total length of the flight path, measured in ρ-screenfuls.\n      var S = (r(1) - r0) / rho;\n\n      // When u₀ = u₁, the optimal path doesn’t require both ascent and descent.\n      if (Math.abs(u1) < 0.000001 || !isFinite(S)) {\n        // Perform a more or less instantaneous transition if the path is too short.\n        if (Math.abs(w0 - w1) < 0.000001) {\n          return this.easeTo(options, eventData);\n        }\n        var k = w1 < w0 ? -1 : 1;\n        S = Math.abs(Math.log(w1 / w0)) / rho;\n        u = function u() {\n          return 0;\n        };\n        w = function w(s) {\n          return Math.exp(k * rho * s);\n        };\n      }\n      if ('duration' in options) {\n        options.duration = +options.duration;\n      } else {\n        var V = 'screenSpeed' in options ? +options.screenSpeed / rho : +options.speed;\n        options.duration = 1000 * S / V;\n      }\n      if (options.maxDuration && options.duration > options.maxDuration) {\n        options.duration = 0;\n      }\n      this.zooming = true;\n      this.rotating = startBearing !== bearing;\n      this.pitching = pitch !== startPitch;\n      this.padding = !tr.isPaddingEqual(padding);\n      this.prepareEase(eventData, false);\n      this.ease(function (k) {\n        // s: The distance traveled along the flight path, measured in ρ-screenfuls.\n        var s = k * S;\n        // @ts-ignore\n        var easeScale = 1 / w(s);\n        tr.zoom = k === 1 ? zoom : startZoom + tr.scaleZoom(easeScale);\n        if (_this3.rotating) {\n          tr.bearing = interpolate(startBearing, bearing, k);\n        }\n        if (_this3.pitching) {\n          tr.pitch = interpolate(startPitch, pitch, k);\n        }\n        if (_this3.padding) {\n          tr.interpolatePadding(startPadding, padding, k);\n          // When padding is being applied, Transform#centerPoint is changing continously,\n          // thus we need to recalculate offsetPoint every frame\n          pointAtOffset = tr.centerPoint.add(offsetAsPoint);\n        }\n        var newCenter = k === 1 ? center : tr.unproject(from.add(delta.mult(u(s))).mult(easeScale));\n        tr.setLocationAtPoint(tr.renderWorldCopies ? newCenter.wrap() : newCenter, pointAtOffset);\n        _this3.fireMoveEvents(eventData);\n      }, function () {\n        return _this3.afterEase(eventData);\n      }, options);\n      return this;\n    }\n  }, {\n    key: \"fitScreenCoordinates\",\n    value: function fitScreenCoordinates(p0, p1, bearing, options, eventData) {\n      return this.fitInternal(\n      // @ts-ignore\n      this.cameraForBoxAndBearing(this.transform.pointLocation(Point.convert(p0)), this.transform.pointLocation(Point.convert(p1)), bearing,\n      // @ts-ignore\n      options), options, eventData);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(allowGestures, easeId) {\n      if (this.easeFrameId) {\n        this.cancelRenderFrame(this.easeFrameId);\n        // @ts-ignore\n        delete this.easeFrameId;\n        // @ts-ignore\n        delete this.onEaseFrame;\n      }\n      if (this.onEaseEnd) {\n        // The _onEaseEnd function might emit events which trigger new\n        // animation, which sets a new _onEaseEnd. Ensure we don't delete\n        // it unintentionally.\n        var onEaseEnd = this.onEaseEnd;\n        // @ts-ignore\n        delete this.onEaseEnd;\n        onEaseEnd.call(this, easeId);\n      }\n      // if (!allowGestures) {\n      //     const handlers = (this: any).handlers;\n      //     if (handlers) handlers.stop();\n      // }\n      return this;\n    }\n  }, {\n    key: \"normalizeBearing\",\n    value: function normalizeBearing(bearing, currentBearing) {\n      bearing = wrap(bearing, -180, 180);\n      var diff = Math.abs(bearing - currentBearing);\n      if (Math.abs(bearing - 360 - currentBearing) < diff) {\n        bearing -= 360;\n      }\n      if (Math.abs(bearing + 360 - currentBearing) < diff) {\n        bearing += 360;\n      }\n      return bearing;\n    }\n  }, {\n    key: \"normalizeCenter\",\n    value: function normalizeCenter(center) {\n      var tr = this.transform;\n      if (!tr.renderWorldCopies || tr.lngRange) {\n        return;\n      }\n      var delta = center.lng - tr.center.lng;\n      center.lng += delta > 180 ? -360 : delta < -180 ? 360 : 0;\n    }\n  }, {\n    key: \"fireMoveEvents\",\n    value: function fireMoveEvents(eventData) {\n      this.emit('move', new Event('move', eventData));\n      if (this.zooming) {\n        this.emit('zoom', new Event('zoom', eventData));\n      }\n      if (this.rotating) {\n        this.emit('rotate', new Event('rotate', eventData));\n      }\n      if (this.pitching) {\n        this.emit('rotate', new Event('pitch', eventData));\n      }\n    }\n  }, {\n    key: \"prepareEase\",\n    value: function prepareEase(eventData) {\n      var noMoveStart = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var currently = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.moving = true;\n      if (!noMoveStart && !currently.moving) {\n        this.emit('movestart', new Event('movestart', eventData));\n      }\n      if (this.zooming && !currently.zooming) {\n        this.emit('zoomstart', new Event('zoomstart', eventData));\n      }\n      if (this.rotating && !currently.rotating) {\n        this.emit('rotatestart', new Event('rotatestart', eventData));\n      }\n      if (this.pitching && !currently.pitching) {\n        this.emit('pitchstart', new Event('pitchstart', eventData));\n      }\n    }\n  }, {\n    key: \"afterEase\",\n    value: function afterEase(eventData, easeId) {\n      // if this easing is being stopped to start another easing with\n      // the same id then don't fire any events to avoid extra start/stop events\n      if (this.easeId && easeId && this.easeId === easeId) {\n        return;\n      }\n      // @ts-ignore\n      delete this.easeId;\n      var wasZooming = this.zooming;\n      var wasRotating = this.rotating;\n      var wasPitching = this.pitching;\n      this.moving = false;\n      this.zooming = false;\n      this.rotating = false;\n      this.pitching = false;\n      this.padding = false;\n      if (wasZooming) {\n        this.emit('zoomend', new Event('zoomend', eventData));\n      }\n      if (wasRotating) {\n        this.emit('rotateend', new Event('rotateend', eventData));\n      }\n      if (wasPitching) {\n        this.emit('pitchend', new Event('pitchend', eventData));\n      }\n      this.emit('moveend', new Event('moveend', eventData));\n    }\n  }, {\n    key: \"ease\",\n    value: function ease(frame, finish, options) {\n      if (options.animate === false || options.duration === 0) {\n        frame(1);\n        finish();\n      } else {\n        this.easeStart = now();\n        this.easeOptions = options;\n        this.onEaseFrame = frame;\n        this.onEaseEnd = finish;\n        this.easeFrameId = this.requestRenderFrame(this.renderFrameCallback);\n      }\n    }\n  }, {\n    key: \"cameraForBoxAndBearing\",\n    value: function cameraForBoxAndBearing(p0, p1, bearing, options) {\n      var defaultPadding = {\n        top: 0,\n        bottom: 0,\n        right: 0,\n        left: 0\n      };\n      options = merge({\n        padding: defaultPadding,\n        offset: [0, 0],\n        maxZoom: this.transform.maxZoom\n      }, options);\n      if (typeof options.padding === 'number') {\n        var p = options.padding;\n        options.padding = {\n          top: p,\n          bottom: p,\n          right: p,\n          left: p\n        };\n      }\n      options.padding = merge(defaultPadding, options.padding);\n      var tr = this.transform;\n      var edgePadding = tr.padding;\n\n      // We want to calculate the upper right and lower left of the box defined by p0 and p1\n      // in a coordinate system rotate to match the destination bearing.\n      var p0world = tr.project(LngLat.convert(p0));\n      var p1world = tr.project(LngLat.convert(p1));\n      var p0rotated = p0world.rotate(-bearing * Math.PI / 180);\n      var p1rotated = p1world.rotate(-bearing * Math.PI / 180);\n      var upperRight = new Point(Math.max(p0rotated.x, p1rotated.x), Math.max(p0rotated.y, p1rotated.y));\n      var lowerLeft = new Point(Math.min(p0rotated.x, p1rotated.x), Math.min(p0rotated.y, p1rotated.y));\n\n      // Calculate zoom: consider the original bbox and padding.\n      var size = upperRight.sub(lowerLeft);\n      var scaleX = (tr.width - (\n      // @ts-ignore\n      edgePadding.left +\n      // @ts-ignore\n      edgePadding.right +\n      // @ts-ignore\n      options.padding.left +\n      // @ts-ignore\n      options.padding.right)) / size.x;\n      var scaleY = (tr.height - (\n      // @ts-ignore\n      edgePadding.top +\n      // @ts-ignore\n      edgePadding.bottom +\n      // @ts-ignore\n      options.padding.top +\n      // @ts-ignore\n      options.padding.bottom)) / size.y;\n      if (scaleY < 0 || scaleX < 0) {\n        return;\n      }\n      var zoom = Math.min(tr.scaleZoom(tr.scale * Math.min(scaleX, scaleY)), options.maxZoom);\n\n      // Calculate center: apply the zoom, the configured offset, as well as offset that exists as a result of padding.\n      var offset = Point.convert(options.offset);\n      // @ts-ignore\n      var paddingOffsetX = (options.padding.left - options.padding.right) / 2;\n      // @ts-ignore\n      var paddingOffsetY = (options.padding.top - options.padding.bottom) / 2;\n      var offsetAtInitialZoom = new Point(offset.x + paddingOffsetX, offset.y + paddingOffsetY);\n      var offsetAtFinalZoom = offsetAtInitialZoom.mult(tr.scale / tr.zoomScale(zoom));\n      var center = tr.unproject(p0world.add(p1world).div(2).sub(offsetAtFinalZoom));\n      return {\n        center: center,\n        zoom: zoom,\n        bearing: bearing\n      };\n    }\n  }, {\n    key: \"fitInternal\",\n    value: function fitInternal(calculatedOptions, options, eventData) {\n      // cameraForBounds warns + returns undefined if unable to fit:\n      if (!calculatedOptions) {\n        return this;\n      }\n      options = merge(calculatedOptions, options);\n      // Explictly remove the padding field because, calculatedOptions already accounts for padding by setting zoom and center accordingly.\n      delete options.padding;\n      // @ts-ignore\n      return options.linear ? this.easeTo(options, eventData) : this.flyTo(options, eventData);\n    }\n  }]);\n  return Camera;\n}(EventEmitter);\nexport { Camera as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}