{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { required } from \"./accessors.js\";\nimport { Node, computeHeight } from \"./hierarchy/index.js\";\nvar preroot = {\n    depth: -1\n  },\n  ambiguous = {};\nfunction defaultId(d) {\n  return d.id;\n}\nfunction defaultParentId(d) {\n  return d.parentId;\n}\nexport default function () {\n  var id = defaultId,\n    parentId = defaultParentId;\n  function stratify(data) {\n    var nodes = Array.from(data),\n      n = nodes.length,\n      d,\n      i,\n      root,\n      parent,\n      node,\n      nodeId,\n      nodeKey,\n      nodeByKey = new Map();\n    for (i = 0; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = id(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = parentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n    if (!root) throw new Error(\"no root\");\n    root.parent = preroot;\n    root.eachBefore(function (node) {\n      node.depth = node.parent.depth + 1;\n      --n;\n    }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n    return root;\n  }\n  stratify.id = function (x) {\n    return arguments.length ? (id = required(x), stratify) : id;\n  };\n  stratify.parentId = function (x) {\n    return arguments.length ? (parentId = required(x), stratify) : parentId;\n  };\n  return stratify;\n}","map":{"version":3,"names":["required","Node","computeHeight","preroot","depth","ambiguous","defaultId","d","id","defaultParentId","parentId","stratify","data","nodes","Array","from","n","length","i","root","parent","node","nodeId","nodeKey","nodeByKey","Map","set","has","get","Error","children","push","eachBefore","x","arguments"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/d3-hierarchy/src/stratify.js"],"sourcesContent":["import {required} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        n = nodes.length,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    for (i = 0; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = id(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = parentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = required(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = required(x), stratify) : parentId;\n  };\n\n  return stratify;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}