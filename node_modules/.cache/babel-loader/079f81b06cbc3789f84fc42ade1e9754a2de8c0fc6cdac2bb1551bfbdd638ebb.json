{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"mapInstance\", \"center\", \"token\", \"version\", \"libraries\", \"minZoom\", \"maxZoom\", \"rotation\", \"pitch\", \"mapSize\", \"logoVisible\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\"img[src*='//mapapi.qq.com/web/jsapi/logo/logo_def.png'],.logo-text {\\n  display: none !important;\\n}\\n\");\nimport TMapLoader from \"./maploader\";\nvar TMAP_API_KEY = 'OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77';\nvar BMAP_VERSION = '1.exp';\nvar EventMap = {\n  mapmove: 'center_changed',\n  camerachange: ['drag', 'pan', 'rotate', 'pitch', 'zoom'],\n  zoomchange: 'zoom',\n  dragging: 'drag'\n};\nvar TMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(TMapService, _BaseMapService);\n  var _super = _createSuper(TMapService);\n  function TMapService() {\n    var _this;\n    _classCallCheck(this, TMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    // @ts-ignore\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", null);\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      // Trigger map change event\n      _this.emit('mapchange');\n      // resync\n      var map = _this.map;\n      // @ts-ignore\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng, lat],\n        // @ts-ignore\n        viewportHeight: map.getContainer().clientHeight,\n        // @ts-ignore\n        viewportWidth: map.getContainer().clientWidth,\n        // @ts-ignore\n        bearing: map.getHeading(),\n        // @ts-ignore\n        pitch: map.getPitch(),\n        // @ts-ignore\n        zoom: map.getZoom() - 1\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(TMapService, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this$map$controlMana;\n        var _this$config, id, mapInstance, _this$config$center, center, _this$config$token, token, _this$config$version, version, _this$config$librarie, libraries, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$rotation, rotation, _this$config$pitch, pitch, _this$config$mapSize, mapSize, _this$config$logoVisi, logoVisible, rest, mapContainer, map, controlParentContainer;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n\n              // TODO: Handle initial config\n              _this$config = this.config, id = _this$config.id, mapInstance = _this$config.mapInstance, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? TMAP_API_KEY : _this$config$token, _this$config$version = _this$config.version, version = _this$config$version === void 0 ? BMAP_VERSION : _this$config$version, _this$config$librarie = _this$config.libraries, libraries = _this$config$librarie === void 0 ? [] : _this$config$librarie, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 3 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$rotation = _this$config.rotation, rotation = _this$config$rotation === void 0 ? 0 : _this$config$rotation, _this$config$pitch = _this$config.pitch, pitch = _this$config$pitch === void 0 ? 0 : _this$config$pitch, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$logoVisi = _this$config.logoVisible, logoVisible = _this$config$logoVisi === void 0 ? true : _this$config$logoVisi, rest = _objectWithoutProperties(_this$config, _excluded);\n              if (window.TMap || mapInstance) {\n                _context.next = 5;\n                break;\n              }\n              _context.next = 5;\n              return TMapLoader.load({\n                key: token,\n                version: version,\n                libraries: libraries\n              });\n            case 5:\n              if (!mapInstance) {\n                _context.next = 11;\n                break;\n              }\n              // If there's already a map instance, maybe not setting any other configurations\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getContainer();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n              _context.next = 18;\n              break;\n            case 11:\n              if (id) {\n                _context.next = 13;\n                break;\n              }\n              throw Error('No container id specified');\n            case 13:\n              mapContainer = DOM.getContainer(id);\n              map = new TMap.Map(mapContainer, _objectSpread({\n                maxZoom: maxZoom,\n                minZoom: minZoom,\n                rotation: rotation,\n                pitch: pitch,\n                showControl: false,\n                // Tencent use (Lat, Lng) while center is (Lng, Lat)\n                center: new TMap.LatLng(center[1], center[0])\n              }, rest)); // @ts-ignore\n              this.map = map;\n              // @ts-ignore\n              this.$mapContainer = map.getContainer();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n            case 18:\n              // Set tencent map canvas element position as absolute\n              // @ts-ignore\n              this.map.canvasContainer.style.position = 'absolute';\n\n              // Set tencent map control layer dom index\n              // @ts-ignore\n              controlParentContainer = (_this$map$controlMana = this.map.controlManager.controlContainer) === null || _this$map$controlMana === void 0 ? void 0 : _this$map$controlMana.parentNode;\n              if (controlParentContainer) {\n                controlParentContainer.style.zIndex = 2;\n              }\n              this.simpleMapCoord.setSize(mapSize);\n\n              // May be find an integrated event replacing following events\n              this.map.on('drag', this.handleCameraChanged);\n              this.map.on('pan', this.handleCameraChanged);\n              this.map.on('rotate', this.handleCameraChanged);\n              this.map.on('pitch', this.handleCameraChanged);\n              this.map.on('zoom', this.handleCameraChanged);\n\n              // Trigger camera change after init\n              this.handleCameraChanged();\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.map.destroy();\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {\n      var container = this.map.getContainer();\n      this.markerContainer = DOM.create('div', 'l7-marker-container', container);\n      this.markerContainer.setAttribute('tabindex', '-1');\n      this.markerContainer.style.zIndex = '2';\n    }\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.markerContainer;\n    }\n\n    // MapEvent\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      var _this2 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n      } else {\n        var onProxy = function onProxy(eventName) {\n          var cbProxyMap = _this2.evtCbProxyMap.get(eventName);\n          if (!cbProxyMap) {\n            _this2.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n          }\n          if (cbProxyMap.get(handle)) {\n            return;\n          }\n          var handleProxy = function handleProxy() {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n              args[0].lngLat = args[0].latlng || args[0].latLng;\n            }\n            handle.apply(void 0, args);\n          };\n          cbProxyMap.set(handle, handleProxy);\n          _this2.map.on(eventName, handleProxy);\n        };\n        if (Array.isArray(EventMap[type])) {\n          EventMap[type].forEach(function (eventName) {\n            onProxy(eventName || type);\n          });\n        } else {\n          onProxy(EventMap[type] || type);\n        }\n      }\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this3 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var offProxy = function offProxy(eventName) {\n        var _this3$evtCbProxyMap$, _this3$evtCbProxyMap$2;\n        var handleProxy = (_this3$evtCbProxyMap$ = _this3.evtCbProxyMap.get(type)) === null || _this3$evtCbProxyMap$ === void 0 ? void 0 : _this3$evtCbProxyMap$.get(handle);\n        if (!handleProxy) {\n          return;\n        }\n        (_this3$evtCbProxyMap$2 = _this3.evtCbProxyMap.get(eventName)) === null || _this3$evtCbProxyMap$2 === void 0 || _this3$evtCbProxyMap$2.delete(handle);\n        _this3.map.off(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(function (eventName) {\n          offProxy(eventName || type);\n        });\n      } else {\n        offProxy(EventMap[type] || type);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once() {\n      throw new Error('Method not implemented.');\n    }\n\n    // get dom\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.map.getContainer();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      // @ts-ignore\n      return [this.map.width, this.map.height];\n    }\n\n    // get map status method\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      // @ts-ignore\n      return this.map.transform._minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      // @ts-ignore\n      return this.map.transform._maxZoom;\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'tmap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.map.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$map$getCenter = this.map.getCenter(),\n        lng = _this$map$getCenter.lng,\n        lat = _this$map$getCenter.lat;\n      return {\n        lng: lng,\n        lat: lat\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.map.getPitch();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return this.map.getRotation();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var ne = this.map.getBounds().getNorthEast();\n      var sw = this.map.getBounds().getSouthWest();\n      return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.map.getContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      var _this$map$getContaine;\n      return (_this$map$getContaine = this.map.getContainer()) === null || _this$map$getContaine === void 0 ? void 0 : _this$map$getContaine.getElementsByTagName('canvas')[0];\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      // return this.getMap()\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(styleId) {\n      this.map.setMapStyleId(styleId);\n    }\n\n    // control with raw map\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.map.setRotation(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.map.setZoom(this.getZoom() + 1);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.map.setZoom(this.getZoom() - 1);\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.map.panTo(new TMap.LatLng(lat, lng));\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.map.panBy([x, y]);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      var _bound = _slicedToArray(bound, 2),\n        sw = _bound[0],\n        ne = _bound[1];\n      var swLatLng = new TMap.LatLng(sw[1], sw[0]);\n      var neLatLng = new TMap.LatLng(ne[1], ne[0]);\n      var bounds = new TMap.LatLngBounds(swLatLng, neLatLng);\n      // @ts-ignore\n      this.map.fitBounds(bounds, fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      this.map.setCenter(new TMap.LatLng(lat, lng));\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        lng = _ref6[0],\n        lat = _ref6[1];\n      this.map.setCenter(new TMap.LatLng(lat, lng));\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.map.setPitch(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this4 = this;\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            _this4.map.setDoubleClickZoom(!!option.doubleClickZoom);\n            break;\n          case 'dragEnable':\n            _this4.map.setDraggable(!!option.dragEnable);\n            break;\n          case 'rotateEnable':\n            // @ts-ignore\n            _this4.map.setRotatable(!!option.rotateEnable);\n            break;\n          case 'zoomEnable':\n            _this4.map.setDoubleClickZoom(!!option.zoomEnable);\n            _this4.map.setScrollable(!!option.zoomEnable);\n            break;\n          case 'keyboardEnable':\n          case 'resizeEnable':\n          case 'showIndoorMap':\n            throw Error('Options may bot be supported');\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(_ref7, _ref8) {\n      var _ref9 = _slicedToArray(_ref7, 2),\n        centerLon = _ref9[0],\n        centerLat = _ref9[1];\n      var _ref10 = _slicedToArray(_ref8, 2),\n        outerLon = _ref10[0],\n        outerLat = _ref10[1];\n      var metreDistance = TMap.geometry.computeDistance([new TMap.LatLng(centerLat, centerLon), new TMap.LatLng(outerLat, outerLon)]);\n      var _ref11 = this.lngLatToCoord([centerLon, centerLat]),\n        _ref12 = _slicedToArray(_ref11, 2),\n        x1 = _ref12[0],\n        y1 = _ref12[1];\n      var _ref13 = this.lngLatToCoord([outerLon, outerLat]),\n        _ref14 = _slicedToArray(_ref13, 2),\n        x2 = _ref14[0],\n        y2 = _ref14[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref15) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        x = _ref16[0],\n        y = _ref16[1];\n      // Since tecent map didn't provide the reverse method for transforming from pixel to lnglat\n      // It had to be done by calculate the relative distance in container coordinates\n      var _this$map$getCenter2 = this.map.getCenter(),\n        clng = _this$map$getCenter2.lng,\n        clat = _this$map$getCenter2.lat;\n      var _this$lngLatToPixel = this.lngLatToPixel([clng, clat]),\n        centerPixelX = _this$lngLatToPixel.x,\n        centerPixelY = _this$lngLatToPixel.y;\n      var _this$lngLatToContain = this.lngLatToContainer([clng, clat]),\n        centerContainerX = _this$lngLatToContain.x,\n        centerContainerY = _this$lngLatToContain.y;\n      var _this$map$unprojectFr = this.map.unprojectFromContainer(new TMap.Point(centerContainerX + (x - centerPixelX), centerContainerY + (y - centerPixelY))),\n        lng = _this$map$unprojectFr.lng,\n        lat = _this$map$unprojectFr.lat;\n      return this.containerToLngLat([lng, lat]);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref17) {\n      var _ref18 = _slicedToArray(_ref17, 2),\n        lng = _ref18[0],\n        lat = _ref18[1];\n      // @ts-ignore\n      var _this$map$projectToWo = this.map.projectToWorldPlane(new TMap.LatLng(lat, lng)),\n        x = _this$map$projectToWo.x,\n        y = _this$map$projectToWo.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref19) {\n      var _ref20 = _slicedToArray(_ref19, 2),\n        x = _ref20[0],\n        y = _ref20[1];\n      var _this$map$unprojectFr2 = this.map.unprojectFromContainer(new TMap.Point(x, y)),\n        lng = _this$map$unprojectFr2.lng,\n        lat = _this$map$unprojectFr2.lat;\n      return {\n        lng: lng,\n        lat: lat\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref21) {\n      var _ref22 = _slicedToArray(_ref21, 2),\n        lng = _ref22[0],\n        lat = _ref22[1];\n      // @ts-ignore\n      var _this$map$projectToCo = this.map.projectToContainer(new TMap.LatLng(lat, lng)),\n        x = _this$map$projectToCo.x,\n        y = _this$map$projectToCo.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref23) {\n      var _ref24 = _slicedToArray(_ref23, 2),\n        lng = _ref24[0],\n        lat = _ref24[1];\n      // TODO: Perhaps need to check the three.js coordinates\n      var _this$lngLatToPixel2 = this.lngLatToPixel([lng, lat]),\n        x = _this$lngLatToPixel2.x,\n        y = _this$lngLatToPixel2.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this5 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this5.lngLatToCoords(item) : _this5.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(lnglat, altitude) {\n      // Use built in mercator tools due to Tencent not provided related methods\n      var _MercatorCoordinate$f = MercatorCoordinate.fromLngLat(lnglat, altitude),\n        _MercatorCoordinate$f2 = _MercatorCoordinate$f.x,\n        x = _MercatorCoordinate$f2 === void 0 ? 0 : _MercatorCoordinate$f2,\n        _MercatorCoordinate$f3 = _MercatorCoordinate$f.y,\n        y = _MercatorCoordinate$f3 === void 0 ? 0 : _MercatorCoordinate$f3,\n        _MercatorCoordinate$f4 = _MercatorCoordinate$f.z,\n        z = _MercatorCoordinate$f4 === void 0 ? 0 : _MercatorCoordinate$f4;\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      // @ts-ignore\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMapCanvasContainer();\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n\n    // Method on earth mode\n  }, {\n    key: \"rotateY\",\n    value: function rotateY() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getContainer();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'tmap-contianer--hide-logo');\n    }\n  }]);\n  return TMapService;\n}(BaseMapService);\nexport { TMapService as default };","map":{"version":3,"names":["_slicedToArray","_typeof","_objectSpread","_objectWithoutProperties","_asyncToGenerator","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_excluded","_regeneratorRuntime","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Boolean","prototype","valueOf","call","e","MapServiceEvent","MercatorCoordinate","DOM","mat4","vec3","BaseMapService","Viewport","loadStyles","css","doc","isMiniAli","my","showToast","isFRM","isWeChatMiniProgram","wx","request","miniProgram","document","head","getElementsByTagName","createElement","body","parentNode","insertBefore","documentElement","appendChild","style","type","styleSheet","cssText","createTextNode","TMapLoader","TMAP_API_KEY","BMAP_VERSION","EventMap","mapmove","camerachange","zoomchange","dragging","TMapService","_BaseMapService","_super","_this","_len","length","args","Array","_key","concat","Map","emit","map","_map$getCenter","getCenter","lng","lat","option","center","viewportHeight","getContainer","clientHeight","viewportWidth","clientWidth","bearing","getHeading","pitch","getPitch","zoom","getZoom","viewport","syncWithMapCamera","updateCoordinateSystemService","cameraChangedCallback","key","value","_init","mark","_callee","_this$map$controlMana","_this$config","id","mapInstance","_this$config$center","_this$config$token","token","_this$config$version","version","_this$config$librarie","libraries","_this$config$minZoom","minZoom","_this$config$maxZoom","maxZoom","_this$config$rotation","rotation","_this$config$pitch","_this$config$mapSize","mapSize","_this$config$logoVisi","logoVisible","rest","mapContainer","controlParentContainer","wrap","_callee$","_context","prev","next","config","window","TMap","load","$mapContainer","hideLogo","Error","showControl","LatLng","canvasContainer","position","controlManager","controlContainer","zIndex","simpleMapCoord","setSize","on","handleCameraChanged","stop","init","destroy","onCameraChanged","callback","addMarkerContainer","container","markerContainer","create","setAttribute","getMarkerContainer","handle","_this2","indexOf","eventEmitter","onProxy","eventName","cbProxyMap","evtCbProxyMap","get","set","handleProxy","_len2","_key2","lngLat","lnglat","latlng","latLng","isArray","forEach","off","_this3","offProxy","_this3$evtCbProxyMap$","_this3$evtCbProxyMap$2","delete","once","getSize","width","height","getMinZoom","transform","_minZoom","getMaxZoom","_maxZoom","getType","_this$map$getCenter","getRotation","getBounds","ne","getNorthEast","sw","getSouthWest","getMapContainer","getMapCanvasContainer","_this$map$getContaine","getMapStyleConfig","setBgColor","color","bgColor","setMapStyle","styleId","setMapStyleId","setRotation","zoomIn","setZoom","zoomOut","panTo","_ref","_ref2","panBy","x","y","fitBounds","bound","fitBoundsOptions","_bound","swLatLng","neLatLng","bounds","LatLngBounds","setZoomAndCenter","_ref3","_ref4","setCenter","_ref5","_ref6","setPitch","setMapStatus","_this4","Object","keys","status","setDoubleClickZoom","doubleClickZoom","setDraggable","dragEnable","setRotatable","rotateEnable","zoomEnable","setScrollable","meterToCoord","_ref7","_ref8","_ref9","centerLon","centerLat","_ref10","outerLon","outerLat","metreDistance","geometry","computeDistance","_ref11","lngLatToCoord","_ref12","x1","y1","_ref13","_ref14","x2","y2","coordDistance","Math","sqrt","pow","pixelToLngLat","_ref15","_ref16","_this$map$getCenter2","clng","clat","_this$lngLatToPixel","lngLatToPixel","centerPixelX","centerPixelY","_this$lngLatToContain","lngLatToContainer","centerContainerX","centerContainerY","_this$map$unprojectFr","unprojectFromContainer","Point","containerToLngLat","_ref17","_ref18","_this$map$projectToWo","projectToWorldPlane","_ref19","_ref20","_this$map$unprojectFr2","_ref21","_ref22","_this$map$projectToCo","projectToContainer","_ref23","_ref24","_this$lngLatToPixel2","lngLatToCoords","list","_this5","item","lngLatToMercator","altitude","_MercatorCoordinate$f","fromLngLat","_MercatorCoordinate$f2","_MercatorCoordinate$f3","_MercatorCoordinate$f4","z","getModelMatrix","rotate","scale","undefined","flat","projectFlat","modelMatrix","translate","fromValues","rotateX","rotateY","rotateZ","getCustomCoordCenter","exportMap","renderCanvas","layersPng","toDataURL","addClass","default"],"sources":["D:/桌面文件/C4大赛/作品源代码/vue/node_modules/@antv/l7-maps/es/tmap/map.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"id\", \"mapInstance\", \"center\", \"token\", \"version\", \"libraries\", \"minZoom\", \"maxZoom\", \"rotation\", \"pitch\", \"mapSize\", \"logoVisible\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport { DOM } from '@antv/l7-utils';\nimport { mat4, vec3 } from 'gl-matrix';\nimport BaseMapService from \"../utils/BaseMapService\";\nimport Viewport from \"../utils/Viewport\";\nfunction loadStyles(css, doc) {\n  var isMiniAli = typeof my !== 'undefined' && !!my && typeof my.showToast === 'function' && my.isFRM !== true;\n  var isWeChatMiniProgram = typeof wx !== 'undefined' && wx !== null && (typeof wx.request !== 'undefined' || typeof wx.miniProgram !== 'undefined');\n  if (isMiniAli || isWeChatMiniProgram) {\n    return;\n  }\n  if (!doc) doc = document;\n  if (!doc) {\n    return;\n  }\n  var head = doc.head || doc.getElementsByTagName('head')[0];\n  if (!head) {\n    head = doc.createElement('head');\n    var body = doc.body || doc.getElementsByTagName('body')[0];\n    if (body) {\n      body.parentNode.insertBefore(head, body);\n    } else {\n      doc.documentElement.appendChild(head);\n    }\n  }\n  var style = doc.createElement('style');\n  style.type = 'text/css';\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(doc.createTextNode(css));\n  }\n  head.appendChild(style);\n  return style;\n}\nloadStyles(\"img[src*='//mapapi.qq.com/web/jsapi/logo/logo_def.png'],.logo-text {\\n  display: none !important;\\n}\\n\");\nimport TMapLoader from \"./maploader\";\nvar TMAP_API_KEY = 'OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77';\nvar BMAP_VERSION = '1.exp';\nvar EventMap = {\n  mapmove: 'center_changed',\n  camerachange: ['drag', 'pan', 'rotate', 'pitch', 'zoom'],\n  zoomchange: 'zoom',\n  dragging: 'drag'\n};\nvar TMapService = /*#__PURE__*/function (_BaseMapService) {\n  _inherits(TMapService, _BaseMapService);\n  var _super = _createSuper(TMapService);\n  function TMapService() {\n    var _this;\n    _classCallCheck(this, TMapService);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    // @ts-ignore\n    _defineProperty(_assertThisInitialized(_this), \"viewport\", null);\n    _defineProperty(_assertThisInitialized(_this), \"evtCbProxyMap\", new Map());\n    _defineProperty(_assertThisInitialized(_this), \"handleCameraChanged\", function () {\n      // Trigger map change event\n      _this.emit('mapchange');\n      // resync\n      var map = _this.map;\n      // @ts-ignore\n      var _map$getCenter = map.getCenter(),\n        lng = _map$getCenter.lng,\n        lat = _map$getCenter.lat;\n      var option = {\n        center: [lng, lat],\n        // @ts-ignore\n        viewportHeight: map.getContainer().clientHeight,\n        // @ts-ignore\n        viewportWidth: map.getContainer().clientWidth,\n        // @ts-ignore\n        bearing: map.getHeading(),\n        // @ts-ignore\n        pitch: map.getPitch(),\n        // @ts-ignore\n        zoom: map.getZoom() - 1\n      };\n      _this.viewport.syncWithMapCamera(option);\n      _this.updateCoordinateSystemService();\n      _this.cameraChangedCallback(_this.viewport);\n    });\n    return _this;\n  }\n  _createClass(TMapService, [{\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this$map$controlMana;\n        var _this$config, id, mapInstance, _this$config$center, center, _this$config$token, token, _this$config$version, version, _this$config$librarie, libraries, _this$config$minZoom, minZoom, _this$config$maxZoom, maxZoom, _this$config$rotation, rotation, _this$config$pitch, pitch, _this$config$mapSize, mapSize, _this$config$logoVisi, logoVisible, rest, mapContainer, map, controlParentContainer;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              this.viewport = new Viewport();\n\n              // TODO: Handle initial config\n              _this$config = this.config, id = _this$config.id, mapInstance = _this$config.mapInstance, _this$config$center = _this$config.center, center = _this$config$center === void 0 ? [121.30654632240122, 31.25744185633306] : _this$config$center, _this$config$token = _this$config.token, token = _this$config$token === void 0 ? TMAP_API_KEY : _this$config$token, _this$config$version = _this$config.version, version = _this$config$version === void 0 ? BMAP_VERSION : _this$config$version, _this$config$librarie = _this$config.libraries, libraries = _this$config$librarie === void 0 ? [] : _this$config$librarie, _this$config$minZoom = _this$config.minZoom, minZoom = _this$config$minZoom === void 0 ? 3 : _this$config$minZoom, _this$config$maxZoom = _this$config.maxZoom, maxZoom = _this$config$maxZoom === void 0 ? 18 : _this$config$maxZoom, _this$config$rotation = _this$config.rotation, rotation = _this$config$rotation === void 0 ? 0 : _this$config$rotation, _this$config$pitch = _this$config.pitch, pitch = _this$config$pitch === void 0 ? 0 : _this$config$pitch, _this$config$mapSize = _this$config.mapSize, mapSize = _this$config$mapSize === void 0 ? 10000 : _this$config$mapSize, _this$config$logoVisi = _this$config.logoVisible, logoVisible = _this$config$logoVisi === void 0 ? true : _this$config$logoVisi, rest = _objectWithoutProperties(_this$config, _excluded);\n              if (window.TMap || mapInstance) {\n                _context.next = 5;\n                break;\n              }\n              _context.next = 5;\n              return TMapLoader.load({\n                key: token,\n                version: version,\n                libraries: libraries\n              });\n            case 5:\n              if (!mapInstance) {\n                _context.next = 11;\n                break;\n              }\n              // If there's already a map instance, maybe not setting any other configurations\n              this.map = mapInstance;\n              this.$mapContainer = this.map.getContainer();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n              _context.next = 18;\n              break;\n            case 11:\n              if (id) {\n                _context.next = 13;\n                break;\n              }\n              throw Error('No container id specified');\n            case 13:\n              mapContainer = DOM.getContainer(id);\n              map = new TMap.Map(mapContainer, _objectSpread({\n                maxZoom: maxZoom,\n                minZoom: minZoom,\n                rotation: rotation,\n                pitch: pitch,\n                showControl: false,\n                // Tencent use (Lat, Lng) while center is (Lng, Lat)\n                center: new TMap.LatLng(center[1], center[0])\n              }, rest)); // @ts-ignore\n              this.map = map;\n              // @ts-ignore\n              this.$mapContainer = map.getContainer();\n              if (logoVisible === false) {\n                this.hideLogo();\n              }\n            case 18:\n              // Set tencent map canvas element position as absolute\n              // @ts-ignore\n              this.map.canvasContainer.style.position = 'absolute';\n\n              // Set tencent map control layer dom index\n              // @ts-ignore\n              controlParentContainer = (_this$map$controlMana = this.map.controlManager.controlContainer) === null || _this$map$controlMana === void 0 ? void 0 : _this$map$controlMana.parentNode;\n              if (controlParentContainer) {\n                controlParentContainer.style.zIndex = 2;\n              }\n              this.simpleMapCoord.setSize(mapSize);\n\n              // May be find an integrated event replacing following events\n              this.map.on('drag', this.handleCameraChanged);\n              this.map.on('pan', this.handleCameraChanged);\n              this.map.on('rotate', this.handleCameraChanged);\n              this.map.on('pitch', this.handleCameraChanged);\n              this.map.on('zoom', this.handleCameraChanged);\n\n              // Trigger camera change after init\n              this.handleCameraChanged();\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function init() {\n        return _init.apply(this, arguments);\n      }\n      return init;\n    }()\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.map.destroy();\n    }\n  }, {\n    key: \"onCameraChanged\",\n    value: function onCameraChanged(callback) {\n      this.cameraChangedCallback = callback;\n    }\n  }, {\n    key: \"addMarkerContainer\",\n    value: function addMarkerContainer() {\n      var container = this.map.getContainer();\n      this.markerContainer = DOM.create('div', 'l7-marker-container', container);\n      this.markerContainer.setAttribute('tabindex', '-1');\n      this.markerContainer.style.zIndex = '2';\n    }\n  }, {\n    key: \"getMarkerContainer\",\n    value: function getMarkerContainer() {\n      return this.markerContainer;\n    }\n\n    // MapEvent\n  }, {\n    key: \"on\",\n    value: function on(type, handle) {\n      var _this2 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.on(type, handle);\n      } else {\n        var onProxy = function onProxy(eventName) {\n          var cbProxyMap = _this2.evtCbProxyMap.get(eventName);\n          if (!cbProxyMap) {\n            _this2.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n          }\n          if (cbProxyMap.get(handle)) {\n            return;\n          }\n          var handleProxy = function handleProxy() {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            if (args[0] && _typeof(args[0]) === 'object' && !args[0].lngLat && !args[0].lnglat) {\n              args[0].lngLat = args[0].latlng || args[0].latLng;\n            }\n            handle.apply(void 0, args);\n          };\n          cbProxyMap.set(handle, handleProxy);\n          _this2.map.on(eventName, handleProxy);\n        };\n        if (Array.isArray(EventMap[type])) {\n          EventMap[type].forEach(function (eventName) {\n            onProxy(eventName || type);\n          });\n        } else {\n          onProxy(EventMap[type] || type);\n        }\n      }\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, handle) {\n      var _this3 = this;\n      if (MapServiceEvent.indexOf(type) !== -1) {\n        this.eventEmitter.off(type, handle);\n        return;\n      }\n      var offProxy = function offProxy(eventName) {\n        var _this3$evtCbProxyMap$, _this3$evtCbProxyMap$2;\n        var handleProxy = (_this3$evtCbProxyMap$ = _this3.evtCbProxyMap.get(type)) === null || _this3$evtCbProxyMap$ === void 0 ? void 0 : _this3$evtCbProxyMap$.get(handle);\n        if (!handleProxy) {\n          return;\n        }\n        (_this3$evtCbProxyMap$2 = _this3.evtCbProxyMap.get(eventName)) === null || _this3$evtCbProxyMap$2 === void 0 || _this3$evtCbProxyMap$2.delete(handle);\n        _this3.map.off(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(function (eventName) {\n          offProxy(eventName || type);\n        });\n      } else {\n        offProxy(EventMap[type] || type);\n      }\n    }\n  }, {\n    key: \"once\",\n    value: function once() {\n      throw new Error('Method not implemented.');\n    }\n\n    // get dom\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.map.getContainer();\n    }\n  }, {\n    key: \"getSize\",\n    value: function getSize() {\n      // @ts-ignore\n      return [this.map.width, this.map.height];\n    }\n\n    // get map status method\n  }, {\n    key: \"getMinZoom\",\n    value: function getMinZoom() {\n      // @ts-ignore\n      return this.map.transform._minZoom;\n    }\n  }, {\n    key: \"getMaxZoom\",\n    value: function getMaxZoom() {\n      // @ts-ignore\n      return this.map.transform._maxZoom;\n    }\n\n    // get map params\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return 'tmap';\n    }\n  }, {\n    key: \"getZoom\",\n    value: function getZoom() {\n      return this.map.getZoom();\n    }\n  }, {\n    key: \"getCenter\",\n    value: function getCenter() {\n      var _this$map$getCenter = this.map.getCenter(),\n        lng = _this$map$getCenter.lng,\n        lat = _this$map$getCenter.lat;\n      return {\n        lng: lng,\n        lat: lat\n      };\n    }\n  }, {\n    key: \"getPitch\",\n    value: function getPitch() {\n      return this.map.getPitch();\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      return this.map.getRotation();\n    }\n  }, {\n    key: \"getBounds\",\n    value: function getBounds() {\n      var ne = this.map.getBounds().getNorthEast();\n      var sw = this.map.getBounds().getSouthWest();\n      return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n    }\n  }, {\n    key: \"getMapContainer\",\n    value: function getMapContainer() {\n      return this.map.getContainer();\n    }\n  }, {\n    key: \"getMapCanvasContainer\",\n    value: function getMapCanvasContainer() {\n      var _this$map$getContaine;\n      return (_this$map$getContaine = this.map.getContainer()) === null || _this$map$getContaine === void 0 ? void 0 : _this$map$getContaine.getElementsByTagName('canvas')[0];\n    }\n  }, {\n    key: \"getMapStyleConfig\",\n    value: function getMapStyleConfig() {\n      // return this.getMap()\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"setBgColor\",\n    value: function setBgColor(color) {\n      this.bgColor = color;\n    }\n  }, {\n    key: \"setMapStyle\",\n    value: function setMapStyle(styleId) {\n      this.map.setMapStyleId(styleId);\n    }\n\n    // control with raw map\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      this.map.setRotation(rotation);\n    }\n  }, {\n    key: \"zoomIn\",\n    value: function zoomIn() {\n      this.map.setZoom(this.getZoom() + 1);\n    }\n  }, {\n    key: \"zoomOut\",\n    value: function zoomOut() {\n      this.map.setZoom(this.getZoom() - 1);\n    }\n  }, {\n    key: \"panTo\",\n    value: function panTo(_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lng = _ref2[0],\n        lat = _ref2[1];\n      this.map.panTo(new TMap.LatLng(lat, lng));\n    }\n  }, {\n    key: \"panBy\",\n    value: function panBy(x, y) {\n      this.map.panBy([x, y]);\n    }\n  }, {\n    key: \"fitBounds\",\n    value: function fitBounds(bound, fitBoundsOptions) {\n      var _bound = _slicedToArray(bound, 2),\n        sw = _bound[0],\n        ne = _bound[1];\n      var swLatLng = new TMap.LatLng(sw[1], sw[0]);\n      var neLatLng = new TMap.LatLng(ne[1], ne[0]);\n      var bounds = new TMap.LatLngBounds(swLatLng, neLatLng);\n      // @ts-ignore\n      this.map.fitBounds(bounds, fitBoundsOptions);\n    }\n  }, {\n    key: \"setZoomAndCenter\",\n    value: function setZoomAndCenter(zoom, _ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        lng = _ref4[0],\n        lat = _ref4[1];\n      this.map.setCenter(new TMap.LatLng(lat, lng));\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setCenter\",\n    value: function setCenter(_ref5) {\n      var _ref6 = _slicedToArray(_ref5, 2),\n        lng = _ref6[0],\n        lat = _ref6[1];\n      this.map.setCenter(new TMap.LatLng(lat, lng));\n    }\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(pitch) {\n      this.map.setPitch(pitch);\n    }\n  }, {\n    key: \"setZoom\",\n    value: function setZoom(zoom) {\n      this.map.setZoom(zoom);\n    }\n  }, {\n    key: \"setMapStatus\",\n    value: function setMapStatus(option) {\n      var _this4 = this;\n      Object.keys(option).map(function (status) {\n        switch (status) {\n          case 'doubleClickZoom':\n            _this4.map.setDoubleClickZoom(!!option.doubleClickZoom);\n            break;\n          case 'dragEnable':\n            _this4.map.setDraggable(!!option.dragEnable);\n            break;\n          case 'rotateEnable':\n            // @ts-ignore\n            _this4.map.setRotatable(!!option.rotateEnable);\n            break;\n          case 'zoomEnable':\n            _this4.map.setDoubleClickZoom(!!option.zoomEnable);\n            _this4.map.setScrollable(!!option.zoomEnable);\n            break;\n          case 'keyboardEnable':\n          case 'resizeEnable':\n          case 'showIndoorMap':\n            throw Error('Options may bot be supported');\n          default:\n        }\n      });\n    }\n\n    // coordinates methods\n  }, {\n    key: \"meterToCoord\",\n    value: function meterToCoord(_ref7, _ref8) {\n      var _ref9 = _slicedToArray(_ref7, 2),\n        centerLon = _ref9[0],\n        centerLat = _ref9[1];\n      var _ref10 = _slicedToArray(_ref8, 2),\n        outerLon = _ref10[0],\n        outerLat = _ref10[1];\n      var metreDistance = TMap.geometry.computeDistance([new TMap.LatLng(centerLat, centerLon), new TMap.LatLng(outerLat, outerLon)]);\n      var _ref11 = this.lngLatToCoord([centerLon, centerLat]),\n        _ref12 = _slicedToArray(_ref11, 2),\n        x1 = _ref12[0],\n        y1 = _ref12[1];\n      var _ref13 = this.lngLatToCoord([outerLon, outerLat]),\n        _ref14 = _slicedToArray(_ref13, 2),\n        x2 = _ref14[0],\n        y2 = _ref14[1];\n      var coordDistance = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n      return coordDistance / metreDistance;\n    }\n  }, {\n    key: \"pixelToLngLat\",\n    value: function pixelToLngLat(_ref15) {\n      var _ref16 = _slicedToArray(_ref15, 2),\n        x = _ref16[0],\n        y = _ref16[1];\n      // Since tecent map didn't provide the reverse method for transforming from pixel to lnglat\n      // It had to be done by calculate the relative distance in container coordinates\n      var _this$map$getCenter2 = this.map.getCenter(),\n        clng = _this$map$getCenter2.lng,\n        clat = _this$map$getCenter2.lat;\n      var _this$lngLatToPixel = this.lngLatToPixel([clng, clat]),\n        centerPixelX = _this$lngLatToPixel.x,\n        centerPixelY = _this$lngLatToPixel.y;\n      var _this$lngLatToContain = this.lngLatToContainer([clng, clat]),\n        centerContainerX = _this$lngLatToContain.x,\n        centerContainerY = _this$lngLatToContain.y;\n      var _this$map$unprojectFr = this.map.unprojectFromContainer(new TMap.Point(centerContainerX + (x - centerPixelX), centerContainerY + (y - centerPixelY))),\n        lng = _this$map$unprojectFr.lng,\n        lat = _this$map$unprojectFr.lat;\n      return this.containerToLngLat([lng, lat]);\n    }\n  }, {\n    key: \"lngLatToPixel\",\n    value: function lngLatToPixel(_ref17) {\n      var _ref18 = _slicedToArray(_ref17, 2),\n        lng = _ref18[0],\n        lat = _ref18[1];\n      // @ts-ignore\n      var _this$map$projectToWo = this.map.projectToWorldPlane(new TMap.LatLng(lat, lng)),\n        x = _this$map$projectToWo.x,\n        y = _this$map$projectToWo.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"containerToLngLat\",\n    value: function containerToLngLat(_ref19) {\n      var _ref20 = _slicedToArray(_ref19, 2),\n        x = _ref20[0],\n        y = _ref20[1];\n      var _this$map$unprojectFr2 = this.map.unprojectFromContainer(new TMap.Point(x, y)),\n        lng = _this$map$unprojectFr2.lng,\n        lat = _this$map$unprojectFr2.lat;\n      return {\n        lng: lng,\n        lat: lat\n      };\n    }\n  }, {\n    key: \"lngLatToContainer\",\n    value: function lngLatToContainer(_ref21) {\n      var _ref22 = _slicedToArray(_ref21, 2),\n        lng = _ref22[0],\n        lat = _ref22[1];\n      // @ts-ignore\n      var _this$map$projectToCo = this.map.projectToContainer(new TMap.LatLng(lat, lng)),\n        x = _this$map$projectToCo.x,\n        y = _this$map$projectToCo.y;\n      return {\n        x: x,\n        y: y\n      };\n    }\n  }, {\n    key: \"lngLatToCoord\",\n    value: function lngLatToCoord(_ref23) {\n      var _ref24 = _slicedToArray(_ref23, 2),\n        lng = _ref24[0],\n        lat = _ref24[1];\n      // TODO: Perhaps need to check the three.js coordinates\n      var _this$lngLatToPixel2 = this.lngLatToPixel([lng, lat]),\n        x = _this$lngLatToPixel2.x,\n        y = _this$lngLatToPixel2.y;\n      return [x, -y];\n    }\n  }, {\n    key: \"lngLatToCoords\",\n    value: function lngLatToCoords(list) {\n      var _this5 = this;\n      return list.map(function (item) {\n        return Array.isArray(item[0]) ? _this5.lngLatToCoords(item) : _this5.lngLatToCoord(item);\n      });\n    }\n  }, {\n    key: \"lngLatToMercator\",\n    value: function lngLatToMercator(lnglat, altitude) {\n      // Use built in mercator tools due to Tencent not provided related methods\n      var _MercatorCoordinate$f = MercatorCoordinate.fromLngLat(lnglat, altitude),\n        _MercatorCoordinate$f2 = _MercatorCoordinate$f.x,\n        x = _MercatorCoordinate$f2 === void 0 ? 0 : _MercatorCoordinate$f2,\n        _MercatorCoordinate$f3 = _MercatorCoordinate$f.y,\n        y = _MercatorCoordinate$f3 === void 0 ? 0 : _MercatorCoordinate$f3,\n        _MercatorCoordinate$f4 = _MercatorCoordinate$f.z,\n        z = _MercatorCoordinate$f4 === void 0 ? 0 : _MercatorCoordinate$f4;\n      return {\n        x: x,\n        y: y,\n        z: z\n      };\n    }\n  }, {\n    key: \"getModelMatrix\",\n    value: function getModelMatrix(lnglat, altitude, rotate) {\n      var scale = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [1, 1, 1];\n      var flat = this.viewport.projectFlat(lnglat);\n      // @ts-ignore\n      var modelMatrix = mat4.create();\n      mat4.translate(modelMatrix, modelMatrix, vec3.fromValues(flat[0], flat[1], altitude));\n      mat4.scale(modelMatrix, modelMatrix, vec3.fromValues(scale[0], scale[1], scale[2]));\n      mat4.rotateX(modelMatrix, modelMatrix, rotate[0]);\n      mat4.rotateY(modelMatrix, modelMatrix, rotate[1]);\n      mat4.rotateZ(modelMatrix, modelMatrix, rotate[2]);\n      return modelMatrix;\n    }\n  }, {\n    key: \"getCustomCoordCenter\",\n    value: function getCustomCoordCenter() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"exportMap\",\n    value: function exportMap(type) {\n      var renderCanvas = this.getMapCanvasContainer();\n      var layersPng = type === 'jpg' ? renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/jpeg') : renderCanvas === null || renderCanvas === void 0 ? void 0 : renderCanvas.toDataURL('image/png');\n      return layersPng;\n    }\n\n    // Method on earth mode\n  }, {\n    key: \"rotateY\",\n    value: function rotateY() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"hideLogo\",\n    value: function hideLogo() {\n      var container = this.map.getContainer();\n      if (!container) {\n        return;\n      }\n      DOM.addClass(container, 'tmap-contianer--hide-logo');\n    }\n  }]);\n  return TMapService;\n}(BaseMapService);\nexport { TMapService as default };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}