{"ast":null,"code":"/**\n * @fileoverview rect\n * @author dengfuping_develop@163.com\n */\nimport { __assign, __extends } from \"tslib\";\nimport { each, isArray } from '@antv/util';\nimport ShapeBase from './base';\nimport { SVG_ATTR_MAP } from '../constant';\nimport { parseRadius } from '../util/format';\nvar Rect = /** @class */function (_super) {\n  __extends(Rect, _super);\n  function Rect() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.type = 'rect';\n    _this.canFill = true;\n    _this.canStroke = true;\n    return _this;\n  }\n  Rect.prototype.getDefaultAttrs = function () {\n    var attrs = _super.prototype.getDefaultAttrs.call(this);\n    return __assign(__assign({}, attrs), {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      radius: 0\n    });\n  };\n  Rect.prototype.createPath = function (context, targetAttrs) {\n    var _this = this;\n    var attrs = this.attr();\n    var el = this.get('el');\n    // 加上状态量，用来标记 path 是否已组装\n    var completed = false;\n    // 和组装 path 相关的绘图属性\n    var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];\n    each(targetAttrs || attrs, function (value, attr) {\n      if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {\n        el.setAttribute('d', _this._assembleRect(attrs));\n        completed = true;\n      } else if (pathRelatedAttrs.indexOf(attr) === -1 && SVG_ATTR_MAP[attr]) {\n        el.setAttribute(SVG_ATTR_MAP[attr], value);\n      }\n    });\n  };\n  Rect.prototype._assembleRect = function (attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    var radius = attrs.radius;\n    if (!radius) {\n      return \"M \" + x + \",\" + y + \" l \" + w + \",0 l 0,\" + h + \" l\" + -w + \" 0 z\";\n    }\n    var r = parseRadius(radius);\n    if (isArray(radius)) {\n      if (radius.length === 1) {\n        r.r1 = r.r2 = r.r3 = r.r4 = radius[0];\n      } else if (radius.length === 2) {\n        r.r1 = r.r3 = radius[0];\n        r.r2 = r.r4 = radius[1];\n      } else if (radius.length === 3) {\n        r.r1 = radius[0];\n        r.r2 = r.r4 = radius[1];\n        r.r3 = radius[2];\n      } else {\n        r.r1 = radius[0];\n        r.r2 = radius[1];\n        r.r3 = radius[2];\n        r.r4 = radius[3];\n      }\n    } else {\n      r.r1 = r.r2 = r.r3 = r.r4 = radius;\n    }\n    var d = [[\"M \" + (x + r.r1) + \",\" + y], [\"l \" + (w - r.r1 - r.r2) + \",0\"], [\"a \" + r.r2 + \",\" + r.r2 + \",0,0,1,\" + r.r2 + \",\" + r.r2], [\"l 0,\" + (h - r.r2 - r.r3)], [\"a \" + r.r3 + \",\" + r.r3 + \",0,0,1,\" + -r.r3 + \",\" + r.r3], [\"l \" + (r.r3 + r.r4 - w) + \",0\"], [\"a \" + r.r4 + \",\" + r.r4 + \",0,0,1,\" + -r.r4 + \",\" + -r.r4], [\"l 0,\" + (r.r4 + r.r1 - h)], [\"a \" + r.r1 + \",\" + r.r1 + \",0,0,1,\" + r.r1 + \",\" + -r.r1], ['z']];\n    return d.join(' ');\n  };\n  return Rect;\n}(ShapeBase);\nexport default Rect;","map":{"version":3,"names":["each","isArray","ShapeBase","SVG_ATTR_MAP","parseRadius","Rect","_super","__extends","_this","apply","arguments","type","canFill","canStroke","prototype","getDefaultAttrs","attrs","call","__assign","x","y","width","height","radius","createPath","context","targetAttrs","attr","el","get","completed","pathRelatedAttrs","value","indexOf","setAttribute","_assembleRect","w","h","r","length","r1","r2","r3","r4","d","join"],"sources":["../../src/shape/rect.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}